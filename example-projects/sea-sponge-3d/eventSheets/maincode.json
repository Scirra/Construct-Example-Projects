{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "The direction the worm is currently moving towards."
		},
		{
			"eventType": "variable",
			"name": "CurrentDirX",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 241318488792126
		},
		{
			"eventType": "variable",
			"name": "CurrentDirY",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 580999353460459
		},
		{
			"eventType": "variable",
			"name": "CurrentDirZ",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 776348937842251
		},
		{
			"eventType": "comment",
			"text": "The last direction the worm moved towards."
		},
		{
			"eventType": "variable",
			"name": "LastDirX",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 402040229769265
		},
		{
			"eventType": "variable",
			"name": "LastDirY",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 309969504970665
		},
		{
			"eventType": "variable",
			"name": "LastDirZ",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 173082161033326
		},
		{
			"eventType": "comment",
			"text": "How big each cell is in all axis (X, Y and Z)."
		},
		{
			"eventType": "variable",
			"name": "CellSize",
			"type": "number",
			"initialValue": "32",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 660770570704548
		},
		{
			"eventType": "comment",
			"text": "How long the worm is."
		},
		{
			"eventType": "variable",
			"name": "SpongeLength",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 158666927902664
		},
		{
			"eventType": "comment",
			"text": "A random position where the next gem will be spawned."
		},
		{
			"eventType": "variable",
			"name": "RandomPosition",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 718184572850281
		},
		{
			"eventType": "comment",
			"text": "Whether or not the player has done its first move."
		},
		{
			"eventType": "variable",
			"name": "FirstMove",
			"type": "boolean",
			"initialValue": "true",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 509966760859782
		},
		{
			"eventType": "comment",
			"text": "The amount of time between each movement for the snake."
		},
		{
			"eventType": "variable",
			"name": "StepTime",
			"type": "number",
			"initialValue": "0.25",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 554883632714201
		},
		{
			"eventType": "comment",
			"text": "List of cell positions in the map.\nX axis: 96, 128, 160, 192, 224\nY axis: 26, 58, 90, 122, 154\nZ axis: -32, -64, -96, -128, -160"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reset the \"FirstMove\" variable and spawn a new bacteria."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 643121881904242
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 581509632582791,
							"parameters": {
								"variable": "FirstMove",
								"value": "true"
							}
						},
						{
							"callFunction": "SpawnNewBacteria",
							"sid": 720626005742562
						},
						{
							"id": "set-layout-effect-parameter",
							"objectClass": "System",
							"sid": 348860939033095,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "100"
							}
						}
					],
					"sid": 244447905997053
				}
			],
			"sid": 856422257818928
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Move the snake left."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 220500362501381,
							"parameters": {
								"key": 37
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 252915577111618,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-left"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 883159954378611,
							"parameters": [
								"-1",
								"0",
								"0"
							]
						}
					],
					"sid": 836144546787717,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the snake right."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 362054795467186,
							"parameters": {
								"key": 39
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 523943130910485,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-right"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 834204058939676,
							"parameters": [
								"1",
								"0",
								"0"
							]
						}
					],
					"sid": 844056626732411,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the snake up."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 444636767406104,
							"parameters": {
								"key": 38
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 145492349345814,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-up"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 114729828064598,
							"parameters": [
								"0",
								"-1",
								"0"
							]
						}
					],
					"sid": 682267202678606,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the snake down."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 448237136609511,
							"parameters": {
								"key": 40
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 505998034131385,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-down"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 769551717311922,
							"parameters": [
								"0",
								"1",
								"0"
							]
						}
					],
					"sid": 954476649637194,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the snake forward."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 660764568962206,
							"parameters": {
								"key": 87
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 415090584290801,
							"parameters": {
								"gamepad": "0",
								"button": "right-shoulder-trigger"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 329231529349653,
							"parameters": [
								"0",
								"0",
								"-1"
							]
						}
					],
					"sid": 775004230024537,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the snake back."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 670356002596439,
							"parameters": {
								"key": 83
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 248824829974930,
							"parameters": {
								"gamepad": "0",
								"button": "left-shoulder-trigger"
							}
						}
					],
					"actions": [
						{
							"callFunction": "ChangeSpongeDirection",
							"sid": 615866479040519,
							"parameters": [
								"0",
								"0",
								"1"
							]
						}
					],
					"sid": 344196241234392,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Change the snake movement direction, based on a three axis vector."
				},
				{
					"functionName": "ChangeSpongeDirection",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "NewDirX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 398712261957389
						},
						{
							"name": "NewDirY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 408970926526026
						},
						{
							"name": "NewDirZ",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 111875732597820
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 704380198580371,
					"children": [
						{
							"eventType": "comment",
							"text": "If it's the first time this function is being called, start the regular \"Move\" timer, so the snake keep moving in fixed intervals."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 497846231619559,
									"parameters": {
										"variable": "FirstMove"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 403264171960461,
									"parameters": {
										"variable": "FirstMove",
										"value": "false"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 342619626797560,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "StepTime",
										"type": "regular",
										"tag": "\"Move\""
									}
								},
								{
									"type": "comment",
									"text": "Also remove the tutorial text from the screen."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Tutorial",
									"sid": 751290778406324,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "offsetY",
										"end-value": "Self.Y - 180",
										"time": "StepTime",
										"ease": "easeinsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 239703313797311
						},
						{
							"eventType": "comment",
							"text": "Change the X axis direction, but only if this same axis hasn't been moved recently and the new direction isn't equal to zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 886229321332406,
									"parameters": {
										"variable": "LastDirX",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 765240310022199,
									"parameters": {
										"variable": "NewDirX",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ResetAllCurrentDir",
									"sid": 789869936808030
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 818734470575323,
									"parameters": {
										"variable": "CurrentDirX",
										"value": "NewDirX"
									}
								}
							],
							"sid": 981148105289133
						},
						{
							"eventType": "comment",
							"text": "Change the Y axis direction, but only if this same axis hasn't been moved recently and the new direction isn't equal to zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 184578746101883
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 608417582468626,
									"parameters": {
										"variable": "LastDirY",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 988089723019260,
									"parameters": {
										"variable": "NewDirY",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ResetAllCurrentDir",
									"sid": 758135083548021
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 712562635311553,
									"parameters": {
										"variable": "CurrentDirY",
										"value": "NewDirY"
									}
								}
							],
							"sid": 512150659787508
						},
						{
							"eventType": "comment",
							"text": "Change the Z axis direction, but only if this same axis hasn't been moved recently and the new direction isn't equal to zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 224700677589741
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 627159533518423,
									"parameters": {
										"variable": "LastDirZ",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 262245957162873,
									"parameters": {
										"variable": "NewDirZ",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ResetAllCurrentDir",
									"sid": 279832153889600
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 827977704323726,
									"parameters": {
										"variable": "CurrentDirZ",
										"value": "NewDirZ"
									}
								}
							],
							"sid": 776241497176784
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Reset the current direction of every axis (X, Y and Z)."
				},
				{
					"functionName": "ResetAllCurrentDir",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 368751317615469,
							"parameters": {
								"variable": "CurrentDirX",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 323085046190342,
							"parameters": {
								"variable": "CurrentDirY",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 231104801957478,
							"parameters": {
								"variable": "CurrentDirZ",
								"value": "0"
							}
						}
					],
					"sid": 865467555950000
				}
			],
			"sid": 548827943820087
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Every time the \"Move\" timer is over, move the sponge."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 498040632618887,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Move\""
							}
						}
					],
					"actions": [],
					"sid": 586685307603953,
					"children": [
						{
							"eventType": "comment",
							"text": "But only if at least one of the axis isn't equal to zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 129836768180752,
									"parameters": {
										"value": "CurrentDirX <> 0 | CurrentDirY <> 0 | CurrentDirZ <> 0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveSponge",
									"sid": 716841924835841
								}
							],
							"sid": 932992491439817
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Move the sponge forward based on the currently stored axis."
				},
				{
					"functionName": "MoveSponge",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Update the last direction values."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 528347876610129,
							"parameters": {
								"variable": "LastDirX",
								"value": "CurrentDirX"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 270578442273522,
							"parameters": {
								"variable": "LastDirY",
								"value": "CurrentDirY"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 177097348151381,
							"parameters": {
								"variable": "LastDirZ",
								"value": "CurrentDirZ"
							}
						}
					],
					"sid": 155756592872523,
					"children": [
						{
							"eventType": "comment",
							"text": "Clear the list of of occupied cells."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "clear",
									"objectClass": "OccupiedCells",
									"sid": 804580503812407,
									"parameters": {
										"value": "0"
									}
								},
								{
									"id": "set-size",
									"objectClass": "OccupiedCells",
									"sid": 607251370856927,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 445049153022212
						},
						{
							"eventType": "comment",
							"text": "How bright the sponge body will be."
						},
						{
							"eventType": "variable",
							"name": "Brightness",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 880507592500247
						},
						{
							"eventType": "comment",
							"text": "Leave a new piece of sponge behind if its length is longer than zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 317360015571202,
									"parameters": {
										"variable": "SpongeLength",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 725798011091093,
									"parameters": {
										"object-to-create": "SpongeBody",
										"layer": "\"World\"",
										"x": "SpongeHead.X",
										"y": "SpongeHead.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "SpongeBody",
									"sid": 478614792556798,
									"parameters": {
										"z": "SpongeHead.ZElevation"
									}
								},
								{
									"type": "comment",
									"text": "Store the position of this sponge, so a bacteria don't spawn inside it."
								},
								{
									"id": "push",
									"objectClass": "OccupiedCells",
									"sid": 380683378578724,
									"parameters": {
										"where": "back",
										"value": "SpongeHead.X&\"|\"&SpongeHead.Y&\"|\"&SpongeHead.ZElevation",
										"axis": "x"
									}
								},
								{
									"type": "comment",
									"text": "Apply a slightly random brightness value to the sponge, so the whole body doesn't look so linear."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 541229525176638,
									"parameters": {
										"variable": "Brightness",
										"value": "random(191, 255)"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "SpongeBody",
									"sid": 165755047347994,
									"parameters": {
										"color": "rgbEx255(Brightness, Brightness, Brightness)"
									}
								}
							],
							"sid": 996600665797122
						},
						{
							"eventType": "comment",
							"text": "If there are more sponge pieces than it's allowed to, destroy the oldest piece with a tween animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 940000716014727,
									"parameters": {
										"first-value": "SpongeBody.Count",
										"comparison": 4,
										"second-value": "SpongeLength"
									}
								}
							],
							"actions": [],
							"sid": 431494341487369,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 366243960649030,
											"parameters": {
												"object": "SpongeBody",
												"instance": "0"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "SpongeBody",
											"sid": 822541253008842,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"SelfDestroy\"",
												"property": "size",
												"end-x": "0",
												"end-y": "0",
												"time": "StepTime / 2",
												"ease": "easeinback",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no"
											}
										}
									],
									"sid": 470906580721567
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Move the sponge head forward."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "SpongeHead",
									"sid": 855649185572681,
									"parameters": {
										"x": "Self.X + CurrentDirX * CellSize",
										"y": "Self.Y + CurrentDirY * CellSize"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "SpongeHead",
									"sid": 390162111899789,
									"parameters": {
										"z": "Self.ZElevation + CurrentDirZ * CellSize"
									}
								},
								{
									"type": "comment",
									"text": "Also generate a list of position that the new bacteria should avoid."
								},
								{
									"callFunction": "GeneratePositionList",
									"sid": 617396526714439
								}
							],
							"sid": 352614262805027
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 648594411818435,
									"parameters": {
										"value": "round(SpongeHead.X) = round(Bacteria.X)\r\n&\r\nround(SpongeHead.Y) = round(Bacteria.Y)\r\n&\r\nround(SpongeHead.ZElevation) = round(Bacteria.ZElevation)"
									}
								}
							],
							"actions": [],
							"sid": 257475641888809,
							"children": [
								{
									"eventType": "comment",
									"text": "If the sponge isn't longer than 124 units, increase its size and spawn a new bacteria."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 918985278262393,
											"parameters": {
												"variable": "SpongeLength",
												"comparison": 2,
												"value": "125 - 1"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 414551015450587,
											"parameters": {
												"variable": "SpongeLength",
												"value": "1"
											}
										},
										{
											"callFunction": "SpawnNewBacteria",
											"sid": 485905680478729
										}
									],
									"sid": 251057867677404
								},
								{
									"eventType": "comment",
									"text": "However, if the sponge is 124 long or more, then it's game over, because there's no more room for a new bacteria."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 365971923330860
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 788458693850954,
											"parameters": {
												"variable": "SpongeLength",
												"comparison": 5,
												"value": "125 - 1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "GameOver",
											"sid": 692694730775185
										}
									],
									"sid": 801117255495737
								}
							]
						}
					]
				}
			],
			"sid": 946946894862983
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Bacteria",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "SpawnNewBacteria",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 451666540126171,
					"children": [
						{
							"eventType": "comment",
							"text": "If there's already a bacteria in the scene, destroy it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 407234494067807,
									"parameters": {
										"first-value": "Bacteria.Count",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 516484691096031,
									"parameters": {
										"object-to-create": "Particles",
										"layer": "\"World\"",
										"x": "Bacteria.X",
										"y": "Bacteria.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Particles",
									"sid": 559964838144715,
									"parameters": {
										"z": "Bacteria.ZElevation"
									}
								},
								{
									"id": "destroy",
									"objectClass": "Bacteria",
									"sid": 900251971365195
								}
							],
							"sid": 450111432945631
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Generate position list."
								},
								{
									"callFunction": "GeneratePositionList",
									"sid": 781938384896424
								},
								{
									"type": "comment",
									"text": "Generate random position."
								},
								{
									"callFunction": "GenerateRandomPosition",
									"sid": 775607345060324
								},
								{
									"type": "comment",
									"text": "Reset is overlapping position."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 943437652086998,
									"parameters": {
										"variable": "IsOverlappingPosition",
										"value": "false"
									}
								}
							],
							"sid": 176529614512562
						},
						{
							"eventType": "variable",
							"name": "IsOverlappingPosition",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 924204036230060
						},
						{
							"eventType": "comment",
							"text": "Loop through each occupied cell in the world and check if the previously generated random position is free. If it isn't, toggle the \"IsOverlappingPosition\" variable."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 173051829979756,
									"parameters": {
										"name": "\"\"",
										"start-index": "0",
										"end-index": "OccupiedCells.Width - 1"
									}
								}
							],
							"actions": [],
							"sid": 460330222546209,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 349654543836160,
											"parameters": {
												"first-value": "OccupiedCells.At(loopindex)",
												"comparison": 0,
												"second-value": "RandomPosition"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 672491624227804,
											"parameters": {
												"variable": "IsOverlappingPosition",
												"value": "true"
											}
										}
									],
									"sid": 561216533685205
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If the random position is already occupied, repeat the process until a free spot is found."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 849103831816665,
									"parameters": {
										"variable": "IsOverlappingPosition"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SpawnNewBacteria",
									"sid": 210556969060476
								}
							],
							"sid": 589200987901593
						},
						{
							"eventType": "comment",
							"text": "However, if the random position isn't occupied, spawn a new bacteria there."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 676807391298911
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 340981600526166,
									"parameters": {
										"variable": "IsOverlappingPosition"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 610500343865370,
									"parameters": {
										"object-to-create": "Bacteria",
										"layer": "\"World\"",
										"x": "0",
										"y": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-position",
									"objectClass": "Bacteria",
									"sid": 407519030703171,
									"parameters": {
										"x": "int(tokenat(RandomPosition, 0, \"|\"))",
										"y": "int(tokenat(RandomPosition, 1, \"|\"))"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Bacteria",
									"sid": 449918612075058,
									"parameters": {
										"z": "int(tokenat(RandomPosition, 2, \"|\"))"
									}
								},
								{
									"type": "comment",
									"text": "Also animate it with a tween sequence."
								},
								{
									"id": "set-size",
									"objectClass": "Bacteria",
									"sid": 166459353743342,
									"parameters": {
										"width": "0",
										"height": "0"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Bacteria",
									"sid": 879785291325525,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Spawn\"",
										"property": "size",
										"end-x": "32",
										"end-y": "32",
										"time": "StepTime / 2",
										"ease": "easeoutback",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 313581862364645
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Generate and store a complete list of positions of each part of the sponge."
				},
				{
					"functionName": "GeneratePositionList",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 863026084800755,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 630414812171313,
									"parameters": {
										"object": "SpongeHead"
									}
								}
							],
							"actions": [
								{
									"id": "push",
									"objectClass": "OccupiedCells",
									"sid": 372274382294873,
									"parameters": {
										"where": "back",
										"value": "SpongeHead.X&\"|\"&SpongeHead.Y&\"|\"&SpongeHead.ZElevation",
										"axis": "x"
									}
								}
							],
							"sid": 674242171194556
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 465898037444695,
									"parameters": {
										"object": "SpongeBody"
									}
								}
							],
							"actions": [],
							"sid": 291629504130951,
							"children": [
								{
									"eventType": "comment",
									"text": "However, only parts that aren't being destroyed are taken in consideration."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "SpongeBody",
											"sid": 452803768260154,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"SelfDestroy\""
											}
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "OccupiedCells",
											"sid": 920369558905947,
											"parameters": {
												"where": "back",
												"value": "SpongeBody.X&\"|\"&SpongeBody.Y&\"|\"&SpongeBody.ZElevation",
												"axis": "x"
											}
										}
									],
									"sid": 438121725718860
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Generate and store a random position, based on the position of each cell in the world grid."
				},
				{
					"functionName": "GenerateRandomPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 815858209758501,
							"parameters": {
								"variable": "RandomPosition",
								"value": "choose(96, 128, 160, 192, 224)\n&\"|\"&\r\nchoose(26, 58, 90, 122, 154)\n&\"|\"&\r\nchoose(-32, -64, -96, -128, -160)"
							}
						}
					],
					"sid": 631589589715139
				}
			],
			"sid": 393230630360979
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Background",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Spawn water bubbles in random positions every 0.25 seconds, in order to create a more alive environment."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 239012817914292,
							"parameters": {
								"interval-seconds": "0.25"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 470251898820390,
							"parameters": {
								"object-to-create": "WaterBubble",
								"layer": "\"World\"",
								"x": "random(80, 240)",
								"y": "180",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "WaterBubble",
							"sid": 954914407863941,
							"parameters": {
								"z": "random(0, -160)"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "WaterBubble",
							"sid": 535683596742618,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SelfDestroy\"",
								"property": "offsetY",
								"end-value": "0",
								"time": "random(4, 8)",
								"ease": "default",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 853551942934872
				}
			],
			"sid": 616773929338221
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GameOver",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 872382879144805
						}
					],
					"actions": [],
					"sid": 328326102710510,
					"children": [
						{
							"eventType": "comment",
							"text": "If the sponge head is overlapping its body, it's game over."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 600475759064349,
									"parameters": {
										"object": "SpongeBody"
									}
								}
							],
							"actions": [],
							"sid": 413819980367491,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 718795208267254,
											"parameters": {
												"value": "round(SpongeHead.X) = round(SpongeBody.X)\n&\nround(SpongeHead.Y) = round(SpongeBody.Y)\n&\nround(SpongeHead.ZElevation) = round(SpongeBody.ZElevation)"
											}
										}
									],
									"actions": [
										{
											"callFunction": "GameOver",
											"sid": 785264333217065
										}
									],
									"sid": 202666170087350
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If the sponge head is outside the playable area, it's also game over."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 582200475333709,
									"parameters": {
										"value": "round(SpongeHead.X) = 64\n|\nround(SpongeHead.X) = 256\r\n|\nround(SpongeHead.Y) = -6\n|\r\nround(SpongeHead.Y) = 186\n|\nround(SpongeHead.ZElevation) = 0\n|\r\nround(SpongeHead.ZElevation) = -192\n"
									}
								}
							],
							"actions": [
								{
									"callFunction": "GameOver",
									"sid": 888190510405610
								}
							],
							"sid": 588825885861765
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Reset the game by preventing the sponge from moving and turning the screen white with a fade effect, but only if the game is currently running."
				},
				{
					"functionName": "GameOver",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-timer-running",
							"objectClass": "GameManager",
							"sid": 658023795826256,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Move\""
							}
						}
					],
					"actions": [
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 277270268346216
						},
						{
							"id": "stop-timer",
							"objectClass": "GameManager",
							"sid": 211034849766903,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Move\""
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fade",
							"sid": 105098212820014,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeIn\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "2",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 689930273271296
				},
				{
					"eventType": "comment",
					"text": "Once the fade effect is over, restart the layout."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Fade",
							"sid": 348161434494206,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeIn\""
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 590105589116194
						}
					],
					"sid": 357704195609019
				}
			],
			"sid": 496193903254288
		}
	],
	"sid": 861958351267593
}