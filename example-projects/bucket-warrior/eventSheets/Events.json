{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Forsteri Studios\n\nWebsite: forsteristudios.com\nE-Mail: forsteristudios@gmail.com\nX: @forsteristudios"
		},
		{
			"eventType": "comment",
			"text": "Settings."
		},
		{
			"eventType": "variable",
			"name": "CLOUDS_SPEED",
			"type": "number",
			"initialValue": "64",
			"comment": "Clouds animation speed",
			"isStatic": false,
			"isConstant": true,
			"sid": 684973779242886
		},
		{
			"eventType": "variable",
			"name": "GRAVITY",
			"type": "number",
			"initialValue": "1000",
			"comment": "Default gravity value",
			"isStatic": false,
			"isConstant": true,
			"sid": 929348206648705
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup tutorial."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 795660484567655
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Disable player controls."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 277318814459703,
							"parameters": {
								"group-name": "\"Player Events\"",
								"state": "deactivated"
							}
						}
					],
					"sid": 236206995357771
				},
				{
					"eventType": "comment",
					"text": "Hide the tutorial and play the intro sequence when the player presses [b][Space][/b]."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 376486406559854,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "GameManager",
							"sid": 213471515386101,
							"parameters": {
								"instance-variable": "tutorialOnScreen"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "TextTutorial",
							"sid": 201519963373772,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameManager",
							"sid": 779073241894791,
							"parameters": {
								"instance-variable": "tutorialOnScreen",
								"value": "false"
							}
						},
						{
							"callFunction": "playIntro",
							"sid": 466377387247646
						}
					],
					"sid": 283345447841679
				}
			],
			"sid": 960099332738007
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Intro",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Play introduction animation."
				},
				{
					"functionName": "playIntro",
					"functionDescription": "Play introduction animation",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Make the dragon visible."
						},
						{
							"id": "set-visible",
							"objectClass": "IntroAnim",
							"sid": 903326453387805,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"type": "comment",
							"text": "Spawn dragon trails."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameManager",
							"sid": 894444287101429,
							"parameters": {
								"instance-variable": "spawnTrail",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Play intro animation."
						},
						{
							"id": "play-timeline",
							"objectClass": "TimelineController",
							"sid": 370647550249891,
							"parameters": {
								"timeline": "IntroAnim",
								"tags": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Wait a little."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 998837714719672,
							"parameters": {
								"seconds": "1.5",
								"use-timescale": true
							}
						},
						{
							"type": "comment",
							"text": "Disable dragon trail."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameManager",
							"sid": 900358967407970,
							"parameters": {
								"instance-variable": "spawnTrail",
								"value": "false"
							}
						}
					],
					"sid": 755998576001789
				},
				{
					"eventType": "comment",
					"text": "Create trail for dragon intro animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 116472821910303,
							"parameters": {
								"interval-seconds": "0.025"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "GameManager",
							"sid": 211079921270841,
							"parameters": {
								"instance-variable": "spawnTrail"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 944983004408586,
							"parameters": {
								"object-to-create": "IntroAnimTrail",
								"layer": "\"UI\"",
								"x": "IntroAnim.X",
								"y": "IntroAnim.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "IntroAnimTrail",
							"sid": 687888889739989,
							"parameters": {
								"frame-number": "IntroAnim.AnimationFrame"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "IntroAnimTrail",
							"sid": 535685086780831,
							"parameters": {
								"opacity": "25"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "IntroAnimTrail",
							"sid": 928007883143455,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeTrail\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.2",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 165164843830826
				},
				{
					"eventType": "comment",
					"text": "Shake the screen."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-keyframe-reached",
							"objectClass": "TimelineController",
							"sid": 496666890108553,
							"parameters": {
								"tags": "\"shake\"",
								"match": "any-tags"
							}
						}
					],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 962502043760081,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\"",
								"start-value": "24",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 269470268193525
				},
				{
					"eventType": "comment",
					"text": "Scroll to randomized positions during a screen shake event."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 674042290878833,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\""
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 158713884261182,
							"parameters": {
								"x": "lerp(LayoutWidth/2, LayoutWidth/2 + random(-GameManager.Tween.Value(\"ScreenShake\"), GameManager.Tween.Value(\"ScreenShake\")), 1)",
								"y": "lerp(LayoutHeight/2, LayoutHeight/2 + random(-GameManager.Tween.Value(\"ScreenShake\"), GameManager.Tween.Value(\"ScreenShake\")), 1)"
							}
						}
					],
					"sid": 490063272534044
				},
				{
					"eventType": "comment",
					"text": "When intro animation finishes playing, spawn ladders."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-keyframe-reached",
							"objectClass": "TimelineController",
							"sid": 585165348266255,
							"parameters": {
								"tags": "\"introDone\"",
								"match": "any-tags"
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 285905332362907,
							"parameters": {
								"object": "LadderSpawner"
							}
						}
					],
					"actions": [
						{
							"id": "cast-ray",
							"objectClass": "LadderSpawner",
							"sid": 324467699977640,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.ImagePointX(\"Caster\")",
								"from-y": "Self.ImagePointY(\"Caster\")",
								"to-x": "Self.X",
								"to-y": "2000",
								"use-collision-cells": true
							}
						},
						{
							"id": "start-timer",
							"objectClass": "LadderSpawner",
							"sid": 123389853732350,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.1 * loopindex",
								"type": "once",
								"tag": "\"SpawnLadder\""
							}
						}
					],
					"sid": 931867657223045
				},
				{
					"eventType": "comment",
					"text": "Spawn ladders."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "LadderSpawner",
							"sid": 383059852732159,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"SpawnLadder\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create flame ladder."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 835028656279148,
							"parameters": {
								"object-to-create": "FlameLadder",
								"layer": "\"World\"",
								"x": "LadderSpawner.X",
								"y": "LadderSpawner.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Create standard ladder."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 840300243942467,
							"parameters": {
								"object-to-create": "Ladder",
								"layer": "\"World\"",
								"x": "LadderSpawner.X",
								"y": "LadderSpawner.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "It starts with zero height."
						},
						{
							"id": "set-height",
							"objectClass": "Ladder",
							"sid": 142873669038256,
							"parameters": {
								"height": "0"
							}
						},
						{
							"type": "comment",
							"text": "Then the height is increased with a bounce tween."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Ladder",
							"sid": 112699083496624,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"IncreaseLadderHeight\"",
								"property": "offsetHeight",
								"end-value": "LadderSpawner.LineOfSight.HitDistance + 14",
								"time": "1",
								"ease": "easeoutbounce",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Fix Z-Ordering."
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Ladder",
							"sid": 678664957885099
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Background",
							"sid": 811885417516694
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Clouds",
							"sid": 479323274591903
						},
						{
							"type": "comment",
							"text": "Destroy the corresponding ladder spawner."
						},
						{
							"id": "destroy",
							"objectClass": "LadderSpawner",
							"sid": 607695194547690
						},
						{
							"type": "comment",
							"text": "Enable player controls."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 136310781417239,
							"parameters": {
								"seconds": "1",
								"use-timescale": true
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 644519394555577,
							"parameters": {
								"group-name": "\"Player Events\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "Summon a flame."
						},
						{
							"id": "start-timer",
							"objectClass": "Dragon",
							"sid": 835950961982478,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "once",
								"tag": "\"SummonFlame\""
							}
						}
					],
					"sid": 666938179384215
				}
			],
			"sid": 298089881927890
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player Events",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "expandSide",
					"type": "number",
					"initialValue": "1",
					"comment": "To which side the water collision should expand?",
					"isStatic": true,
					"isConstant": false,
					"sid": 417649189341056
				},
				{
					"eventType": "variable",
					"name": "X_axis",
					"type": "number",
					"initialValue": "0",
					"comment": "X axis input",
					"isStatic": false,
					"isConstant": false,
					"sid": 743963182683761
				},
				{
					"eventType": "comment",
					"text": "Correctly choose full or empty version of the requested animation."
				},
				{
					"aceType": "action",
					"aceName": "Choose Animation",
					"objectClass": "Player",
					"functionDescription": "Correctly choose full or empty version of the requested animation",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "anim",
							"type": "string",
							"initialValue": "",
							"comment": "Animation name",
							"sid": 593346651830445
						},
						{
							"name": "beginning",
							"type": "boolean",
							"initialValue": "false",
							"comment": "Play animation from the beginning?",
							"sid": 350893412293756
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "PlayerSprite",
							"sid": 458019144696034,
							"parameters": {
								"animation": "(Player.bucketFull ? \"F_\" : \"E_\") & anim",
								"from": "current-frame"
							}
						},
						{
							"id": "set-animation-frame",
							"objectClass": "PlayerSprite",
							"sid": 479166923448806,
							"parameters": {
								"frame-number": "beginning ? 0 : Self.AnimationFrame"
							}
						}
					],
					"sid": 836462101272302
				},
				{
					"eventType": "comment",
					"text": "Player horizontal input."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 525600889498732,
							"parameters": {
								"key": 37
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 344712308794065,
							"parameters": {
								"variable": "X_axis",
								"value": "1"
							}
						}
					],
					"sid": 667163755667182
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 778299460295010,
							"parameters": {
								"key": 39
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 100175039902388,
							"parameters": {
								"variable": "X_axis",
								"value": "1"
							}
						}
					],
					"sid": 368071874728509
				},
				{
					"eventType": "comment",
					"text": "Move the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 170582850584613,
							"parameters": {
								"instance-variable": "climbing"
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 587773909086781,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 648605733651610,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 489815389310325,
					"children": [
						{
							"eventType": "comment",
							"text": "Player is moving left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 891988379244400,
									"parameters": {
										"variable": "X_axis",
										"comparison": 2,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 245396368196571,
									"parameters": {
										"state": "mirrored"
									}
								},
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 908399585465138,
									"behaviorType": "Platform",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 135835632202940
						},
						{
							"eventType": "comment",
							"text": "Player is moving right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 870825328050553
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 225714240594686,
									"parameters": {
										"variable": "X_axis",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 923548809360346,
									"parameters": {
										"state": "not-mirrored"
									}
								},
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 750821441901380,
									"behaviorType": "Platform",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 236693372988282
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Jump."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 358799337372576,
							"parameters": {
								"key": 38
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 753838037012961,
							"parameters": {
								"object": "Ladder"
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 486629283782960,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 928429866020314,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 758132610163932,
							"behaviorType": "Platform",
							"parameters": {
								"control": "jump"
							}
						}
					],
					"sid": 175204214305845
				},
				{
					"eventType": "comment",
					"text": "Climb ladders."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 225066987058229,
							"parameters": {
								"object": "Ladder"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 596049929461952,
							"parameters": {
								"value": "abs(Player.X - Ladder.X) < 18"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 970827103243080,
							"parameters": {
								"instance-variable": "doneClimbing"
							},
							"isInverted": true
						},
						{
							"id": "is-jumping",
							"objectClass": "Player",
							"sid": 861995758021288,
							"behaviorType": "Platform",
							"isInverted": true
						},
						{
							"id": "is-falling",
							"objectClass": "Player",
							"sid": 763993667928253,
							"behaviorType": "Platform",
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 844918298244538,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 465203997665163,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 565719084399488,
					"children": [
						{
							"eventType": "comment",
							"text": "Climb up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 145260891730499,
									"parameters": {
										"key": 38
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play climb animation."
								},
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 787883390555247,
									"parameters": [
										"\"Climb\"",
										false
									]
								},
								{
									"id": "set-animation-speed",
									"objectClass": "PlayerSprite",
									"sid": 850039765824056,
									"parameters": {
										"speed": "10"
									}
								},
								{
									"type": "comment",
									"text": "Normal playback of climb animation."
								},
								{
									"id": "set-animation-speed",
									"objectClass": "PlayerSprite",
									"sid": 797124391916384,
									"parameters": {
										"speed": "10"
									}
								},
								{
									"type": "comment",
									"text": "Disable collision with geometry."
								},
								{
									"id": "set-solid-collision-filter",
									"objectClass": "Player",
									"sid": 363636931669537,
									"parameters": {
										"mode": "exclusive",
										"tags": "\"geometry\""
									}
								},
								{
									"type": "comment",
									"text": "Player is now climbing a ladder."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 962499677259769,
									"parameters": {
										"instance-variable": "climbing",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Snap position to the center of the ladder."
								},
								{
									"id": "set-x",
									"objectClass": "Player",
									"sid": 985744762367251,
									"parameters": {
										"x": "lerp(Self.X, Ladder.X, 20 * dt)"
									}
								},
								{
									"type": "comment",
									"text": "Disable gravity."
								},
								{
									"id": "set-gravity",
									"objectClass": "Player",
									"sid": 799555441917620,
									"behaviorType": "Platform",
									"parameters": {
										"gravity": "0"
									}
								},
								{
									"type": "comment",
									"text": "Move up."
								},
								{
									"id": "set-y",
									"objectClass": "Player",
									"sid": 789386390691029,
									"parameters": {
										"y": "Self.Y - Self.climbSpeed * dt"
									}
								}
							],
							"sid": 182364919553573,
							"children": [
								{
									"eventType": "comment",
									"text": "If the player reached the top of the ladder, jump."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-y",
											"objectClass": "Player",
											"sid": 730321550700543,
											"parameters": {
												"comparison": 3,
												"y-co-ordinate": "Ladder.Y + 8"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 743280489106677,
											"parameters": {
												"instance-variable": "doneClimbing",
												"value": "true"
											}
										},
										{
											"id": "set-vector-y",
											"objectClass": "Player",
											"sid": 245018062955949,
											"behaviorType": "Platform",
											"parameters": {
												"vector-y": "-300"
											}
										},
										{
											"id": "set-gravity",
											"objectClass": "Player",
											"sid": 320221470630889,
											"behaviorType": "Platform",
											"parameters": {
												"gravity": "GRAVITY"
											}
										},
										{
											"customAction": "Choose Animation",
											"objectClass": "Player",
											"sid": 479468023978921,
											"parameters": [
												"\"Jump\"",
												false
											]
										}
									],
									"sid": 598722416748863
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Climb down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 210084769620943
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 384242228843576,
									"parameters": {
										"key": 40
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 273810289148428,
									"parameters": {
										"instance-variable": "climbing"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play climb animation."
								},
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 364560573649351,
									"parameters": [
										"\"ClimbReverse\"",
										false
									]
								},
								{
									"id": "set-animation-speed",
									"objectClass": "PlayerSprite",
									"sid": 574027257754240,
									"parameters": {
										"speed": "10"
									}
								},
								{
									"type": "comment",
									"text": "Player is now climbing a ladder."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 413522444041981,
									"parameters": {
										"instance-variable": "climbing",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Snap position to the center of the ladder."
								},
								{
									"id": "set-x",
									"objectClass": "Player",
									"sid": 300578127653995,
									"parameters": {
										"x": "lerp(Self.X, Ladder.X, 20 * dt)"
									}
								},
								{
									"type": "comment",
									"text": "Disable gravity."
								},
								{
									"id": "set-gravity",
									"objectClass": "Player",
									"sid": 606770447280429,
									"behaviorType": "Platform",
									"parameters": {
										"gravity": "0"
									}
								},
								{
									"type": "comment",
									"text": "Move down."
								},
								{
									"id": "set-y",
									"objectClass": "Player",
									"sid": 422940037189958,
									"parameters": {
										"y": "Self.Y + Self.climbSpeed * dt"
									}
								}
							],
							"sid": 195692916296669,
							"children": [
								{
									"eventType": "comment",
									"text": "If the player reached the bottom of the ladder, fall."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-y",
											"objectClass": "Player",
											"sid": 134212606299009,
											"parameters": {
												"comparison": 5,
												"y-co-ordinate": "Ladder.Y + Ladder.Height - 6"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 414400915429978,
											"parameters": {
												"instance-variable": "doneClimbing",
												"value": "true"
											}
										},
										{
											"id": "set-vector-y",
											"objectClass": "Player",
											"sid": 648546292890318,
											"behaviorType": "Platform",
											"parameters": {
												"vector-y": "10"
											}
										},
										{
											"id": "set-gravity",
											"objectClass": "Player",
											"sid": 108900389636316,
											"behaviorType": "Platform",
											"parameters": {
												"gravity": "GRAVITY"
											}
										}
									],
									"sid": 681754754266839
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is stopped moving while climbing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 788441554915613
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 726632020676943,
									"parameters": {
										"instance-variable": "climbing"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-speed",
									"objectClass": "PlayerSprite",
									"sid": 967848334421778,
									"parameters": {
										"speed": "0"
									}
								}
							],
							"sid": 256489712132938
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Player is done climbing a ladder."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-falling",
							"objectClass": "Player",
							"sid": 496516511326154,
							"behaviorType": "Platform"
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 551690983586663,
							"parameters": {
								"instance-variable": "doneClimbing"
							}
						}
					],
					"actions": [
						{
							"id": "set-solid-collision-filter",
							"objectClass": "Player",
							"sid": 468099973603493,
							"parameters": {
								"mode": "inclusive",
								"tags": "\"geometry\""
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 913261023314377,
							"parameters": {
								"instance-variable": "doneClimbing",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 735873215963088,
							"parameters": {
								"instance-variable": "climbing",
								"value": "false"
							}
						}
					],
					"sid": 357614145903842
				},
				{
					"eventType": "comment",
					"text": "Throw / Pickup water."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 319802867935644,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 247954384021490,
							"parameters": {
								"instance-variable": "climbing"
							},
							"isInverted": true
						},
						{
							"id": "is-on-floor",
							"objectClass": "Player",
							"sid": 156574320705560,
							"behaviorType": "Platform"
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 663318519111634,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 291487590710223,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 572706454267786,
					"children": [
						{
							"eventType": "comment",
							"text": "Throw water."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 418096663001902,
									"parameters": {
										"instance-variable": "bucketFull"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play \"throw water\" animation."
								},
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 324941066173730,
									"parameters": [
										"\"ThrowWater\"",
										true
									]
								},
								{
									"type": "comment",
									"text": "Set to which side the water collider will expand."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 938296863221454,
									"parameters": {
										"variable": "expandSide",
										"value": "sign(Player.Width)"
									}
								},
								{
									"type": "comment",
									"text": "Bucket is now empty."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 173630255753252,
									"parameters": {
										"instance-variable": "bucketFull",
										"value": "false"
									}
								},
								{
									"type": "comment",
									"text": "Wait a little."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 810445620336851,
									"parameters": {
										"seconds": "0.4",
										"use-timescale": true
									}
								}
							],
							"sid": 483913618190699
						},
						{
							"eventType": "comment",
							"text": "Pickup water."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 416326275209867
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Player",
									"sid": 467982907690789,
									"parameters": {
										"object": "WaterPickup"
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "WaterPickup",
									"sid": 991910873544150,
									"parameters": {
										"parent": "Stalactite",
										"which": "own"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 307852269669658,
									"parameters": {
										"value": "sign(Stalactite.X - Player.X) = sign(Player.Width)"
									}
								}
							],
							"actions": [
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 371594717576710,
									"parameters": [
										"\"GetWater\"",
										true
									]
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 337145940938135,
									"parameters": {
										"instance-variable": "bucketFull",
										"value": "true"
									}
								}
							],
							"sid": 696715773202329
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Create water particle and set its angle according to expandSide."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-frame-changed",
							"objectClass": "PlayerSprite",
							"sid": 238538448747150
						},
						{
							"id": "compare-animation-frame-tag",
							"objectClass": "PlayerSprite",
							"sid": 892248049288735,
							"parameters": {
								"comparison": 0,
								"tag": "\"throwWater\""
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "PlayerSprite",
							"sid": 653338491122154,
							"parameters": {
								"object": "PlayerWaterParticles",
								"layer": "\"World\"",
								"image-point": "\"Particles\"",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerWaterParticles",
							"sid": 242895031792959,
							"parameters": {
								"angle": "expandSide > 0 ? 315 : 225"
							}
						},
						{
							"type": "comment",
							"text": "Create and setup water collider."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 106389100653488,
							"parameters": {
								"object-to-create": "PlayerWaterCollider",
								"layer": "\"World\"",
								"x": "Player.X",
								"y": "Player.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-width",
							"objectClass": "PlayerWaterCollider",
							"sid": 737233418613760,
							"parameters": {
								"width": "expandSide * Self.ImageWidth"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "PlayerWaterCollider",
							"sid": 708297930474704,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ExpandWaterZone\"",
								"property": "offsetWidth",
								"end-value": "108 * expandSide",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 303402049031944
				},
				{
					"eventType": "comment",
					"text": "After throwing or picking up water, return to idle."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "PlayerSprite",
							"sid": 959895715958933,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							}
						},
						{
							"id": "on-animation-finished",
							"objectClass": "PlayerSprite",
							"sid": 530040613077542,
							"parameters": {
								"animation": "\"E_GetWater\""
							}
						}
					],
					"actions": [
						{
							"customAction": "Choose Animation",
							"objectClass": "Player",
							"sid": 537416257756263,
							"parameters": [
								"\"Idle\"",
								false
							]
						}
					],
					"sid": 975056893367367,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Player animation states."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-floor",
							"objectClass": "Player",
							"sid": 412249580651888,
							"behaviorType": "Platform"
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 677836432210197,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 863956758952538,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 284340799437889,
					"children": [
						{
							"eventType": "comment",
							"text": "Moving."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "Player",
									"sid": 444041203870527,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 708906803811550,
									"parameters": [
										"\"Run\"",
										false
									]
								}
							],
							"sid": 157037440606848
						},
						{
							"eventType": "comment",
							"text": "Idle."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 864689571207739
								}
							],
							"actions": [
								{
									"customAction": "Choose Animation",
									"objectClass": "Player",
									"sid": 248541000440728,
									"parameters": [
										"\"Idle\"",
										false
									]
								}
							],
							"sid": 172538979229914
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Jumping or falling."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 608930029246543
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 230876719454284,
							"parameters": {
								"animation": "\"E_GetWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "PlayerSprite",
							"sid": 827190151206663,
							"parameters": {
								"animation": "\"F_ThrowWater\""
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 415121789273769,
							"parameters": {
								"instance-variable": "climbing"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"customAction": "Choose Animation",
							"objectClass": "Player",
							"sid": 551846753110691,
							"parameters": [
								"\"Jump\"",
								true
							]
						}
					],
					"sid": 142656570108088
				}
			],
			"sid": 347865054029981
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Win Condition",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player won the game."
				},
				{
					"functionName": "playerWon",
					"functionDescription": "Player won the game",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "GameManager",
							"sid": 869396168375000,
							"parameters": {
								"instance-variable": "tutorialOnScreen"
							},
							"isInverted": true
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "GameManager",
							"sid": 551667807051002,
							"parameters": {
								"instance-variable": "playerWon"
							},
							"isInverted": true
						},
						{
							"id": "is-any-playing",
							"objectClass": "TimelineController",
							"sid": 927687168891906,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "GameManager",
							"sid": 195550705574851,
							"parameters": {
								"instance-variable": "playerWon",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Kill all flames."
						},
						{
							"id": "set-animation",
							"objectClass": "Flame",
							"sid": 398291157323860,
							"parameters": {
								"animation": "Self.TemplateName & \"Death\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "Flame",
							"sid": 269719026462398,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Flame",
							"sid": 510465747940919,
							"behaviorType": "Platform",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Disable player controls."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 900832990422325,
							"parameters": {
								"group-name": "\"Player Events\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Make player look at the dragon."
						},
						{
							"id": "set-width",
							"objectClass": "Player",
							"sid": 331842652827790,
							"parameters": {
								"width": "-Self.ImageWidth"
							}
						},
						{
							"type": "comment",
							"text": "Dragon plays the \"defeat\" animation and disable timers."
						},
						{
							"id": "set-animation",
							"objectClass": "Dragon",
							"sid": 239900336051721,
							"parameters": {
								"animation": "\"Defeat\"",
								"from": "beginning"
							}
						},
						{
							"id": "stop-all-timers",
							"objectClass": "Dragon",
							"sid": 547823249931389,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Show balloon."
						},
						{
							"id": "set-visible",
							"objectClass": "DragonRing",
							"sid": 751251024869440,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "DragonRing",
							"sid": 297807257817082,
							"parameters": {
								"animation": "\"Intro\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Show hearts."
						},
						{
							"id": "set-rate",
							"objectClass": "DragonLoveParticles",
							"sid": 274281303388622,
							"parameters": {
								"rate": "10"
							}
						},
						{
							"type": "comment",
							"text": "Scroll the screen."
						},
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 975028891389757,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"GOScrollY\"",
								"start-value": "LayoutHeight/2",
								"end-value": "LayoutHeight/4",
								"time": "1",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Play victory animation."
						},
						{
							"id": "set-animation",
							"objectClass": "PlayerSprite",
							"sid": 150504717234469,
							"parameters": {
								"animation": "\"Victory\"",
								"from": "beginning"
							}
						},
						{
							"id": "play-timeline",
							"objectClass": "TimelineController",
							"sid": 491594205137986,
							"parameters": {
								"timeline": "PlayerWon",
								"tags": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Restart."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 567619067894803
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 435078268242660
						}
					],
					"sid": 944056654225708
				},
				{
					"eventType": "comment",
					"text": "If the player collides with the win zone, they win the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 834510346133928,
							"parameters": {
								"object": "WinZone"
							}
						}
					],
					"actions": [
						{
							"callFunction": "playerWon",
							"sid": 885278218143131
						}
					],
					"sid": 612532440289006
				},
				{
					"eventType": "comment",
					"text": "Scroll the screen."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 731497152618174,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"GoScrollY\""
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 383082343977510,
							"parameters": {
								"y": "GameManager.Tween.Value(\"GOScrollY\")"
							}
						}
					],
					"sid": 321543723612842
				},
				{
					"eventType": "comment",
					"text": "Show looped version of the balloon."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "DragonRing",
							"sid": 461066297839313,
							"parameters": {
								"animation": "\"Intro\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "DragonRing",
							"sid": 582467218593633,
							"parameters": {
								"animation": "\"Loop\"",
								"from": "beginning"
							}
						}
					],
					"sid": 556646109156825
				},
				{
					"eventType": "comment",
					"text": "Make the player throw hearts."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-frame-changed",
							"objectClass": "PlayerSprite",
							"sid": 281566857964215
						},
						{
							"id": "compare-animation-frame-tag",
							"objectClass": "PlayerSprite",
							"sid": 865984498966532,
							"parameters": {
								"comparison": 0,
								"tag": "\"throwHearts\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "GameManager",
							"sid": 345256355843645,
							"parameters": {
								"instance-variable": "playerWon"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "PlayerSprite",
							"sid": 800468287074664,
							"parameters": {
								"object": "PlayerHeartParticles",
								"layer": "\"World\"",
								"image-point": "\"Particles\"",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerHeartParticles",
							"sid": 113254184004687,
							"parameters": {
								"angle": "225"
							}
						}
					],
					"sid": 406300659573714
				}
			],
			"sid": 672711230290253
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Dragon",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Summon a new flame instance."
				},
				{
					"aceType": "action",
					"aceName": "Summon Flame",
					"objectClass": "Dragon",
					"functionDescription": "Summon a new flame instance",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "template",
							"type": "string",
							"initialValue": "Normal",
							"comment": "Flame template",
							"sid": 723815500804625
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "Dragon",
							"sid": 952085793258709,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "random(1, 3.5)",
								"type": "once",
								"tag": "\"SummonFlame\""
							}
						}
					],
					"sid": 458553550270390,
					"children": [
						{
							"eventType": "comment",
							"text": "Summon special flame."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 662445065737148,
									"parameters": {
										"value": "template = \"Special\""
									}
								},
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 442383025770906,
									"parameters": {
										"object": "FlameSummonSpot",
										"expression": "FlameSummonSpot.Y < Player.Y"
									}
								},
								{
									"id": "pick-by-highest-lowest-value",
									"objectClass": "System",
									"sid": 604776265306826,
									"parameters": {
										"object": "FlameSummonSpot",
										"which": "lowest",
										"expression": "distance(FlameSummonSpot.X, FlameSummonSpot.Y, Player.X, Player.Y)"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Dragon",
									"sid": 514514297134080,
									"parameters": {
										"object": "Flame",
										"layer": "\"World\"",
										"image-point": "\"summonPoint\"",
										"create-hierarchy": false,
										"template-name": "\"Special\""
									}
								},
								{
									"type": "comment",
									"text": "Create effect."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Dragon",
									"sid": 818403671969190,
									"parameters": {
										"object": "DragonEffect",
										"layer": "\"World\"",
										"image-point": "\"summonPoint\"",
										"create-hierarchy": false,
										"template-name": "\"Special\""
									}
								},
								{
									"type": "comment",
									"text": "Reset probability of spawning a special flame to 15%."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Dragon",
									"sid": 271197355402715,
									"parameters": {
										"instance-variable": "specialProbability",
										"value": "0.15"
									}
								},
								{
									"type": "comment",
									"text": "Move flame to summon spot."
								},
								{
									"id": "move-to-object",
									"objectClass": "Flame",
									"sid": 954245274288054,
									"behaviorType": "MoveTo",
									"parameters": {
										"object": "FlameSummonSpot",
										"image-point": "0",
										"mode": "direct"
									}
								}
							],
							"sid": 228637451068809
						},
						{
							"eventType": "comment",
							"text": "Summon standard flame."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 246206573010483
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Dragon",
									"sid": 780939386759156,
									"parameters": {
										"object": "Flame",
										"layer": "\"World\"",
										"image-point": "\"summonPoint\"",
										"create-hierarchy": false,
										"template-name": "\"Normal\""
									}
								},
								{
									"type": "comment",
									"text": "Create effect."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Dragon",
									"sid": 487516403238549,
									"parameters": {
										"object": "DragonEffect",
										"layer": "\"World\"",
										"image-point": "\"summonPoint\"",
										"create-hierarchy": false,
										"template-name": "\"Normal\""
									}
								},
								{
									"type": "comment",
									"text": "Increase the probability of spawning a special flame by 7.5%."
								},
								{
									"id": "add-to-instvar",
									"objectClass": "Dragon",
									"sid": 588447557690125,
									"parameters": {
										"instance-variable": "specialProbability",
										"value": "0.075"
									}
								}
							],
							"sid": 428771139973493
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Special flame arrived at summon spot. Enable normal behavior."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "Flame",
							"sid": 987032691969732,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Flame",
							"sid": 451961095347625,
							"behaviorType": "MoveTo",
							"parameters": {
								"enabled": false
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Flame",
							"sid": 779767066463968,
							"behaviorType": "Platform",
							"parameters": {
								"state": "enabled"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Flame",
							"sid": 632808696979735,
							"behaviorType": "Platform",
							"parameters": {
								"vector-y": "100"
							}
						},
						{
							"type": "comment",
							"text": "Face the player."
						},
						{
							"id": "set-width",
							"objectClass": "Flame",
							"sid": 767913486091733,
							"parameters": {
								"width": "Self.X < Player.X ? Self.ImageWidth : -Self.ImageWidth"
							}
						}
					],
					"sid": 925186784966880
				},
				{
					"eventType": "comment",
					"text": "Start flame summoning procedure."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Dragon",
							"sid": 563218676569112,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"SummonFlame\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Dragon",
							"sid": 204101430471742,
							"parameters": {
								"animation": "\"Attack\"",
								"from": "beginning"
							}
						}
					],
					"sid": 152313112256803
				},
				{
					"eventType": "comment",
					"text": "Summon a flame."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-frame-changed",
							"objectClass": "Dragon",
							"sid": 584357485581332
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Dragon",
							"sid": 338053635543937,
							"parameters": {
								"animation": "\"Attack\""
							}
						},
						{
							"id": "compare-animation-frame-tag",
							"objectClass": "Dragon",
							"sid": 466077238288925,
							"parameters": {
								"comparison": 0,
								"tag": "\"summonFlame\""
							}
						}
					],
					"actions": [
						{
							"customAction": "Summon Flame",
							"objectClass": "Dragon",
							"sid": 778487609952019,
							"parameters": [
								"random(1) < Dragon.specialProbability ? \"Special\" : \"Normal\""
							]
						}
					],
					"sid": 564046987052362
				},
				{
					"eventType": "comment",
					"text": "Go back to idle."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Dragon",
							"sid": 406824859947980,
							"parameters": {
								"animation": "\"attack\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Dragon",
							"sid": 203210538765151,
							"parameters": {
								"animation": "\"Idle\"",
								"from": "beginning"
							}
						}
					],
					"sid": 365017750413691
				},
				{
					"eventType": "comment",
					"text": "Dragon effect is destroyed after its animation is played."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "DragonEffect",
							"sid": 505137110929231
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "DragonEffect",
							"sid": 407452125589239
						}
					],
					"sid": 847060390328204
				}
			],
			"sid": 116486596822536
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Flame",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup flame."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Flame",
							"sid": 890204279924025
						}
					],
					"actions": [
						{
							"id": "set-solid-collision-filter",
							"objectClass": "Flame",
							"sid": 833965199084663,
							"parameters": {
								"mode": "exclusive",
								"tags": "\"limit\""
							}
						},
						{
							"id": "move-to-top",
							"objectClass": "PlayerSprite",
							"sid": 571174736104359
						},
						{
							"id": "move-to-top",
							"objectClass": "PlayerWaterParticles",
							"sid": 679473504960061
						}
					],
					"sid": 750226655612424
				},
				{
					"eventType": "comment",
					"text": "Flame extinguishes upon contact with water."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Flame",
							"sid": 463532360374641,
							"parameters": {
								"object": "PlayerWaterCollider"
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Flame",
							"sid": 613605609488188,
							"parameters": {
								"animation": "Self.TemplateName & \"Death\"",
								"from": "beginning"
							}
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "Flame",
							"sid": 610909180465214,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Flame",
							"sid": 448382086215355,
							"behaviorType": "Platform",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 676014308612453
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Flame",
							"sid": 342321771273458,
							"parameters": {
								"animation": "\"NormalDeath\""
							}
						},
						{
							"id": "on-animation-finished",
							"objectClass": "Flame",
							"sid": 563526572848700,
							"parameters": {
								"animation": "\"SpecialDeath\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Flame",
							"sid": 699150682028864
						}
					],
					"sid": 620712696747202,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Make flame walk."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 160191729863541,
							"parameters": {
								"object": "Flame"
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Flame",
							"sid": 137249199055925,
							"parameters": {
								"animation": "\"NormalDeath\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Flame",
							"sid": 139470204532164,
							"parameters": {
								"animation": "\"SpecialDeath\""
							},
							"isInverted": true
						},
						{
							"id": "is-group-active",
							"objectClass": "System",
							"sid": 483442512116429,
							"parameters": {
								"group-name": "\"Player Events\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Flame",
							"sid": 778223042370608,
							"parameters": {
								"instance-variable": "descendingLadder"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 188040066110512,
					"children": [
						{
							"eventType": "comment",
							"text": "Walk left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-mirrored",
									"objectClass": "Flame",
									"sid": 354498242154961
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Flame",
									"sid": 425218679606627,
									"behaviorType": "Platform",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 309446720317582
						},
						{
							"eventType": "comment",
							"text": "Walk right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 969564401909080
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Flame",
									"sid": 379324199618941,
									"behaviorType": "Platform",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 745216895598937
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Mirror flame."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Flame",
							"sid": 245498651397088,
							"parameters": {
								"object": "FlameLimit"
							}
						}
					],
					"actions": [
						{
							"id": "set-width",
							"objectClass": "Flame",
							"sid": 447399027018050,
							"parameters": {
								"width": "Self.Width > 0 ? -Self.ImageWidth : Self.ImageWidth"
							}
						}
					],
					"sid": 506556038020864
				},
				{
					"eventType": "comment",
					"text": "Given certain conditions, flames will descend ladders in pursuit of the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Flame",
							"sid": 115097904156928,
							"parameters": {
								"object": "FlameLadder"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 669258236466499,
							"parameters": {
								"value": "(Player.Y - FlameLadder.Y < 128) & (Player.Y > FlameLadder.Y)"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 346313327593213,
							"parameters": {
								"value": "((Flame.Width < 0) & (Player.X >= FlameLadder.X - 8)) | ((Flame.Width > 0) & (Player.X <= FlameLadder.X + 8))"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Flame is descending a ladder."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Flame",
							"sid": 615848792172738,
							"parameters": {
								"instance-variable": "descendingLadder",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Disable collision with geometry."
						},
						{
							"id": "set-solid-collision-filter",
							"objectClass": "Flame",
							"sid": 449259945905594,
							"parameters": {
								"mode": "exclusive",
								"tags": "\"geometry\""
							}
						},
						{
							"type": "comment",
							"text": "Wait a little."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 733224714009185,
							"parameters": {
								"seconds": "0.35",
								"use-timescale": true
							}
						},
						{
							"type": "comment",
							"text": "Mirror."
						},
						{
							"id": "set-width",
							"objectClass": "Flame",
							"sid": 979206629106122,
							"parameters": {
								"width": "Self.Width > 0 ? -Self.ImageWidth : Self.ImageWidth"
							}
						},
						{
							"type": "comment",
							"text": "Restore normal collision setup."
						},
						{
							"id": "set-solid-collision-filter",
							"objectClass": "Flame",
							"sid": 924020378820452,
							"parameters": {
								"mode": "inclusive",
								"tags": "\"geometry\""
							}
						},
						{
							"id": "set-solid-collision-filter",
							"objectClass": "Flame",
							"sid": 983071042871347,
							"parameters": {
								"mode": "exclusive",
								"tags": "\"limit\""
							}
						},
						{
							"type": "comment",
							"text": "Flame is no longer descending a ladder."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Flame",
							"sid": 477494576338661,
							"parameters": {
								"instance-variable": "descendingLadder",
								"value": "false"
							}
						}
					],
					"sid": 572645649869427
				},
				{
					"eventType": "comment",
					"text": "Animate flame."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 638302281171480,
							"parameters": {
								"object": "Flame"
							}
						},
						{
							"id": "is-moving",
							"objectClass": "Flame",
							"sid": 376316073405241,
							"behaviorType": "Platform"
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Flame",
							"sid": 723652010729298,
							"parameters": {
								"animation": "\"NormalDeath\""
							},
							"isInverted": true
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Flame",
							"sid": 657510696461395,
							"parameters": {
								"animation": "\"SpecialDeath\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 260008616174921,
					"children": [
						{
							"eventType": "comment",
							"text": "Flame is not airborne, so play run animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-floor",
									"objectClass": "Flame",
									"sid": 512507360935616,
									"behaviorType": "Platform"
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 433580600872017,
									"parameters": {
										"group-name": "\"Player Events\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Flame",
									"sid": 423580397398105,
									"parameters": {
										"animation": "Self.TemplateName & \"Run\"",
										"from": "current-frame"
									}
								}
							],
							"sid": 620778992936499
						},
						{
							"eventType": "comment",
							"text": "Flame is airborne. Play fall animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 154910774025545
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Flame",
									"sid": 816079388131786,
									"parameters": {
										"animation": "Self.TemplateName & \"Fall\"",
										"from": "current-frame"
									}
								}
							],
							"sid": 587014101008554
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If a flame collides with the player, start game over procedure."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Flame",
							"sid": 306989530650781,
							"parameters": {
								"object": "Player"
							}
						},
						{
							"id": "collisions-enabled",
							"objectClass": "Player",
							"sid": 845983582833606
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Stop all dragon timers."
						},
						{
							"id": "stop-all-timers",
							"objectClass": "Dragon",
							"sid": 194802970993581,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Disable all player collisions."
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "Player",
							"sid": 990471655190467,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Temporarily disable gravity."
						},
						{
							"id": "set-gravity",
							"objectClass": "Player",
							"sid": 986964098785123,
							"behaviorType": "Platform",
							"parameters": {
								"gravity": "0"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 839510191885747,
							"behaviorType": "Platform",
							"parameters": {
								"vector-y": "0"
							}
						},
						{
							"type": "comment",
							"text": "Play jump animation."
						},
						{
							"customAction": "Choose Animation",
							"objectClass": "Player",
							"sid": 691261473216612,
							"parameters": [
								"\"Jump\"",
								false
							]
						},
						{
							"type": "comment",
							"text": "Disable all player events."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 458589827051170,
							"parameters": {
								"group-name": "\"Player Events\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Briefly move the player up."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Player",
							"sid": 416129131942533,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PlayerDeath\"",
								"property": "offsetY",
								"end-value": "Self.Y - 64",
								"time": "0.35",
								"ease": "easeoutquad",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Wait a little, then turn gravity on and make the player fall."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 270701418091114
						},
						{
							"id": "set-gravity",
							"objectClass": "Player",
							"sid": 732986493782919,
							"behaviorType": "Platform",
							"parameters": {
								"gravity": "GRAVITY"
							}
						}
					],
					"sid": 448991689700731
				},
				{
					"eventType": "comment",
					"text": "Game over."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-y",
							"objectClass": "Player",
							"sid": 493504105789600,
							"parameters": {
								"comparison": 4,
								"y-co-ordinate": "LayoutHeight"
							}
						},
						{
							"id": "collisions-enabled",
							"objectClass": "Player",
							"sid": 412451523362005,
							"isInverted": true
						},
						{
							"id": "is-any-playing",
							"objectClass": "TimelineController",
							"sid": 489404469250535,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "play-timeline",
							"objectClass": "TimelineController",
							"sid": 445949239983443,
							"parameters": {
								"timeline": "GameOver",
								"tags": "\"\""
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 342908937942243
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 709651288307295
						}
					],
					"sid": 706861020556488
				}
			],
			"sid": 987278931107677
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Misc",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Move clouds."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 729675902284896
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Clouds",
							"sid": 880626813001093,
							"parameters": {
								"offset-x": "Self.ImageOffsetX - CLOUDS_SPEED * dt"
							}
						}
					],
					"sid": 745687367732054
				},
				{
					"eventType": "comment",
					"text": "Create water drips."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Stalactite",
							"sid": 174407622656566
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Stalactite",
							"sid": 812327067606469,
							"parameters": {
								"object": "StalactiteParticles",
								"layer": "\"World\"",
								"image-point": "\"drip\"",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "add-child",
							"objectClass": "Stalactite",
							"sid": 956704137821732,
							"parameters": {
								"child": "StalactiteParticles",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": true,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "StalactiteParticles",
							"sid": 334357818272614,
							"parameters": {
								"angle": "90"
							}
						}
					],
					"sid": 594192393812498
				}
			],
			"sid": 481243242814956
		}
	],
	"sid": 307462152277704
}