{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nFelipe Vaiano Calderan - Programmer\nTwitter: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Constants"
		},
		{
			"eventType": "variable",
			"name": "GRAVITY",
			"type": "number",
			"initialValue": "5",
			"comment": "Gravity constant",
			"isStatic": false,
			"isConstant": true,
			"sid": 226520264629508
		},
		{
			"eventType": "variable",
			"name": "PROJECTILESPEED",
			"type": "number",
			"initialValue": "5",
			"comment": "Speed of Portal projectiles",
			"isStatic": false,
			"isConstant": true,
			"sid": 480829615195334
		},
		{
			"eventType": "variable",
			"name": "JUMPSTRENGTH",
			"type": "number",
			"initialValue": "2",
			"comment": "Player jump initial acceleration",
			"isStatic": false,
			"isConstant": true,
			"sid": 882045955194164
		},
		{
			"eventType": "variable",
			"name": "PORTALHEIGHT",
			"type": "number",
			"initialValue": "32",
			"comment": "How tall a horizontal portal is",
			"isStatic": false,
			"isConstant": true,
			"sid": 338635357466882
		},
		{
			"eventType": "variable",
			"name": "PORTALCOOLDOWN",
			"type": "number",
			"initialValue": "3",
			"comment": "How much time it takes to a portal to be ready again",
			"isStatic": false,
			"isConstant": true,
			"sid": 554250814264516
		},
		{
			"eventType": "variable",
			"name": "PORTALMINDISTANCE",
			"type": "number",
			"initialValue": "24",
			"comment": "Minimum distance between two portals, before they are destroyed",
			"isStatic": false,
			"isConstant": true,
			"sid": 134504574478007
		},
		{
			"eventType": "variable",
			"name": "PROJECTILELIFETIME",
			"type": "number",
			"initialValue": "2",
			"comment": "How many seconds a projectile survives",
			"isStatic": false,
			"isConstant": true,
			"sid": 149098194246155
		},
		{
			"eventType": "comment",
			"text": "Global variables"
		},
		{
			"eventType": "variable",
			"name": "zSpeed",
			"type": "number",
			"initialValue": "0",
			"comment": "Player speed on the Z axis",
			"isStatic": false,
			"isConstant": false,
			"sid": 978267377107228
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Ticking",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 792961305905841
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Set camera position"
						},
						{
							"id": "set-position",
							"objectClass": "3DCamera",
							"sid": 120275664609662,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y",
								"z": "Player.ZElevation + Player.viewHeight",
								"which": "camera"
							}
						},
						{
							"type": "comment",
							"text": "Update player speed in the Z axis"
						},
						{
							"id": "subtract-from-eventvar",
							"objectClass": "System",
							"sid": 545059975603114,
							"parameters": {
								"variable": "zSpeed",
								"value": "GRAVITY * dt"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 530642213034487,
							"parameters": {
								"z": "Self.ZElevation + zSpeed"
							}
						},
						{
							"type": "comment",
							"text": "Move projectiles"
						},
						{
							"id": "set-x",
							"objectClass": "ProjectileA",
							"sid": 315776517061867,
							"parameters": {
								"x": "Self.X + cos(Self.xAngle) * PROJECTILESPEED * 60 * dt"
							}
						},
						{
							"id": "set-y",
							"objectClass": "ProjectileA",
							"sid": 406218604838643,
							"parameters": {
								"y": "Self.Y + sin(Self.xAngle) * PROJECTILESPEED  * 60 * dt"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 293834699613579,
							"parameters": {
								"z": "Self.ZElevation + cos(Self.yAngle) * PROJECTILESPEED  * 60 * dt"
							}
						},
						{
							"id": "set-x",
							"objectClass": "ProjectileB",
							"sid": 957762850133252,
							"parameters": {
								"x": "Self.X + cos(Self.xAngle) * PROJECTILESPEED * 60 * dt"
							}
						},
						{
							"id": "set-y",
							"objectClass": "ProjectileB",
							"sid": 789017384572331,
							"parameters": {
								"y": "Self.Y + sin(Self.xAngle) * PROJECTILESPEED  * 60 * dt"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 513456925945711,
							"parameters": {
								"z": "Self.ZElevation + cos(Self.yAngle) * PROJECTILESPEED  * 60 * dt"
							}
						}
					],
					"sid": 371023035836315,
					"children": [
						{
							"eventType": "comment",
							"text": "If portals overlap, destroy them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 888961927327294,
									"parameters": {
										"value": "PortalHA.Count > 0 & PortalHB.Count > 0 & sqrt((PortalHA.X - PortalHB.X)^2 + (PortalHA.Y - PortalHB.Y)^2 + (PortalHA.ZElevation - PortalHB.ZElevation)^2) < PORTALMINDISTANCE"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 119387988552144,
									"parameters": {
										"value": "PortalHA.Count > 0 & PortalVB.Count > 0 & sqrt((PortalHA.X - PortalVB.X)^2 + (PortalHA.Y - PortalVB.Y)^2 + (PortalHA.ZElevation - PortalVB.ZElevation)^2) < PORTALMINDISTANCE"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 142679970135118,
									"parameters": {
										"value": "PortalVA.Count > 0 & PortalHB.Count > 0 & sqrt((PortalVA.X - PortalHB.X)^2 + (PortalVA.Y - PortalHB.Y)^2 + (PortalVA.ZElevation - PortalHB.ZElevation)^2) < PORTALMINDISTANCE"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 986046638800240,
									"parameters": {
										"value": "PortalVA.Count > 0 & PortalVB.Count > 0 & sqrt((PortalVA.X - PortalVB.X)^2 + (PortalVA.Y - PortalVB.Y)^2 + (PortalVA.ZElevation - PortalVB.ZElevation)^2) < PORTALMINDISTANCE"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "PortalHA",
									"sid": 108852359348599
								},
								{
									"id": "destroy",
									"objectClass": "PortalHB",
									"sid": 847656974525851
								},
								{
									"id": "destroy",
									"objectClass": "PortalVA",
									"sid": 396280818943587
								},
								{
									"id": "destroy",
									"objectClass": "PortalVB",
									"sid": 539845239771462
								}
							],
							"sid": 317363245245460,
							"isOrBlock": true
						}
					]
				}
			],
			"sid": 402167720624081
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera and Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check if a directional button is being pressed"
				},
				{
					"eventType": "variable",
					"name": "inputLeft",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 218746019036022
				},
				{
					"eventType": "variable",
					"name": "inputRight",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 410783546446752
				},
				{
					"eventType": "variable",
					"name": "inputUp",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 765356132371718
				},
				{
					"eventType": "variable",
					"name": "inputDown",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 547631599719342
				},
				{
					"eventType": "comment",
					"text": "Direction variables"
				},
				{
					"eventType": "variable",
					"name": "horizontalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 158876686755986
				},
				{
					"eventType": "variable",
					"name": "verticalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 918936468013755
				},
				{
					"eventType": "comment",
					"text": "The angle where both axis are pointing towards"
				},
				{
					"eventType": "variable",
					"name": "axisAngle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 345006133853140
				},
				{
					"eventType": "comment",
					"text": "Position the camera inside the player and update its position every frame"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 203913095280151
						}
					],
					"actions": [
						{
							"id": "look-parallel-to-layout",
							"objectClass": "3DCamera",
							"sid": 279968644536049,
							"parameters": {
								"cam-x": "Player.X",
								"cam-y": "Player.Y",
								"cam-z": "Player.ZElevation + 20",
								"look-angle": "Player.Angle"
							}
						}
					],
					"sid": 814954292838045
				},
				{
					"eventType": "comment",
					"text": "Update camera according to mouse movement"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-movement",
							"objectClass": "Mouse",
							"sid": 188432347953522
						}
					],
					"actions": [
						{
							"id": "rotate-camera",
							"objectClass": "3DCamera",
							"sid": 605238713947034,
							"parameters": {
								"rotate-x": "Mouse.MovementX / 12",
								"rotate-y": "Mouse.MovementY / 12",
								"min-polar-angle": "60",
								"max-polar-angle": "120"
							}
						}
					],
					"sid": 551939080742456
				},
				{
					"eventType": "comment",
					"text": "Request mouse lock if the screen is clicked anywhere"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 287620123342571
						}
					],
					"actions": [],
					"sid": 380371913048419,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-pointer-lock",
									"objectClass": "Mouse",
									"sid": 197234591072854,
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "request-pointer-lock",
									"objectClass": "Mouse",
									"sid": 996017838399293
								}
							],
							"sid": 547103635977604
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update the input variables"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 183192702823389,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 113598055872196,
							"parameters": {
								"variable": "inputLeft",
								"value": "1"
							}
						}
					],
					"sid": 968964462339070
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 220472439318365,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 785386936830360,
							"parameters": {
								"variable": "inputRight",
								"value": "1"
							}
						}
					],
					"sid": 331934645528580
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 695097075021468,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 426127938963807,
							"parameters": {
								"variable": "inputUp",
								"value": "1"
							}
						}
					],
					"sid": 655915846981238
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 522124327744939,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 411634019211688,
							"parameters": {
								"variable": "inputDown",
								"value": "1"
							}
						}
					],
					"sid": 593976984397989
				},
				{
					"eventType": "comment",
					"text": "Update direction variables according to the input variables"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 343544410476324
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 529438442151707,
							"parameters": {
								"variable": "horizontalAxis",
								"value": "inputRight - inputLeft"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 330106486264163,
							"parameters": {
								"variable": "verticalAxis",
								"value": "inputDown - inputUp"
							}
						}
					],
					"sid": 368616131516808
				},
				{
					"eventType": "comment",
					"text": "If the player wants to move to a certain direction, set the AxisAngle and move the player through the 8Direction behavior"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 630108828675566,
							"parameters": {
								"value": "horizontalAxis <> 0 | verticalAxis <> 0"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 498673930565554,
							"parameters": {
								"variable": "axisAngle",
								"value": "((angle(0, 0, horizontalAxis, verticalAxis) + 360) % 360) + 90"
							}
						},
						{
							"id": "set-vector-x",
							"objectClass": "Player",
							"sid": 163160334981225,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-x": "cos(3DCamera.CameraXRotation + axisAngle) * Self.8Direction.MaxSpeed"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 124941389779804,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "sin(3DCamera.CameraXRotation + axisAngle) * Self.8Direction.MaxSpeed"
							}
						},
						{
							"id": "set-period",
							"objectClass": "PortalGun",
							"sid": 520245894940384,
							"behaviorType": "SineH",
							"parameters": {
								"period": "2"
							}
						},
						{
							"id": "set-period",
							"objectClass": "PortalGun",
							"sid": 470783125155615,
							"behaviorType": "SineV",
							"parameters": {
								"period": "1"
							}
						}
					],
					"sid": 123278027569241
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 652018060416837
						}
					],
					"actions": [
						{
							"id": "set-vector-x",
							"objectClass": "Player",
							"sid": 791067456816068,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-x": "0"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 152279822873091,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "0"
							}
						},
						{
							"id": "set-period",
							"objectClass": "PortalGun",
							"sid": 545438286054782,
							"behaviorType": "SineH",
							"parameters": {
								"period": "8"
							}
						},
						{
							"id": "set-period",
							"objectClass": "PortalGun",
							"sid": 905927568420389,
							"behaviorType": "SineV",
							"parameters": {
								"period": "4"
							}
						}
					],
					"sid": 581442241558886
				},
				{
					"eventType": "comment",
					"text": "Collide with ground"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 488500511906964,
							"parameters": {
								"object": "Ground"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 627729879731627,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Ground.ZElevation"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 422432585697319,
							"parameters": {
								"variable": "zSpeed",
								"value": "0"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 763680667463418,
							"parameters": {
								"z": "Ground.ZElevation"
							}
						}
					],
					"sid": 338543460872161
				},
				{
					"eventType": "comment",
					"text": "Collide with ceiling"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 283902216819870,
							"parameters": {
								"object": "Ceiling"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 412787162210155,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Ceiling.ZElevation - Player.viewHeight - 1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 545899350242166,
							"parameters": {
								"variable": "zSpeed",
								"value": "0"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Player",
							"sid": 682966558872231,
							"parameters": {
								"z": "Ceiling.ZElevation - Player.viewHeight - 1"
							}
						}
					],
					"sid": 636202490856391
				}
			],
			"sid": 695782946403557
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Portal",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Go to an A type portal"
				},
				{
					"functionName": "gotoA",
					"functionCopyPicked": false,
					"functionDescription": "Go to an A type portal",
					"functionCategory": "Portal",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 609652345899745,
					"children": [
						{
							"eventType": "comment",
							"text": "Go to Horizontal portal"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 758150302509129,
									"parameters": {
										"value": "PortalHA.Count > 0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play Swirl screen distortion"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 378654255405340,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SwirlAngle\"",
										"start-value": "0",
										"end-value": "100",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Set player position and camera angle"
								},
								{
									"id": "set-position",
									"objectClass": "Player",
									"sid": 693734701485073,
									"parameters": {
										"x": "PortalHA.X + cos(PortalHA.Angle) * 30",
										"y": "PortalHA.Y + sin(PortalHA.Angle) * 30"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Player",
									"sid": 639617978829605,
									"parameters": {
										"z": "PortalHA.ZElevation"
									}
								},
								{
									"id": "rotate-camera",
									"objectClass": "3DCamera",
									"sid": 194564214129641,
									"parameters": {
										"rotate-x": "(PortalHA.Angle-3DCamera.CameraXRotation + 180) % 360 - 180",
										"rotate-y": "0",
										"min-polar-angle": "20",
										"max-polar-angle": "160"
									}
								}
							],
							"sid": 991401303579550
						},
						{
							"eventType": "comment",
							"text": "Go to Vertical portal"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 334543116097762
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 484336214490304,
									"parameters": {
										"value": "PortalVA.Count > 0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play Swirl screen distortion"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 470400801620451,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SwirlAngle\"",
										"start-value": "0",
										"end-value": "100",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								}
							],
							"sid": 698868269667171,
							"children": [
								{
									"eventType": "comment",
									"text": "Vertical portal is on the ceiling"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "PortalVA",
											"sid": 833768975512889,
											"parameters": {
												"instance-variable": "isOnCeiling"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set player position"
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 126338095252949,
											"parameters": {
												"x": "PortalVA.X",
												"y": "PortalVA.Y"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "Player",
											"sid": 583223332366865,
											"parameters": {
												"z": "PortalVA.ZElevation - Player.viewHeight - 1"
											}
										}
									],
									"sid": 891390918946490
								},
								{
									"eventType": "comment",
									"text": "Vertical portal is on the floor"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 234740775309469
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set player position"
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 202635466293480,
											"parameters": {
												"x": "PortalVA.X + cos(PortalVA.Angle) * 10",
												"y": "PortalVA.Y + sin(PortalVA.Angle) * 10"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "Player",
											"sid": 218014724378949,
											"parameters": {
												"z": "PortalVA.ZElevation + Player.viewHeight + 1"
											}
										},
										{
											"type": "comment",
											"text": "Make the player jump out of the portal"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 978288568640054,
											"parameters": {
												"variable": "zSpeed",
												"value": "JUMPSTRENGTH"
											}
										}
									],
									"sid": 289469304168899
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Go to a B type portal"
				},
				{
					"functionName": "gotoB",
					"functionCopyPicked": false,
					"functionDescription": "Go to a B type portal",
					"functionCategory": "Portal",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 378487744501177,
					"children": [
						{
							"eventType": "comment",
							"text": "Go to Horizontal portal"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 222037587998655,
									"parameters": {
										"value": "PortalHB.Count > 0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play Swirl screen distortion"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 158297920401235,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SwirlAngle\"",
										"start-value": "0",
										"end-value": "100",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Set player position and camera angle"
								},
								{
									"id": "set-position",
									"objectClass": "Player",
									"sid": 303645230970856,
									"parameters": {
										"x": "PortalHB.X + cos(PortalHB.Angle) * 10",
										"y": "PortalHB.Y + sin(PortalHB.Angle) * 10"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Player",
									"sid": 686940521374504,
									"parameters": {
										"z": "PortalHB.ZElevation"
									}
								},
								{
									"id": "rotate-camera",
									"objectClass": "3DCamera",
									"sid": 292427508740071,
									"parameters": {
										"rotate-x": "(PortalHB.Angle-3DCamera.CameraXRotation + 180) % 360 - 180",
										"rotate-y": "0",
										"min-polar-angle": "20",
										"max-polar-angle": "160"
									}
								}
							],
							"sid": 732472019852015
						},
						{
							"eventType": "comment",
							"text": "Go to Vertical portal"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 142488976059616
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 960362220559023,
									"parameters": {
										"value": "PortalVB.Count > 0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play Swirl screen distortion"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 730794738747889,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SwirlAngle\"",
										"start-value": "0",
										"end-value": "100",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								}
							],
							"sid": 979767627869571,
							"children": [
								{
									"eventType": "comment",
									"text": "Vertical portal is on the ceiling"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "PortalVB",
											"sid": 110125723350765,
											"parameters": {
												"instance-variable": "isOnCeiling"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set player position"
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 513111935124723,
											"parameters": {
												"x": "PortalVB.X",
												"y": "PortalVB.Y"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "Player",
											"sid": 558638386993923,
											"parameters": {
												"z": "PortalVB.ZElevation - Player.viewHeight - 1"
											}
										}
									],
									"sid": 539509074484246
								},
								{
									"eventType": "comment",
									"text": "Vertical portal is on the floor"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 284342911496046
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set player position"
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 891839355033841,
											"parameters": {
												"x": "PortalVB.X + cos(PortalVB.Angle) * 10",
												"y": "PortalVB.Y + sin(PortalVB.Angle) * 10"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "Player",
											"sid": 878733827534671,
											"parameters": {
												"z": "PortalVB.ZElevation + Player.viewHeight + 1"
											}
										},
										{
											"type": "comment",
											"text": "Make the player jump out of the portal"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 360235442475635,
											"parameters": {
												"variable": "zSpeed",
												"value": "JUMPSTRENGTH"
											}
										}
									],
									"sid": 967946523556155
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Collide with horizontal A portal"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 685689567919225,
							"parameters": {
								"object": "PortalHA"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 384881105504639,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalHA.ZElevation - Player.viewHeight"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 769945076664345,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalHA.ZElevation + PortalHA.ZHeight"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 236006231185237,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"portalcooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Go to B portal"
						},
						{
							"callFunction": "gotoB",
							"sid": 294885421296787
						},
						{
							"type": "comment",
							"text": "Start cooldown to use this portal again"
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 644486912144807,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PORTALCOOLDOWN",
								"type": "once",
								"tag": "\"portalcooldown\""
							}
						}
					],
					"sid": 767281054645934
				},
				{
					"eventType": "comment",
					"text": "Collide with horizontal B portal"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 786787192791083,
							"parameters": {
								"object": "PortalHB"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 325415870102061,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalHB.ZElevation - Player.viewHeight"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 122684169575860,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalHB.ZElevation + PortalHB.ZHeight"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 584614112608475,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"portalcooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Go to A portal"
						},
						{
							"callFunction": "gotoA",
							"sid": 298027679298519
						},
						{
							"type": "comment",
							"text": "Start cooldown to use this portal again"
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 597115115712898,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PORTALCOOLDOWN",
								"type": "once",
								"tag": "\"portalcooldown\""
							}
						}
					],
					"sid": 674106789061942
				},
				{
					"eventType": "comment",
					"text": "Collide with vertical A portal"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 820948918395934,
							"parameters": {
								"object": "PortalVA"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 305627008717082,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalVA.ZElevation - Player.viewHeight"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 328311491727579,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalVA.ZElevation + PortalVA.ZHeight"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "PortalVA",
							"sid": 730873953656532,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"cooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Go to B portal"
						},
						{
							"callFunction": "gotoB",
							"sid": 570043898588740
						},
						{
							"type": "comment",
							"text": "Start cooldown to use this portal again"
						},
						{
							"id": "start-timer",
							"objectClass": "PortalVA",
							"sid": 172574537005282,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PORTALCOOLDOWN",
								"type": "once",
								"tag": "\"cooldown\""
							}
						}
					],
					"sid": 629809408916730
				},
				{
					"eventType": "comment",
					"text": "Collide with vertical B portal"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 309977265435987,
							"parameters": {
								"object": "PortalVB"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 560663378368849,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalVB.ZElevation - Player.viewHeight"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 936818755967129,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalVB.ZElevation + PortalVB.ZHeight"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "PortalVB",
							"sid": 952347834651675,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"cooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Go to A portal"
						},
						{
							"callFunction": "gotoA",
							"sid": 824942537979478
						},
						{
							"type": "comment",
							"text": "Start cooldown to use this portal again"
						},
						{
							"id": "start-timer",
							"objectClass": "PortalVB",
							"sid": 314756623884979,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "3",
								"type": "once",
								"tag": "\"cooldown\""
							}
						}
					],
					"sid": 753275806998986
				},
				{
					"eventType": "comment",
					"text": "Swirl transition animation"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Player",
							"sid": 889453416251664,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SwirlAngle\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 412393066268736,
							"parameters": {
								"layer": "0",
								"effect": "\"Swirl\"",
								"parameter-index": "1",
								"value": "Player.Tween.Value(\"SwirlAngle\")"
							}
						}
					],
					"sid": 423932244522839
				}
			],
			"sid": 964259353233688
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PortalGun",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Launch projectile A"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 959735435931410,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 570902961337007,
							"parameters": {
								"value": "ProjectileA.Count = 0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create the projectile and set its position"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 946497281001735,
							"parameters": {
								"object-to-create": "ProjectileA",
								"layer": "\"Game\"",
								"x": "Player.X",
								"y": "Player.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 605948151074444,
							"parameters": {
								"z": "Player.ZElevation + Player.viewHeight - 4"
							}
						},
						{
							"type": "comment",
							"text": "Set angle according to current camera"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ProjectileA",
							"sid": 970729400463729,
							"parameters": {
								"instance-variable": "xAngle",
								"value": "3DCamera.CameraXRotation"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ProjectileA",
							"sid": 105347323225551,
							"parameters": {
								"instance-variable": "yAngle",
								"value": "3DCamera.CameraYRotation"
							}
						},
						{
							"type": "comment",
							"text": "Change portal gun animation"
						},
						{
							"id": "set-animation",
							"objectClass": "PortalGun",
							"sid": 967467925475896,
							"parameters": {
								"animation": "\"Fire\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Projectile should be destroyed if it does not hit a valid position after a given amount of time"
						},
						{
							"id": "start-timer",
							"objectClass": "ProjectileA",
							"sid": 607182125778803,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PROJECTILELIFETIME",
								"type": "once",
								"tag": "\"TimeToDestroy\""
							}
						}
					],
					"sid": 411553356806344
				},
				{
					"eventType": "comment",
					"text": "Launch projectile B"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 899917528901677,
							"parameters": {
								"mouse-button": "right",
								"click-type": "clicked"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 632535096130168,
							"parameters": {
								"value": "ProjectileB.Count = 0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create the projectile and set its position"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 198144726139992,
							"parameters": {
								"object-to-create": "ProjectileB",
								"layer": "\"Game\"",
								"x": "Player.X",
								"y": "Player.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 998032088451674,
							"parameters": {
								"z": "Player.ZElevation + Player.viewHeight - 4"
							}
						},
						{
							"type": "comment",
							"text": "Set angle according to current camera"
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ProjectileB",
							"sid": 288648384255643,
							"parameters": {
								"instance-variable": "xAngle",
								"value": "3DCamera.CameraXRotation"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "ProjectileB",
							"sid": 372487757898559,
							"parameters": {
								"instance-variable": "yAngle",
								"value": "3DCamera.CameraYRotation"
							}
						},
						{
							"type": "comment",
							"text": "Change portal gun animation"
						},
						{
							"id": "set-animation",
							"objectClass": "PortalGun",
							"sid": 741678638767037,
							"parameters": {
								"animation": "\"Fire\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Projectile should be destroyed if it does not hit a valid position after a given amount of time"
						},
						{
							"id": "start-timer",
							"objectClass": "ProjectileB",
							"sid": 290483266756635,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PROJECTILELIFETIME",
								"type": "once",
								"tag": "\"TimeToDestroy\""
							}
						}
					],
					"sid": 211375988841621
				},
				{
					"eventType": "comment",
					"text": "Destroy projectiles after a specified amount of time"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "ProjectileA",
							"sid": 318070599833632,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"TimeToDestroy\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 182204088160826
						}
					],
					"sid": 421259951299666
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "ProjectileB",
							"sid": 968477493106534,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"TimeToDestroy\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 837102329719036
						}
					],
					"sid": 483799082014101
				},
				{
					"eventType": "comment",
					"text": "Projectiles collide with invalid positions"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 637204563790318,
							"parameters": {
								"object": "Wall"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 982275734516499,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Wall.ZElevation"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 241675947006826,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Wall.ZElevation + Wall.ZHeight"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 870035639910139
						}
					],
					"sid": 878311676004772
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 784206582079113,
							"parameters": {
								"object": "Ground"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 153705466375829,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Ground.ZElevation"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 940614847679538
						}
					],
					"sid": 770113006501010
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 166442177772240,
							"parameters": {
								"object": "Ceiling"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 155322520763178,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Ceiling.ZElevation"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 432361640569024
						}
					],
					"sid": 114809240925240
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 439607170268856,
							"parameters": {
								"object": "Wall"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 353021072530001,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Wall.ZElevation"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 900877192489572,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Wall.ZElevation + Wall.ZHeight"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 383191411838150
						}
					],
					"sid": 821941955996409
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 332026163614274,
							"parameters": {
								"object": "Ground"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 153410391304816,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "Ground.ZElevation"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 175909231705797
						}
					],
					"sid": 303862014784640
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 571265350203652,
							"parameters": {
								"object": "Ceiling"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 248004882795405,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "Ceiling.ZElevation"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 290705385198756
						}
					],
					"sid": 648561562702880
				},
				{
					"eventType": "comment",
					"text": "Projectile of type A collides with wall"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 786717371392706,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 638626001624820,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"wall\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 534497469236447,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalCollider.ZElevation"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 674351247441564,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalCollider.ZElevation + PortalCollider.ZHeight"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous A type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHA",
							"sid": 571119664414280
						},
						{
							"id": "destroy",
							"objectClass": "PortalVA",
							"sid": 731238977070201
						},
						{
							"type": "comment",
							"text": "Create a new A type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 303272794116014,
							"parameters": {
								"object-to-create": "PortalHA",
								"layer": "\"Game\"",
								"x": "ProjectileA.X - cos(PortalCollider.angle + 90) * 3",
								"y": "ProjectileA.Y - sin(PortalCollider.angle + 90) * 3",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PortalHA",
							"sid": 667777424155050,
							"parameters": {
								"angle": "PortalCollider.Angle + 90"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalHA",
							"sid": 127237642190239,
							"parameters": {
								"z": "ProjectileA.ZElevation - Self.ZHeight/2"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 750315279784562
						}
					],
					"sid": 134620202245854
				},
				{
					"eventType": "comment",
					"text": "Projectile of type B collides with wall"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 589230921841452,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 369219467218064,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"wall\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 269892698003016,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalCollider.ZElevation"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 817865312197567,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalCollider.ZElevation + PortalCollider.ZHeight"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous B type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHB",
							"sid": 146760263368087
						},
						{
							"id": "destroy",
							"objectClass": "PortalVB",
							"sid": 275383952456264
						},
						{
							"type": "comment",
							"text": "Create a new B type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 950648379724335,
							"parameters": {
								"object-to-create": "PortalHB",
								"layer": "\"Game\"",
								"x": "ProjectileB.X - cos(PortalCollider.angle + 90) * 3",
								"y": "ProjectileB.Y - sin(PortalCollider.angle + 90) * 3",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "PortalHB",
							"sid": 925646554099206,
							"parameters": {
								"angle": "PortalCollider.Angle + 90"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalHB",
							"sid": 552415311385848,
							"parameters": {
								"z": "ProjectileB.ZElevation - Self.ZHeight/2"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 875242860699383
						}
					],
					"sid": 407233087019633
				},
				{
					"eventType": "comment",
					"text": "Projectile of type A collides with the ground"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 513104742556344,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 790231183460062,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"ground\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 445578905263814,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalCollider.ZElevation"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous A type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHA",
							"sid": 145385106475924
						},
						{
							"id": "destroy",
							"objectClass": "PortalVA",
							"sid": 848189944484223
						},
						{
							"type": "comment",
							"text": "Create a new A type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 897017348011138,
							"parameters": {
								"object-to-create": "PortalVA",
								"layer": "\"Game\"",
								"x": "ProjectileA.X",
								"y": "ProjectileA.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalVA",
							"sid": 120745596273676,
							"parameters": {
								"z": "PortalCollider.ZElevation - 5"
							}
						},
						{
							"type": "comment",
							"text": "Inform that the portal is not on the ceiling"
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PortalVA",
							"sid": 897950686419511,
							"parameters": {
								"instance-variable": "isOnCeiling",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 652493947530668
						}
					],
					"sid": 751370214675877
				},
				{
					"eventType": "comment",
					"text": "Projectile of type B collides with the ground"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 266965119184174,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 629294119841779,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"ground\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 207640405620231,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "PortalCollider.ZElevation"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous B type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHB",
							"sid": 436584019708445
						},
						{
							"id": "destroy",
							"objectClass": "PortalVB",
							"sid": 891798496160601
						},
						{
							"type": "comment",
							"text": "Create a new B type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 122992994841163,
							"parameters": {
								"object-to-create": "PortalVB",
								"layer": "\"Game\"",
								"x": "ProjectileB.X",
								"y": "ProjectileB.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalVB",
							"sid": 132187435695477,
							"parameters": {
								"z": "PortalCollider.ZElevation - 5"
							}
						},
						{
							"type": "comment",
							"text": "Inform that the portal is not on the ceiling"
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PortalVB",
							"sid": 260738718583240,
							"parameters": {
								"instance-variable": "isOnCeiling",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 654639063348145
						}
					],
					"sid": 816575973572039
				},
				{
					"eventType": "comment",
					"text": "Projectile of type A collides with the ceiling"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileA",
							"sid": 861711310658224,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 897071963483666,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"ceiling\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileA",
							"sid": 979841418438264,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalCollider.ZElevation"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous A type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHA",
							"sid": 942046325915141
						},
						{
							"id": "destroy",
							"objectClass": "PortalVA",
							"sid": 552732180265107
						},
						{
							"type": "comment",
							"text": "Create a new A type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 917259563518015,
							"parameters": {
								"object-to-create": "PortalVA",
								"layer": "\"Game\"",
								"x": "ProjectileA.X",
								"y": "ProjectileA.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalVA",
							"sid": 544559561993702,
							"parameters": {
								"z": "PortalCollider.ZElevation"
							}
						},
						{
							"type": "comment",
							"text": "Inform that the portal is on the ceiling"
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PortalVA",
							"sid": 445745830795735,
							"parameters": {
								"instance-variable": "isOnCeiling",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileA",
							"sid": 307101139571429
						}
					],
					"sid": 869187964215413
				},
				{
					"eventType": "comment",
					"text": "Projectile of type B collides with the ceiling"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "ProjectileB",
							"sid": 850927776090114,
							"parameters": {
								"object": "PortalCollider"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "PortalCollider",
							"sid": 444318854546802,
							"parameters": {
								"instance-variable": "collisionMode",
								"comparison": 0,
								"value": "\"ceiling\""
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "ProjectileB",
							"sid": 205946253538677,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "PortalCollider.ZElevation"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy previous B type portals"
						},
						{
							"id": "destroy",
							"objectClass": "PortalHB",
							"sid": 467875178031889
						},
						{
							"id": "destroy",
							"objectClass": "PortalVB",
							"sid": 864487430418860
						},
						{
							"type": "comment",
							"text": "Create a new B type portal where the projectile hit, then set its position and rotation"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 776613538484611,
							"parameters": {
								"object-to-create": "PortalVB",
								"layer": "\"Game\"",
								"x": "ProjectileB.X",
								"y": "ProjectileB.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PortalVB",
							"sid": 415027904869610,
							"parameters": {
								"z": "PortalCollider.ZElevation"
							}
						},
						{
							"type": "comment",
							"text": "Inform that the portal is on the ceiling"
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PortalVB",
							"sid": 235112238942651,
							"parameters": {
								"instance-variable": "isOnCeiling",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Destroy projectile"
						},
						{
							"id": "destroy",
							"objectClass": "ProjectileB",
							"sid": 876993914911125
						}
					],
					"sid": 722868591313325
				}
			],
			"sid": 778537224755778
		}
	],
	"sid": 192595622944988
}