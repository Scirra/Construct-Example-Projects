{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Setup the player by adding it graphics to the collider, making them stick together all the time."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphics",
									"sid": 726446193469204
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 233721839706231,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "PlayerCollision",
									"sid": 755902096522708,
									"parameters": {
										"child": "PlayerGraphics",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 620030427284019
						}
					],
					"sid": 834401757478075
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerControls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Make the player move left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 988429450907790,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 927828417992411,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-left"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 323350529160284,
									"behaviorType": "TileMovement",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 697627904961409,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player move right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 248379655219596,
									"parameters": {
										"key": 39
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 192358072926983,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-right"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 742851071467032,
									"behaviorType": "TileMovement",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 295139390566193,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player move up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 196697508795330,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 241780313466673,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-up"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 729122849963433,
									"behaviorType": "TileMovement",
									"parameters": {
										"control": "up"
									}
								}
							],
							"sid": 327076373650944,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player move down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 362217031142280,
									"parameters": {
										"key": 40
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 379423777097907,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-down"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 813079930312188,
									"behaviorType": "TileMovement",
									"parameters": {
										"control": "down"
									}
								}
							],
							"sid": 530669745023661,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make each chicken find its way towards the player, while also displaying a \"Follow me!\" text box."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 649586693828199,
									"parameters": {
										"key": 90
									}
								},
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 729452309785062,
									"parameters": {
										"gamepad": "0",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SpawnDialogue",
									"sid": 805911322403516,
									"parameters": [
										"\"FollowMe\""
									]
								}
							],
							"sid": 437112056085167,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 442445477128445,
											"parameters": {
												"object": "Chicken"
											}
										}
									],
									"actions": [
										{
											"callFunction": "CalculateDelay",
											"sid": 385408297218807,
											"parameters": [
												"Chicken.UID"
											]
										}
									],
									"sid": 436550429940241
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make each chicken stop immediately, while also displaying a \"Stop!\" text box."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 564391041444414,
									"parameters": {
										"key": 88
									}
								},
								{
									"id": "on-button-pressed",
									"objectClass": "Gamepad",
									"sid": 807258183556009,
									"parameters": {
										"gamepad": "0",
										"button": "button-b"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SpawnDialogue",
									"sid": 462550679625171,
									"parameters": [
										"\"Stop\""
									]
								}
							],
							"sid": 498287703818832,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 778653839804152,
											"parameters": {
												"object": "Chicken"
											}
										}
									],
									"actions": [
										{
											"callFunction": "Stop",
											"sid": 440330689827043,
											"parameters": [
												"Chicken.UID"
											]
										}
									],
									"sid": 915972502599837
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Display an animated text box on top of the player's head."
						},
						{
							"functionName": "SpawnDialogue",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "Text",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 226895855638184
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Destroy any previous text boxes."
								},
								{
									"id": "destroy",
									"objectClass": "TextBubble",
									"sid": 899838380032910
								},
								{
									"type": "comment",
									"text": "Create a new text box."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerCollision",
									"sid": 495933058304394,
									"parameters": {
										"object": "TextBubble",
										"layer": "\"UI\"",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-y",
									"objectClass": "TextBubble",
									"sid": 427326533162423,
									"parameters": {
										"y": "Self.Y - 10"
									}
								},
								{
									"id": "add-child",
									"objectClass": "PlayerCollision",
									"sid": 729240206021649,
									"parameters": {
										"child": "TextBubble",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 487599587993737,
							"children": [
								{
									"eventType": "comment",
									"text": "Display a \"Follow me!\" or \"Stop!\" text depending on the parameter's content."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 878938171484645,
											"parameters": {
												"variable": "Text",
												"comparison": 0,
												"value": "\"FollowMe\""
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "TextBubble",
											"sid": 185890337486710,
											"parameters": {
												"animation": "\"FollowMe\"",
												"from": "beginning"
											}
										}
									],
									"sid": 133967813735141
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 883775974260663
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 350602023236406,
											"parameters": {
												"variable": "Text",
												"comparison": 0,
												"value": "\"Stop\""
											}
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "TextBubble",
											"sid": 323282013985695,
											"parameters": {
												"animation": "\"Stop\"",
												"from": "beginning"
											}
										}
									],
									"sid": 956208775334375
								},
								{
									"eventType": "comment",
									"text": "Animate the text box size in order to create a more polished result."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-size",
											"objectClass": "TextBubble",
											"sid": 482458549200179,
											"parameters": {
												"width": "0",
												"height": "0"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "TextBubble",
											"sid": 600297851990336,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Grow\"",
												"property": "size",
												"end-x": "Self.ImageWidth",
												"end-y": "Self.ImageHeight",
												"time": "0.25",
												"ease": "easeoutback",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "TextBubble",
											"sid": 859011783578448,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "1.0",
												"type": "once",
												"tag": "\"SelfDestroy\""
											}
										}
									],
									"sid": 582979448946151
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Once the text box animations are over, destroy it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "TextBubble",
									"sid": 263659097733584,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"SelfDestroy\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "TextBubble",
									"sid": 580322305307946,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Shrink\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "0.25",
										"ease": "easeinback",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 467798774052650
						}
					],
					"sid": 173588214150890
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "If the player is moving, store its angle of motion in a local variable, then use it to choose which walking animation should be played next."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "PlayerCollision",
									"sid": 592034684930824,
									"behaviorType": "TileMovement"
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "PlayerGraphics",
									"sid": 457866895734842,
									"parameters": {
										"instance-variable": "AngleOfMotion",
										"value": "round(angle(PlayerCollision.X, PlayerCollision.Y, PlayerCollision.TileMovement.TargetX, PlayerCollision.TileMovement.TargetY) / 90) * 90"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 806974817779258,
									"parameters": {
										"animation": "\"Move\"&Self.AngleOfMotion",
										"from": "beginning"
									}
								}
							],
							"sid": 950867145146678
						},
						{
							"eventType": "comment",
							"text": "However, if the player is not moving, use the local variable to define an idle animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 880918278411605
								},
								{
									"id": "is-moving",
									"objectClass": "PlayerCollision",
									"sid": 656141635797045,
									"behaviorType": "TileMovement",
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 284831519850303,
									"parameters": {
										"animation": "\"Idle\"&Self.AngleOfMotion",
										"from": "beginning"
									}
								}
							],
							"sid": 591698047496101
						}
					],
					"sid": 433730866861011
				}
			],
			"sid": 915969503734933
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Chicken",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "ChickenSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "As soon as a chicken is created store its cell position in two local variables, one for the X position and another for the Y position."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "Chicken",
									"sid": 315177716979996
								}
							],
							"actions": [
								{
									"callFunction": "SetCellPosition",
									"sid": 809591155842035,
									"parameters": [
										"Chicken.UID",
										"Ground.TileToPositionX(Ground.PositionToTileX(Chicken.X))",
										"Ground.TileToPositionY(Ground.PositionToTileY(Chicken.Y))"
									]
								}
							],
							"sid": 248988419041046
						}
					],
					"sid": 850500091036063
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ChickenAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Apply the same technique from the player to find and set the correct animation for each chicken. A \"For each\" loop is required, since there might be multiple instances of the chicken in the scene."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 791618318712722
								}
							],
							"actions": [],
							"sid": 831387661056413,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 296373178358820,
											"parameters": {
												"object": "Chicken"
											}
										}
									],
									"actions": [],
									"sid": 615386364933975,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-moving",
													"objectClass": "Chicken",
													"sid": 526743667793133,
													"behaviorType": "MoveTo"
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Chicken",
													"sid": 938101512575123,
													"parameters": {
														"instance-variable": "AngleOfMotion",
														"value": "round(Self.MoveTo.MovingAngle / 90) * 90"
													}
												},
												{
													"id": "set-animation",
													"objectClass": "Chicken",
													"sid": 811412020981441,
													"parameters": {
														"animation": "\"Move\"&Self.AngleOfMotion",
														"from": "beginning"
													}
												}
											],
											"sid": 604193022859411
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 714736255210681
												},
												{
													"id": "is-moving",
													"objectClass": "Chicken",
													"sid": 180725367702306,
													"behaviorType": "MoveTo",
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "Chicken",
													"sid": 864180903629782,
													"parameters": {
														"animation": "\"Idle\"&Self.AngleOfMotion",
														"from": "beginning"
													}
												}
											],
											"sid": 942638980448613
										}
									]
								}
							]
						}
					],
					"sid": 944411286115901
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "ChickenPathfinding",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Calculate how long it will take for a specific chicken to start moving after being called. This is only applied when a chicken is part of a stack."
						},
						{
							"functionName": "CalculateDelay",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ChickenUID",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 795044091422765
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Chicken",
									"sid": 874620716111984,
									"parameters": {
										"unique-id": "ChickenUID"
									}
								}
							],
							"actions": [],
							"sid": 936159931445657,
							"children": [
								{
									"eventType": "comment",
									"text": "If the chicken doesn't need to wait at all, update its target position and find a patch right away."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Chicken",
											"sid": 357464692521715,
											"parameters": {
												"instance-variable": "NextMoveDelay",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"callFunction": "UpdateTargetPosition",
											"sid": 205901495476866,
											"parameters": [
												"Chicken.UID"
											]
										},
										{
											"callFunction": "FindPath",
											"sid": 224439329027586,
											"parameters": [
												"Chicken.UID"
											]
										}
									],
									"sid": 504271206986140
								},
								{
									"eventType": "comment",
									"text": "However, if the chicken does need to wait, update its target position and start a delay tween animation that will work as a timer."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 150560110985651
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Chicken",
											"sid": 176991940036214,
											"parameters": {
												"instance-variable": "NextMoveDelay",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 550541943634695,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-playing",
													"objectClass": "Chicken",
													"sid": 415030381760895,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Delay\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"callFunction": "UpdateTargetPosition",
													"sid": 275019347061997,
													"parameters": [
														"Chicken.UID"
													]
												},
												{
													"id": "tween-value",
													"objectClass": "Chicken",
													"sid": 957643303302508,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Delay\"",
														"start-value": "0",
														"end-value": "0",
														"time": "Self.NextMoveDelay / 4",
														"ease": "default",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 244016459047523
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Once the the delay timer is over, find a path towards the chicken target."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "Chicken",
									"sid": 162523452748193,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Delay\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "FindPath",
									"sid": 568120693283566,
									"parameters": [
										"Chicken.UID"
									]
								}
							],
							"sid": 574654816626918
						},
						{
							"eventType": "comment",
							"text": "Store the current player position in a chicken's local variables."
						},
						{
							"functionName": "UpdateTargetPosition",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ChickenUID",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 854284196778339
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Chicken",
									"sid": 437172858245680,
									"parameters": {
										"unique-id": "ChickenUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Chicken",
									"sid": 168401296270551,
									"parameters": {
										"instance-variable": "TargetX",
										"value": "PlayerCollision.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Chicken",
									"sid": 642164318084313,
									"parameters": {
										"instance-variable": "TargetY",
										"value": "PlayerCollision.Y"
									}
								}
							],
							"sid": 761693971449878
						},
						{
							"eventType": "comment",
							"text": "Find the path towards the player for a specific chicken, but only if that chicken is not moving already."
						},
						{
							"functionName": "FindPath",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ChickenUID",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 924115703464864
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Chicken",
									"sid": 525912556898665,
									"parameters": {
										"unique-id": "ChickenUID"
									}
								}
							],
							"actions": [],
							"sid": 197388538740912,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 399814412968898,
											"parameters": {
												"first-value": "distance(Chicken.X, Chicken.Y, PlayerCollision.X, PlayerCollision.Y)",
												"comparison": 5,
												"second-value": "8"
											}
										},
										{
											"id": "is-moving",
											"objectClass": "Chicken",
											"sid": 638895830104643,
											"behaviorType": "MoveTo",
											"isInverted": true
										},
										{
											"id": "is-playing",
											"objectClass": "Chicken",
											"sid": 268467984100818,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Snap\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "ClearNodes",
											"sid": 278826502446118,
											"parameters": [
												"ChickenUID"
											]
										},
										{
											"id": "set-position",
											"objectClass": "Chicken",
											"sid": 140625141768671,
											"parameters": {
												"x": "Self.CellX",
												"y": "Self.CellY"
											}
										},
										{
											"id": "find-path",
											"objectClass": "Chicken",
											"sid": 253516375005623,
											"behaviorType": "Pathfinding",
											"parameters": {
												"x": "Self.TargetX",
												"y": "Self.TargetY"
											}
										}
									],
									"sid": 506159662480301
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Stop a specific chicken, but only if it's moving already."
						},
						{
							"functionName": "Stop",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ChickenUID",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 786450188169484
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Chicken",
									"sid": 389028716396217,
									"parameters": {
										"unique-id": "ChickenUID"
									}
								}
							],
							"actions": [],
							"sid": 210372692871269,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "Chicken",
											"sid": 457905913286888,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "Chicken",
											"sid": 595577422594907,
											"behaviorType": "MoveTo"
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Chicken",
											"sid": 532838762568583,
											"parameters": {
												"instance-variable": "NodesLeft",
												"value": "0"
											}
										},
										{
											"type": "comment",
											"text": "Snap the chicken to the closest cell."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Chicken",
											"sid": 834386076630830,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Snap\"",
												"property": "position",
												"end-x": "Ground.TileToPositionX(Ground.PositionToTileX(Self.X))",
												"end-y": "Ground.TileToPositionY(Ground.PositionToTileY(Self.Y))",
												"time": "0.1",
												"ease": "default",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"callFunction": "SetCellPosition",
											"sid": 714953358491956,
											"parameters": [
												"Chicken.UID",
												"Ground.TileToPositionX(Ground.PositionToTileX(Chicken.X))",
												"Ground.TileToPositionY(Ground.PositionToTileY(Chicken.Y))"
											]
										},
										{
											"callFunction": "ClearNodes",
											"sid": 244708157584303,
											"parameters": [
												"Chicken.UID"
											]
										}
									],
									"sid": 755202486142268
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "Chicken",
											"sid": 356994339896435,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Delay\""
											}
										}
									],
									"actions": [
										{
											"id": "stop-tweens",
											"objectClass": "Chicken",
											"sid": 214618445733789,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Delay\""
											}
										}
									],
									"sid": 865974510673539
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "Chicken",
									"sid": 453475503293718,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Snap\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Chicken",
									"sid": 215746375653653,
									"parameters": {
										"instance-variable": "IsMoving",
										"value": "false"
									}
								},
								{
									"callFunction": "StackChickens",
									"sid": 649502916766466
								}
							],
							"sid": 529989892223136
						},
						{
							"eventType": "comment",
							"text": "Clear all nodes (path visual indicators) that are linked to a specific chicken."
						},
						{
							"functionName": "ClearNodes",
							"functionDescription": "",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ChickenUID",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 968912585405330
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 180894322821187,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 551079834406180,
											"parameters": {
												"object": "Node",
												"expression": "Node.UIDofParent",
												"comparison": 0,
												"value": "ChickenUID"
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "Node",
											"sid": 913146082682130
										}
									],
									"sid": 945783265282779
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 952515459446872,
											"parameters": {
												"object": "NodeLine",
												"expression": "NodeLine.UIDofParent",
												"comparison": 0,
												"value": "ChickenUID"
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "NodeLine",
											"sid": 857117203075535
										}
									],
									"sid": 503402055855231
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Once a path is found, create nodes along the way, so the player knows exactly where the chicken will walk on. All nodes are linked to the chicken through local variables, so they can be easily picked later."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-path-found",
									"objectClass": "Chicken",
									"sid": 962958675182090,
									"behaviorType": "Pathfinding"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": ""
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Chicken",
									"sid": 513457032956596,
									"parameters": {
										"instance-variable": "IsMoving",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Create and setup a node."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 975309278567966,
									"parameters": {
										"object-to-create": "Node",
										"layer": "\"Path\"",
										"x": "Chicken.X",
										"y": "Chicken.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Node",
									"sid": 332284919919694,
									"parameters": {
										"instance-variable": "UIDofParent",
										"value": "Chicken.UID"
									}
								},
								{
									"type": "comment",
									"text": "Create and setup a node line."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 263140724890519,
									"parameters": {
										"object-to-create": "NodeLine",
										"layer": "\"Path\"",
										"x": "Chicken.X",
										"y": "Chicken.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "NodeLine",
									"sid": 452079002946250,
									"parameters": {
										"instance-variable": "UIDofParent",
										"value": "Chicken.UID"
									}
								},
								{
									"id": "set-angle-toward-position",
									"objectClass": "NodeLine",
									"sid": 355542861475900,
									"parameters": {
										"x": "Chicken.Pathfinding.NodeXAt(0)",
										"y": "Chicken.Pathfinding.NodeYAt(0)"
									}
								},
								{
									"id": "set-width",
									"objectClass": "NodeLine",
									"sid": 918434489349456,
									"parameters": {
										"width": "distance(Chicken.X, Chicken.Y, Chicken.Pathfinding.NodeXAt(0), Chicken.Pathfinding.NodeYAt(0))"
									}
								},
								{
									"id": "move-to-bottom",
									"objectClass": "NodeLine",
									"sid": 830488936864259
								}
							],
							"sid": 317456942934499,
							"children": [
								{
									"eventType": "comment",
									"text": "The movement is executed by creating a list of waypoints in the \"Move To\" behavior."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 581107407678481,
											"parameters": {
												"count": "Chicken.Pathfinding.NodeCount"
											}
										}
									],
									"actions": [
										{
											"id": "move-to-position",
											"objectClass": "Chicken",
											"sid": 184609076997960,
											"behaviorType": "MoveTo",
											"parameters": {
												"x": "Chicken.Pathfinding.NodeXAt(loopindex)",
												"y": "Chicken.Pathfinding.NodeYAt(loopindex)",
												"mode": "add-waypoint"
											}
										},
										{
											"id": "add-to-instvar",
											"objectClass": "Chicken",
											"sid": 965446344442145,
											"parameters": {
												"instance-variable": "NodesLeft",
												"value": "1"
											}
										},
										{
											"type": "comment",
											"text": "Create and setup a node."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 462405802113165,
											"parameters": {
												"object-to-create": "Node",
												"layer": "\"Path\"",
												"x": "Chicken.Pathfinding.NodeXAt(loopindex)",
												"y": "Chicken.Pathfinding.NodeYAt(loopindex)",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Node",
											"sid": 655232831561992,
											"parameters": {
												"instance-variable": "UIDofParent",
												"value": "Chicken.UID"
											}
										},
										{
											"type": "comment",
											"text": "Create and setup a node line."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 753074380165354,
											"parameters": {
												"object-to-create": "NodeLine",
												"layer": "\"Path\"",
												"x": "Chicken.Pathfinding.NodeXAt(loopindex)",
												"y": "Chicken.Pathfinding.NodeYAt(loopindex)",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "NodeLine",
											"sid": 112420740274764,
											"parameters": {
												"instance-variable": "UIDofParent",
												"value": "Chicken.UID"
											}
										},
										{
											"id": "set-angle-toward-position",
											"objectClass": "NodeLine",
											"sid": 490157707323852,
											"parameters": {
												"x": "Chicken.Pathfinding.NodeXAt(loopindex + 1)",
												"y": "Chicken.Pathfinding.NodeYAt(loopindex + 1)"
											}
										},
										{
											"id": "set-width",
											"objectClass": "NodeLine",
											"sid": 477157096534122,
											"parameters": {
												"width": "distance(Chicken.Pathfinding.NodeXAt(loopindex), Chicken.Pathfinding.NodeYAt(loopindex), Chicken.Pathfinding.NodeXAt(loopindex + 1), Chicken.Pathfinding.NodeYAt(loopindex + 1))"
											}
										},
										{
											"id": "move-to-bottom",
											"objectClass": "NodeLine",
											"sid": 179086485273407
										}
									],
									"sid": 883687641585460,
									"children": [
										{
											"eventType": "comment",
											"text": "Destroy the last node line, since it won't have anywhere to point at."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 860234772577217,
													"parameters": {
														"first-value": "LoopIndex",
														"comparison": 0,
														"second-value": "Chicken.Pathfinding.NodeCount - 1"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "NodeLine",
													"sid": 519790845050869
												}
											],
											"sid": 177087910814626
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Calculate the progress of a chicken by changing the amount of nodes left every time it arrive on a waypoint."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "Chicken",
									"sid": 621732611604957,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [],
							"sid": 946420764989312,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Chicken",
											"sid": 522472534410939,
											"parameters": {
												"instance-variable": "NodesLeft",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "Chicken",
											"sid": 300648918809132,
											"parameters": {
												"instance-variable": "NodesLeft",
												"value": "1"
											}
										}
									],
									"sid": 998273905929655,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Chicken",
													"sid": 974856275362031,
													"parameters": {
														"instance-variable": "NodesLeft",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"callFunction": "ClearNodes",
													"sid": 888718167568824,
													"parameters": [
														"Chicken.UID"
													]
												},
												{
													"callFunction": "SetCellPosition",
													"sid": 929821442126451,
													"parameters": [
														"Chicken.UID",
														"Ground.TileToPositionX(Ground.PositionToTileX(Chicken.X))",
														"Ground.TileToPositionY(Ground.PositionToTileY(Chicken.Y))"
													]
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "Chicken",
													"sid": 302847432295181,
													"parameters": {
														"instance-variable": "IsMoving",
														"value": "false"
													}
												},
												{
													"callFunction": "StackChickens",
													"sid": 775499830147816
												}
											],
											"sid": 713893922726465
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If a chicken is not able to find a path towards the player, simply flash it, so the player knows that something is wrong."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-failed-to-find-path",
									"objectClass": "Chicken",
									"sid": 948075762303565,
									"behaviorType": "Pathfinding"
								}
							],
							"actions": [
								{
									"id": "flash",
									"objectClass": "Chicken",
									"sid": 169314534326898,
									"behaviorType": "Flash",
									"parameters": {
										"on-time": "0.05",
										"off-time": "0.05",
										"duration": "0.5"
									}
								}
							],
							"sid": 235985381299752
						}
					],
					"sid": 439453878375026
				},
				{
					"eventType": "comment",
					"text": "Set new cell positions for a specific chicken based on the values passed."
				},
				{
					"functionName": "SetCellPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ChickenUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 470924962523235
						},
						{
							"name": "NewCellX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 677390841191372
						},
						{
							"name": "NewCellY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 543668409755588
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Chicken",
							"sid": 749453914783620,
							"parameters": {
								"unique-id": "ChickenUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Chicken",
							"sid": 600654592256996,
							"parameters": {
								"instance-variable": "CellX",
								"value": "NewCellX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Chicken",
							"sid": 662960788217242,
							"parameters": {
								"instance-variable": "CellY",
								"value": "NewCellY"
							}
						}
					],
					"sid": 872071920501985
				},
				{
					"eventType": "comment",
					"text": "Loop through all chickens based on their cell position (X and Y) and offset their real position so they look properly stacked instead of perfectly overlapped."
				},
				{
					"functionName": "StackChickens",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 591699223015397,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 595894753245401,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "(LayoutWidth / 16) - 1"
									}
								}
							],
							"actions": [],
							"sid": 538823722952741,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 475247132759308,
											"parameters": {
												"name": "\"Y\"",
												"start-index": "0",
												"end-index": "(LayoutHeight / 16) - 1"
											}
										}
									],
									"actions": [],
									"sid": 376426768334227,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 837399117921859,
													"parameters": {
														"object": "Chicken",
														"expression": "Chicken.CellX",
														"comparison": 0,
														"value": "loopindex(\"X\") * 16 - 8"
													}
												}
											],
											"actions": [],
											"sid": 136822065249620,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-comparison",
															"objectClass": "System",
															"sid": 599327221940985,
															"parameters": {
																"object": "Chicken",
																"expression": "Chicken.CellY",
																"comparison": 0,
																"value": "loopindex(\"Y\") * 16 - 8"
															}
														}
													],
													"actions": [],
													"sid": 104042402069898,
													"children": [
														{
															"eventType": "variable",
															"name": "TotalChickens",
															"type": "number",
															"initialValue": "0",
															"comment": "",
															"isStatic": false,
															"isConstant": false,
															"sid": 810938423326429
														},
														{
															"eventType": "comment",
															"text": "Store the total amount of chickens in a local variable."
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-comparison",
																	"objectClass": "System",
																	"sid": 808927451509272,
																	"parameters": {
																		"object": "Chicken",
																		"expression": "Chicken.IsMoving",
																		"comparison": 0,
																		"value": "0"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 636881116903438,
																	"parameters": {
																		"variable": "TotalChickens",
																		"value": "Chicken.PickedCount"
																	}
																}
															],
															"sid": 761865455573581,
															"children": [
																{
																	"eventType": "comment",
																	"text": "If there's more than one chicken in a single cell, distribute them equally around the cell position and set their next move delay to be equal to the loopindex, making them increasingly longer (0, 1, 2, 3...)."
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 232832161113366,
																			"parameters": {
																				"first-value": "TotalChickens",
																				"comparison": 4,
																				"second-value": "1"
																			}
																		}
																	],
																	"actions": [],
																	"sid": 199793984012860,
																	"children": [
																		{
																			"eventType": "block",
																			"conditions": [
																				{
																					"id": "for-each",
																					"objectClass": "System",
																					"sid": 660028645770615,
																					"parameters": {
																						"object": "Chicken"
																					}
																				}
																			],
																			"actions": [
																				{
																					"id": "set-position",
																					"objectClass": "Chicken",
																					"sid": 978944253649910,
																					"parameters": {
																						"x": "Self.CellX + cos((360 / TotalChickens) * (loopindex + 1)) * 4",
																						"y": "Self.CellY + sin((360 / TotalChickens) * (loopindex + 1)) * 4"
																					}
																				},
																				{
																					"id": "set-instvar-value",
																					"objectClass": "Chicken",
																					"sid": 474878862540655,
																					"parameters": {
																						"instance-variable": "NextMoveDelay",
																						"value": "loopindex"
																					}
																				}
																			],
																			"sid": 190239189817408
																		}
																	]
																},
																{
																	"eventType": "comment",
																	"text": "However, if there's only one chicken in the cell, set the next move delay to be equal to zero, so the chicken don't need to wait in order to start moving."
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 521398893805467,
																			"parameters": {
																				"first-value": "TotalChickens",
																				"comparison": 0,
																				"second-value": "1"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-instvar-value",
																			"objectClass": "Chicken",
																			"sid": 840885655403494,
																			"parameters": {
																				"instance-variable": "NextMoveDelay",
																				"value": "0"
																			}
																		}
																	],
																	"sid": 341432392412416
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 332600320511182
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Fox",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup each fox by moving them to their next position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Fox",
							"sid": 734831428950450
						}
					],
					"actions": [
						{
							"callFunction": "MoveToNextPosition",
							"sid": 130591895426538,
							"parameters": [
								"Fox.UID"
							]
						}
					],
					"sid": 645213547008920
				},
				{
					"eventType": "comment",
					"text": "Move a specific fox to its next position. If the fox is on point A it will be moved to point B and vice versa."
				},
				{
					"functionName": "MoveToNextPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "FoxUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 882769287682221
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Fox",
							"sid": 314409505624569,
							"parameters": {
								"unique-id": "FoxUID"
							}
						}
					],
					"actions": [],
					"sid": 879487344914453,
					"children": [
						{
							"eventType": "comment",
							"text": "Both X and Y values are stored in a single string in the fox itself, and is later separated using the tokenat system expression."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Fox",
									"sid": 796217986054130,
									"parameters": {
										"instance-variable": "CurrentPoint",
										"comparison": 0,
										"value": "\"A\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-position",
									"objectClass": "Fox",
									"sid": 978335833354133,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "float(tokenat(Self.PointB, 0, \",\"))",
										"y": "float(tokenat(Self.PointB, 1, \",\"))",
										"mode": "direct"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Fox",
									"sid": 903521743911980,
									"parameters": {
										"instance-variable": "CurrentPoint",
										"value": "\"B\""
									}
								}
							],
							"sid": 346373682404645
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 194446624364467
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Fox",
									"sid": 316779682916634,
									"parameters": {
										"instance-variable": "CurrentPoint",
										"comparison": 0,
										"value": "\"B\""
									}
								}
							],
							"actions": [
								{
									"id": "move-to-position",
									"objectClass": "Fox",
									"sid": 214079505784677,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "float(tokenat(Self.PointA, 0, \",\"))",
										"y": "float(tokenat(Self.PointA, 1, \",\"))",
										"mode": "direct"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Fox",
									"sid": 733536999388648,
									"parameters": {
										"instance-variable": "CurrentPoint",
										"value": "\"A\""
									}
								}
							],
							"sid": 786513665881388
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once a fox reaches its destination, start a cooldown timer."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "Fox",
							"sid": 107352780997986,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "Fox",
							"sid": 417781697426871,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Self.Cooldown",
								"type": "once",
								"tag": "\"Cooldown\""
							}
						}
					],
					"sid": 548205706436508
				},
				{
					"eventType": "comment",
					"text": "Once the cooldown is over as well, move the fox to its next position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Fox",
							"sid": 598133613786348,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Cooldown\""
							}
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 727967026395612,
							"parameters": {
								"object": "Fox"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveToNextPosition",
							"sid": 817391775459639,
							"parameters": [
								"Fox.UID"
							]
						}
					],
					"sid": 599228295525891
				},
				{
					"eventType": "comment",
					"text": "Constantly update the fox angle of motion and animation based on the direction it's moving towards."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 938422042569539
						}
					],
					"actions": [],
					"sid": 882705583896382,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 401912404257388,
									"parameters": {
										"object": "Fox"
									}
								}
							],
							"actions": [],
							"sid": 404697255469639,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "Fox",
											"sid": 417003448331614,
											"behaviorType": "MoveTo"
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Fox",
											"sid": 702220962817342,
											"parameters": {
												"instance-variable": "AngleOfMotion",
												"value": "round(Self.MoveTo.MovingAngle / 90) * 90"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "Fox",
											"sid": 362105836702243,
											"parameters": {
												"animation": "\"Move\"&Self.AngleOfMotion",
												"from": "beginning"
											}
										}
									],
									"sid": 836944236155307
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 515749483776956
										},
										{
											"id": "is-moving",
											"objectClass": "Fox",
											"sid": 599604699743232,
											"behaviorType": "MoveTo",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Fox",
											"sid": 345576854920598,
											"parameters": {
												"animation": "\"Idle\"&Self.AngleOfMotion",
												"from": "beginning"
											}
										}
									],
									"sid": 947712734636903
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If a fox collide with a chicken, restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Fox",
							"sid": 771382365260845,
							"parameters": {
								"object": "Chicken"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 966125562728789
						}
					],
					"sid": 527884497174059
				}
			],
			"sid": 296806974499937
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "The average X position between all trackable objects, like chickens and the player."
				},
				{
					"eventType": "variable",
					"name": "AverageX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 833762499468552
				},
				{
					"eventType": "comment",
					"text": "The average Y position between all trackable objects, like chickens and the player."
				},
				{
					"eventType": "variable",
					"name": "AverageY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 848855132680894
				},
				{
					"eventType": "comment",
					"text": "How many trackable objects are present in the scene."
				},
				{
					"eventType": "variable",
					"name": "TotalTrackable",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 892689018642773
				},
				{
					"eventType": "comment",
					"text": "How fast the camera is able to move towards the average position."
				},
				{
					"eventType": "variable",
					"name": "TRACKINGSPEED",
					"type": "number",
					"initialValue": "1",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 311601934774225
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Camera",
							"sid": 363674797855139
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "Camera",
							"sid": 436454019374685,
							"parameters": {
								"object": "PlayerCollision",
								"image-point-optional": "0"
							}
						}
					],
					"sid": 451457730379653
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 645374850420212
						}
					],
					"actions": [],
					"sid": 499336991068516,
					"children": [
						{
							"eventType": "comment",
							"text": "If a chicken is not moving, don't track it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 542791099913757,
									"parameters": {
										"object": "Chicken",
										"expression": "Chicken.MoveTo.Speed",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Chicken",
									"sid": 425068276992406,
									"parameters": {
										"instance-variable": "Track",
										"value": "false"
									}
								}
							],
							"sid": 433740022038569
						},
						{
							"eventType": "comment",
							"text": "However, if it's moving, make it trackable."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 198377680223100,
									"parameters": {
										"object": "Chicken",
										"expression": "Chicken.MoveTo.Speed",
										"comparison": 0,
										"value": "Chicken.MoveTo.MaxSpeed"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Chicken",
									"sid": 359385607637300,
									"parameters": {
										"instance-variable": "Track",
										"value": "true"
									}
								}
							],
							"sid": 483204417860474
						},
						{
							"eventType": "comment",
							"text": "Calculate the average position, by adding all trackable objects positions and then dividing the result by the total amount of trackable objects."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 983467251453452,
									"parameters": {
										"object": "Trackable"
									}
								}
							],
							"actions": [],
							"sid": 483838328451430,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Trackable",
											"sid": 331507499376360,
											"parameters": {
												"instance-variable": "Track"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 669388865249312,
											"parameters": {
												"variable": "AverageX",
												"value": "Trackable.X"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 940972103717595,
											"parameters": {
												"variable": "AverageY",
												"value": "Trackable.Y"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 365936348450545,
											"parameters": {
												"variable": "TotalTrackable",
												"value": "1"
											}
										}
									],
									"sid": 381650948370899
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 504533736735274,
									"parameters": {
										"variable": "AverageX",
										"value": "AverageX / TotalTrackable"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 903894841185005,
									"parameters": {
										"variable": "AverageY",
										"value": "AverageY / TotalTrackable"
									}
								}
							],
							"sid": 743969333362006,
							"children": [
								{
									"eventType": "comment",
									"text": "If the distance between the camera and the player is higher than the tracking speed, move the camera based on the tracking speed value."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 180166678137300,
											"parameters": {
												"first-value": "distance(Camera.X, Camera.Y, AverageX, AverageY)",
												"comparison": 5,
												"second-value": "TRACKINGSPEED"
											}
										}
									],
									"actions": [
										{
											"id": "move-at-angle",
											"objectClass": "Camera",
											"sid": 605446586220772,
											"parameters": {
												"angle": "angle(Self.X, Self.Y, AverageX, AverageY)",
												"distance": "TRACKINGSPEED * 60 * dt"
											}
										}
									],
									"sid": 527881893590211
								},
								{
									"eventType": "comment",
									"text": "However, if the distance between the camera and the player is lower than the tracking speed, move the camera based on the distance between the camera and the player."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 547790329535473
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 275566921735467,
											"parameters": {
												"first-value": "distance(Camera.X, Camera.Y, AverageX, AverageY)",
												"comparison": 2,
												"second-value": "TRACKINGSPEED"
											}
										}
									],
									"actions": [
										{
											"id": "move-at-angle",
											"objectClass": "Camera",
											"sid": 481309847140709,
											"parameters": {
												"angle": "angle(Self.X, Self.Y, AverageX, AverageY)",
												"distance": "distance(Self.X, Self.Y, AverageX, AverageY) * 60 * dt"
											}
										}
									],
									"sid": 806172516430355
								}
							]
						}
					]
				}
			],
			"sid": 549372604972587
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Barn",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Once a chicken arrives on the barn, destroy it, so it look like it has entered the barn."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Chicken",
							"sid": 132075075171253,
							"parameters": {
								"object": "TriggerArea"
							}
						}
					],
					"actions": [
						{
							"callFunction": "Stop",
							"sid": 713143665660598,
							"parameters": [
								"Chicken.UID"
							]
						},
						{
							"id": "destroy",
							"objectClass": "Chicken",
							"sid": 753142994357915
						}
					],
					"sid": 205821245746790,
					"children": [
						{
							"eventType": "comment",
							"text": "Also spawn a few particles around it, so the player knows it's part of the main objective."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 432539615831593,
									"parameters": {
										"count": "8"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Chicken",
									"sid": 465139195320039,
									"parameters": {
										"object": "Pop",
										"layer": "\"Entities\"",
										"image-point": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "Pop",
									"sid": 263980806610661,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "loopindex * 45"
									}
								}
							],
							"sid": 980053748019980
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Constantly change the particles angle of motion for a more dynamic effect."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 647986544387575
						}
					],
					"actions": [
						{
							"id": "set-angle-of-motion",
							"objectClass": "Pop",
							"sid": 328207219115239,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Self.Bullet.AngleOfMotion + 5 * 60 * dt"
							}
						}
					],
					"sid": 879034276015997
				},
				{
					"eventType": "comment",
					"text": "Once all chicken are inside the barn, fade out to a dark screen."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 325297878461128,
							"parameters": {
								"first-value": "Chicken.Count",
								"comparison": 0,
								"second-value": "0"
							}
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 202041286338949
						}
					],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "Camera",
							"sid": 588280523224202,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Luminosity\"",
								"start-value": "100",
								"end-value": "0",
								"time": "1",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 360944639750527
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Camera",
							"sid": 354645837784411,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Luminosity\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-effect-parameter",
							"objectClass": "System",
							"sid": 253305298590764,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Camera.Tween.Value(\"Luminosity\")"
							}
						}
					],
					"sid": 520676611839349
				},
				{
					"eventType": "comment",
					"text": "Once the animation of a particle is over, destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Pop",
							"sid": 797731142962045,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Pop",
							"sid": 114670474301644
						}
					],
					"sid": 118043509615505
				}
			],
			"sid": 843315572022606
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Leaves",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Spawn leaves in random positions around the player. The angle of motion and speed of each leaf is also slightly randomized."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 679975740297745,
							"parameters": {
								"interval-seconds": "0.05"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 152514846492613,
							"parameters": {
								"object-to-create": "Leaf",
								"layer": "\"Wind\"",
								"x": "PlayerCollision.X + random(-160, 160)",
								"y": "PlayerCollision.Y + random(-160, 160)",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Leaf",
							"sid": 523583475821998,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "random(25, 35)"
							}
						},
						{
							"id": "set-speed",
							"objectClass": "Leaf",
							"sid": 771624098973840,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "random(16, 48)"
							}
						}
					],
					"sid": 187585921014586
				},
				{
					"eventType": "comment",
					"text": "Once the leaf animation is over, destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Leaf",
							"sid": 310752768744005,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Leaf",
							"sid": 906172878858732
						}
					],
					"sid": 313380930498538
				}
			],
			"sid": 415781707079580
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ZOrder",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Constantly update the Z order of each object to make sure they're being displayed properly."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 774460185183691
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "ZOrder",
							"sid": 130239723445370,
							"parameters": {
								"instance-variable": "ZOrder",
								"value": "Self.ImagePointY(\"Bottom\")"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 715762560737914,
							"parameters": {
								"object": "ZOrder",
								"instance-variable": {
									"name": "ZOrder",
									"objectClass": "ZOrder"
								}
							}
						}
					],
					"sid": 848614323917994
				}
			],
			"sid": 997908919811676
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Grid",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 341066693493461,
							"parameters": {
								"key": 77
							}
						}
					],
					"actions": [],
					"sid": 113642279462583,
					"children": [
						{
							"eventType": "comment",
							"text": "If there are no cell markers in the scene, create one cell marker for each solid \"point\" in the grid."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 859295022184335,
									"parameters": {
										"first-value": "CellMarker.Count",
										"comparison": 0,
										"second-value": "0"
									}
								}
							],
							"actions": [],
							"sid": 949148048163976,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 515354636430529,
											"parameters": {
												"name": "\"X\"",
												"start-index": "0",
												"end-index": "LayoutWidth / Chicken.Pathfinding.CellSize"
											}
										}
									],
									"actions": [],
									"sid": 442306599749938,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 972983992870849,
													"parameters": {
														"name": "\"Y\"",
														"start-index": "0",
														"end-index": "LayoutHeight / Chicken.Pathfinding.CellSize"
													}
												}
											],
											"actions": [],
											"sid": 594458912869577,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-cell-obstacle",
															"objectClass": "Chicken",
															"sid": 845059404289708,
															"behaviorType": "Pathfinding",
															"parameters": {
																"cell-x": "loopindex(\"X\")",
																"cell-y": "loopindex(\"Y\")"
															}
														}
													],
													"actions": [
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 831714776632761,
															"parameters": {
																"object-to-create": "CellMarker",
																"layer": "\"CellMarker\"",
																"x": "loopindex(\"X\") * Chicken.Pathfinding.CellSize",
																"y": "loopindex(\"Y\") * Chicken.Pathfinding.CellSize",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-size",
															"objectClass": "CellMarker",
															"sid": 751626146694984,
															"parameters": {
																"width": "Chicken.Pathfinding.CellSize",
																"height": "Chicken.Pathfinding.CellSize"
															}
														}
													],
													"sid": 705059007233900
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "However, if there's at least one cell marker in the scene, destroy all of them."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 677517806600483
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 319039984491530,
									"parameters": {
										"first-value": "CellMarker.Count",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "CellMarker",
									"sid": 382259156896810
								}
							],
							"sid": 208054283419345
						}
					]
				}
			],
			"sid": 928343057080747
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Restart",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game for testing purposes."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 192025571023063,
							"parameters": {
								"key": 82
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 796647690442578
						}
					],
					"sid": 431744506861101
				}
			],
			"sid": 396574814628599
		}
	],
	"sid": 607713619740987
}