{
	"name": "Event sheet 1",
	"events": [
		{
			"eventType": "comment",
			"text": "Terrain tiles are from: https://opengameart.org/content/voxel-pack\nPlayer sprite is from: https://opengameart.org/content/simplified-platformer-pack"
		},
		{
			"eventType": "comment",
			"text": "Size of TerrainTilemap in tiles ( this should be a multiple of the chunk sizes )"
		},
		{
			"eventType": "variable",
			"name": "height",
			"type": "number",
			"initialValue": "40",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 784478575156086
		},
		{
			"eventType": "variable",
			"name": "width",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 436356968464182
		},
		{
			"eventType": "comment",
			"text": "Size of world \"chunks\" in tiles"
		},
		{
			"eventType": "variable",
			"name": "chunk_width",
			"type": "number",
			"initialValue": "15",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 689138977324914
		},
		{
			"eventType": "variable",
			"name": "chunk_height",
			"type": "number",
			"initialValue": "10",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 663150143200245
		},
		{
			"eventType": "comment",
			"text": "Current world position offset in tiles"
		},
		{
			"eventType": "variable",
			"name": "offsetX",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 737562348799921
		},
		{
			"eventType": "variable",
			"name": "offsetY",
			"type": "number",
			"initialValue": "-20",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 694602204491724
		},
		{
			"eventType": "comment",
			"text": "The size of a tile in pixels"
		},
		{
			"eventType": "variable",
			"name": "grid_size",
			"type": "number",
			"initialValue": "40",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 920516139263837
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "Configure the AdvancedRandom plugin and create the world around the player.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 137783298813190
						}
					],
					"actions": [
						{
							"id": "octaves",
							"objectClass": "AdvancedRandom",
							"sid": 579675623764164,
							"parameters": {
								"count": "1"
							}
						},
						{
							"id": "seed",
							"objectClass": "AdvancedRandom",
							"sid": 297191743556823,
							"parameters": {
								"seed": "AdvancedRandom.RandomSeed"
							}
						},
						{
							"callFunction": "LoadWorld",
							"sid": 238901434623919
						},
						{
							"id": "pin-to-object",
							"objectClass": "Player",
							"sid": 143193644455269,
							"behaviorType": "Pin",
							"parameters": {
								"pin-to": "PlayerBase",
								"mode": "position-only"
							}
						}
					],
					"sid": 111763758106341
				}
			],
			"sid": 677669175208999
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "World Scrolling",
			"description": "The layout contains 8 boundary zones (top, top-right, right, bottom-right, bottom, bottom-left, left, top-left). If the player enters one of these zones the world we move the world and the player so that the player is back in the center again.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "The boundary zones on the 4 sides are extended by this amount. This is to keep scrolling smooth"
				},
				{
					"eventType": "variable",
					"name": "boundary_size",
					"type": "number",
					"initialValue": "50",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 910782319310326
				},
				{
					"eventType": "comment",
					"text": "Move the world by the given amount ( x, y ) and move the character the same amount in the opposite direction. This is what allows us to move \"infinitely\" in any direction without exiting the layout."
				},
				{
					"functionName": "MoveWorld",
					"functionDescription": "Automatically converted from 'MoveWorld'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "moveX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 521142865552879
						},
						{
							"name": "moveY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 891758971916168
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "SaveWorld",
							"sid": 188390629183509
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 115304765426149,
							"parameters": {
								"variable": "offsetX",
								"value": "moveX"
							}
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 924713219132278,
							"parameters": {
								"variable": "offsetY",
								"value": "moveY"
							}
						},
						{
							"callFunction": "LoadWorld",
							"sid": 329967885191639
						},
						{
							"id": "set-position",
							"objectClass": "PlayerBase",
							"sid": 997332366485191,
							"parameters": {
								"x": "PlayerBase.X - moveX * grid_size",
								"y": "PlayerBase.Y - moveY * grid_size"
							}
						}
					],
					"sid": 132412226275364
				},
				{
					"eventType": "comment",
					"text": "Check if the player is in the left boundary area"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "PlayerBase",
							"sid": 182812497271330,
							"parameters": {
								"comparison": 2,
								"x-co-ordinate": "chunk_width * grid_size + boundary_size"
							}
						}
					],
					"actions": [],
					"sid": 424380357195980,
					"children": [
						{
							"eventType": "comment",
							"text": "Check if the player is in the bottom-left boundary area"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-y",
									"objectClass": "PlayerBase",
									"sid": 681595059387092,
									"parameters": {
										"comparison": 4,
										"y-co-ordinate": "chunk_height * 3 * grid_size - boundary_size"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 719479050032147,
									"parameters": [
										"-chunk_width",
										"chunk_height"
									]
								}
							],
							"sid": 647536512145974
						},
						{
							"eventType": "comment",
							"text": "Check if the player is in the top-left boundary area"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 408314338969645
								},
								{
									"id": "compare-y",
									"objectClass": "PlayerBase",
									"sid": 600633701156686,
									"parameters": {
										"comparison": 2,
										"y-co-ordinate": "chunk_height * grid_size + boundary_size"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 918485827597847,
									"parameters": [
										"-chunk_width",
										"-chunk_height"
									]
								}
							],
							"sid": 933960706137530
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 935700449312375
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 895889188695963,
									"parameters": [
										"-chunk_width",
										"0"
									]
								}
							],
							"sid": 370770279738780
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Check if the player is in the right boundary area"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 599426265763670
						},
						{
							"id": "compare-x",
							"objectClass": "PlayerBase",
							"sid": 969275629341205,
							"parameters": {
								"comparison": 4,
								"x-co-ordinate": "chunk_width * 3 * grid_size - boundary_size"
							}
						}
					],
					"actions": [],
					"sid": 508740193082781,
					"children": [
						{
							"eventType": "comment",
							"text": "Check if the player is in the bottom-right boundary area"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-y",
									"objectClass": "PlayerBase",
									"sid": 838808092632924,
									"parameters": {
										"comparison": 4,
										"y-co-ordinate": "chunk_height * 3 * grid_size - boundary_size"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 738655324312355,
									"parameters": [
										"chunk_width",
										"chunk_height"
									]
								}
							],
							"sid": 492960443140480
						},
						{
							"eventType": "comment",
							"text": "Check if the player is in the top-right boundary area"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 507142785721328
								},
								{
									"id": "compare-y",
									"objectClass": "PlayerBase",
									"sid": 290284644682975,
									"parameters": {
										"comparison": 2,
										"y-co-ordinate": "chunk_height * grid_size + boundary_size"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 476045334742768,
									"parameters": [
										"chunk_width",
										"-chunk_height"
									]
								}
							],
							"sid": 837494758914612
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 715136138513521
								}
							],
							"actions": [
								{
									"callFunction": "MoveWorld",
									"sid": 830975611239054,
									"parameters": [
										"chunk_width",
										"0"
									]
								}
							],
							"sid": 480954311379345
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Check if the player is in the top boundary area"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 401240730209699
						},
						{
							"id": "compare-y",
							"objectClass": "PlayerBase",
							"sid": 590588176595781,
							"parameters": {
								"comparison": 2,
								"y-co-ordinate": "chunk_height * grid_size + boundary_size"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveWorld",
							"sid": 230745651562807,
							"parameters": [
								"0",
								"-chunk_height"
							]
						}
					],
					"sid": 584173018800928
				},
				{
					"eventType": "comment",
					"text": "Check if the player is in the bottom boundary area"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 423796517403470
						},
						{
							"id": "compare-y",
							"objectClass": "PlayerBase",
							"sid": 909052992305626,
							"parameters": {
								"comparison": 4,
								"y-co-ordinate": "chunk_height * 3 * grid_size - boundary_size"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveWorld",
							"sid": 960088813779668,
							"parameters": [
								"0",
								"chunk_height"
							]
						}
					],
					"sid": 126816256023996
				}
			],
			"sid": 521661128888472
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Mouse Interaction",
			"description": "The mouse can destroy and create blocks using the left and right button respectively.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 740592741434216,
							"parameters": {
								"mouse-button": "left",
								"click-type": "clicked"
							}
						}
					],
					"actions": [
						{
							"id": "erase-tile-range",
							"objectClass": "TerrainTilemap",
							"sid": 532393283893094,
							"parameters": {
								"tile-x": "floor(Mouse.X / grid_size - 0.5)",
								"tile-y": "floor(Mouse.Y / grid_size - 0.5)",
								"width": "2",
								"height": "2"
							}
						}
					],
					"sid": 532455037476754
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-click",
							"objectClass": "Mouse",
							"sid": 488425509016716,
							"parameters": {
								"mouse-button": "right",
								"click-type": "clicked"
							}
						}
					],
					"actions": [
						{
							"id": "set-tile-range",
							"objectClass": "TerrainTilemap",
							"sid": 850225843654896,
							"parameters": {
								"tile-x": "floor(Mouse.X / grid_size - 0.5)",
								"tile-y": "floor(Mouse.Y / grid_size - 0.5)",
								"width": "2",
								"height": "2",
								"tile": "0",
								"state": "normal"
							}
						}
					],
					"sid": 828665185274037
				}
			],
			"sid": 526305299635232
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Chunk Methods",
			"description": "Functions for generating a chunk, saving it to the dictionary and restoring it from the dictionary.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Saves a chunk at the given tilemap coordinates"
				},
				{
					"functionName": "Save",
					"functionDescription": "Automatically converted from 'Save'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "chunkX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 442108446713471
						},
						{
							"name": "chunkY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 212699537724154
						},
						{
							"name": "dictKey",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 482154017685321
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 882637334813858,
					"children": [
						{
							"eventType": "comment",
							"text": "Create new empty array for chunk data"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-array",
									"objectClass": "JSON",
									"sid": 171757108877337,
									"parameters": {
										"path": "\"data\"",
										"size": "0"
									}
								}
							],
							"sid": 672832431847214
						},
						{
							"eventType": "comment",
							"text": "Iterate over each tile in the chunk, and push to the array"
						},
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 149016023494704
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 844292868533361
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 346177591810890,
									"parameters": {
										"count": "chunk_width"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 713070088072956,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 566696482353904,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 678995881834877,
											"parameters": {
												"count": "chunk_height"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 967963877825654,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "push-value",
											"objectClass": "JSON",
											"sid": 233756233589906,
											"parameters": {
												"where": "back",
												"path": "\"data\"",
												"value": "TerrainTilemap.TileAt(x + chunkX, y + chunkY)"
											}
										}
									],
									"sid": 248831648405420
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Save the array to the dictionary"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "add-key",
									"objectClass": "Dictionary",
									"sid": 547612670992067,
									"parameters": {
										"key": "dictKey",
										"value": "JSON.ToCompactString"
									}
								}
							],
							"sid": 582421904559003
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Loads a chunk at the given tilemap coordinates"
				},
				{
					"functionName": "Load",
					"functionDescription": "Automatically converted from 'Load'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "chunkX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 166830327033304
						},
						{
							"name": "chunkY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 523790152177247
						},
						{
							"name": "dictKey",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 277386326678411
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 619164759480335,
					"children": [
						{
							"eventType": "comment",
							"text": "Read the chunks array from the dictionary"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "parse",
									"objectClass": "JSON",
									"sid": 728409693951505,
									"parameters": {
										"data": "Dictionary.Get(dictKey)"
									}
								}
							],
							"sid": 799262288110643
						},
						{
							"eventType": "comment",
							"text": "Iterate over each tile in the chunk and pop it's value off the array"
						},
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 779979790261810
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 521402445989520
						},
						{
							"eventType": "variable",
							"name": "val",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 284038954822276
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 832264823129975,
									"parameters": {
										"count": "chunk_width"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 261837071498076,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 117323934024994,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 163344112566592,
											"parameters": {
												"count": "chunk_height"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 846690369591932,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 681181331182567,
											"parameters": {
												"variable": "val",
												"value": "JSON.Front(\"data\")"
											}
										},
										{
											"id": "pop-value",
											"objectClass": "JSON",
											"sid": 664858368168039,
											"parameters": {
												"where": "front",
												"path": "\"data\""
											}
										}
									],
									"sid": 674899010839538,
									"children": [
										{
											"eventType": "comment",
											"text": "A value of -1 is an empty tile so we need to erase instead of set"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 433558171609624,
													"parameters": {
														"variable": "val",
														"comparison": 0,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "erase-tile",
													"objectClass": "TerrainTilemap",
													"sid": 504901361185135,
													"parameters": {
														"tile-x": "x + chunkX",
														"tile-y": "y + chunkY"
													}
												}
											],
											"sid": 369721826539612
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 637218723061579
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TerrainTilemap",
													"sid": 573860786615870,
													"parameters": {
														"tile-x": "x + chunkX",
														"tile-y": "y + chunkY",
														"tile": "val",
														"state": "normal"
													}
												}
											],
											"sid": 925124394341058
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Generates a chunk at the given tilemap coordinates"
				},
				{
					"functionName": "Generate",
					"functionDescription": "Automatically converted from 'Generate'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "startX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 445194783661896
						},
						{
							"name": "startY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 265948445339281
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 642139443680672,
					"children": [
						{
							"eventType": "variable",
							"name": "scale",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"isStatic": false,
							"isConstant": true,
							"sid": 744563212962895
						},
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 796086576971355
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 299090049698532
						},
						{
							"eventType": "variable",
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 501902843101666
						},
						{
							"eventType": "variable",
							"name": "densityScale",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 631246909537071
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 904495174009434,
									"parameters": {
										"variable": "y",
										"value": "startY - 1"
									}
								}
							],
							"sid": 246041174037457
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 317413547546065,
									"parameters": {
										"count": "chunk_height"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 236533193242030,
									"parameters": {
										"variable": "x",
										"value": "startX - 1"
									}
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 478041155134887,
									"parameters": {
										"variable": "y",
										"value": "1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 375711190796463,
									"parameters": {
										"variable": "densityScale",
										"value": "max(y + offsetY+ 20, 0) / height"
									}
								}
							],
							"sid": 729225720959145,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 291544330530181,
											"parameters": {
												"count": "chunk_width"
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 839722401560261,
											"parameters": {
												"variable": "x",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 410635458032297,
											"parameters": {
												"variable": "value",
												"value": "AdvancedRandom.Classic2d((x + offsetX) * scale, (y + offsetY) * scale) * densityScale"
											}
										}
									],
									"sid": 950832185641138,
									"children": [
										{
											"eventType": "comment",
											"text": "Stone or Ore"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 499003559137168,
													"parameters": {
														"first-value": "value",
														"comparison": 4,
														"second-value": "0.5"
													}
												}
											],
											"actions": [],
											"sid": 982397919654304,
											"children": [
												{
													"eventType": "comment",
													"text": "Sample an additional random value using Cellular2D to decide if we should place Stone or Ore"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 942097216579441,
															"parameters": {
																"first-value": "AdvancedRandom.Cellular2d((x + offsetX) * 20, (y + offsetY) * 20)",
																"comparison": 4,
																"second-value": "0.65"
															}
														}
													],
													"actions": [],
													"sid": 552612279301628,
													"children": [
														{
															"eventType": "variable",
															"name": "oreType",
															"type": "number",
															"initialValue": "0",
															"comment": "",
															"isStatic": false,
															"isConstant": false,
															"sid": 598877490090125
														},
														{
															"eventType": "comment",
															"text": "Voronoi noise has the same polygon pattern as Cellular but each polygon has a fixed value. We can use this value to decide on the type of Ore"
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 288959797500138,
																	"parameters": {
																		"variable": "oreType",
																		"value": "AdvancedRandom.Voronoi2d((x + offsetX) * 20, (y + offsetY) * 20)"
																	}
																}
															],
															"sid": 752907272057838
														},
														{
															"eventType": "comment",
															"text": "For values above 0.95 place Diamond ( 5% )"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 129039537561050,
																	"parameters": {
																		"first-value": "oreType",
																		"comparison": 4,
																		"second-value": "0.95"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TerrainTilemap",
																	"sid": 426467805694701,
																	"parameters": {
																		"tile-x": "x",
																		"tile-y": "y",
																		"tile": "5",
																		"state": "normal"
																	}
																}
															],
															"sid": 873811082822276
														},
														{
															"eventType": "comment",
															"text": "For values between 0.8 and 0.95 place Gold ( 15% )"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 373587188595132
																},
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 912178320634362,
																	"parameters": {
																		"first-value": "oreType",
																		"comparison": 4,
																		"second-value": "0.8"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TerrainTilemap",
																	"sid": 658690433977166,
																	"parameters": {
																		"tile-x": "x",
																		"tile-y": "y",
																		"tile": "4",
																		"state": "normal"
																	}
																}
															],
															"sid": 270416255759160
														},
														{
															"eventType": "comment",
															"text": "Otherwise place Iron ( 80% )"
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 159276733802037
																}
															],
															"actions": [
																{
																	"id": "set-tile",
																	"objectClass": "TerrainTilemap",
																	"sid": 487981980443686,
																	"parameters": {
																		"tile-x": "x",
																		"tile-y": "y",
																		"tile": "3",
																		"state": "normal"
																	}
																}
															],
															"sid": 786653911960206
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Place Stone not Ore"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 595563783718399
														}
													],
													"actions": [
														{
															"id": "set-tile",
															"objectClass": "TerrainTilemap",
															"sid": 843930377557205,
															"parameters": {
																"tile-x": "x",
																"tile-y": "y",
																"tile": "0",
																"state": "normal"
															}
														}
													],
													"sid": 617737185657994
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Dirt or grass"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 534739828468321
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 947444360810571,
													"parameters": {
														"first-value": "value",
														"comparison": 4,
														"second-value": "0.47"
													}
												}
											],
											"actions": [],
											"sid": 883017335366600,
											"children": [
												{
													"eventType": "comment",
													"text": "If there is an empty tile above us set the Tile to Grass not Soil"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-tile-at",
															"objectClass": "TerrainTilemap",
															"sid": 886356641417761,
															"parameters": {
																"tile-x": "x",
																"tile-y": "y - 1",
																"comparison": 0,
																"tile": "-1"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile",
															"objectClass": "TerrainTilemap",
															"sid": 218458307052906,
															"parameters": {
																"tile-x": "x",
																"tile-y": "y",
																"tile": "2",
																"state": "normal"
															}
														}
													],
													"sid": 115277194133767
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 167001699363986
														}
													],
													"actions": [
														{
															"id": "set-tile",
															"objectClass": "TerrainTilemap",
															"sid": 845670263020215,
															"parameters": {
																"tile-x": "x",
																"tile-y": "y",
																"tile": "1",
																"state": "normal"
															}
														}
													],
													"sid": 566798185841301
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Air (  no tile )"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 328906694772019
												}
											],
											"actions": [
												{
													"id": "erase-tile",
													"objectClass": "TerrainTilemap",
													"sid": 166207091684416,
													"parameters": {
														"tile-x": "x",
														"tile-y": "y"
													}
												}
											],
											"sid": 967218184787528
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 622260359787201
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Save/Restore the World",
			"description": "Save/Restore the world from/to the dictionary. This is vital to the scrolling behaviour; which saves the current world, increments the world offset and then loads the world for the new position.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Saves the world for the current offset"
				},
				{
					"functionName": "SaveWorld",
					"functionDescription": "Automatically converted from 'SaveWorld'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 519589476805905,
					"children": [
						{
							"eventType": "comment",
							"text": "Iterate through all the chunks and save them"
						},
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 824817411059451
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 905515815082568
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 453209751122853,
									"parameters": {
										"count": "width / chunk_width"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 739033251727487,
									"parameters": {
										"variable": "x",
										"value": "loopindex * chunk_width"
									}
								}
							],
							"sid": 302996392555724,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 227591681293383,
											"parameters": {
												"count": "height / chunk_height"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 658868578561717,
											"parameters": {
												"variable": "y",
												"value": "loopindex * chunk_height"
											}
										},
										{
											"callFunction": "Save",
											"sid": 585877303647094,
											"parameters": [
												"x",
												"y",
												"str(x + offsetX) & \"_\" & str(y + offsetY)"
											]
										}
									],
									"sid": 516528550846528
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Loads the world for the current offset"
				},
				{
					"functionName": "LoadWorld",
					"functionDescription": "Automatically converted from 'LoadWorld'",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 645534463568230,
					"children": [
						{
							"eventType": "comment",
							"text": "Iterate through all the chunks and either load them or generate them"
						},
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 239135137000723
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 333320658519246
						},
						{
							"eventType": "variable",
							"name": "key",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 997495934030890
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 569573015686492,
									"parameters": {
										"count": "height / chunk_height"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 207549660502949,
									"parameters": {
										"variable": "y",
										"value": "loopindex * chunk_height"
									}
								}
							],
							"sid": 318154247540735,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 760101769725787,
											"parameters": {
												"count": "width / chunk_width"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 229761684127658,
											"parameters": {
												"variable": "x",
												"value": "loopindex * chunk_width"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 199378846787393,
											"parameters": {
												"variable": "key",
												"value": "str(x + offsetX) & \"_\" & str(y + offsetY)"
											}
										}
									],
									"sid": 312976234601390,
									"children": [
										{
											"eventType": "comment",
											"text": "If the dictionary already has a value for that chunk load it"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "has-key",
													"objectClass": "Dictionary",
													"sid": 244248307222695,
													"parameters": {
														"key": "key"
													}
												}
											],
											"actions": [
												{
													"callFunction": "Load",
													"sid": 109988525555776,
													"parameters": [
														"x",
														"y",
														"key"
													]
												}
											],
											"sid": 160243151513048
										},
										{
											"eventType": "comment",
											"text": "Otherwise generate the chunk"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 797263301609628
												}
											],
											"actions": [
												{
													"callFunction": "Generate",
													"sid": 350154522478509,
													"parameters": [
														"x",
														"y"
													]
												}
											],
											"sid": 531963880510159
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 501108055377449
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Character Animations",
			"description": "Change the player animation to a suitable one for the action",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-jump",
							"objectClass": "PlayerBase",
							"sid": 657535583561693,
							"behaviorType": "Platform"
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 352064792109682,
							"parameters": {
								"animation": "\"Jump\"",
								"from": "beginning"
							}
						}
					],
					"sid": 716721748448012
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-stopped",
							"objectClass": "PlayerBase",
							"sid": 973684119128002,
							"behaviorType": "Platform"
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 959920765060552,
							"parameters": {
								"animation": "\"Idle\"",
								"from": "beginning"
							}
						}
					],
					"sid": 232351780941443
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-landed",
							"objectClass": "PlayerBase",
							"sid": 758204119103819,
							"behaviorType": "Platform"
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 102717894827750,
							"parameters": {
								"animation": "\"Landed\"",
								"from": "beginning"
							}
						}
					],
					"sid": 979964089692752
				},
				{
					"eventType": "comment",
					"text": "If we are moving and on the floor then we should play the walking animation"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-on-floor",
							"objectClass": "PlayerBase",
							"sid": 434646727221533,
							"behaviorType": "Platform"
						},
						{
							"id": "is-moving",
							"objectClass": "PlayerBase",
							"sid": 137988254663302,
							"behaviorType": "Platform"
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 433241164359374,
							"parameters": {
								"animation": "\"Walk\"",
								"from": "beginning"
							}
						}
					],
					"sid": 273120583902339
				},
				{
					"eventType": "comment",
					"text": "Once the Landed animation has finished go back to idle"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Player",
							"sid": 560281299960326,
							"parameters": {
								"animation": "\"Landed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 144911625644104,
							"parameters": {
								"animation": "\"Idle\"",
								"from": "beginning"
							}
						}
					],
					"sid": 410258691025163
				},
				{
					"eventType": "comment",
					"text": "If we're moving left mirror the player sprite so that it looks like we're walking left"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 945002259525186,
							"parameters": {
								"first-value": "PlayerBase.Platform.VectorX",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 619669087285131,
							"parameters": {
								"state": "not-mirrored"
							}
						}
					],
					"sid": 704402631494948
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 256013052363607,
							"parameters": {
								"first-value": "PlayerBase.Platform.VectorX",
								"comparison": 2,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 481083717764604,
							"parameters": {
								"state": "mirrored"
							}
						}
					],
					"sid": 274079330676925
				}
			],
			"sid": 260771673465898
		}
	],
	"sid": 842210603352037
}