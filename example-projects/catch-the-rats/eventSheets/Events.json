{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Settings."
		},
		{
			"eventType": "variable",
			"name": "NUMRATS",
			"type": "number",
			"initialValue": "48",
			"comment": "Number of rats to spawn",
			"isStatic": false,
			"isConstant": true,
			"sid": 325304991418565
		},
		{
			"eventType": "variable",
			"name": "SPAWNSPEED",
			"type": "number",
			"initialValue": "10",
			"comment": "1/SPAWNSPEED is the time (in secs) taken to spawn a new rat",
			"isStatic": false,
			"isConstant": true,
			"sid": 901322154575441
		},
		{
			"eventType": "variable",
			"name": "AIMDELAY",
			"type": "number",
			"initialValue": "0.1",
			"comment": "Time taken for aim to move to the next position",
			"isStatic": false,
			"isConstant": true,
			"sid": 907741608537026
		},
		{
			"eventType": "variable",
			"name": "MINRATPOS",
			"type": "number",
			"initialValue": "112",
			"comment": "Min rat X or Y position",
			"isStatic": false,
			"isConstant": true,
			"sid": 103975923396422
		},
		{
			"eventType": "variable",
			"name": "MAXRATOFFSET",
			"type": "number",
			"initialValue": "352",
			"comment": "Maximum rat offset from MINRATPOS",
			"isStatic": false,
			"isConstant": true,
			"sid": 405172474715224
		},
		{
			"eventType": "variable",
			"name": "CAGEDELAY",
			"type": "number",
			"initialValue": "1",
			"comment": "Time taken for the cage to reach the floor",
			"isStatic": false,
			"isConstant": true,
			"sid": 920301498599243
		},
		{
			"eventType": "variable",
			"name": "CAGEELEV",
			"type": "number",
			"initialValue": "384",
			"comment": "Initial cage elevation",
			"isStatic": false,
			"isConstant": true,
			"sid": 665852427519314
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "p1Score",
			"type": "number",
			"initialValue": "0",
			"comment": "Player 1 Score",
			"isStatic": false,
			"isConstant": false,
			"sid": 601185324194021
		},
		{
			"eventType": "variable",
			"name": "p2Score",
			"type": "number",
			"initialValue": "0",
			"comment": "Player 1 Score",
			"isStatic": false,
			"isConstant": false,
			"sid": 129549989120426
		},
		{
			"eventType": "variable",
			"name": "cagesDropped",
			"type": "number",
			"initialValue": "0",
			"comment": "Number of cages dropped.",
			"isStatic": false,
			"isConstant": false,
			"sid": 616690489164707
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 478015093870511
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Disable player controls and rat capturing system."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 515207340636474,
							"parameters": {
								"group-name": "\"Controls\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 932680603761215,
							"parameters": {
								"group-name": "\"Capture Rats\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "3D camera position and lookat position."
						},
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 601168754451043,
							"parameters": {
								"cam-x": "Ground.X + 192",
								"cam-y": "Ground.Y + 192",
								"cam-z": "Ground.ZElevation + 352",
								"look-x": "Ground.X + 72",
								"look-y": "Ground.Y + 72",
								"look-z": "Ground.ZElevation",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						},
						{
							"type": "comment",
							"text": "Hide unecessary textboxes."
						},
						{
							"id": "set-opacity",
							"objectClass": "TextStatus",
							"sid": 301117876096162,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "TextScore",
							"sid": 495957313466045,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "TextTime",
							"sid": 997200437373212,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "TextGameOver",
							"sid": 663183895776347,
							"parameters": {
								"opacity": "0"
							}
						}
					],
					"sid": 606740602796970
				}
			],
			"sid": 282975944609237
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "[b][Space][/b] starts the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 658945439428877,
							"parameters": {
								"key": 32
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide tutorial."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTutorial",
							"sid": 211116070070296,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"TextTutorialOpacity\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 372532044002753,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FaderOpacity\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 560541268627068
						},
						{
							"type": "comment",
							"text": "Drop cheese."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Cheese",
							"sid": 931481241326778,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DropCheese\"",
								"property": "offsetZElevation",
								"end-value": "32",
								"time": "1",
								"ease": "easeoutbounce",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 746924216518800,
							"parameters": {
								"seconds": "1.5"
							}
						},
						{
							"type": "comment",
							"text": "Show status text."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextStatus",
							"sid": 473540455168519,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"TextStatusOpacity\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 868379093362737,
							"parameters": {
								"seconds": "1.0"
							}
						},
						{
							"type": "comment",
							"text": "Spawn rats."
						},
						{
							"callFunction": "spawnRats",
							"sid": 229620656034935
						}
					],
					"sid": 907766329767543
				}
			],
			"sid": 888034010987486
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rats Spawn",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "spawnRats",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 636895112586663,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 260172650801210,
									"parameters": {
										"name": "\"i\"",
										"start-index": "1",
										"end-index": "NUMRATS"
									}
								},
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 448786661876385,
									"parameters": {
										"object": "RatSpawner"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Add a delay between each spawn."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 345614104108377,
									"parameters": {
										"seconds": "loopindex/SPAWNSPEED"
									}
								},
								{
									"type": "comment",
									"text": "Create rat using spawner position and angle."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 745154530202438,
									"parameters": {
										"object-to-create": "Rat",
										"layer": "\"Game\"",
										"x": "RatSpawner.X",
										"y": "RatSpawner.Y",
										"create-hierarchy": true,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Rat",
									"sid": 937606522445924,
									"parameters": {
										"angle": "RatSpawner.Angle"
									}
								},
								{
									"type": "comment",
									"text": "Creeate position checker."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 843625600373213,
									"parameters": {
										"object-to-create": "RatPosChecker",
										"layer": "\"Game\"",
										"x": "-100",
										"y": "-100",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "add-child",
									"objectClass": "Rat",
									"sid": 519076999135317,
									"parameters": {
										"child": "RatPosChecker",
										"transform-x": false,
										"transform-y": false,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"type": "comment",
									"text": "Set a random point to create a path to follow."
								},
								{
									"callFunction": "goToValidPosition",
									"sid": 724661997753596,
									"parameters": [
										"Rat.UID"
									]
								}
							],
							"sid": 639157445205001
						},
						{
							"eventType": "comment",
							"text": "Wait until all rats are inside the arena to effectively start the game."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 360696248988094,
									"parameters": {
										"seconds": "NUMRATS/SPAWNSPEED"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextStatus",
									"sid": 872834665168262,
									"parameters": {
										"text": "\"[color=#ffff00]Ready?[/color]\""
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 592975965590274,
									"parameters": {
										"seconds": "2.0"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextStatus",
									"sid": 116666973283370,
									"parameters": {
										"text": "\"[color=#00ff00]Go![/color]\""
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextStatus",
									"sid": 853243447055435,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TextStatusOpacity\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "1.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Enable player controls and rat capturing system"
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 757246344218402,
									"parameters": {
										"group-name": "\"Controls\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 877767012947991,
									"parameters": {
										"group-name": "\"Capture Rats\"",
										"state": "activated"
									}
								},
								{
									"type": "comment",
									"text": "Enable invisible walls to limit the arena."
								},
								{
									"id": "set-enabled",
									"objectClass": "WallFence",
									"sid": 133607181374377,
									"behaviorType": "Solid",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "WallFence",
									"sid": 450733622214362,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FenceDrop\"",
										"property": "offsetZElevation",
										"end-value": "0",
										"time": "0.5",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Show scores."
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextScore",
									"sid": 653034733367426,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TextScoreOpacity\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Show time left."
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextTime",
									"sid": 863503415528916,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TextTimeOpacity\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "TextTime",
									"sid": 210352015393543,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "1.0",
										"type": "once",
										"tag": "\"TimeTick\""
									}
								}
							],
							"sid": 645882795722311,
							"children": [
								{
									"eventType": "comment",
									"text": "Set initial player aim positions."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 585554425533793,
											"parameters": {
												"object": "PlayerAim",
												"expression": "PlayerAim.player = 1"
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 769041615438405,
											"parameters": {
												"object": "PlayerCage",
												"expression": "PlayerCage.player = 1"
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 882512559440438,
											"parameters": {
												"object": "AimSpot",
												"expression": "AimSpot.id = PlayerAim.aimSpot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Player 1."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "PlayerAim",
											"sid": 998074783197173,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PlayerAimMoving\"",
												"property": "position",
												"end-x": "AimSpot.X",
												"end-y": "AimSpot.Y",
												"time": "0.5",
												"ease": "easeoutcubic",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "PlayerCage",
											"sid": 262768332028654,
											"parameters": {
												"z": "CAGEELEV"
											}
										}
									],
									"sid": 790591373898612
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 365128420177468,
											"parameters": {
												"object": "PlayerAim",
												"expression": "PlayerAim.player = 2"
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 966299234353177,
											"parameters": {
												"object": "PlayerCage",
												"expression": "PlayerCage.player = 2"
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 424268993138548,
											"parameters": {
												"object": "AimSpot",
												"expression": "AimSpot.id = PlayerAim.aimSpot"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Player 2."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "PlayerAim",
											"sid": 200999290859102,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PlayerAimMoving\"",
												"property": "position",
												"end-x": "AimSpot.X",
												"end-y": "AimSpot.Y",
												"time": "0.5",
												"ease": "easeoutcubic",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "PlayerCage",
											"sid": 493830321777970,
											"parameters": {
												"z": "CAGEELEV"
											}
										}
									],
									"sid": 521394214279830
								}
							]
						}
					]
				}
			],
			"sid": 544127452944290
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rat Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Rat finds a valid position to go."
				},
				{
					"functionName": "goToValidPosition",
					"functionDescription": "Rat finds a valid position to go",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ratUID",
							"type": "number",
							"initialValue": "0",
							"comment": "Rat UID",
							"sid": 832595672741897
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Rat",
							"sid": 964702784301450,
							"parameters": {
								"unique-id": "ratUID"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Rat",
							"sid": 810041944208273,
							"parameters": {
								"child": "RatPosChecker",
								"which": "own"
							}
						}
					],
					"actions": [],
					"sid": 243933332752447,
					"children": [
						{
							"eventType": "comment",
							"text": "Try many times to find a new random valid position."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 426377382406742,
									"parameters": {
										"count": "100"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "RatPosChecker",
									"sid": 802898079846093,
									"parameters": {
										"x": "random(MAXRATOFFSET) + MINRATPOS",
										"y": "random(MAXRATOFFSET) + MINRATPOS"
									}
								}
							],
							"sid": 772057398616749,
							"children": [
								{
									"eventType": "comment",
									"text": "Valid position found (is not under a dropped cage)"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "RatPosChecker",
											"sid": 820235862398074,
											"parameters": {
												"object": "PlayerCage"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 994736308182310
										}
									],
									"sid": 817179972124571
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 260785954613368
										},
										{
											"id": "is-overlapping-another-object",
											"objectClass": "RatPosChecker",
											"sid": 696284716638722,
											"parameters": {
												"object": "PlayerCage"
											}
										},
										{
											"id": "is-playing",
											"objectClass": "PlayerCage",
											"sid": 709454045045969,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DropCage\""
											},
											"isInverted": true
										},
										{
											"id": "compare-z-elevation",
											"objectClass": "PlayerCage",
											"sid": 637076407805451,
											"parameters": {
												"which": "z-elevation",
												"comparison": 5,
												"z-elevation": "16"
											}
										}
									],
									"actions": [
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 305801634811872
										}
									],
									"sid": 241404005810448
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "find-path",
									"objectClass": "Rat",
									"sid": 710803884877654,
									"behaviorType": "Pathfinding",
									"parameters": {
										"x": "RatPosChecker.X",
										"y": "RatPosChecker.Y"
									}
								}
							],
							"sid": 483565915000587
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When a rat finds a path, it moves along that path."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-path-found",
							"objectClass": "Rat",
							"sid": 888640514425522,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"id": "move-along-path",
							"objectClass": "Rat",
							"sid": 686208027455618,
							"behaviorType": "Pathfinding"
						}
					],
					"sid": 151602906065938
				},
				{
					"eventType": "comment",
					"text": "When a rat cannot find a path, choose a new random position to create a path to follow."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-failed-to-find-path",
							"objectClass": "Rat",
							"sid": 754249897155850,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"callFunction": "goToValidPosition",
							"sid": 307681456372522,
							"parameters": [
								"Rat.UID"
							]
						}
					],
					"sid": 327500931681007
				},
				{
					"eventType": "comment",
					"text": "Upon arrival, rats choose another random position to go to."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "Rat",
							"sid": 237131797021522,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"callFunction": "goToValidPosition",
							"sid": 128007833771777,
							"parameters": [
								"Rat.UID"
							]
						}
					],
					"sid": 345583285747875
				}
			],
			"sid": 119931029148323
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player move aim"
				},
				{
					"functionName": "moveAim",
					"functionDescription": "Player move aim",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "player",
							"type": "number",
							"initialValue": "1",
							"comment": "Player number",
							"sid": 548456934908275
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 744029435854873,
							"parameters": {
								"object": "PlayerAim",
								"expression": "PlayerAim.player = player"
							}
						},
						{
							"id": "is-playing",
							"objectClass": "PlayerAim",
							"sid": 540663298454503,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PlayerAimMoving\""
							},
							"isInverted": true
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 940597662212910,
							"parameters": {
								"object": "PlayerCage",
								"expression": "PlayerCage.player = player"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "PlayerCage",
							"sid": 217591340370430,
							"parameters": {
								"which": "z-elevation",
								"comparison": 0,
								"z-elevation": "CAGEELEV"
							}
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 345522952142533,
							"parameters": {
								"object": "AimSpot",
								"expression": "AimSpot.id = (PlayerAim.aimSpot + 1) % AimSpot.Count"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerAim",
							"sid": 295225432341182,
							"parameters": {
								"instance-variable": "aimSpot",
								"value": "(Self.aimSpot + 1) % AimSpot.Count"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "PlayerAim",
							"sid": 474622167488689,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PlayerAimMoving\"",
								"property": "position",
								"end-x": "AimSpot.X",
								"end-y": "AimSpot.Y",
								"time": "AIMDELAY",
								"ease": "easeinoutcubic",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 943041154321345
				},
				{
					"eventType": "comment",
					"text": "Checks if a spot is available."
				},
				{
					"functionName": "isSpotAvailable",
					"functionDescription": "Checks if a spot is available",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "aimSpotID",
							"type": "number",
							"initialValue": "0",
							"comment": "Identification number of the aim spot to be checked",
							"sid": 188143589641582
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 125334376306936,
							"parameters": {
								"object": "AimSpot",
								"expression": "AimSpot.id = aimSpotID"
							}
						}
					],
					"actions": [],
					"sid": 101559243636959,
					"children": [
						{
							"eventType": "variable",
							"name": "numOfCagesDown",
							"type": "number",
							"initialValue": "0",
							"comment": "Number of cages already down in this spot",
							"isStatic": false,
							"isConstant": false,
							"sid": 179688896484637
						},
						{
							"eventType": "comment",
							"text": "Count number of cages dropped at the spot informed."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 463820455384302,
									"parameters": {
										"object": "PlayerCage"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 595613933358168,
									"parameters": {
										"value": "(PlayerCage.X = AimSpot.X) & (PlayerCage.Y = AimSpot.Y) & PlayerCage.dropped"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 679787488463476,
									"parameters": {
										"variable": "numOfCagesDown",
										"value": "1"
									}
								}
							],
							"sid": 561593262401016
						},
						{
							"eventType": "comment",
							"text": "If there are no cages down, the spot is available. Otherwise, the spot is already occupied."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 650828268481174,
									"parameters": {
										"value": "numOfCagesDown = 0"
									}
								}
							],
							"sid": 960818107976615
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Drop cage to capture rats."
				},
				{
					"functionName": "dropCage",
					"functionDescription": "Drop cage to capture rats",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "player",
							"type": "number",
							"initialValue": "1",
							"comment": "Player number",
							"sid": 128604596717980
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 701046053448824,
							"parameters": {
								"object": "PlayerCage",
								"expression": "PlayerCage.player = player"
							}
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 345794206992628,
							"parameters": {
								"object": "PlayerAim",
								"expression": "PlayerAim.player = player"
							}
						}
					],
					"actions": [],
					"sid": 162999761559683,
					"children": [
						{
							"eventType": "comment",
							"text": "Move the cage down to match where the player is aiming."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 270931164565924,
									"parameters": {
										"value": "Functions.isSpotAvailable(PlayerAim.aimSpot) = 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "PlayerCage",
									"sid": 663761681939751,
									"parameters": {
										"x": "PlayerAim.X",
										"y": "PlayerAim.Y"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "PlayerCage",
									"sid": 927292496305501,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DropCage\"",
										"property": "offsetZElevation",
										"end-value": "0",
										"time": "CAGEDELAY",
										"ease": "easeoutbounce",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Mark cage as dropped."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "PlayerCage",
									"sid": 459672599685768,
									"parameters": {
										"instance-variable": "dropped",
										"value": "true"
									}
								}
							],
							"sid": 960257829274441,
							"children": [
								{
									"eventType": "comment",
									"text": "Reset rats route to take into account the newly dropped cage."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 582005652878849,
											"parameters": {
												"object": "Rat"
											}
										}
									],
									"actions": [
										{
											"callFunction": "goToValidPosition",
											"sid": 156063510416428,
											"parameters": [
												"Rat.UID"
											]
										}
									],
									"sid": 807998907213193
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Check if both players dropped their cages. If so, it's game over!"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "PlayerCage",
							"sid": 697305542735165,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DropCage\""
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 590706582043522,
							"parameters": {
								"variable": "cagesDropped",
								"value": "1"
							}
						}
					],
					"sid": 199582989222976,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 515213063644613,
									"parameters": {
										"value": "cagesDropped = 2"
									}
								}
							],
							"actions": [
								{
									"callFunction": "gameOver",
									"sid": 743772603152553
								},
								{
									"id": "stop-timer",
									"objectClass": "TextTime",
									"sid": 576533580470517,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"TimeTick\""
									}
								}
							],
							"sid": 528276331988386
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Player 1 controls."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 463504294851932,
							"parameters": {
								"key": 90
							}
						}
					],
					"actions": [
						{
							"callFunction": "moveAim",
							"sid": 961290549015435,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 882825436815515
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 221208645034741,
							"parameters": {
								"key": 88
							}
						}
					],
					"actions": [
						{
							"callFunction": "dropCage",
							"sid": 851746048346644,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 947116685238363
				},
				{
					"eventType": "comment",
					"text": "Player 2 controls."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 353652954605195,
							"parameters": {
								"key": 79
							}
						}
					],
					"actions": [
						{
							"callFunction": "moveAim",
							"sid": 521956025369897,
							"parameters": [
								"2"
							]
						}
					],
					"sid": 200273383294256
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 450616690251680,
							"parameters": {
								"key": 80
							}
						}
					],
					"actions": [
						{
							"callFunction": "dropCage",
							"sid": 668429668058386,
							"parameters": [
								"2"
							]
						}
					],
					"sid": 256411538198718
				}
			],
			"sid": 332777297517924
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Capture Rats",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "When a cage is low enough, rats under it are captured."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 154792026993245,
							"parameters": {
								"object": "PlayerCage"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "PlayerCage",
							"sid": 560971349110831,
							"parameters": {
								"which": "z-elevation",
								"comparison": 2,
								"z-elevation": "16"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "PlayerCage",
							"sid": 385767636461531,
							"parameters": {
								"child": "PlayerCageArea",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "PlayerCage",
							"sid": 648416483307665,
							"behaviorType": "Solid",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 316100520104285,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 763078778102017,
									"parameters": {
										"object": "Rat"
									}
								}
							],
							"actions": [],
							"sid": 742607614691442,
							"children": [
								{
									"eventType": "comment",
									"text": "Rat is captured."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "Rat",
											"sid": 577131670070258,
											"parameters": {
												"object": "PlayerCageArea"
											}
										},
										{
											"id": "is-enabled",
											"objectClass": "Rat",
											"sid": 843600233878690,
											"behaviorType": "Pathfinding"
										}
									],
									"actions": [
										{
											"id": "stop",
											"objectClass": "Rat",
											"sid": 757441146386414,
											"behaviorType": "Pathfinding"
										},
										{
											"id": "set-enabled",
											"objectClass": "Rat",
											"sid": 182731838628374,
											"behaviorType": "Pathfinding",
											"parameters": {
												"set": "disabled"
											}
										}
									],
									"sid": 119537566408631,
									"children": [
										{
											"eventType": "comment",
											"text": "Player 1 score is increased, since they captured the rat."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "PlayerCage",
													"sid": 740235894526095,
													"parameters": {
														"instance-variable": "player",
														"comparison": 0,
														"value": "1"
													}
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 475477863995157,
													"parameters": {
														"object": "TextScore",
														"expression": "TextScore.player = 1"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 561452173276986,
													"parameters": {
														"variable": "p1Score",
														"value": "1"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TextScore",
													"sid": 422238972629320,
													"parameters": {
														"text": "\"[color=#ff5555]P1 Score:[/color] \" & zeropad(P1Score, 2)"
													}
												}
											],
											"sid": 685620803956025
										},
										{
											"eventType": "comment",
											"text": "Player 2 score is increased, since they captured the rat."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 475058108638614
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 334489668510537,
													"parameters": {
														"object": "TextScore",
														"expression": "TextScore.player = 2"
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 465967296469973,
													"parameters": {
														"variable": "p2Score",
														"value": "1"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TextScore",
													"sid": 132637788754330,
													"parameters": {
														"text": "\"[color=#55ffff]P2 Score:[/color] \" & zeropad(P2Score, 2)"
													}
												}
											],
											"sid": 510493160761778
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Rat is not captured, therefore recalculates the current route to take into account the new obstacle (the dropped cage)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 533175285826589
										}
									],
									"actions": [
										{
											"id": "regenerate-obstacle-map",
											"objectClass": "Rat",
											"sid": 260776139108165,
											"behaviorType": "Pathfinding"
										}
									],
									"sid": 264294796270634
								}
							]
						}
					]
				}
			],
			"sid": 605238911671436
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Time",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Executed every second."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "TextTime",
							"sid": 265846682110184,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"TimeTick\""
							}
						}
					],
					"actions": [],
					"sid": 530440429819942,
					"children": [
						{
							"eventType": "comment",
							"text": "Time is up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "TextTime",
									"sid": 525062485174494,
									"parameters": {
										"instance-variable": "timeLeft",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "gameOver",
									"sid": 940462640719617
								}
							],
							"sid": 976836351138894
						},
						{
							"eventType": "comment",
							"text": "Reduce one second of time left and reset timer."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 257914810534956
								}
							],
							"actions": [
								{
									"id": "subtract-from-instvar",
									"objectClass": "TextTime",
									"sid": 984804992509070,
									"parameters": {
										"instance-variable": "timeLeft",
										"value": "1"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextTime",
									"sid": 788999641844691,
									"parameters": {
										"text": "zeropad(Self.timeLeft, 2)"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "TextTime",
									"sid": 395187749313543,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "1.0",
										"type": "once",
										"tag": "\"TimeTick\""
									}
								}
							],
							"sid": 134462835190511
						}
					]
				}
			],
			"sid": 967910431307458
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Over",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Procedures to execute when the game is over."
				},
				{
					"functionName": "gameOver",
					"functionDescription": "Procedures to execute when the game is over",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Stop rats."
						},
						{
							"id": "stop",
							"objectClass": "Rat",
							"sid": 316485648869946,
							"behaviorType": "Pathfinding"
						},
						{
							"id": "set-enabled",
							"objectClass": "Rat",
							"sid": 463601253237509,
							"behaviorType": "Pathfinding",
							"parameters": {
								"set": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Show game over text and fader."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextGameOver",
							"sid": 280964392314562,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"TextGameOverOpacity\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 184937840630208,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FaderOpacity\"",
								"property": "offsetOpacity",
								"end-value": "90",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Hide timer text."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTime",
							"sid": 459612057876533,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"TextTimeOpacity\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 193014463225306,
					"children": [
						{
							"eventType": "comment",
							"text": "Player 1 won the match."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 274277751474420,
									"parameters": {
										"value": "P1Score > P2Score"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextGameOver",
									"sid": 423840875105257,
									"parameters": {
										"text": "replace(Self.Text, \"###\", \"[color=#ff5555]Player 1[/color] won the match!\")"
									}
								}
							],
							"sid": 272739262675400
						},
						{
							"eventType": "comment",
							"text": "Player 2 won the match."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 133977615718352
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 123832522492587,
									"parameters": {
										"value": "P2Score > P1Score"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextGameOver",
									"sid": 355481571966236,
									"parameters": {
										"text": "replace(Self.Text, \"###\", \"[color=#55ffff]Player 2[/color] won the match!\")"
									}
								}
							],
							"sid": 565023879792894
						},
						{
							"eventType": "comment",
							"text": "Tie."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 936340460633067
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextGameOver",
									"sid": 436911433878138,
									"parameters": {
										"text": "replace(Self.Text, \"###\", \"It's a tie!\")"
									}
								}
							],
							"sid": 375348646946375
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 182803186198825,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "TextGameOver",
							"sid": 583118158489642,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						}
					],
					"actions": [
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 377945632481873
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 725506142087696
						}
					],
					"sid": 935247480293110
				}
			],
			"sid": 303054535072064
		}
	],
	"sid": 936989490553933
}