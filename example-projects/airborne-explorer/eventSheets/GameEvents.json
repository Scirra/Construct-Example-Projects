{
	"name": "GameEvents",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "PlayerEvents"
		},
		{
			"eventType": "include",
			"includeSheet": "EnemyEvents"
		},
		{
			"eventType": "include",
			"includeSheet": "ShopEvents"
		},
		{
			"eventType": "comment",
			"text": "Made by Forsteri Studios\n\nWebsite: forsteristudios.com\nE-Mail: forsteristudios@gmail.com\nX: @forsteristudios"
		},
		{
			"eventType": "variable",
			"name": "TARGET_SCORE",
			"type": "string",
			"initialValue": "2800,5500,7800,11500,2500",
			"comment": "Target scores for each level",
			"isStatic": false,
			"isConstant": true,
			"sid": 867314449933859
		},
		{
			"eventType": "variable",
			"name": "ENDLESS_TIME_LIMIT",
			"type": "string",
			"initialValue": "60",
			"comment": "Time limit for endless mode",
			"isStatic": false,
			"isConstant": true,
			"sid": 332744614097035
		},
		{
			"eventType": "variable",
			"name": "CAMPAIGN_TIME_LIMIT",
			"type": "string",
			"initialValue": "120,135,180,180,180",
			"comment": "Time limit for campaign mode",
			"isStatic": false,
			"isConstant": true,
			"sid": 483722012483938
		},
		{
			"eventType": "comment",
			"text": "In-game menu logic."
		},
		{
			"eventType": "variable",
			"name": "IGMButtonSelected",
			"type": "number",
			"initialValue": "1",
			"comment": "Currently selected in-game menu button",
			"isStatic": false,
			"isConstant": false,
			"sid": 262606047165837
		},
		{
			"eventType": "comment",
			"text": "Game logic."
		},
		{
			"eventType": "variable",
			"name": "inputFocus",
			"type": "string",
			"initialValue": "game",
			"comment": "Part of the game the player is currently interacting with",
			"isStatic": false,
			"isConstant": false,
			"sid": 539290985531932
		},
		{
			"eventType": "variable",
			"name": "currentLevel",
			"type": "number",
			"initialValue": "1",
			"comment": "Current campaign level",
			"isStatic": false,
			"isConstant": false,
			"sid": 463912061084350
		},
		{
			"eventType": "variable",
			"name": "timeRemaining",
			"type": "number",
			"initialValue": "0",
			"comment": "Time left to reach the target score",
			"isStatic": false,
			"isConstant": false,
			"sid": 113999510656369
		},
		{
			"eventType": "variable",
			"name": "playerScore",
			"type": "number",
			"initialValue": "0",
			"comment": "Current score",
			"isStatic": false,
			"isConstant": false,
			"sid": 224935228212525
		},
		{
			"eventType": "variable",
			"name": "comboScore",
			"type": "number",
			"initialValue": "0",
			"comment": "Final combo score",
			"isStatic": false,
			"isConstant": false,
			"sid": 243733961910740
		},
		{
			"eventType": "variable",
			"name": "bestComboScore",
			"type": "number",
			"initialValue": "0",
			"comment": "Best combo score",
			"isStatic": false,
			"isConstant": false,
			"sid": 801725798139979
		},
		{
			"eventType": "variable",
			"name": "targetScore",
			"type": "number",
			"initialValue": "0",
			"comment": "Score necessary to beat the level",
			"isStatic": false,
			"isConstant": false,
			"sid": 775290708552919
		},
		{
			"eventType": "variable",
			"name": "lockScore",
			"type": "boolean",
			"initialValue": "false",
			"comment": "If true, player can no longer accumulate points",
			"isStatic": false,
			"isConstant": false,
			"sid": 396989244255350
		},
		{
			"eventType": "variable",
			"name": "windy",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is it windy?",
			"isStatic": false,
			"isConstant": false,
			"sid": 360818821861664
		},
		{
			"eventType": "variable",
			"name": "timeLimit",
			"type": "number",
			"initialValue": "0",
			"comment": "Time limit to beat the level",
			"isStatic": false,
			"isConstant": false,
			"sid": 915865244614926
		},
		{
			"eventType": "comment",
			"text": "Player upgrades."
		},
		{
			"eventType": "variable",
			"name": "canRocket",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Can the player rocket jump?",
			"isStatic": false,
			"isConstant": false,
			"sid": 717510069153710
		},
		{
			"eventType": "variable",
			"name": "canLink",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Can the player use tesla link?",
			"isStatic": false,
			"isConstant": false,
			"sid": 510567459933703
		},
		{
			"eventType": "variable",
			"name": "canBounce",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Can the player bounce?",
			"isStatic": false,
			"isConstant": false,
			"sid": 492346289390380
		},
		{
			"eventType": "comment",
			"text": "Enemy upgrades."
		},
		{
			"eventType": "variable",
			"name": "eLevelDrone",
			"type": "number",
			"initialValue": "0",
			"comment": "Drone level",
			"isStatic": false,
			"isConstant": false,
			"sid": 772688716318419
		},
		{
			"eventType": "variable",
			"name": "eLevelBlaster",
			"type": "number",
			"initialValue": "0",
			"comment": "Blaster level",
			"isStatic": false,
			"isConstant": false,
			"sid": 203062460865352
		},
		{
			"eventType": "variable",
			"name": "eLevelSaucer",
			"type": "number",
			"initialValue": "0",
			"comment": "Saucer level",
			"isStatic": false,
			"isConstant": false,
			"sid": 203806739913301
		},
		{
			"eventType": "variable",
			"name": "eLevelRecon",
			"type": "number",
			"initialValue": "0",
			"comment": "Recon level",
			"isStatic": false,
			"isConstant": false,
			"sid": 349533191673590
		},
		{
			"eventType": "comment",
			"text": "Misc."
		},
		{
			"eventType": "variable",
			"name": "groundLevel",
			"type": "number",
			"initialValue": "0",
			"comment": "Y coordinate for ground level",
			"isStatic": false,
			"isConstant": false,
			"sid": 987882261333826
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 557191375231194
						},
						{
							"id": "has-tags",
							"objectClass": "TextMissionStart",
							"sid": 841745860591603,
							"parameters": {
								"tags": "\"custom\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Disable background HSL adjustments."
						},
						{
							"id": "set-layer-effect-enabled",
							"objectClass": "System",
							"sid": 612080874111778,
							"parameters": {
								"layer": "\"Background\"",
								"mode": "disable",
								"effect": "\"AdjustHSL\""
							}
						},
						{
							"type": "comment",
							"text": "Make Darkness layer invisible."
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 302229218007895,
							"parameters": {
								"layer": "\"Darkness\"",
								"visibility": "invisible"
							}
						},
						{
							"type": "comment",
							"text": "Move analog controls to a very far away position."
						},
						{
							"id": "set-position",
							"objectClass": "AnalogBase",
							"sid": 914333170080783,
							"parameters": {
								"x": "-10000",
								"y": "-10000"
							}
						},
						{
							"id": "set-position",
							"objectClass": "AnalogStick",
							"sid": 715278910043530,
							"parameters": {
								"x": "-10000",
								"y": "-10000"
							}
						},
						{
							"type": "comment",
							"text": "Hide some of the UI elements."
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 699327843746766,
							"parameters": {
								"layer": "\"ShopUI\"",
								"opacity": "0"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 423109553991288,
							"parameters": {
								"layer": "\"MenuUI\"",
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Hide fader."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 825068886584627,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set initial variables."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 813019859022552,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"game\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 953954172194083,
							"parameters": {
								"variable": "bestComboScore",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 543592372590254,
							"parameters": {
								"variable": "playerScore",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 630758981998718,
							"parameters": {
								"variable": "eLevelDrone",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 846819401709240,
							"parameters": {
								"variable": "eLevelBlaster",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 310584123948031,
							"parameters": {
								"variable": "eLevelSaucer",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 750631756432512,
							"parameters": {
								"variable": "eLevelRecon",
								"value": "0"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 951329260517535,
							"parameters": {
								"variable": "canLink",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 357059123133085,
							"parameters": {
								"variable": "canRocket",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 935325183011080,
							"parameters": {
								"variable": "canBounce",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 816290184498287,
							"parameters": {
								"variable": "lockScore",
								"value": "false"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 661220856869546,
							"parameters": {
								"variable": "windy",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Set game timer."
						},
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 412019335526563,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "regular",
								"tag": "\"TimeLimit\""
							}
						}
					],
					"sid": 437162808339097,
					"children": [
						{
							"eventType": "comment",
							"text": "Endless mode."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 507229022445897,
									"parameters": {
										"variable": "endlessMode"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Endless mode has a default starting upgrade set."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 596028892487706,
									"parameters": {
										"variable": "canRocket",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 147803241230740,
									"parameters": {
										"variable": "canLink",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 208126876729778,
									"parameters": {
										"variable": "canBounce",
										"value": "false"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 602670668640843,
									"parameters": {
										"variable": "eLevelDrone",
										"value": "5"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 515378556269433,
									"parameters": {
										"variable": "eLevelBlaster",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 194676377519503,
									"parameters": {
										"variable": "eLevelSaucer",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 249998056644384,
									"parameters": {
										"variable": "eLevelRecon",
										"value": "0"
									}
								},
								{
									"type": "comment",
									"text": "Update Mission Start text."
								},
								{
									"id": "set-text",
									"objectClass": "TextMissionStart",
									"sid": 959871006367042,
									"parameters": {
										"text": "\"endless\""
									}
								},
								{
									"type": "comment",
									"text": "Load random scenery."
								},
								{
									"callFunction": "loadScenery",
									"sid": 468047159044775,
									"parameters": [
										"choose(0, 1, 2, 3)"
									]
								}
							],
							"sid": 723918330577478
						},
						{
							"eventType": "comment",
							"text": "Campaign mode."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 403681314430200
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Get current level."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 615128719893929,
									"parameters": {
										"variable": "currentLevel",
										"value": "int(DictProfile.Get(\"Level\"))"
									}
								},
								{
									"type": "comment",
									"text": "Load scenery for the current level."
								},
								{
									"callFunction": "loadScenery",
									"sid": 873358544022957,
									"parameters": [
										"currentLevel - 1"
									]
								},
								{
									"type": "comment",
									"text": "Update Mission Start text."
								},
								{
									"id": "set-text",
									"objectClass": "TextMissionStart",
									"sid": 944881302934366,
									"parameters": {
										"text": "\"mission \" & currentLevel"
									}
								}
							],
							"sid": 532262781148324,
							"children": [
								{
									"eventType": "comment",
									"text": "Get player upgrades from player profile."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-value",
											"objectClass": "DictProfile",
											"sid": 222109020521721,
											"parameters": {
												"key": "\"Rocket\"",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 544155756041932,
											"parameters": {
												"variable": "canRocket",
												"value": "true"
											}
										}
									],
									"sid": 410890167133557
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-value",
											"objectClass": "DictProfile",
											"sid": 630602370699563,
											"parameters": {
												"key": "\"Link\"",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 989961947393215,
											"parameters": {
												"variable": "canLink",
												"value": "true"
											}
										}
									],
									"sid": 220841092118073
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-value",
											"objectClass": "DictProfile",
											"sid": 647672224644838,
											"parameters": {
												"key": "\"Bounce\"",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 289618659193595,
											"parameters": {
												"variable": "canBounce",
												"value": "true"
											}
										}
									],
									"sid": 393834723609487
								},
								{
									"eventType": "comment",
									"text": "Get enemy upgrades from player profile."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 384780139345693,
											"parameters": {
												"variable": "eLevelDrone",
												"value": "int(DictProfile.Get(\"Drone\"))"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 632530608651236,
											"parameters": {
												"variable": "eLevelBlaster",
												"value": "int(DictProfile.Get(\"Blaster\"))"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 355911659475833,
											"parameters": {
												"variable": "eLevelSaucer",
												"value": "int(DictProfile.Get(\"Saucer\"))"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 473873860040992,
											"parameters": {
												"variable": "eLevelRecon",
												"value": "int(DictProfile.Get(\"Recon\"))"
											}
										}
									],
									"sid": 149776171212843
								},
								{
									"eventType": "comment",
									"text": "Special properties for level 2."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 211811274635582,
											"parameters": {
												"variable": "currentLevel",
												"comparison": 0,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-rate",
											"objectClass": "Particles",
											"sid": 123227903314960,
											"parameters": {
												"rate": "200"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 257009776388615,
											"parameters": {
												"variable": "windy",
												"value": "true"
											}
										}
									],
									"sid": 125832662590628
								},
								{
									"eventType": "comment",
									"text": "Special properties for level 3."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 478330086234481,
											"parameters": {
												"variable": "currentLevel",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "GameManager",
											"sid": 424174662993557,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "1.0 + timeRemaining/timeLimit",
												"type": "once",
												"tag": "\"SpawnObstacle\""
											}
										}
									],
									"sid": 824122426495513,
									"children": [
										{
											"eventType": "comment",
											"text": "Create pool of rock trails."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 716181236949983,
													"parameters": {
														"count": "180"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 584780754700227,
													"parameters": {
														"object-to-create": "ObstacleTrail",
														"layer": "\"PlayerTrail\"",
														"x": "-10000",
														"y": "-10000",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 120715914645182
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Special properties for level 4."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 328830313668952,
											"parameters": {
												"variable": "currentLevel",
												"comparison": 0,
												"value": "4"
											}
										}
									],
									"actions": [
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 281067692088153,
											"parameters": {
												"layer": "\"Darkness\"",
												"visibility": "visible"
											}
										}
									],
									"sid": 972941086208764
								},
								{
									"eventType": "comment",
									"text": "Special properties for level 5."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 492522541011085,
											"parameters": {
												"variable": "currentLevel",
												"comparison": 0,
												"value": "5"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 526712765604563,
											"parameters": {
												"object-to-create": "Boss",
												"layer": "\"Enemies\"",
												"x": "LayoutWidth/2",
												"y": "-Boss.Height*2",
												"create-hierarchy": true,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "Boss",
											"sid": 188761456237212,
											"parameters": {
												"opacity": "0"
											}
										}
									],
									"sid": 355294021804744
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Load level information."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 663844289147983,
									"parameters": {
										"variable": "timeLimit",
										"value": "endlessMode ? ENDLESS_TIME_LIMIT : int(tokenat(CAMPAIGN_TIME_LIMIT, currentLevel - 1, \",\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 223429415060669,
									"parameters": {
										"variable": "targetScore",
										"value": "endlessMode ? Infinity : int(tokenat(TARGET_SCORE, currentLevel - 1, \",\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 360256183117150,
									"parameters": {
										"variable": "timeRemaining",
										"value": "timeLimit"
									}
								}
							],
							"sid": 768356149858778
						},
						{
							"eventType": "comment",
							"text": "Update sound mode."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "DictProfile",
									"sid": 391634457459536,
									"parameters": {
										"key": "\"Sound\"",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonSound",
									"sid": 269982549344538,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 409977751567440
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 285201697815828
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonSound",
									"sid": 801607654517001,
									"parameters": {
										"frame-number": "1"
									}
								}
							],
							"sid": 680151921138203
						},
						{
							"eventType": "comment",
							"text": "Start enemy timers."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "startEnemyTimers",
									"sid": 488135111728859
								}
							],
							"sid": 542791894019210
						},
						{
							"eventType": "comment",
							"text": "Update starting score."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Update initial score."
								},
								{
									"callFunction": "updatePlayerScore",
									"sid": 202112703539616,
									"parameters": [
										"0",
										false,
										false
									]
								}
							],
							"sid": 276780755784950
						},
						{
							"eventType": "comment",
							"text": "If on mobile, show special action buttons."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 700343793266044,
									"parameters": {
										"variable": "mobileControls"
									}
								}
							],
							"actions": [],
							"sid": 740228542163370,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 695901260235751,
											"parameters": {
												"variable": "canRocket"
											}
										}
									],
									"actions": [
										{
											"id": "set-x",
											"objectClass": "ButtonRocket",
											"sid": 108005887328697,
											"parameters": {
												"x": "Self.X - 1000"
											}
										}
									],
									"sid": 336198784655938
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 308351767130235,
											"parameters": {
												"variable": "canLink"
											}
										}
									],
									"actions": [
										{
											"id": "set-x",
											"objectClass": "ButtonLink",
											"sid": 623558675431645,
											"parameters": {
												"x": "Self.X - 1000"
											}
										}
									],
									"sid": 979846849269052
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Play \"Mission Start\" and start BGM."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-keyframe-reached",
							"objectClass": "TimelineController",
							"sid": 950202509723701,
							"parameters": {
								"tags": "\"playMissionStart\"",
								"match": "any-tags"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Play sound effect."
						},
						{
							"callFunction": "playSFX",
							"sid": 389247215506582,
							"parameters": [
								"\"MissionStart\"",
								"\"SFX\"",
								"-5",
								"1"
							]
						},
						{
							"type": "comment",
							"text": "Start playing the music silently and add 1 to BGMPlayed counter."
						},
						{
							"callFunction": "playBGM",
							"sid": 666935368148109,
							"parameters": [
								"ArrBGM.At(BGMPlayed)",
								true,
								"0"
							]
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 257107240933695,
							"parameters": {
								"variable": "BGMPlayed",
								"value": "1"
							}
						}
					],
					"sid": 357473563544544,
					"children": [
						{
							"eventType": "comment",
							"text": "If all BGM files were played, reset counter and reshuffle array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 920625316557318,
									"parameters": {
										"variable": "BGMPlayed",
										"comparison": 0,
										"value": "ArrBGM.Width"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 778405269272196,
									"parameters": {
										"variable": "BGMPlayed",
										"value": "0"
									}
								},
								{
									"id": "shuffle",
									"objectClass": "ArrBGM",
									"sid": 268410777019191,
									"parameters": {
										"axis": "x"
									}
								}
							],
							"sid": 468747021920991
						},
						{
							"eventType": "comment",
							"text": "Fade BGM in if sound is on."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-value",
									"objectClass": "DictProfile",
									"sid": 801968740361783,
									"parameters": {
										"key": "\"Sound\"",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Fade BGM in."
								},
								{
									"callFunction": "fadeBGM",
									"sid": 584744653696993,
									"parameters": [
										true,
										"1.0"
									]
								}
							],
							"sid": 210598229878796
						}
					]
				}
			],
			"sid": 742478533742570
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Darkness",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reduce DarknessSprite's scale over time."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 783094588088558,
							"parameters": {
								"variable": "currentLevel",
								"comparison": 0,
								"value": "4"
							}
						}
					],
					"actions": [
						{
							"id": "set-scale",
							"objectClass": "DarknessSprite",
							"sid": 699070029746742,
							"parameters": {
								"scale": "max(timeRemaining/timeLimit, 0.33)"
							}
						}
					],
					"sid": 461742840424570
				}
			],
			"sid": 193504826940786
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Scenery",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "BG_PARALLAX_0",
					"type": "number",
					"initialValue": "0.5",
					"comment": "How fast parallax 0 scrolls.",
					"isStatic": false,
					"isConstant": false,
					"sid": 597665123604794
				},
				{
					"eventType": "variable",
					"name": "BG_PARALLAX_1",
					"type": "number",
					"initialValue": "0.25",
					"comment": "How fast the parallax1 scrolls.",
					"isStatic": false,
					"isConstant": false,
					"sid": 534417951472383
				},
				{
					"eventType": "variable",
					"name": "BG_PARALLAX_2",
					"type": "number",
					"initialValue": "0.05",
					"comment": "How fast the parallax2 scrolls.",
					"isStatic": false,
					"isConstant": false,
					"sid": 405095479843909
				},
				{
					"eventType": "comment",
					"text": "Load objects for the scenery of a specific level."
				},
				{
					"functionName": "loadScenery",
					"functionDescription": "Load objects for the scenery of a specific level",
					"functionCategory": "Scenery",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "level",
							"type": "number",
							"initialValue": "1",
							"comment": "Level number",
							"sid": 986980112853625
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 821416949414406,
							"parameters": {
								"object-name": "ArrScenery.At(0, level)",
								"layer": "\"Road\"",
								"x": "0",
								"y": "3090",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 945970743879823,
							"parameters": {
								"object-name": "ArrScenery.At(1, level)",
								"layer": "\"Parallax0\"",
								"x": "0",
								"y": "2200",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 290691023021373,
							"parameters": {
								"object-name": "ArrScenery.At(2, level)",
								"layer": "\"Parallax1\"",
								"x": "0",
								"y": "1610",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 265036137650484,
							"parameters": {
								"object-name": "ArrScenery.At(3, level)",
								"layer": "\"Parallax2\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 587714862521400,
							"parameters": {
								"object-name": "ArrScenery.At(4, level)",
								"layer": "\"Sky\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Setup ground level and player starting position."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 585240931067318,
							"parameters": {
								"seconds": "0",
								"use-timescale": true
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 654811810845429,
							"parameters": {
								"variable": "groundLevel",
								"value": "Roads.BBoxTop"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Player",
							"sid": 857398500286161,
							"parameters": {
								"y": "groundLevel"
							}
						}
					],
					"sid": 308880576061363,
					"children": [
						{
							"eventType": "comment",
							"text": "Adjust HSL to make it nighttime."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 248732092801272,
									"parameters": {
										"variable": "level",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-effect-enabled",
									"objectClass": "System",
									"sid": 689928098326487,
									"parameters": {
										"layer": "\"Background\"",
										"mode": "enable",
										"effect": "\"AdjustHSL\""
									}
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 456610710164593,
									"parameters": {
										"layer": "\"Background\"",
										"effect": "\"AdjustHSL\"",
										"parameter-index": "0",
										"value": "-30"
									}
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 136551906742326,
									"parameters": {
										"layer": "\"Background\"",
										"effect": "\"AdjustHSL\"",
										"parameter-index": "1",
										"value": "61"
									}
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 652986991577610,
									"parameters": {
										"layer": "\"Background\"",
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "93"
									}
								}
							],
							"sid": 879456514099146
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Move scenery objects."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 521340637189368
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Roads",
							"sid": 393959514866960,
							"parameters": {
								"offset-x": "Self.ImageOffsetX - clamp(Player.X/2, 300, LayoutWidth - 300) * dt"
							}
						},
						{
							"id": "set-x",
							"objectClass": "Static",
							"sid": 581758119983550,
							"parameters": {
								"x": "Self.X - clamp(Player.X/2, 300, LayoutWidth - 300) * dt"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Parallax0",
							"sid": 349447673100862,
							"parameters": {
								"offset-x": "Self.ImageOffsetX - clamp(Player.X/2, 300, LayoutWidth - 300) * dt * BG_PARALLAX_0"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Parallax1",
							"sid": 430586792684752,
							"parameters": {
								"offset-x": "Self.ImageOffsetX - clamp(Player.X/2, 300, LayoutWidth - 300) * dt * BG_PARALLAX_1"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Parallax2",
							"sid": 394682460001859,
							"parameters": {
								"offset-x": "Self.ImageOffsetX - clamp(Player.X/2, 300, LayoutWidth - 300) * dt * BG_PARALLAX_2"
							}
						}
					],
					"sid": 880826389815248
				}
			],
			"sid": 659960327407309
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "CampaignOver",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player beat the campaign."
				},
				{
					"functionName": "campaignOver",
					"functionDescription": "Player beat the campaign",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Stop all sound effects and block new ones."
						},
						{
							"callFunction": "stopAllSFX",
							"sid": 485140726779155
						},
						{
							"callFunction": "blockSFX",
							"sid": 727079156020318
						},
						{
							"type": "comment",
							"text": "Fade BGM out."
						},
						{
							"callFunction": "fadeBGM",
							"sid": 454509450438736,
							"parameters": [
								false,
								"1.0"
							]
						},
						{
							"type": "comment",
							"text": "Change input focus."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 834817789747457,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"advanceLevel\""
							}
						},
						{
							"type": "comment",
							"text": "Stop all timers."
						},
						{
							"id": "stop-all-timers",
							"objectClass": "GameManager",
							"sid": 777063419220047,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Disable player collisions"
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "Player",
							"sid": 890153353520530,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Fade out the game."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 827808085073006,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1.0",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Restart from level 1."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 723606038888872,
							"parameters": {
								"variable": "currentLevel",
								"value": "1"
							}
						},
						{
							"type": "comment",
							"text": "Fully downgrade the player."
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 111116938751751,
							"parameters": {
								"key": "\"Drone\"",
								"value": "3"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 675995663082890,
							"parameters": {
								"key": "\"Blaster\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 594491318392130,
							"parameters": {
								"key": "\"Saucer\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 589907696804365,
							"parameters": {
								"key": "\"Recon\"",
								"value": "1"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 642936942634766,
							"parameters": {
								"key": "\"Rocket\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 691338802200621,
							"parameters": {
								"key": "\"Link\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 835889598456090,
							"parameters": {
								"key": "\"Bounce\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 565060424677465,
							"parameters": {
								"key": "\"Level\"",
								"value": "currentLevel"
							}
						},
						{
							"type": "comment",
							"text": "Save profile."
						},
						{
							"callFunction": "saveProfile",
							"sid": 941157824578537
						},
						{
							"type": "comment",
							"text": "Go to credits screen."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 693555053336701
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 540089959184000,
							"parameters": {
								"seconds": "1.0",
								"use-timescale": false
							}
						},
						{
							"id": "set-time-scale",
							"objectClass": "System",
							"sid": 571505387052246,
							"parameters": {
								"time-scale": "1.0"
							}
						},
						{
							"callFunction": "stopBGM",
							"sid": 550649254369720
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 336453575853928,
							"parameters": {
								"layout": "Credits"
							}
						}
					],
					"sid": 544384583811333
				}
			],
			"sid": 304571865178159
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Time Limit",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player ran out of time"
				},
				{
					"functionName": "timeIsUp",
					"functionDescription": "Player ran out of time",
					"functionCategory": "Timer",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 696699056953000,
					"children": [
						{
							"eventType": "comment",
							"text": "If the current session is endless, just display the shop."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 555927341484419,
									"parameters": {
										"variable": "endlessMode"
									}
								}
							],
							"actions": [
								{
									"callFunction": "displayShopUI",
									"sid": 837548634796369
								}
							],
							"sid": 113666513119256
						},
						{
							"eventType": "comment",
							"text": "Else, check if the player has reached the target score."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 169506656871340
								}
							],
							"actions": [],
							"sid": 534130696009953,
							"children": [
								{
									"eventType": "comment",
									"text": "If so, display the shop UI to advance to the next level."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 250171221621623,
											"parameters": {
												"variable": "playerScore",
												"comparison": 5,
												"value": "targetScore"
											}
										}
									],
									"actions": [],
									"sid": 820251301411127,
									"children": [
										{
											"eventType": "comment",
											"text": "Normal behavior."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 213435495608831,
													"parameters": {
														"variable": "currentLevel",
														"comparison": 1,
														"value": "5"
													}
												}
											],
											"actions": [
												{
													"callFunction": "displayShopUI",
													"sid": 689453486532599
												}
											],
											"sid": 309020808071237
										},
										{
											"eventType": "comment",
											"text": "Player beat the campaign."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 202159667016195
												}
											],
											"actions": [
												{
													"callFunction": "campaignOver",
													"sid": 610592814336052
												}
											],
											"sid": 646591531105616
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Otherwise, the player failed. Restart the level."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 369209854912831
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Stop all sound effects."
										},
										{
											"callFunction": "stopAllSFX",
											"sid": 968145124228234
										},
										{
											"type": "comment",
											"text": "Fade BGM out."
										},
										{
											"callFunction": "fadeBGM",
											"sid": 594139847844752,
											"parameters": [
												false,
												"1.0"
											]
										},
										{
											"type": "comment",
											"text": "Change input focus."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 711208368062443,
											"parameters": {
												"variable": "inputFocus",
												"value": "\"timeIsUp\""
											}
										},
										{
											"type": "comment",
											"text": "Stop all timers."
										},
										{
											"id": "stop-all-timers",
											"objectClass": "GameManager",
											"sid": 588881420807265,
											"behaviorType": "Timer"
										},
										{
											"type": "comment",
											"text": "Pause the game."
										},
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 655754326170349,
											"parameters": {
												"time-scale": "0.0"
											}
										},
										{
											"type": "comment",
											"text": "Unpause relevant objects."
										},
										{
											"id": "set-object-time-scale",
											"objectClass": "System",
											"sid": 106034709096812,
											"parameters": {
												"object": "Fader",
												"time-scale": "1.0"
											}
										},
										{
											"id": "set-object-time-scale",
											"objectClass": "System",
											"sid": 923214864894851,
											"parameters": {
												"object": "GameManager",
												"time-scale": "1.0"
											}
										},
										{
											"id": "set-object-time-scale",
											"objectClass": "System",
											"sid": 660419515271116,
											"parameters": {
												"object": "TextFail",
												"time-scale": "1.0"
											}
										},
										{
											"type": "comment",
											"text": "Show fail message."
										},
										{
											"id": "set-text",
											"objectClass": "TextFail",
											"sid": 977434174934810,
											"parameters": {
												"text": "replace(Self.Text, \"###\", str(playerScore))"
											}
										},
										{
											"id": "set-text",
											"objectClass": "TextFail",
											"sid": 241895863564878,
											"parameters": {
												"text": "replace(Self.Text, \"@@@\", str(targetScore))"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "TextFail",
											"sid": 560819280778067,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowFailMessage\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.5",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Fade out the game to restart the level."
										},
										{
											"id": "tween-one-property",
											"objectClass": "Fader",
											"sid": 703193503388578,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowFader\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "1",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 223414846909554,
											"parameters": {
												"seconds": "5.0",
												"use-timescale": false
											}
										},
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 220699479435830,
											"parameters": {
												"time-scale": "1.0"
											}
										},
										{
											"callFunction": "stopBGM",
											"sid": 409093412302243
										},
										{
											"id": "restart-layout",
											"objectClass": "System",
											"sid": 900775516724581
										}
									],
									"sid": 557170410076685
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Every second, recalculate player's remaining time and update Time Bar UI element."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 312883995261067,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"TimeLimit\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "TimeBar",
							"sid": 501525767346718,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"TimeBarWidth\"",
								"property": "offsetWidth",
								"end-value": "max(Self.ImageWidth * timeRemaining / timeLimit, 0)",
								"time": "1",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 442605006061811,
					"children": [
						{
							"eventType": "comment",
							"text": "Time is up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 541501174010364,
									"parameters": {
										"variable": "timeRemaining",
										"comparison": 3,
										"value": "-1"
									}
								}
							],
							"actions": [],
							"sid": 775105637651036,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if the player is on the ground."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-y",
											"objectClass": "Player",
											"sid": 566120407361788,
											"parameters": {
												"comparison": 5,
												"y-co-ordinate": "groundLevel - Player.Height/2"
											}
										}
									],
									"actions": [
										{
											"callFunction": "timeIsUp",
											"sid": 867060605536946
										}
									],
									"sid": 131062500164136
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Reduce time remaining."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 644532996540522
								}
							],
							"actions": [
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 457346476336249,
									"parameters": {
										"variable": "timeRemaining",
										"value": "1"
									}
								}
							],
							"sid": 496872397224265
						}
					]
				}
			],
			"sid": 128319681031413
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Score",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "MULTIPLIER_ADD",
					"type": "number",
					"initialValue": "0.05",
					"comment": "Amount of multiplier to add after each entry",
					"isStatic": false,
					"isConstant": true,
					"sid": 569366098046201
				},
				{
					"eventType": "variable",
					"name": "SCORE_ADD",
					"type": "number",
					"initialValue": "100",
					"comment": "Amount of score to add after each entry",
					"isStatic": false,
					"isConstant": true,
					"sid": 865062429017202
				},
				{
					"eventType": "variable",
					"name": "COMBO_FONT_SIZE",
					"type": "number",
					"initialValue": "32",
					"comment": "Initial combo font size",
					"isStatic": false,
					"isConstant": true,
					"sid": 788424655176295
				},
				{
					"eventType": "variable",
					"name": "SCORE_FONT_SIZE",
					"type": "number",
					"initialValue": "32",
					"comment": "Initial score font size",
					"isStatic": false,
					"isConstant": true,
					"sid": 900396642882053
				},
				{
					"eventType": "variable",
					"name": "DRONE_COLOR",
					"type": "string",
					"initialValue": "#ff004d",
					"comment": "Hex color for \"Drone\" text",
					"isStatic": false,
					"isConstant": true,
					"sid": 559466933545362
				},
				{
					"eventType": "variable",
					"name": "BLASTER_COLOR",
					"type": "string",
					"initialValue": "#4593d3",
					"comment": "Hex color for \"Blaster\" text",
					"isStatic": false,
					"isConstant": true,
					"sid": 719001808547658
				},
				{
					"eventType": "variable",
					"name": "SAUCER_COLOR",
					"type": "string",
					"initialValue": "#b01fd5",
					"comment": "Hex color for \"Saucer\" text",
					"isStatic": false,
					"isConstant": true,
					"sid": 832807142891149
				},
				{
					"eventType": "variable",
					"name": "RECON_COLOR",
					"type": "string",
					"initialValue": "#c1c14b",
					"comment": "Hex color for \"Recon\" text",
					"isStatic": false,
					"isConstant": true,
					"sid": 268738174520207
				},
				{
					"eventType": "variable",
					"name": "BOSS_COLOR",
					"type": "string",
					"initialValue": "#00de85",
					"comment": "Hex color for \"Boss\" text",
					"isStatic": false,
					"isConstant": true,
					"sid": 583170632620273
				},
				{
					"eventType": "comment",
					"text": "Update current combo text."
				},
				{
					"aceType": "action",
					"aceName": "Update Combo Text",
					"objectClass": "TextCombo",
					"functionDescription": "Update current combo text",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "useMultiplier",
							"type": "boolean",
							"initialValue": "true",
							"comment": "Should a multiplier be used?",
							"sid": 487290770606147
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Set starting text."
						},
						{
							"id": "set-text",
							"objectClass": "TextCombo",
							"sid": 360736069285705,
							"parameters": {
								"text": "\"[outlineback=#000000][lineThickness=4]\""
							}
						},
						{
							"type": "comment",
							"text": "Animate text combo."
						},
						{
							"id": "tween-value",
							"objectClass": "TextCombo",
							"sid": 193389220178206,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ChangeFontSize\"",
								"start-value": "1",
								"end-value": "1.25",
								"time": "0.2",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextCombo",
							"sid": 841667516938195,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTextCombo\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 879574725845165,
					"children": [
						{
							"eventType": "variable",
							"name": "multiplier",
							"type": "number",
							"initialValue": "0.95",
							"comment": "Combo multiplier",
							"isStatic": false,
							"isConstant": false,
							"sid": 331038895650929
						},
						{
							"eventType": "variable",
							"name": "totalScore",
							"type": "number",
							"initialValue": "0",
							"comment": "Total combo score",
							"isStatic": false,
							"isConstant": false,
							"sid": 722206092756640
						},
						{
							"eventType": "variable",
							"name": "addPlus",
							"type": "boolean",
							"initialValue": "false",
							"comment": "Should the \"+\" symbol be added between new values?",
							"isStatic": false,
							"isConstant": false,
							"sid": 384731834809202
						},
						{
							"eventType": "comment",
							"text": "Set text for each combo entry."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-key",
									"objectClass": "DictCombo",
									"sid": 112564022421587
								}
							],
							"actions": [],
							"sid": 805510764677993,
							"children": [
								{
									"eventType": "comment",
									"text": "Plus should be added between 2 entries."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 325833026849515,
											"parameters": {
												"variable": "addPlus"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "TextCombo",
											"sid": 332577845450027,
											"parameters": {
												"text": "Self.Text & \" + \" & DictCombo.CurrentValue & \"x \" & DictCombo.CurrentKey"
											}
										}
									],
									"sid": 502296854824701
								},
								{
									"eventType": "comment",
									"text": "Plus shouldn't be added."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 169152143001369
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "TextCombo",
											"sid": 595765052738847,
											"parameters": {
												"text": "Self.Text & \"( \" & DictCombo.CurrentValue & \"x \" & DictCombo.CurrentKey"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 831831009973487,
											"parameters": {
												"variable": "addPlus",
												"value": "true"
											}
										}
									],
									"sid": 716824290416017
								},
								{
									"eventType": "comment",
									"text": "Compute multiplier and total combo score."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 298492101452454,
											"parameters": {
												"variable": "multiplier",
												"value": "DictCombo.CurrentValue * MULTIPLIER_ADD"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 236047481884479,
											"parameters": {
												"variable": "totalScore",
												"value": "DictCombo.CurrentValue * 100"
											}
										}
									],
									"sid": 957736398098430
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Set colors."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 348147146246789,
									"parameters": {
										"text": "replace(Self.Text, \"Drone\", \"[color=\" & DRONE_COLOR & \"]Drone[/color]\")"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 470149631188972,
									"parameters": {
										"text": "replace(Self.Text, \"Blaster\", \"[color=\" & BLASTER_COLOR& \"]Blaster[/color]\")"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 825346284627983,
									"parameters": {
										"text": "replace(Self.Text, \"Saucer\", \"[color=\" & SAUCER_COLOR & \"]Saucer[/color]\")"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 193502634575117,
									"parameters": {
										"text": "replace(Self.Text, \"Recon\", \"[color=\" & RECON_COLOR & \"]Recon[/color]\")"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 682769228696446,
									"parameters": {
										"text": "replace(Self.Text, \"Boss\", \"[color=\" & BOSS_COLOR & \"]Boss[/color]\")"
									}
								}
							],
							"sid": 806561624934423
						},
						{
							"eventType": "comment",
							"text": "Display multiplier and total combo score."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 261503254185827,
									"parameters": {
										"variable": "useMultiplier"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 988351909588306,
									"parameters": {
										"variable": "comboScore",
										"value": "int(totalScore * multiplier)"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 981705953383781,
									"parameters": {
										"text": "Self.Text & \" ) x \" & multiplier & \" = \" & comboScore"
									}
								}
							],
							"sid": 303626631189656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 544715893481567
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 990875025770784,
									"parameters": {
										"variable": "comboScore",
										"value": "totalScore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextCombo",
									"sid": 140247223694903,
									"parameters": {
										"text": "Self.Text & \" ) = \" & comboScore"
									}
								}
							],
							"sid": 338051355056220
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update player's score."
				},
				{
					"functionName": "updatePlayerScore",
					"functionDescription": "Update player's score",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "score",
							"type": "number",
							"initialValue": "0",
							"comment": "Score to be set",
							"sid": 313565066826535
						},
						{
							"name": "fromShop",
							"type": "boolean",
							"initialValue": "false",
							"comment": "Is the score being updated from within the shop?",
							"sid": 150329442593650
						},
						{
							"name": "animate",
							"type": "boolean",
							"initialValue": "true",
							"comment": "Animate score text?",
							"sid": 879728056036291
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 188913544978713,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 771250824948203,
									"parameters": {
										"variable": "inputFocus",
										"comparison": 0,
										"value": "\"game\""
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 956275621506790,
									"parameters": {
										"variable": "fromShop"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 182969198698401,
									"parameters": {
										"variable": "playerScore",
										"value": "score"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextUpgradePoints",
									"sid": 694485521312039,
									"parameters": {
										"text": "\"[outlineBack=#000000][lineThickness=4]Balance: $\" & playerScore"
									}
								}
							],
							"sid": 376006665979918,
							"children": [
								{
									"eventType": "comment",
									"text": "Animate score text."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 444015961001614,
											"parameters": {
												"variable": "animate"
											}
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "TextScore",
											"sid": 404854244630658,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ChangeFontSize\"",
												"start-value": "1",
												"end-value": "1.25",
												"time": "0.2",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 283790488011144
								},
								{
									"eventType": "comment",
									"text": "Endless mode."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 454100353336283,
											"parameters": {
												"variable": "endlessMode"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "TextScore",
											"sid": 338836275921298,
											"parameters": {
												"text": "\"[outlineBack=#000000][lineThickness=4]Score: \" & playerScore"
											}
										}
									],
									"sid": 519059584148364
								},
								{
									"eventType": "comment",
									"text": "Campaign mode."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 189949391400095
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "TextScore",
											"sid": 425560520197558,
											"parameters": {
												"text": "\"[outlineBack=#000000][lineThickness=4]Score: \" & playerScore & \" / \" & targetScore"
											}
										}
									],
									"sid": 246523014071130
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Add combo points to player's score."
				},
				{
					"functionName": "addComboScore",
					"functionDescription": "Add combo points to player's score",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 753729045206173,
							"parameters": {
								"variable": "inputFocus",
								"comparison": 0,
								"value": "\"game\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "updatePlayerScore",
							"sid": 789295054597863,
							"parameters": [
								"playerScore + (lockScore ? 0 : comboScore)",
								false,
								true
							]
						}
					],
					"sid": 253528101137754,
					"children": [
						{
							"eventType": "comment",
							"text": "Check if the player beat their previous combo score."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 327112471665975,
									"parameters": {
										"variable": "comboScore",
										"comparison": 4,
										"value": "bestComboScore"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 206422844287925,
									"parameters": {
										"variable": "bestComboScore",
										"value": "comboScore"
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextBestCombo",
									"sid": 936624022304113,
									"parameters": {
										"text": "\"[outlineBack=#000000][lineThickness=4]Best Combo: \" & comboScore"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "TextBestCombo",
									"sid": 297946944905727,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ChangeFontSize\"",
										"start-value": "1",
										"end-value": "1.25",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								}
							],
							"sid": 608347578095347,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 336821066031686,
											"parameters": {
												"variable": "comboScore",
												"comparison": 4,
												"value": "int(DictProfile.Get(\"Combo\"))"
											}
										}
									],
									"actions": [
										{
											"id": "set-key",
											"objectClass": "DictProfile",
											"sid": 811054476260409,
											"parameters": {
												"key": "\"Combo\"",
												"value": "comboScore"
											}
										},
										{
											"callFunction": "saveProfile",
											"sid": 884275249687521
										},
										{
											"id": "flash",
											"objectClass": "TextNewBest",
											"sid": 987901977555013,
											"behaviorType": "Flash",
											"parameters": {
												"on-time": "0.2",
												"off-time": "0.1",
												"duration": "2.0"
											}
										}
									],
									"sid": 789640703998491
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Reset current combo score."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 344105655822444,
									"parameters": {
										"variable": "comboScore",
										"value": "0"
									}
								}
							],
							"sid": 556400584415311
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Hide TextNewBest when it stops flashing."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-flash-ended",
							"objectClass": "TextNewBest",
							"sid": 346554943101218,
							"behaviorType": "Flash"
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "TextNewBest",
							"sid": 522340662601751,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 134989137073675
				},
				{
					"eventType": "comment",
					"text": "Change combo text font size."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "TextCombo",
							"sid": 926204183657444,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ChangeFontSize\""
							}
						}
					],
					"actions": [
						{
							"id": "set-font-size",
							"objectClass": "TextCombo",
							"sid": 872107847121830,
							"parameters": {
								"size-pt": "COMBO_FONT_SIZE * Self.Tween.Value(\"ChangeFontSize\")"
							}
						}
					],
					"sid": 960912999155434
				},
				{
					"eventType": "comment",
					"text": "Change best combo text font size."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "TextBestCombo",
							"sid": 800043865194558,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ChangeFontSize\""
							}
						}
					],
					"actions": [
						{
							"id": "set-font-size",
							"objectClass": "TextBestCombo",
							"sid": 902307403438775,
							"parameters": {
								"size-pt": "SCORE_FONT_SIZE * Self.Tween.Value(\"ChangeFontSize\")"
							}
						}
					],
					"sid": 485557635632811
				},
				{
					"eventType": "comment",
					"text": "Change score text font size."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "TextScore",
							"sid": 513394095235762,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ChangeFontSize\""
							}
						}
					],
					"actions": [
						{
							"id": "set-font-size",
							"objectClass": "TextScore",
							"sid": 222735843101096,
							"parameters": {
								"size-pt": "SCORE_FONT_SIZE * Self.Tween.Value(\"ChangeFontSize\")"
							}
						}
					],
					"sid": 650618842574731
				},
				{
					"eventType": "comment",
					"text": "Update player's score from combo."
				}
			],
			"sid": 170882620620781
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Sound Toggle",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Toggle sound/mute."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 476392753580193,
							"parameters": {
								"object": "ButtonSound",
								"type": "start"
							}
						},
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 369867703198958,
							"parameters": {
								"key": 77
							}
						}
					],
					"actions": [],
					"sid": 665228059043890,
					"children": [
						{
							"eventType": "comment",
							"text": "Do not change the sound mode while LocalStorage is working."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-processing-gets",
									"objectClass": "LocalStorage",
									"sid": 541090943478325,
									"isInverted": true
								},
								{
									"id": "is-processing-sets",
									"objectClass": "LocalStorage",
									"sid": 128091511118139,
									"isInverted": true
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 241371831449966,
									"parameters": {
										"variable": "inputFocus",
										"comparison": 0,
										"value": "\"game\""
									}
								}
							],
							"actions": [],
							"sid": 145582340678714,
							"children": [
								{
									"eventType": "comment",
									"text": "Sound on."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-value",
											"objectClass": "DictProfile",
											"sid": 954772690492488,
											"parameters": {
												"key": "\"Sound\"",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonSound",
											"sid": 761927327891935,
											"parameters": {
												"frame-number": "1"
											}
										},
										{
											"id": "set-key",
											"objectClass": "DictProfile",
											"sid": 752498825837473,
											"parameters": {
												"key": "\"Sound\"",
												"value": "1"
											}
										},
										{
											"callFunction": "saveProfile",
											"sid": 897913952218150
										},
										{
											"callFunction": "fadeBGM",
											"sid": 104355834302252,
											"parameters": [
												true,
												"0.1"
											]
										}
									],
									"sid": 860622486735378
								},
								{
									"eventType": "comment",
									"text": "Sound off."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 506073233664292
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonSound",
											"sid": 770421635835566,
											"parameters": {
												"frame-number": "0"
											}
										},
										{
											"id": "set-key",
											"objectClass": "DictProfile",
											"sid": 988967037471809,
											"parameters": {
												"key": "\"Sound\"",
												"value": "0"
											}
										},
										{
											"callFunction": "saveProfile",
											"sid": 840794551036674
										},
										{
											"callFunction": "fadeBGM",
											"sid": 802018604466602,
											"parameters": [
												false,
												"0.1"
											]
										}
									],
									"sid": 152728469551804
								}
							]
						}
					],
					"isOrBlock": true
				}
			],
			"sid": 939599938163547
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "In-Game Menu",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Go back to the main menu."
				},
				{
					"functionName": "goBackToMainMenu",
					"functionDescription": "Go back to the main menu",
					"functionCategory": "IGM",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Fade BGM out."
						},
						{
							"callFunction": "fadeBGM",
							"sid": 677642517969615,
							"parameters": [
								false,
								"1.0"
							]
						},
						{
							"type": "comment",
							"text": "Play sound effect."
						},
						{
							"callFunction": "playSFX",
							"sid": 830087538063607,
							"parameters": [
								"\"MenuConfirm\"",
								"\"SFX\"",
								"0",
								"1"
							]
						},
						{
							"type": "comment",
							"text": "Stop all timers."
						},
						{
							"id": "stop-all-timers",
							"objectClass": "GameManager",
							"sid": 215692997536743,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Hide in-game menu."
						},
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 339588226640608,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MenuUIOpacityNoUI\"",
								"start-value": "100",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 344634969890576,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Change input focus."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 800869270189948,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"backToMainMenu\""
							}
						},
						{
							"type": "comment",
							"text": "Reset time scale, global/static variables, and go back to the main menu."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 181712555966210
						},
						{
							"id": "set-time-scale",
							"objectClass": "System",
							"sid": 603590252499036,
							"parameters": {
								"time-scale": "1.0"
							}
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 398992464449098,
							"parameters": {
								"reset-static": true
							}
						},
						{
							"callFunction": "stopBGM",
							"sid": 541312589509932
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 756314972568422,
							"parameters": {
								"layout": "Menu"
							}
						}
					],
					"sid": 739275109947569
				},
				{
					"eventType": "comment",
					"text": "Hide in-game menu."
				},
				{
					"functionName": "hideInGameMenu",
					"functionDescription": "Hide in-game menu",
					"functionCategory": "IGM",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Return BGM volume to normal level."
						},
						{
							"callFunction": "BGMVolume",
							"sid": 213489407215095,
							"parameters": [
								false
							]
						},
						{
							"type": "comment",
							"text": "Play sound effect."
						},
						{
							"callFunction": "playSFX",
							"sid": 266569517815728,
							"parameters": [
								"\"MenuSelect\"",
								"\"SFX\"",
								"0",
								"1"
							]
						},
						{
							"type": "comment",
							"text": "Resume all paused timers."
						},
						{
							"id": "pause-resume-all-timers",
							"objectClass": "GameManager",
							"sid": 444457163678667,
							"behaviorType": "Timer",
							"parameters": {
								"state": "resumed"
							}
						},
						{
							"type": "comment",
							"text": "Unpause the game."
						},
						{
							"id": "set-time-scale",
							"objectClass": "System",
							"sid": 402574615081902,
							"parameters": {
								"time-scale": "1.0"
							}
						},
						{
							"type": "comment",
							"text": "Animate shop."
						},
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 396356206949866,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MenuUIOpacity\"",
								"start-value": "100",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 909086228355946,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Change input focus."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 467210541165942
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 528695248923523,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"game\""
							}
						}
					],
					"sid": 134424204373175
				},
				{
					"eventType": "comment",
					"text": "Open menu."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 672330886514980,
							"parameters": {
								"key": 27
							}
						},
						{
							"id": "on-touched-object",
							"objectClass": "Touch",
							"sid": 921090261341113,
							"parameters": {
								"object": "ButtonPause",
								"type": "start"
							}
						}
					],
					"actions": [],
					"sid": 987793488047887,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 464308657147953,
									"parameters": {
										"variable": "inputFocus",
										"comparison": 0,
										"value": "\"game\""
									}
								},
								{
									"id": "is-playing",
									"objectClass": "GameManager",
									"sid": 469325924886224,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MenuUIOpacity\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Stop all sound effects."
								},
								{
									"callFunction": "stopAllSFX",
									"sid": 833596852858948
								},
								{
									"type": "comment",
									"text": "Reduce BGM volume level."
								},
								{
									"callFunction": "BGMVolume",
									"sid": 239528494457183,
									"parameters": [
										true
									]
								},
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"callFunction": "playSFX",
									"sid": 815585348280107,
									"parameters": [
										"\"MenuSelect\"",
										"\"SFX\"",
										"0",
										"1"
									]
								},
								{
									"type": "comment",
									"text": "Set cancel button as the one selected by default."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 249317117206337,
									"parameters": {
										"variable": "IGMButtonSelected",
										"value": "1"
									}
								},
								{
									"type": "comment",
									"text": "Change input focus."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 737044448744238,
									"parameters": {
										"variable": "inputFocus",
										"value": "\"menu\""
									}
								},
								{
									"type": "comment",
									"text": "Pause all timers."
								},
								{
									"id": "pause-resume-all-timers",
									"objectClass": "GameManager",
									"sid": 312113949032792,
									"behaviorType": "Timer",
									"parameters": {
										"state": "paused"
									}
								},
								{
									"type": "comment",
									"text": "Pause the game."
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 337787075589231,
									"parameters": {
										"time-scale": "0"
									}
								},
								{
									"type": "comment",
									"text": "Unpause relevant objects."
								},
								{
									"id": "set-object-time-scale",
									"objectClass": "System",
									"sid": 527782640285282,
									"parameters": {
										"object": "Fader",
										"time-scale": "1.0"
									}
								},
								{
									"id": "set-object-time-scale",
									"objectClass": "System",
									"sid": 798487501886376,
									"parameters": {
										"object": "GameManager",
										"time-scale": "1.0"
									}
								},
								{
									"id": "set-object-time-scale",
									"objectClass": "System",
									"sid": 123019409380925,
									"parameters": {
										"object": "ButtonExit",
										"time-scale": "1.0"
									}
								},
								{
									"id": "set-object-time-scale",
									"objectClass": "System",
									"sid": 142007400868808,
									"parameters": {
										"object": "ButtonCancel",
										"time-scale": "1.0"
									}
								},
								{
									"type": "comment",
									"text": "Animate menu."
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 464605529303438,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MenuUIOpacity\"",
										"start-value": "0",
										"end-value": "100",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 259330620467788,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader80\"",
										"property": "offsetOpacity",
										"end-value": "80",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 410321325942227,
							"children": [
								{
									"eventType": "comment",
									"text": "If the player is not on mobile, focus the cancel button."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 419081331768189,
											"parameters": {
												"variable": "mobileControls"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonExit",
											"sid": 867906706262815,
											"parameters": {
												"frame-number": "0"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonCancel",
											"sid": 634854485016231,
											"parameters": {
												"frame-number": "1"
											}
										}
									],
									"sid": 473633919813615
								},
								{
									"eventType": "comment",
									"text": "On the other hand, if the player is on mobile, unfocus both buttons."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 302396219770130
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonExit",
											"sid": 918030069254882,
											"parameters": {
												"frame-number": "0"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonCancel",
											"sid": 989753682518585,
											"parameters": {
												"frame-number": "0"
											}
										}
									],
									"sid": 200222927452512
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Change opacity of UI layers."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 293380863684418,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MenuUIOpacity\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 674543886990005,
							"parameters": {
								"layer": "\"MenuUI\"",
								"opacity": "GameManager.Tween.Value(\"MenuUIOpacity\")"
							}
						},
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 234264941802890,
							"parameters": {
								"layer": "\"UI\"",
								"opacity": "100 - GameManager.Tween.Value(\"ShopUIOpacity\")"
							}
						}
					],
					"sid": 143197678938345
				},
				{
					"eventType": "comment",
					"text": "Same as above, but change only MenuUI."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 338839127342477,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MenuUIOpacityNoUI\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layer-opacity",
							"objectClass": "System",
							"sid": 803086811945352,
							"parameters": {
								"layer": "\"MenuUI\"",
								"opacity": "GameManager.Tween.Value(\"MenuUIOpacityNoUI\")"
							}
						}
					],
					"sid": 746440065088079
				},
				{
					"eventType": "comment",
					"text": "Player is controlling the in-game menu."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 713099268329097,
							"parameters": {
								"variable": "inputFocus",
								"comparison": 0,
								"value": "\"menu\""
							}
						},
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 303790296665744,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MenuUIOpacity\""
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 176226724750339,
					"children": [
						{
							"eventType": "comment",
							"text": "Hide in-game menu."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 783957511902004,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [
								{
									"callFunction": "hideInGameMenu",
									"sid": 349497198906471
								}
							],
							"sid": 301208045753794
						},
						{
							"eventType": "comment",
							"text": "Navigate menu."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 760143418966685,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 946186757437026,
									"parameters": {
										"key": 39
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"callFunction": "playSFX",
									"sid": 498756563542620,
									"parameters": [
										"\"MenuSelect\"",
										"\"SFX\"",
										"0",
										"1"
									]
								}
							],
							"sid": 567827456493830,
							"children": [
								{
									"eventType": "comment",
									"text": "Select cancel button."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-animation-frame",
											"objectClass": "ButtonCancel",
											"sid": 329356839123105,
											"parameters": {
												"comparison": 0,
												"number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 141951403498138,
											"parameters": {
												"variable": "IGMButtonSelected",
												"value": "1"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonCancel",
											"sid": 962636103258396,
											"parameters": {
												"frame-number": "1"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonExit",
											"sid": 305305088350032,
											"parameters": {
												"frame-number": "0"
											}
										}
									],
									"sid": 159160551350749
								},
								{
									"eventType": "comment",
									"text": "Select exit button."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 277338147794341
										},
										{
											"id": "compare-animation-frame",
											"objectClass": "ButtonExit",
											"sid": 546550041064544,
											"parameters": {
												"comparison": 0,
												"number": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 184296347956139,
											"parameters": {
												"variable": "IGMButtonSelected",
												"value": "0"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonCancel",
											"sid": 303345798132278,
											"parameters": {
												"frame-number": "0"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "ButtonExit",
											"sid": 100881991525484,
											"parameters": {
												"frame-number": "1"
											}
										}
									],
									"sid": 896326507072049
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Confirm."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 276941255563469,
									"parameters": {
										"key": 32
									}
								},
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 424854339671838,
									"parameters": {
										"key": 13
									}
								}
							],
							"actions": [],
							"sid": 763534369525223,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 959976691325543,
											"parameters": {
												"variable": "IGMButtonSelected",
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"callFunction": "goBackToMainMenu",
											"sid": 467457476399420
										}
									],
									"sid": 666769747413637
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 524732833351015
										}
									],
									"actions": [
										{
											"callFunction": "hideInGameMenu",
											"sid": 823875404616921
										}
									],
									"sid": 655172654193054
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Touch controls."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-touched-object",
									"objectClass": "Touch",
									"sid": 354529677766616,
									"parameters": {
										"object": "ButtonExit",
										"type": "start"
									}
								}
							],
							"actions": [
								{
									"callFunction": "goBackToMainMenu",
									"sid": 395099816722134
								},
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonExit",
									"sid": 849065898273694,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonCancel",
									"sid": 967971739720473,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 864865719874133
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-touched-object",
									"objectClass": "Touch",
									"sid": 206318970621505,
									"parameters": {
										"object": "ButtonCancel",
										"type": "start"
									}
								}
							],
							"actions": [
								{
									"callFunction": "hideInGameMenu",
									"sid": 332081534702734
								},
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonExit",
									"sid": 962020426355841,
									"parameters": {
										"frame-number": "0"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "ButtonCancel",
									"sid": 255829411722773,
									"parameters": {
										"frame-number": "1"
									}
								}
							],
							"sid": 432658920111408
						}
					]
				}
			],
			"sid": 123496813855543
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Camera smoothly follows the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 254320646003161
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 569047809643750,
							"parameters": {
								"y": "Player.Y"
							}
						}
					],
					"sid": 413021378317127
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 456750323439094
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 812041868208150,
							"parameters": {
								"y": "lerp(scrolly, Player.Y + Player.Custom.dy/4, 6 * dt)"
							}
						}
					],
					"sid": 759397217359701
				}
			],
			"sid": 285988493457048
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Projectiles",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Projectiles - Obstacle",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Spawn a new obstacle."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GameManager",
									"sid": 421027269533073,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"SpawnObstacle\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create obstacle and set its properties."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 270510719447041,
									"parameters": {
										"object-to-create": "Obstacle",
										"layer": "\"Projectiles\"",
										"x": "random(0, LayoutWidth)",
										"y": "Player.Y - 1200",
										"create-hierarchy": false,
										"template-name": "\"Rock\""
									}
								},
								{
									"id": "set-speed",
									"objectClass": "Obstacle",
									"sid": 667047374344100,
									"behaviorType": "Bullet",
									"parameters": {
										"speed": "random(1000, 1250)"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "Obstacle",
									"sid": 362760479611169,
									"behaviorType": "Rotate",
									"parameters": {
										"speed": "random(-180, 180)"
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "Obstacle",
									"sid": 644922320934681,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "Obstacle.X > LayoutWidth/2 ? random(90, 135) : random(45, 90) "
									}
								},
								{
									"type": "comment",
									"text": "Reset obstacle spawn timer."
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 606293826567862,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "1.0 + timeRemaining/timeLimit",
										"type": "once",
										"tag": "\"SpawnObstacle\""
									}
								}
							],
							"sid": 497072873438728
						},
						{
							"eventType": "comment",
							"text": "Play sound effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 548787666332935,
									"parameters": {
										"object": "Obstacle",
										"expression": "Obstacle.playedSound = 0"
									}
								},
								{
									"id": "is-on-screen",
									"objectClass": "Obstacle",
									"sid": 522904711735643
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 350859445822526
								}
							],
							"actions": [
								{
									"callFunction": "playSFX",
									"sid": 855130618885596,
									"parameters": [
										"Obstacle.TemplateName",
										"\"SFX\"",
										"-15",
										"random(0.9, 1.2)"
									]
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Obstacle",
									"sid": 343731966195062,
									"parameters": {
										"instance-variable": "playedSound",
										"value": "true"
									}
								}
							],
							"sid": 126082869440925
						},
						{
							"eventType": "comment",
							"text": "Obstacles destroy explosives."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Obstacle",
									"sid": 820278287564498,
									"parameters": {
										"object": "Explosives"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 846981369463110,
									"parameters": {
										"object-to-create": "Explosion",
										"layer": "\"Effects\"",
										"x": "Explosives.X",
										"y": "Explosives.Y",
										"create-hierarchy": false,
										"template-name": "Explosives.ExplosionType"
									}
								},
								{
									"id": "destroy",
									"objectClass": "Explosives",
									"sid": 369301198369467
								}
							],
							"sid": 524283289520426,
							"children": [
								{
									"eventType": "comment",
									"text": "Play sound effect if on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "Explosives",
											"sid": 404662052705126
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 180413393507760,
											"parameters": [
												"\"Explosion\" & choose(0, 1)",
												"\"SFX\"",
												"0",
												"random(0.8, 1.25)"
											]
										}
									],
									"sid": 462922547807960
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Destroy obstacles that go too far off the screen."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-y",
									"objectClass": "Obstacle",
									"sid": 719269933644824,
									"parameters": {
										"comparison": 2,
										"y-co-ordinate": "-800"
									}
								},
								{
									"id": "compare-y",
									"objectClass": "Obstacle",
									"sid": 325551434951908,
									"parameters": {
										"comparison": 4,
										"y-co-ordinate": "LayoutHeight + Obstacle.Height"
									}
								},
								{
									"id": "compare-x",
									"objectClass": "Obstacle",
									"sid": 510912445296222,
									"parameters": {
										"comparison": 2,
										"x-co-ordinate": "-Obstacle.Width"
									}
								},
								{
									"id": "compare-x",
									"objectClass": "Obstacle",
									"sid": 781221962951905,
									"parameters": {
										"comparison": 4,
										"x-co-ordinate": "LayoutWidth + Obstacle.Width"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Obstacle",
									"sid": 833601108446530
								}
							],
							"sid": 863461452177416,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Create a trail behind the obstacle."
						},
						{
							"aceType": "action",
							"aceName": "Spawn Trail",
							"objectClass": "Obstacle",
							"functionDescription": "Create a trail behind the rock",
							"functionCategory": "Special",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "custom-ace-block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 963470016714082,
									"parameters": {
										"object": "ObstacleTrail",
										"expression": "ObstacleTrail.inPool"
									}
								},
								{
									"id": "pick-nth-instance",
									"objectClass": "System",
									"sid": 483004549152840,
									"parameters": {
										"object": "ObstacleTrail",
										"instance": "0"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 494967632968240,
									"parameters": {
										"value": "Obstacle.TemplateName = \"Rock\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Remove this trail from the pool."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "ObstacleTrail",
									"sid": 409922714378494,
									"parameters": {
										"instance-variable": "inPool",
										"value": "false"
									}
								},
								{
									"type": "comment",
									"text": "Set opacity to 100%."
								},
								{
									"id": "set-opacity",
									"objectClass": "ObstacleTrail",
									"sid": 454614461432383,
									"parameters": {
										"opacity": "50"
									}
								},
								{
									"type": "comment",
									"text": "Set position and angle to match rock's."
								},
								{
									"id": "set-position-to-another-object",
									"objectClass": "ObstacleTrail",
									"sid": 700476264714563,
									"parameters": {
										"object": "Obstacle",
										"image-point-optional": "0"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "ObstacleTrail",
									"sid": 831756219309071,
									"parameters": {
										"angle": "Obstacle.Angle"
									}
								},
								{
									"type": "comment",
									"text": "Fade it out and send it back to the pool afterwards."
								},
								{
									"id": "tween-one-property",
									"objectClass": "ObstacleTrail",
									"sid": 911232810544423,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DestroyTrail\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.3",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 348529533251014
						},
						{
							"eventType": "comment",
							"text": "Send trail back to the pool of trails."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "ObstacleTrail",
									"sid": 639670618222493,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DestroyTrail\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "ObstacleTrail",
									"sid": 492429316009546,
									"parameters": {
										"instance-variable": "inPool",
										"value": "true"
									}
								},
								{
									"id": "set-position",
									"objectClass": "ObstacleTrail",
									"sid": 244232645374353,
									"parameters": {
										"x": "-10000",
										"y": "-10000"
									}
								}
							],
							"sid": 966882844344371
						},
						{
							"eventType": "comment",
							"text": "Spawn trail."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 732324046119195,
									"parameters": {
										"interval-seconds": "1/30"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 178640576295340,
									"parameters": {
										"object": "Obstacle"
									}
								}
							],
							"actions": [
								{
									"customAction": "Spawn Trail",
									"objectClass": "Obstacle",
									"sid": 202928756838030
								}
							],
							"sid": 240514153335610
						}
					],
					"sid": 726901093138987
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Projectiles - EnergySphere",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "MIN_SPHERE_Y",
							"type": "number",
							"initialValue": "800",
							"comment": "Minimum Y position for sphere.",
							"isStatic": false,
							"isConstant": false,
							"sid": 226647984737152
						},
						{
							"eventType": "comment",
							"text": "Spheres explode upon touching the ground."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "EnergySphere",
									"sid": 156367365524062,
									"parameters": {
										"object": "Roads"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 545470087793414,
									"parameters": {
										"object": "EnergySphere"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 421154047289972,
									"parameters": {
										"object-to-create": "Explosion",
										"layer": "\"Effects\"",
										"x": "EnergySphere.X",
										"y": "Roads.BBoxTop",
										"create-hierarchy": false,
										"template-name": "\"Floor1\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "EnergySphere",
									"sid": 237568562502404
								}
							],
							"sid": 437165078438348,
							"children": [
								{
									"eventType": "comment",
									"text": "Play sound effect if on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "EnergySphere",
											"sid": 536565640785373
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 217709938065541,
											"parameters": [
												"\"Explosion2\"",
												"\"SFX\"",
												"0",
												"random(0.9, 1.15)"
											]
										}
									],
									"sid": 965317246266154
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Destroy spheres if they go too high."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 846440605080753,
									"parameters": {
										"object": "EnergySphere"
									}
								},
								{
									"id": "compare-y",
									"objectClass": "EnergySphere",
									"sid": 241338434837505,
									"parameters": {
										"comparison": 2,
										"y-co-ordinate": "MIN_SPHERE_Y"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 147292143940297,
									"parameters": {
										"object-to-create": "Explosion",
										"layer": "\"Effects\"",
										"x": "EnergySphere.X",
										"y": "EnergySphere.Y",
										"create-hierarchy": false,
										"template-name": "\"Air1\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "EnergySphere",
									"sid": 346362035538888
								}
							],
							"sid": 669040259051259,
							"children": [
								{
									"eventType": "comment",
									"text": "Play sound effect if on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "EnergySphere",
											"sid": 303414866239045
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 968800031345185,
											"parameters": [
												"\"Explosion2\"",
												"\"SFX\"",
												"0",
												"random(0.9, 1.15)"
											]
										}
									],
									"sid": 963658637427305
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Animate energy sphere."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-active",
									"objectClass": "EnergySphere",
									"sid": 954998323331627,
									"behaviorType": "Sine"
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "EnergySphere",
									"sid": 514331084658142,
									"parameters": {
										"effect": "\"Bulge\"",
										"parameter-index": "1",
										"value": "Self.Sine.Value"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "EnergySphere",
									"sid": 344556016268748,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "100 + Self.Sine.Value/4"
									}
								}
							],
							"sid": 631119182172236
						}
					],
					"sid": 703377149655927
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Projectiles - Bomb",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "BOMB_VERTICAL_SPEED",
							"type": "number",
							"initialValue": "800",
							"comment": "Bomb's vertical speed",
							"isStatic": false,
							"isConstant": false,
							"sid": 227308272633360
						},
						{
							"eventType": "comment",
							"text": "Accelerate bombs."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 944671067054775,
									"parameters": {
										"object": "Bomb"
									}
								}
							],
							"actions": [
								{
									"id": "accelerate",
									"objectClass": "Bomb",
									"sid": 233385727494859,
									"behaviorType": "Custom",
									"parameters": {
										"which": "vertically",
										"acceleration": "BOMB_VERTICAL_SPEED"
									}
								}
							],
							"sid": 428984791468184
						},
						{
							"eventType": "comment",
							"text": "Bombs explode upon touching the ground."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Bomb",
									"sid": 249064210562121,
									"parameters": {
										"object": "Roads"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 780457600070804,
									"parameters": {
										"object": "Bomb"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 631160981598717,
									"parameters": {
										"object-to-create": "Explosion",
										"layer": "\"Effects\"",
										"x": "Bomb.X",
										"y": "Roads.BBoxTop",
										"create-hierarchy": false,
										"template-name": "\"Floor0\""
									}
								},
								{
									"id": "destroy",
									"objectClass": "Bomb",
									"sid": 735831224018688
								}
							],
							"sid": 770380018680141,
							"children": [
								{
									"eventType": "comment",
									"text": "Play sound effect if on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "Bomb",
											"sid": 318645608226735
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 317320142513684,
											"parameters": [
												"\"Explosion\" & choose(0, 1)",
												"\"SFX\"",
												"0",
												"random(0.8, 1.25)"
											]
										}
									],
									"sid": 466280894805968
								}
							]
						}
					],
					"sid": 502064372306739
				},
				{
					"eventType": "comment",
					"text": "Destroy explosions after the animation is over."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "Explosion",
							"sid": 165857548074278
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Explosion",
							"sid": 589134101262313
						}
					],
					"sid": 332096320605617
				}
			],
			"sid": 467489545541745
		}
	],
	"sid": 164879594364471
}