{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Settings"
		},
		{
			"eventType": "variable",
			"name": "NLEVELS",
			"type": "number",
			"initialValue": "3",
			"comment": "Number of available levels",
			"isStatic": false,
			"isConstant": true,
			"sid": 852539023295094
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "startPointUID",
			"type": "number",
			"initialValue": "-1",
			"comment": "Start point UID",
			"isStatic": false,
			"isConstant": false,
			"sid": 321606368785179
		},
		{
			"eventType": "variable",
			"name": "startPointColor",
			"type": "number",
			"initialValue": "-1",
			"comment": "Start point color",
			"isStatic": false,
			"isConstant": false,
			"sid": 208760657117048
		},
		{
			"eventType": "variable",
			"name": "lastX",
			"type": "number",
			"initialValue": "0",
			"comment": "Last joint X",
			"isStatic": false,
			"isConstant": false,
			"sid": 422643888214173
		},
		{
			"eventType": "variable",
			"name": "lastY",
			"type": "number",
			"initialValue": "0",
			"comment": "Last joint Y",
			"isStatic": false,
			"isConstant": false,
			"sid": 991689334016656
		},
		{
			"eventType": "variable",
			"name": "nextID",
			"type": "number",
			"initialValue": "0",
			"comment": "Next ID to be created",
			"isStatic": false,
			"isConstant": false,
			"sid": 281279009546881
		},
		{
			"eventType": "variable",
			"name": "currLevel",
			"type": "number",
			"initialValue": "1",
			"comment": "Current level",
			"isStatic": false,
			"isConstant": false,
			"sid": 426064965972639
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup Cells",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Create cells according to array."
				},
				{
					"functionName": "createCells",
					"functionDescription": "Create cells according to array",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 484307355377056,
							"parameters": {
								"name": "\"cell\"",
								"start-index": "0",
								"end-index": "CellsArray.Height - 1"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Execute for every row in the array."
						}
					],
					"sid": 131328939188397,
					"children": [
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "X position to spawn the new Dot",
							"isStatic": false,
							"isConstant": false,
							"sid": 739088942642292
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y position to spawn the new Dot",
							"isStatic": false,
							"isConstant": false,
							"sid": 805534210586315
						},
						{
							"eventType": "variable",
							"name": "colorID",
							"type": "number",
							"initialValue": "0",
							"comment": "new Dot's colorID",
							"isStatic": false,
							"isConstant": false,
							"sid": 286892846545037
						},
						{
							"eventType": "comment",
							"text": "Set position and color variables."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 507313145362265,
									"parameters": {
										"variable": "x",
										"value": "CellsArray.At(0, loopindex(\"cell\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 922978040754789,
									"parameters": {
										"variable": "y",
										"value": "CellsArray.At(1, loopindex(\"cell\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 161981710424662,
									"parameters": {
										"variable": "colorID",
										"value": "CellsArray.At(2, loopindex(\"cell\"))"
									}
								}
							],
							"sid": 887913500126822
						},
						{
							"eventType": "comment",
							"text": "Create Cell, with assigned color, outside the screen and bring it to the correct position using a Tween."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 270050530680600,
									"parameters": {
										"object": "ColorPallete",
										"expression": "ColorPallete.colorID = colorID"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create Cell with correct properties."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 971393393753834,
									"parameters": {
										"object-to-create": "Cell",
										"layer": "\"Game\"",
										"x": "LayoutWidth/2 + cos(angle(LayoutWidth/2, LayoutHeight/2, x, y)) * 2176",
										"y": "LayoutHeight/2 + sin(angle(LayoutWidth/2, LayoutHeight/2, x, y)) * 2176",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Cell",
									"sid": 919758222061347,
									"parameters": {
										"angle": "random(360)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Cell",
									"sid": 514939293687690,
									"parameters": {
										"instance-variable": "colorID",
										"value": "colorID"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "Cell",
									"sid": 780243856951905,
									"parameters": {
										"color": "ColorPallete.ColorValue"
									}
								},
								{
									"type": "comment",
									"text": "Animate it."
								},
								{
									"id": "set-opacity",
									"objectClass": "Cell",
									"sid": 561936849315465,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Cell",
									"sid": 798697633581631,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CellPositionIn\"",
										"property": "position",
										"end-x": "x",
										"end-y": "y",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-cycle-position",
									"objectClass": "Cell",
									"sid": 810062587130969,
									"behaviorType": "Sine",
									"parameters": {
										"cycle-position": "random(2)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Cell",
									"sid": 127251221562041,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CellOpacityIn\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinexpo",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 888336972493158
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Load Level 1 and create cells."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 568570995249861
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Request the correct data."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 830702072764244,
							"parameters": {
								"tag": "\"cells\"",
								"file": "level1.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 817206580722149
						},
						{
							"type": "comment",
							"text": "Populate the array and create Cells."
						},
						{
							"id": "load",
							"objectClass": "CellsArray",
							"sid": 672215467197315,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"callFunction": "createCells",
							"sid": 986366429282247
						}
					],
					"sid": 599017740617732
				}
			],
			"sid": 313327854942203
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Drawing",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Auxiliary Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset drawing array to clean state."
						},
						{
							"functionName": "resetDrawingArray",
							"functionDescription": "Reset drawing array to clean state",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-size",
									"objectClass": "CurrDrawArray",
									"sid": 799521957626772,
									"parameters": {
										"width": "1",
										"height": "1",
										"depth": "1"
									}
								},
								{
									"id": "clear",
									"objectClass": "CurrDrawArray",
									"sid": 166461683648506,
									"parameters": {
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 793603608822048,
									"parameters": {
										"variable": "startPointUID",
										"value": "-1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 274603079770794,
									"parameters": {
										"variable": "startPointColor",
										"value": "-1"
									}
								}
							],
							"sid": 546410948044646
						},
						{
							"eventType": "comment",
							"text": "Destroy all the pieces related to the current drawing."
						},
						{
							"functionName": "destroyCurrentDrawing",
							"functionDescription": "Destroy all the pieces related to the current drawing",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 620363205659566,
							"children": [
								{
									"eventType": "comment",
									"text": "Destroy current drawing with a dissolve animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-element",
											"objectClass": "CurrDrawArray",
											"sid": 707036368222872,
											"parameters": {
												"axes": "x"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "Drawing",
											"sid": 936570632569909,
											"parameters": {
												"unique-id": "CurrDrawArray.CurValue"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "Drawing",
											"sid": 661318247578412,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DrawingDestroy\"",
												"property": "scale",
												"end-x": "0",
												"end-y": "0",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 913056638560884
								},
								{
									"eventType": "comment",
									"text": "Reset cell."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Cell",
											"sid": 581453813084320,
											"parameters": {
												"unique-id": "startPointUID"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Cell",
											"sid": 319084057388773,
											"parameters": {
												"instance-variable": "used",
												"value": "false"
											}
										}
									],
									"sid": 751171536792151
								},
								{
									"eventType": "comment",
									"text": "Reset array"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "resetDrawingArray",
											"sid": 882839037853959
										}
									],
									"sid": 473306890815779
								}
							]
						}
					],
					"sid": 152290806987421
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Erase drawing",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "If the player touches DrawJoint, dissolve the whole drawing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 217990926334094,
									"parameters": {
										"object": "DrawJoint"
									}
								}
							],
							"actions": [],
							"sid": 628596107490193,
							"children": [
								{
									"eventType": "comment",
									"text": "Make all Cells unused."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 557235116491771,
											"parameters": {
												"object": "Cell"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 924696341813409,
											"parameters": {
												"value": "Cell.colorID = DrawJoint.colorID"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Cell",
											"sid": 570821261117411,
											"parameters": {
												"instance-variable": "used",
												"value": "false"
											}
										}
									],
									"sid": 132649526814860
								},
								{
									"eventType": "comment",
									"text": "Dissolve and destroy the drawing."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 660084651243055,
											"parameters": {
												"object": "Drawing"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 630075498193640,
											"parameters": {
												"value": "Drawing.colorID = DrawJoint.colorID"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "Drawing",
											"sid": 755387387533212,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DrawingDestroy\"",
												"property": "scale",
												"end-x": "0",
												"end-y": "0",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 681892817393649
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If the player touches DrawJoint, dissolve the whole drawing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 370457460935953,
									"parameters": {
										"object": "ColorPallete"
									}
								}
							],
							"actions": [],
							"sid": 733014970802001,
							"children": [
								{
									"eventType": "comment",
									"text": "Make all Cells unused."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 756416412062959,
											"parameters": {
												"object": "Cell"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 909941746444797,
											"parameters": {
												"value": "Cell.colorID = DrawJoint.colorID"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Cell",
											"sid": 231461233155362,
											"parameters": {
												"instance-variable": "used",
												"value": "false"
											}
										}
									],
									"sid": 387829004099973
								},
								{
									"eventType": "comment",
									"text": "Dissolve and destroy the drawing."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 431318048769880,
											"parameters": {
												"object": "Drawing"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 175797586489717,
											"parameters": {
												"value": "Drawing.colorID = ColorPallete.colorID"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "Drawing",
											"sid": 393466826266694,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DrawingDestroy\"",
												"property": "scale",
												"end-x": "0",
												"end-y": "0",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 988197714219006
								}
							]
						}
					],
					"sid": 161421509584930
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Touch start",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Player touched a cell that hasn't been used yet."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-nth-touch-start",
									"objectClass": "Touch",
									"sid": 257492680144697,
									"parameters": {
										"touch-number": "0"
									}
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 386513886039212,
									"parameters": {
										"object": "Cell"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Cell",
									"sid": 137991119926055,
									"parameters": {
										"instance-variable": "used"
									},
									"isInverted": true
								},
								{
									"id": "is-any-playing",
									"objectClass": "Cell",
									"sid": 974871089604268,
									"behaviorType": "Tween",
									"isInverted": true
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 576647474681187,
									"parameters": {
										"value": "distance(Touch.X, Touch.Y, LayoutWidth/2, LayoutHeight/2) < BGCircle.ImageWidth/2"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create starting joint."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 793129276025092,
									"parameters": {
										"object-to-create": "DrawJoint",
										"layer": "\"Game\"",
										"x": "Touch.X",
										"y": "Touch.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "push",
									"objectClass": "CurrDrawArray",
									"sid": 246593370544020,
									"parameters": {
										"where": "back",
										"value": "DrawJoint.UID",
										"axis": "x"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "DrawJoint",
									"sid": 338289169131085,
									"parameters": {
										"instance-variable": "colorID",
										"value": "Cell.colorID"
									}
								},
								{
									"id": "set-default-color",
									"objectClass": "DrawJoint",
									"sid": 279629637342419,
									"parameters": {
										"color": "Cell.ColorValue"
									}
								},
								{
									"type": "comment",
									"text": "Update global variables to reflect new state."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 414904207420166,
									"parameters": {
										"variable": "lastX",
										"value": "Touch.X"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 214972534601494,
									"parameters": {
										"variable": "lastY",
										"value": "Touch.Y"
									}
								},
								{
									"type": "comment",
									"text": "Valid start point."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 164082918179261,
									"parameters": {
										"variable": "startPointUID",
										"value": "Cell.UID"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 933595426018291,
									"parameters": {
										"variable": "startPointColor",
										"value": "Cell.colorID"
									}
								},
								{
									"type": "comment",
									"text": "Mark cell as used."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Cell",
									"sid": 912498281480806,
									"parameters": {
										"instance-variable": "used",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Play cell animation."
								},
								{
									"id": "set-active",
									"objectClass": "Cell",
									"sid": 948281858513847,
									"behaviorType": "Sine",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Cell",
									"sid": 972780365573557,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CellBounce\"",
										"property": "scale",
										"end-x": "1.5",
										"end-y": "1.5",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 233706168239987
								},
								{
									"id": "set-active",
									"objectClass": "Cell",
									"sid": 278500122051189,
									"behaviorType": "Sine",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 455480240950822
						}
					],
					"sid": 338286049323866
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Touch end",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Player released touch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-nth-touch-end",
									"objectClass": "Touch",
									"sid": 559035323176818,
									"parameters": {
										"touch-number": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 708471367887584,
									"parameters": {
										"variable": "nextID",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 102173562089088,
									"parameters": {
										"variable": "lastX",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 720414820977137,
									"parameters": {
										"variable": "lastY",
										"value": "0"
									}
								}
							],
							"sid": 590377926823812,
							"children": [
								{
									"eventType": "comment",
									"text": "Drawing stopped on top of a Cell (valid end position)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 862297847331413,
											"parameters": {
												"object": "Cell"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Cell",
											"sid": 780591715020726,
											"parameters": {
												"instance-variable": "used"
											},
											"isInverted": true
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 484642161280343,
											"parameters": {
												"value": "Cell.colorID = startPointColor"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Clear array."
										},
										{
											"callFunction": "resetDrawingArray",
											"sid": 277151932585477
										},
										{
											"type": "comment",
											"text": "Mark cell as used and reset starting position."
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Cell",
											"sid": 622685942638424,
											"parameters": {
												"instance-variable": "used",
												"value": "true"
											}
										},
										{
											"callFunction": "checkWinCondition",
											"sid": 369104500831073
										}
									],
									"sid": 940200576291016
								},
								{
									"eventType": "comment",
									"text": "Drawing stopped on an invalid position. Destroy drawing and reset Cell."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 913778342276263
										}
									],
									"actions": [
										{
											"callFunction": "destroyCurrentDrawing",
											"sid": 771866600745644
										}
									],
									"sid": 267077051331322
								}
							]
						}
					],
					"sid": 694634721002714
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Has touch",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Player holding down touch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-nth-touch",
									"objectClass": "Touch",
									"sid": 479872334427761,
									"parameters": {
										"touch-number": "0"
									}
								}
							],
							"actions": [],
							"sid": 320609205467145,
							"children": [
								{
									"eventType": "comment",
									"text": "Player holding down touch inside a valid position."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 207836033296569,
											"parameters": {
												"value": "startPointUID <> -1"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 946998682941890,
											"parameters": {
												"value": "distance(Touch.X, Touch.Y, LayoutWidth/2, LayoutHeight/2) < BGCircle.ImageWidth/2"
											}
										}
									],
									"actions": [],
									"sid": 335083189822578,
									"children": [
										{
											"eventType": "variable",
											"name": "distPos",
											"type": "number",
											"initialValue": "0",
											"comment": "Distance between touch positions",
											"isStatic": false,
											"isConstant": false,
											"sid": 530438368278570
										},
										{
											"eventType": "comment",
											"text": "Calculate distance between touches."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 232986105673918,
													"parameters": {
														"variable": "distPos",
														"value": "distance(Touch.X, Touch.Y, lastX, lastY)"
													}
												}
											],
											"sid": 178135625245693
										},
										{
											"eventType": "comment",
											"text": "If the distance is above 16, draw line between touch positions and a joint at the last position."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 809013790311577,
													"parameters": {
														"value": "distPos >= 16"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "Cell",
													"sid": 589261254618316,
													"parameters": {
														"unique-id": "startPointUID"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Create joint."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 962572833169615,
													"parameters": {
														"object-to-create": "DrawJoint",
														"layer": "\"Game\"",
														"x": "Touch.X",
														"y": "Touch.Y",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "push",
													"objectClass": "CurrDrawArray",
													"sid": 227684931004901,
													"parameters": {
														"where": "back",
														"value": "DrawJoint.UID",
														"axis": "x"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "DrawJoint",
													"sid": 975139128613060,
													"parameters": {
														"instance-variable": "ID",
														"value": "nextID"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "DrawJoint",
													"sid": 583581323274519,
													"parameters": {
														"instance-variable": "colorID",
														"value": "startPointColor"
													}
												},
												{
													"id": "set-default-color",
													"objectClass": "DrawJoint",
													"sid": 148382722726665,
													"parameters": {
														"color": "Cell.ColorValue"
													}
												},
												{
													"type": "comment",
													"text": "Create line."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 931710434490665,
													"parameters": {
														"object-to-create": "DrawLine",
														"layer": "\"Game\"",
														"x": "(Touch.X + lastX)/2",
														"y": "(Touch.Y + lastY)/2",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "push",
													"objectClass": "CurrDrawArray",
													"sid": 271378027526273,
													"parameters": {
														"where": "back",
														"value": "DrawLine.UID",
														"axis": "x"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "DrawLine",
													"sid": 248334497569489,
													"parameters": {
														"instance-variable": "ID",
														"value": "nextID"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "DrawLine",
													"sid": 607161671444850,
													"parameters": {
														"instance-variable": "colorID",
														"value": "startPointColor"
													}
												},
												{
													"id": "set-default-color",
													"objectClass": "DrawLine",
													"sid": 295161305082761,
													"parameters": {
														"color": "Cell.ColorValue"
													}
												},
												{
													"id": "set-angle",
													"objectClass": "DrawLine",
													"sid": 243407710921661,
													"parameters": {
														"angle": "angle(Touch.X, Touch.Y, lastX, lastY)"
													}
												},
												{
													"id": "set-width",
													"objectClass": "DrawLine",
													"sid": 203484532308087,
													"parameters": {
														"width": "distPos + 8"
													}
												},
												{
													"type": "comment",
													"text": "Update global variables to reflect new state."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 117588817801008,
													"parameters": {
														"variable": "lastX",
														"value": "Touch.X"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 333954945969622,
													"parameters": {
														"variable": "lastY",
														"value": "Touch.Y"
													}
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 470800964306394,
													"parameters": {
														"variable": "nextID",
														"value": "1"
													}
												}
											],
											"sid": 671655341731731,
											"children": [
												{
													"eventType": "comment",
													"text": "Self interception."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "DrawJoint",
															"sid": 500973581654930,
															"parameters": {
																"object": "Drawing"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 379086526564466,
															"parameters": {
																"value": "(abs(DrawJoint.ID - Drawing.ID) > 1) | (DrawJoint.colorID <> Drawing.colorID)"
															}
														}
													],
													"actions": [
														{
															"callFunction": "destroyCurrentDrawing",
															"sid": 310538799247472
														}
													],
													"sid": 197968450337651
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "DrawLine",
															"sid": 265145752103207,
															"parameters": {
																"object": "Drawing"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 343363316618372,
															"parameters": {
																"value": "(abs(DrawLine.ID - Drawing.ID) > 1) | (DrawLine.colorID <> Drawing.colorID)"
															}
														}
													],
													"actions": [
														{
															"callFunction": "destroyCurrentDrawing",
															"sid": 839151304580072
														}
													],
													"sid": 563366492876156
												},
												{
													"eventType": "comment",
													"text": "Interception with invalid cell type."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-overlapping-another-object",
															"objectClass": "DrawJoint",
															"sid": 210988939862498,
															"parameters": {
																"object": "Cells"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 810573941355480,
															"parameters": {
																"value": "DrawJoint.ColorValue <> Cells.ColorValue"
															}
														}
													],
													"actions": [
														{
															"callFunction": "destroyCurrentDrawing",
															"sid": 534342456858898
														}
													],
													"sid": 354802094248628
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Player holding down touch outside a valid position."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 396302363790130
										}
									],
									"actions": [
										{
											"callFunction": "destroyCurrentDrawing",
											"sid": 395423877553149
										}
									],
									"sid": 959628933257454
								}
							]
						}
					],
					"sid": 394846790104614
				}
			],
			"sid": 224413084968659
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Change Level",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check if all the cells have been used by the player."
				},
				{
					"functionName": "checkWinCondition",
					"functionDescription": "Check if all the dots have been used by the player",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 106931235212332,
					"children": [
						{
							"eventType": "variable",
							"name": "numUsedCells",
							"type": "number",
							"initialValue": "0",
							"comment": "Number of used cells",
							"isStatic": false,
							"isConstant": false,
							"sid": 195561859789989
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 863944035507577,
									"parameters": {
										"object": "Cell"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Cell",
									"sid": 529948052840931,
									"parameters": {
										"instance-variable": "used"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 541853070466457,
									"parameters": {
										"variable": "numUsedCells",
										"value": "1"
									}
								}
							],
							"sid": 330625110696286
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 676229100379791,
									"parameters": {
										"value": "numUsedCells = Cell.Count"
									}
								}
							],
							"actions": [
								{
									"callFunction": "nextLevel",
									"sid": 418765463829144
								}
							],
							"sid": 545859771915313
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Go to the next level."
				},
				{
					"functionName": "nextLevel",
					"functionDescription": "Go to the next level",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 136349037642893,
					"children": [
						{
							"eventType": "comment",
							"text": "Move Cells away and destroy them."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 128267747483153,
									"parameters": {
										"object": "Cell"
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "Cell",
									"sid": 748374284866382,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CellPositionOut\"",
										"property": "position",
										"end-x": "LayoutWidth/2 + cos(angle(LayoutWidth/2, LayoutHeight/2, Self.X, Self.Y)) * 2176",
										"end-y": "LayoutHeight/2 + sin(angle(LayoutWidth/2, LayoutHeight/2, Self.X, Self.Y)) * 2176",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Cell",
									"sid": 120313673211683,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CellOpacityOut\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "1",
										"ease": "easeoutexpo",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 154300122475830
						},
						{
							"eventType": "comment",
							"text": "Dissolve and destroy player drawings."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 793460698534999,
									"parameters": {
										"object": "Drawing"
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "Drawing",
									"sid": 431345330093127,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DrawingDestroy\"",
										"property": "scale",
										"end-x": "0",
										"end-y": "0",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 265592935039326
						},
						{
							"eventType": "comment",
							"text": "Change level."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Go to next level. If there are no more levels, go to the first one."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 104141619459350,
									"parameters": {
										"variable": "currLevel",
										"value": "currLevel = NLEVELS ? 1 : currLevel + 1"
									}
								},
								{
									"type": "comment",
									"text": "Request the correct data."
								},
								{
									"id": "request-url",
									"objectClass": "AJAX",
									"sid": 235477107634449,
									"parameters": {
										"tag": "\"cells\"",
										"url": "\"level\" & currLevel & \".json\""
									}
								},
								{
									"type": "comment",
									"text": "First part of BGCircle animation."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "BGCircle",
									"sid": 764109618721520,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"BGCircleShrink\"",
										"property": "scale",
										"end-x": "0",
										"end-y": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 867160658275031
								},
								{
									"type": "comment",
									"text": "Second part of BGCircle animation."
								},
								{
									"id": "set-size",
									"objectClass": "BGCircle",
									"sid": 221086125460424,
									"parameters": {
										"width": "0.01",
										"height": "0.01"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "BGCircle",
									"sid": 296199873790445,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"BGCircleGrow\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Populate the array and create Cells."
								},
								{
									"id": "load",
									"objectClass": "CellsArray",
									"sid": 142957434155715,
									"parameters": {
										"json": "AJAX.LastData"
									}
								},
								{
									"callFunction": "createCells",
									"sid": 806804130831481
								}
							],
							"sid": 814820061144441
						}
					]
				}
			],
			"sid": 762312219478755
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Reset",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reset board."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 348752108531858,
							"parameters": {
								"object": "Reset"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Reset",
							"sid": 875887746380762,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 120002511448060,
					"children": [
						{
							"eventType": "comment",
							"text": "Dissolve all player drawings."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 203107531960682,
									"parameters": {
										"object": "Drawing"
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "Drawing",
									"sid": 902264980090924,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DrawingDestroy\"",
										"property": "scale",
										"end-x": "0",
										"end-y": "0",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 751326641040309
						},
						{
							"eventType": "comment",
							"text": "Make all Cells unused."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 562703263025745,
									"parameters": {
										"object": "Cell"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Cell",
									"sid": 336942264453335,
									"parameters": {
										"instance-variable": "used",
										"value": "false"
									}
								}
							],
							"sid": 700878194430831
						},
						{
							"eventType": "comment",
							"text": "Animate reset button."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "Reset",
									"sid": 187666759418200,
									"behaviorType": "Sine",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Reset",
									"sid": 701132377848410,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ResetBounce\"",
										"property": "scale",
										"end-x": "1.25",
										"end-y": "1.25",
										"time": "0.1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 511745570118587
								},
								{
									"id": "set-active",
									"objectClass": "Reset",
									"sid": 116504078376459,
									"behaviorType": "Sine",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 906332030979947
						}
					]
				}
			],
			"sid": 951985688782805
		}
	],
	"sid": 263143833705015
}