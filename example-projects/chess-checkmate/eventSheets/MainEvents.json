{
	"name": "MainEvents",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Settings"
		},
		{
			"eventType": "variable",
			"name": "SQOFFX",
			"type": "number",
			"initialValue": "76",
			"comment": "Square X offset",
			"isStatic": false,
			"isConstant": true,
			"sid": 269173322998265
		},
		{
			"eventType": "variable",
			"name": "SQOFFY",
			"type": "number",
			"initialValue": "88",
			"comment": "Square Y offset",
			"isStatic": false,
			"isConstant": true,
			"sid": 768562286647955
		},
		{
			"eventType": "variable",
			"name": "SQSIZE",
			"type": "number",
			"initialValue": "88",
			"comment": "X and Y dimensions of the squares",
			"isStatic": false,
			"isConstant": true,
			"sid": 491498957124867
		},
		{
			"eventType": "comment",
			"text": "Global variables"
		},
		{
			"eventType": "variable",
			"name": "movesLeft",
			"type": "number",
			"initialValue": "50",
			"comment": "Moves left to checkmate",
			"isStatic": false,
			"isConstant": false,
			"sid": 628618291945266
		},
		{
			"eventType": "variable",
			"name": "logCount",
			"type": "number",
			"initialValue": "1",
			"comment": "Count number of logs",
			"isStatic": false,
			"isConstant": false,
			"sid": 364570571975281
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Set initial state of the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 172482266118342
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Disable Drag and Drop controls."
						},
						{
							"id": "set-enabled",
							"objectClass": "WhitePiece",
							"sid": 191511736080601,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "WhiteKing",
							"sid": 872698331036406,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Hide frames."
						},
						{
							"id": "set-opacity",
							"objectClass": "PromoteFrame",
							"sid": 184993908351944,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "EndgameFrame",
							"sid": 147754502370773,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Show tutorial text."
						},
						{
							"id": "tween-one-property",
							"objectClass": "txtTutorial",
							"sid": 138778033970464,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTutorialText\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Remove blur (if active)."
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 551185516419470,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurHorizontal\"",
								"parameter-index": "0",
								"value": "0"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 239457989317721,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurVertical\"",
								"parameter-index": "0",
								"value": "0"
							}
						},
						{
							"type": "comment",
							"text": "Reset logs array."
						},
						{
							"id": "set-size",
							"objectClass": "ArrLogs",
							"sid": 353326787804708,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "push",
							"objectClass": "ArrLogs",
							"sid": 427208033529029,
							"parameters": {
								"where": "back",
								"value": "\"0> Waiting for first move...\"",
								"axis": "x"
							}
						}
					],
					"sid": 198134215744872,
					"children": [
						{
							"eventType": "comment",
							"text": "Start GameLogic flowchart."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-flow-chart",
									"objectClass": "Flowchart",
									"sid": 700228720285373,
									"parameters": {
										"flowchart-tag": "\"gameLogic\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "start-flowchart",
									"objectClass": "Flowchart",
									"sid": 100737853397156,
									"parameters": {
										"flowchart-name": "GameLogic",
										"start-node-tag": "\"\"",
										"flowchart-tag": "\"gameLogic\"",
										"set-as-current": true
									}
								}
							],
							"sid": 980353584677096
						}
					]
				}
			],
			"sid": 922204177900353
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "When the player taps the screen while the tutorial is up, hide the tutorial and start the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap",
							"objectClass": "Touch",
							"sid": 829212959160837
						},
						{
							"id": "compare-opacity",
							"objectClass": "txtTutorial",
							"sid": 942202232348278,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide tutorial items."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 666026801262719,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorial\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 596927388674261
						},
						{
							"type": "comment",
							"text": "Enable Drag and Drop."
						},
						{
							"id": "set-enabled",
							"objectClass": "WhitePiece",
							"sid": 392095335720905,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "enabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "WhiteKing",
							"sid": 268077804131692,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 527599573489033
				}
			],
			"sid": 736758841634207
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Restart Game",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reset layout and variables when ResetButton is tapped."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 634672566207125,
							"parameters": {
								"object": "ResetButton"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "ResetButton",
							"sid": 919795113712549,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "Fader",
							"sid": 637811842629588,
							"parameters": {
								"comparison": 2,
								"opacity": "100"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "txtTutorial",
							"sid": 278080245254352
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 936134896903139,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "ResetButton",
							"sid": 418500298379454,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ButtonBounce\"",
								"property": "scale",
								"end-x": "0.85",
								"end-y": "0.85",
								"time": "0.075",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 551309637583654
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 843008578251389
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 889122950780587
						}
					],
					"sid": 611569728443390
				}
			],
			"sid": 377953774249841
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Drag and Drop Pieces",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Drop the piece."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "Pieces",
							"sid": 593760227138194,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Pieces",
							"sid": 573731218840026,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DropPieceTween\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "AvailableMarker",
							"sid": 730754496784886,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DestroyMarker\"",
								"property": "size",
								"end-x": "0",
								"end-y": "0",
								"time": "0.1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 943530247195212,
					"children": [
						{
							"eventType": "variable",
							"name": "goToX",
							"type": "number",
							"initialValue": "0",
							"comment": "Piece tries to go to this X position",
							"isStatic": false,
							"isConstant": false,
							"sid": 414717128884521
						},
						{
							"eventType": "variable",
							"name": "goToY",
							"type": "number",
							"initialValue": "0",
							"comment": "Piece tries to go to this Y position",
							"isStatic": false,
							"isConstant": false,
							"sid": 960769785981579
						},
						{
							"eventType": "comment",
							"text": "Compute goToX and goToY according to piece's absolution position values."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 592805798662032,
									"parameters": {
										"variable": "goToX",
										"value": "(round((Pieces.X  - SQOFFX) / SQSIZE) * SQSIZE) / SQSIZE"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 581437699397973,
									"parameters": {
										"variable": "goToY",
										"value": "(round((Pieces.Y  - SQOFFY) / SQSIZE) * SQSIZE) / SQSIZE"
									}
								}
							],
							"sid": 698464019067579,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if piece can go to the square."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 180821863981834,
											"parameters": {
												"object": "Square",
												"expression": "(Square.posX = goToX) & (Square.posY = goToY)"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 849055697981049,
											"parameters": {
												"value": "Functions.isInAvailableList(goToX, goToY)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Subtract one move and update text box."
										},
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 427707843966698,
											"parameters": {
												"variable": "movesLeft",
												"value": "1"
											}
										},
										{
											"id": "set-text",
											"objectClass": "txtMoves",
											"sid": 216103751463748,
											"parameters": {
												"text": "\"Moves left: \" & movesLeft"
											}
										},
										{
											"type": "comment",
											"text": "Disable Drag and Drop controls."
										},
										{
											"id": "set-enabled",
											"objectClass": "WhitePiece",
											"sid": 484641163375983,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "WhiteKing",
											"sid": 393047111652056,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"type": "comment",
											"text": "Set piece position variables."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Pieces",
											"sid": 143381856951373,
											"parameters": {
												"instance-variable": "posX",
												"value": "goToX"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Pieces",
											"sid": 243497453357730,
											"parameters": {
												"instance-variable": "posY",
												"value": "goToY"
											}
										},
										{
											"type": "comment",
											"text": "Move piece to position."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Pieces",
											"sid": 758242579762981,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PositionPieceTween\"",
												"property": "position",
												"end-x": "Square.X",
												"end-y": "Square.Y",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 659630858267816
										}
									],
									"sid": 867127146596868,
									"children": [
										{
											"eventType": "comment",
											"text": "If it's a pawn and it's reached the top square, open promotion window."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "Pieces",
													"sid": 782947292069342,
													"parameters": {
														"animation": "\"WhitePawn\""
													}
												},
												{
													"id": "compare-instance-variable",
													"objectClass": "Pieces",
													"sid": 334461934471537,
													"parameters": {
														"instance-variable": "posY",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"callFunction": "promotePawn",
													"sid": 145343382737981
												}
											],
											"sid": 286719533840463
										},
										{
											"eventType": "comment",
											"text": "Process game logic."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 153120430121692
												}
											],
											"actions": [
												{
													"callFunction": "processGameLogic",
													"sid": 404652626794809
												}
											],
											"sid": 672180580761990
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If it cannot go to the wanted square, send it back to where it was before."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 791664686071335
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 627231090770853,
											"parameters": {
												"object": "Square",
												"expression": "(Square.posX = Pieces.posX) & (Square.posY = Pieces.posY)"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "Pieces",
											"sid": 409971645028288,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PositionPieceTween\"",
												"property": "position",
												"end-x": "Square.X",
												"end-y": "Square.Y",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 823486037589061
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Start dragging the piece."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "Pieces",
							"sid": 323752276790450,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"callFunction": "getAvailablePositions",
							"sid": 798524183805900
						},
						{
							"callFunction": "revealAvailablePositions",
							"sid": 299950659421627
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Pieces",
							"sid": 846318647072648,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PickPieceTween\"",
								"property": "scale",
								"end-x": "1.25",
								"end-y": "1.25",
								"time": "0.1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 828216697568628
				},
				{
					"eventType": "comment",
					"text": "Show available positions in the board."
				},
				{
					"functionName": "revealAvailablePositions",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 766235227220089,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "ArrAvailablePos",
									"sid": 761238816031137,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [],
							"sid": 720894212794122,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 992301315525853,
											"parameters": {
												"object": "Square",
												"expression": "(Square.posX = int(tokenat(ArrAvailablePos.CurValue, 0, \"|\"))) & (Square.posY = int(tokenat(ArrAvailablePos.CurValue, 1, \"|\")))"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 416948148124096,
											"parameters": {
												"object-to-create": "AvailableMarker",
												"layer": "\"Game\"",
												"x": "Square.X",
												"y": "Square.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-size",
											"objectClass": "AvailableMarker",
											"sid": 940784697331222,
											"parameters": {
												"width": "0",
												"height": "0"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "AvailableMarker",
											"sid": 551828116663272,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DestroyMarker\"",
												"property": "size",
												"end-x": "Self.ImageWidth",
												"end-y": "Self.ImageHeight",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 634036078053300
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Pieces Z-Ordering"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 101836578490112
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Pieces",
							"sid": 621616680531971,
							"parameters": {
								"instance-variable": "absoluteY",
								"value": "Self.Y"
							}
						},
						{
							"id": "sort-z-order",
							"objectClass": "System",
							"sid": 691553481833075,
							"parameters": {
								"object": "Pieces",
								"instance-variable": {
									"name": "absoluteY",
									"objectClass": "Pieces"
								}
							}
						}
					],
					"sid": 640121382853255
				}
			],
			"sid": 176116416071882
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Promote Pawn",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Promote pawn to a bigger piece."
				},
				{
					"functionName": "promotePawn",
					"functionDescription": "Promote pawn to a bigger piece",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Show the promotion screen."
						},
						{
							"id": "tween-value",
							"objectClass": "PromoteFrame",
							"sid": 110471959330819,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromoteOpacity\"",
								"start-value": "0",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 465671638943218
				},
				{
					"eventType": "comment",
					"text": "Control promote screen opacity and game blur according to PromoteOpacity tween."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "PromoteFrame",
							"sid": 452603910082852,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromoteOpacity\""
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "PromoteFrame",
							"sid": 383485774268224,
							"parameters": {
								"opacity": "Self.Tween.Value(\"PromoteOpacity\")"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 667353499559393,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurHorizontal\"",
								"parameter-index": "0",
								"value": "PromoteFrame.Tween.Value(\"PromoteOpacity\")"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 826661449847512,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurVertical\"",
								"parameter-index": "0",
								"value": "PromoteFrame.Tween.Value(\"PromoteOpacity\")"
							}
						}
					],
					"sid": 537714624707561
				},
				{
					"eventType": "comment",
					"text": "Promote pawn to tapped piece."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 963078224581592,
							"parameters": {
								"object": "PromotePiece"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "PromotePiece",
							"sid": 801232724182243,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide screen."
						},
						{
							"id": "tween-value",
							"objectClass": "PromoteFrame",
							"sid": 919380672243120,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromoteOpacity\"",
								"start-value": "100",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Shrink true piece and move \"promotion\" piece on top of it."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "WhitePiece",
							"sid": 342656084671259,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"WhitePiecePromotionTween\"",
								"property": "scale",
								"end-x": "0.01",
								"end-y": "0.01",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "PromotePiece",
							"sid": 351672164552090,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromotionPosition\"",
								"property": "position",
								"end-x": "WhitePiece.X",
								"end-y": "WhitePiece.Y",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set true piece animation and scale to match promotion piece visual properties."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 499966444008334
						},
						{
							"id": "set-animation",
							"objectClass": "WhitePiece",
							"sid": 799976111788423,
							"parameters": {
								"animation": "PromotePiece.AnimationName",
								"from": "beginning"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "WhitePiece",
							"sid": 351238668475395,
							"parameters": {
								"scale": "1"
							}
						},
						{
							"type": "comment",
							"text": "Process game logic after promotion."
						},
						{
							"callFunction": "processGameLogic",
							"sid": 295202645798996
						}
					],
					"sid": 257016835761331
				}
			],
			"sid": 607284327490183
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Logic",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Process game logic following the flowchart."
				},
				{
					"functionName": "processGameLogic",
					"functionDescription": "Process game logic following the flowchart",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Reset flowchart."
						},
						{
							"id": "reset-flowchart",
							"objectClass": "Flowchart",
							"sid": 779269427286911
						}
					],
					"sid": 679795476355817,
					"children": [
						{
							"eventType": "variable",
							"name": "tempCount",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 853648486332076
						},
						{
							"eventType": "comment",
							"text": "Run flowchart until it reaches an End or Proceed node"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "while",
									"objectClass": "System",
									"sid": 924701701827181
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 337816188227426,
									"parameters": {
										"value": "Flowchart.NodeTag = \"nodeEnd\" | Flowchart.NodeTag = \"nodeProceed\""
									},
									"isInverted": true
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 542420696249016,
									"parameters": {
										"value": "tempCount < 100"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 768768783773717,
									"parameters": {
										"variable": "tempCount",
										"value": "1"
									}
								}
							],
							"sid": 395079299294902,
							"children": [
								{
									"eventType": "comment",
									"text": "Verify if current white piece can checkmate. That is:\n- It exists\n- It is a Pawn (which can be promoted), a Rook or a Queen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 708105013709808,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeCanCheckmate\""
											}
										}
									],
									"actions": [],
									"sid": 864987101074562,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 524276499665165,
													"parameters": {
														"value": "WhitePiece.Count > 0 & (WhitePiece.AnimationName = \"WhitePawn\" | WhitePiece.AnimationName = \"WhiteRook\" | WhitePiece.AnimationName = \"WhiteQueen\")"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 960318568931673,
													"parameters": [
														"Flowchart.OutputValue(\"pieceCanCheckmate\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 414020058756322,
													"parameters": {
														"index-or-name": "\"pieceCanCheckmate\""
													}
												}
											],
											"sid": 196479949068931
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 467491984785965
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 922258193867334,
													"parameters": [
														"Flowchart.OutputValue(\"pieceCannotCheckmate\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 959953044333449,
													"parameters": {
														"index-or-name": "\"pieceCannotCheckmate\""
													}
												}
											],
											"sid": 738451752394131
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Verify if Black King is in check. In this scenario, only 3 pieces can perform a check: Pawn, Rook or Queen.\nIt is impossible to reach a check state through a knight or bishop, since having one of those pieces immediately leads to a draw due to insufficient materials."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 173709842821878
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 766826011663894,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeInCheck\""
											}
										}
									],
									"actions": [],
									"sid": 958472597318952,
									"children": [
										{
											"eventType": "comment",
											"text": "Attacked by Pawn."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "WhitePiece",
													"sid": 923624692008011,
													"parameters": {
														"animation": "\"WhitePawn\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 746245491136993,
													"parameters": {
														"value": "Functions.isSquareAttackedByWhitePawn(BlackKing.posX, BlackKing.posY)"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 664679774592979,
													"parameters": [
														"Flowchart.OutputValue(\"inCheck\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 150950483768088,
													"parameters": {
														"index-or-name": "\"inCheck\""
													}
												}
											],
											"sid": 599923499767321
										},
										{
											"eventType": "comment",
											"text": "Attacked by Rook."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 703839639881638
												},
												{
													"id": "is-animation-playing",
													"objectClass": "WhitePiece",
													"sid": 516072769107101,
													"parameters": {
														"animation": "\"WhiteRook\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 764135008403930,
													"parameters": {
														"value": "Functions.isSquareAttackedByWhiteRook(BlackKing.posX, BlackKing.posY)"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 835913556900257,
													"parameters": [
														"Flowchart.OutputValue(\"inCheck\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 661670602245998,
													"parameters": {
														"index-or-name": "\"inCheck\""
													}
												}
											],
											"sid": 364883066885980
										},
										{
											"eventType": "comment",
											"text": "Attacked by Queen."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 580453620467695
												},
												{
													"id": "is-animation-playing",
													"objectClass": "WhitePiece",
													"sid": 323131476769551,
													"parameters": {
														"animation": "\"WhiteQueen\""
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 313812278117840,
													"parameters": {
														"value": "Functions.isSquareAttackedByWhiteQueen(BlackKing.posX, BlackKing.posY)"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 113234863108088,
													"parameters": [
														"Flowchart.OutputValue(\"inCheck\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 748382597124443,
													"parameters": {
														"index-or-name": "\"inCheck\""
													}
												}
											],
											"sid": 704153372935176
										},
										{
											"eventType": "comment",
											"text": "Not attacked."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 527527474731963
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 376121929465862,
													"parameters": [
														"Flowchart.OutputValue(\"notInCheck\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 256221213225131,
													"parameters": {
														"index-or-name": "\"notInCheck\""
													}
												}
											],
											"sid": 277273285062178
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Verify which move will be performed by the Black King (if any)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 608024379273273
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 292097728544495,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeKingMove\""
											}
										}
									],
									"actions": [],
									"sid": 675115683522990,
									"children": [
										{
											"eventType": "comment",
											"text": "Black King can take White's piece. This will lead to a draw due to insufficient material."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 239579273667089,
													"parameters": {
														"value": "(distance(BlackKing.posX, BlackKing.posY, WhitePiece.posX, WhitePiece.posY) <= sqrt(2)) &\n(distance(WhiteKing.posX, WhiteKing.posY, WhitePiece.posX, WhitePiece.posY) > sqrt(2)) \n"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 174986375557548,
													"parameters": [
														"Flowchart.OutputValue(\"canTakePiece\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 608547716735897,
													"parameters": {
														"index-or-name": "\"canTakePiece\""
													}
												}
											],
											"sid": 944431852130464
										},
										{
											"eventType": "comment",
											"text": "Black King cannot take White's piece. This may lead to a normal move, stalemate or checkmate."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 825326207862400
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 124217655838455,
													"parameters": {
														"object": "Pieces",
														"expression": "Pieces.AnimationName = \"BlackKing\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "getAvailablePositions",
													"sid": 513282617114787
												}
											],
											"sid": 443759876831973,
											"children": [
												{
													"eventType": "comment",
													"text": "Black King has available squares to move."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-size",
															"objectClass": "ArrAvailablePos",
															"sid": 313456015967234,
															"parameters": {
																"axis": "x",
																"comparison": 4,
																"value": "0"
															}
														}
													],
													"actions": [
														{
															"callFunction": "GameLogicLog",
															"sid": 509314015269996,
															"parameters": [
																"Flowchart.OutputValue(\"canMove\")"
															]
														},
														{
															"id": "goto-next-flowchart-node",
															"objectClass": "Flowchart",
															"sid": 761649299233396,
															"parameters": {
																"index-or-name": "\"canMove\""
															}
														}
													],
													"sid": 621919787407055
												},
												{
													"eventType": "comment",
													"text": "Black King does not have an available square to move."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 131729727359881
														}
													],
													"actions": [
														{
															"callFunction": "GameLogicLog",
															"sid": 464761868438406,
															"parameters": [
																"Flowchart.OutputValue(\"cannotMove\")"
															]
														},
														{
															"id": "goto-next-flowchart-node",
															"objectClass": "Flowchart",
															"sid": 946079380475984,
															"parameters": {
																"index-or-name": "\"cannotMove\""
															}
														}
													],
													"sid": 335432755628700
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the Black King cannot take a piece, but can still move, the following logic should be followed:\n- If the White Piece is a pawn, move the Black King closer to it, with the intention of taking it.\n- Otherwise, move the Black King to the center. This is a very rudimentary way to defend against getting cornered and checkmated."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 571219792988242
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 632848256935641,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeIsPiecePawn\""
											}
										}
									],
									"actions": [],
									"sid": 394855834511179,
									"children": [
										{
											"eventType": "comment",
											"text": "Piece is a pawn."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "WhitePiece",
													"sid": 559078851111679,
													"parameters": {
														"animation": "\"WhitePawn\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 867218275011877,
													"parameters": [
														"Flowchart.OutputValue(\"pieceIsPawn\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 411081717924074,
													"parameters": {
														"index-or-name": "\"pieceIsPawn\""
													}
												}
											],
											"sid": 927178479584309
										},
										{
											"eventType": "comment",
											"text": "Piece is not a pawn."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 143525766623872
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 270299561737141,
													"parameters": [
														"Flowchart.OutputValue(\"pieceIsNotPawn\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 605540838863252,
													"parameters": {
														"index-or-name": "\"pieceIsNotPawn\""
													}
												}
											],
											"sid": 987355965616082
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Verify if 50 moves have passed. IF that's the case, it's a draw, otherwise keep playing."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 853086225344351
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 623651273063499,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeFiftyMovesReached\""
											}
										}
									],
									"actions": [],
									"sid": 842778511060947,
									"children": [
										{
											"eventType": "comment",
											"text": "50 moves reached."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 771734283534586,
													"parameters": {
														"value": "movesLeft = 0"
													}
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 659031366852649,
													"parameters": [
														"Flowchart.OutputValue(\"fiftyMovesReached\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 150449162294763,
													"parameters": {
														"index-or-name": "\"fiftyMovesReached\""
													}
												}
											],
											"sid": 564132565800662
										},
										{
											"eventType": "comment",
											"text": "50 moves not reached."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 687916033008402
												}
											],
											"actions": [
												{
													"callFunction": "GameLogicLog",
													"sid": 283411256214327,
													"parameters": [
														"Flowchart.OutputValue(\"fiftyMovesNotReached\")"
													]
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 190325405506805,
													"parameters": {
														"index-or-name": "\"fiftyMovesNotReached\""
													}
												}
											],
											"sid": 502090083931010
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Black King makes a move."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 728862216730024
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 418096744452646,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeAction\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "GameLogicLog",
											"sid": 206030074284062,
											"parameters": [
												"Flowchart.OutputValue(0)"
											]
										}
									],
									"sid": 961375577772422,
									"children": [
										{
											"eventType": "variable",
											"name": "rndX",
											"type": "number",
											"initialValue": "0",
											"comment": "Random X coordinate (3 or 4)",
											"isStatic": false,
											"isConstant": false,
											"sid": 371414378316110
										},
										{
											"eventType": "variable",
											"name": "rndY",
											"type": "number",
											"initialValue": "0",
											"comment": "Random Y coordinate (3 or 4)",
											"isStatic": false,
											"isConstant": false,
											"sid": 654588745587793
										},
										{
											"eventType": "comment",
											"text": "Take White Pìece."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-output-name",
													"objectClass": "Flowchart",
													"sid": 953924851550513,
													"parameters": {
														"output-index": "0",
														"comparison": 0,
														"value": "\"takePiece\""
													}
												}
											],
											"actions": [
												{
													"id": "tween-two-properties",
													"objectClass": "BlackKing",
													"sid": 227216380750730,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"BlackKingTween\"",
														"property": "position",
														"end-x": "WhitePiece.X",
														"end-y": "WhitePiece.Y",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 948363752981015,
													"parameters": {
														"instance-variable": "posX",
														"value": "WhitePiece.posX"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 179566293392232,
													"parameters": {
														"instance-variable": "posY",
														"value": "WhitePiece.posY"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "WhitePiece",
													"sid": 578634828141296,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"WhitePieceShrink\"",
														"property": "scale",
														"end-x": "0.01",
														"end-y": "0.01",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 241218874836288,
													"parameters": {
														"index-or-name": "\"takePiece\""
													}
												}
											],
											"sid": 618919713768780
										},
										{
											"eventType": "comment",
											"text": "Move closer to White Piece."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 315472896539690
												},
												{
													"id": "compare-output-name",
													"objectClass": "Flowchart",
													"sid": 435099650552590,
													"parameters": {
														"output-index": "0",
														"comparison": 0,
														"value": "\"moveToPiece\""
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 105246891445000,
													"parameters": {
														"instance-variable": "posX",
														"value": "int(tokenat(Functions.moveCloserToXY(WhitePiece.posX, WhitePiece.posY), 0, \"|\")) "
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 671853443903242,
													"parameters": {
														"instance-variable": "posY",
														"value": "int(tokenat(Functions.moveCloserToXY(WhitePiece.posX, WhitePiece.posY), 1, \"|\")) "
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "BlackKing",
													"sid": 248621166519584,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"BlackKingTween\"",
														"property": "position",
														"end-x": "Self.posX * SQSIZE + SQOFFX",
														"end-y": "Self.posY * SQSIZE + SQOFFY",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 313887814867573,
													"parameters": {
														"index-or-name": "\"moveToPiece\""
													}
												}
											],
											"sid": 472462907301370
										},
										{
											"eventType": "comment",
											"text": "Move closer to the center of the board."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 284282653543710
												},
												{
													"id": "compare-output-name",
													"objectClass": "Flowchart",
													"sid": 935940092748437,
													"parameters": {
														"output-index": "0",
														"comparison": 0,
														"value": "\"moveToCenter\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 718689141220930,
													"parameters": {
														"variable": "rndX",
														"value": "choose(3, 4)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 221900780675542,
													"parameters": {
														"variable": "rndY",
														"value": "choose(3, 4)"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 788811081671182,
													"parameters": {
														"instance-variable": "posX",
														"value": "int(tokenat(Functions.moveCloserToXY(rndX, rndY), 0, \"|\"))"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "BlackKing",
													"sid": 519833118565347,
													"parameters": {
														"instance-variable": "posY",
														"value": "int(tokenat(Functions.moveCloserToXY(rndX, rndY), 1, \"|\"))"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "BlackKing",
													"sid": 124123031891954,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"BlackKingTween\"",
														"property": "position",
														"end-x": "Self.posX * SQSIZE + SQOFFX",
														"end-y": "Self.posY * SQSIZE + SQOFFY",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "goto-next-flowchart-node",
													"objectClass": "Flowchart",
													"sid": 492720818703496,
													"parameters": {
														"index-or-name": "\"moveToCenter\""
													}
												}
											],
											"sid": 667407531997669
										}
									]
								},
								{
									"eventType": "comment",
									"text": "End game state reached."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 149156224729515,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeEnd\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "GameLogicLog",
											"sid": 655058342613894,
											"parameters": [
												"Flowchart.OutputValue(0)"
											]
										},
										{
											"callFunction": "endGameMessage",
											"sid": 628877918907566,
											"parameters": [
												"Flowchart.OutputValue(0)"
											]
										}
									],
									"sid": 464011287155010
								},
								{
									"eventType": "comment",
									"text": "Wait for player's next move."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 630239518686901
										},
										{
											"id": "compare-node-tag",
											"objectClass": "Flowchart",
											"sid": 476857390819037,
											"parameters": {
												"comparison": 0,
												"value": "\"nodeProceed\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "GameLogicLog",
											"sid": 867494847736622,
											"parameters": [
												"Flowchart.OutputValue(0)"
											]
										},
										{
											"type": "comment",
											"text": "Enable Drag and Drop."
										},
										{
											"id": "set-enabled",
											"objectClass": "WhitePiece",
											"sid": 690241364998937,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "enabled"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "WhiteKing",
											"sid": 894014324790210,
											"behaviorType": "DragDrop",
											"parameters": {
												"state": "enabled"
											}
										}
									],
									"sid": 423440180013256
								}
							]
						}
					]
				}
			],
			"sid": 723480741931346
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "End Game",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Show end game message."
				},
				{
					"functionName": "endGameMessage",
					"functionDescription": "Show end game message",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 744921495800003
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Show the promotion screen and set text message accordingly."
						},
						{
							"id": "tween-value",
							"objectClass": "EndgameFrame",
							"sid": 530436454040741,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromoteOpacity\"",
								"start-value": "0",
								"end-value": "100",
								"time": "1.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "txtEndgame",
							"sid": 843473086361295,
							"parameters": {
								"text": "replace(message, \"#\", newline)"
							}
						},
						{
							"type": "comment",
							"text": "Disable Drag and Drop controls."
						},
						{
							"id": "set-enabled",
							"objectClass": "WhitePiece",
							"sid": 929291796233717,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "WhiteKing",
							"sid": 120675166617241,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 975561725594438
				},
				{
					"eventType": "comment",
					"text": "Control promote screen opacity and game blur according to PromoteOpacity tween."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "EndgameFrame",
							"sid": 819937343525780,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PromoteOpacity\""
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "EndgameFrame",
							"sid": 323355322908821,
							"parameters": {
								"opacity": "Self.Tween.Value(\"PromoteOpacity\")"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 400175641795869,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurHorizontal\"",
								"parameter-index": "0",
								"value": "EndgameFrame.Tween.Value(\"PromoteOpacity\")"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 985697973782977,
							"parameters": {
								"layer": "\"Game\"",
								"effect": "\"BlurVertical\"",
								"parameter-index": "0",
								"value": "EndgameFrame.Tween.Value(\"PromoteOpacity\")"
							}
						}
					],
					"sid": 475611248223764
				}
			],
			"sid": 487014943123674
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Background Scrolling",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 129002507358880
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "ScrollingBG",
							"sid": 930834374770730,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + 10 * dt"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "ScrollingBG",
							"sid": 982958568713226,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + 10 * dt"
							}
						}
					],
					"sid": 845119424536895
				}
			],
			"sid": 996672844757765
		}
	],
	"sid": 975159066079726
}