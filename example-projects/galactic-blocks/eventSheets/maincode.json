{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "The starting point position where all blocks will be created in rows and columns."
		},
		{
			"eventType": "variable",
			"name": "StartingX",
			"type": "number",
			"initialValue": "120",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 999790175716693
		},
		{
			"eventType": "variable",
			"name": "StartingY",
			"type": "number",
			"initialValue": "8",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 533702067250602
		},
		{
			"eventType": "comment",
			"text": "The max number os rows and columns for the blocks to ocupy."
		},
		{
			"eventType": "variable",
			"name": "MAXROWS",
			"type": "number",
			"initialValue": "9",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 193592168981196
		},
		{
			"eventType": "variable",
			"name": "MAXCOLUMNS",
			"type": "number",
			"initialValue": "6",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 383250435616277
		},
		{
			"eventType": "comment",
			"text": "How large and high each tile is."
		},
		{
			"eventType": "variable",
			"name": "TILESIZE",
			"type": "number",
			"initialValue": "16",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 247301905434648
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Gameplay",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TotalPicked",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 192723611586460
				},
				{
					"eventType": "variable",
					"name": "CurrentColor",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 591607396174771
				},
				{
					"eventType": "comment",
					"text": "Search for all matching blocks in the level and destroy them if there are more than four blocks connected."
				},
				{
					"functionName": "SearchForMatchingBlocks",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Reset"
						}
					],
					"sid": 215516018003056,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 277316729105448,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "MAXCOLUMNS - 1"
									}
								}
							],
							"actions": [],
							"sid": 708779963795115,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 211192781745571,
											"parameters": {
												"name": "\"Y\"",
												"start-index": "0",
												"end-index": "MAXROWS - 1"
											}
										}
									],
									"actions": [],
									"sid": 140524317615403,
									"children": [
										{
											"eventType": "comment",
											"text": "Reset the total amount of picked blocks and the current color being tested."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 792918196662656,
													"parameters": {
														"variable": "TotalPicked",
														"value": "0"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 336124399278043,
													"parameters": {
														"variable": "CurrentColor",
														"value": "\"\""
													}
												}
											],
											"sid": 744474058655078
										},
										{
											"eventType": "comment",
											"text": "Clear the \"Destroy\" array, so it can be filled with new UIDs."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 536888722842048,
													"parameters": {
														"count": "Destroy.Width"
													}
												}
											],
											"actions": [
												{
													"id": "pop",
													"objectClass": "Destroy",
													"sid": 292637937004983,
													"parameters": {
														"where": "back",
														"axis": "x"
													}
												}
											],
											"sid": 741550983596122
										},
										{
											"eventType": "comment",
											"text": "Pick each block based on the X and Y loops."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 486513336070075,
													"parameters": {
														"object": "Block",
														"expression": "Block.X",
														"comparison": 0,
														"value": "StartingX + loopindex(\"X\") * TILESIZE"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 722104179125813,
													"parameters": {
														"object": "Block",
														"expression": "Block.Y",
														"comparison": 0,
														"value": "StartingY + loopindex(\"Y\") * TILESIZE"
													}
												}
											],
											"actions": [],
											"sid": 450008774096092,
											"children": [
												{
													"eventType": "comment",
													"text": "Check the surroundings of the currently block, but only if it hasn't been picked before."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "Block",
															"sid": 172781516647541,
															"parameters": {
																"instance-variable": "Picked"
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 969940024005750,
															"parameters": {
																"variable": "CurrentColor",
																"value": "Block.AnimationName"
															}
														},
														{
															"callFunction": "CheckBlockSurroundings",
															"sid": 662674186997220,
															"parameters": [
																"Block.UID"
															]
														}
													],
													"sid": 194394120511122
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-boolean-instance-variable-set",
															"objectClass": "Block",
															"sid": 750880123332883,
															"parameters": {
																"instance-variable": "Picked"
															}
														}
													],
													"actions": [],
													"sid": 136952574414861
												}
											]
										},
										{
											"eventType": "comment",
											"text": "If the total amount of picked block is equal or higher than four, flash the screen and destroy the connected blocks."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 699954426540121,
													"parameters": {
														"variable": "TotalPicked",
														"comparison": 5,
														"value": "4"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Flash the entire screen for a very impactful effect."
												},
												{
													"id": "tween-value",
													"objectClass": "GameManager",
													"sid": 695638740191129,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Flash\"",
														"start-value": "125",
														"end-value": "100",
														"time": "0.25",
														"ease": "easeinsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no"
													}
												}
											],
											"sid": 457848356821485,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "repeat",
															"objectClass": "System",
															"sid": 634390074239669,
															"parameters": {
																"count": "Destroy.Width"
															}
														}
													],
													"actions": [],
													"sid": 756825066267529,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "pick-by-unique-id",
																	"objectClass": "Block",
																	"sid": 818934091891536,
																	"parameters": {
																		"unique-id": "Destroy.At(loopindex)"
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "Spawn an explosion on top of the destroyed block."
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Block",
																	"sid": 655562260346839,
																	"parameters": {
																		"object": "Explosion",
																		"layer": "\"Blocks\"",
																		"image-point": "0",
																		"create-hierarchy": false
																	}
																},
																{
																	"id": "set-angle",
																	"objectClass": "Explosion",
																	"sid": 950163955900266,
																	"parameters": {
																		"angle": "choose(0, 90, 180, 270)"
																	}
																},
																{
																	"type": "comment",
																	"text": "Spawn a fake version of the destroyed block that will be thrown away, so it looks like the original was snapped out of the level."
																},
																{
																	"id": "spawn-another-object",
																	"objectClass": "Block",
																	"sid": 469875799499307,
																	"parameters": {
																		"object": "DestroyedBlock",
																		"layer": "\"DestroyedBlocks\"",
																		"image-point": "0",
																		"create-hierarchy": false
																	}
																},
																{
																	"id": "set-animation",
																	"objectClass": "DestroyedBlock",
																	"sid": 528322708699120,
																	"parameters": {
																		"animation": "Block.AnimationName",
																		"from": "beginning"
																	}
																},
																{
																	"id": "set-speed",
																	"objectClass": "DestroyedBlock",
																	"sid": 150185695779504,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"speed": "random(128, 256)"
																	}
																},
																{
																	"id": "set-angle-of-motion",
																	"objectClass": "DestroyedBlock",
																	"sid": 601848711189364,
																	"behaviorType": "Bullet",
																	"parameters": {
																		"angle": "random(270 - 30, 270 + 30)"
																	}
																},
																{
																	"id": "set-speed",
																	"objectClass": "DestroyedBlock",
																	"sid": 739234523227989,
																	"behaviorType": "Rotate",
																	"parameters": {
																		"speed": "random(-720, 720)"
																	}
																},
																{
																	"id": "tween-value",
																	"objectClass": "DestroyedBlock",
																	"sid": 508147144430380,
																	"behaviorType": "Tween",
																	"parameters": {
																		"tags": "\"Flash\"",
																		"start-value": "200",
																		"end-value": "100",
																		"time": "0.25",
																		"ease": "default",
																		"destroy-on-complete": "no",
																		"loop": "no",
																		"ping-pong": "no"
																	}
																},
																{
																	"type": "comment",
																	"text": "Spawn a shockwave below the destroyed block."
																},
																{
																	"callFunction": "SpawnShockwave",
																	"sid": 912386595326116,
																	"parameters": [
																		"Block.X",
																		"Block.Y"
																	]
																},
																{
																	"type": "comment",
																	"text": "Increase the player score by a hundred points."
																},
																{
																	"callFunction": "IncreaseScore",
																	"sid": 462683204487632,
																	"parameters": [
																		"100"
																	]
																},
																{
																	"type": "comment",
																	"text": "Finally destroy the block and move it away from the grid, since the object might still be visible for a single frame after being destroyed."
																},
																{
																	"id": "destroy",
																	"objectClass": "Block",
																	"sid": 253256276653494
																},
																{
																	"id": "set-position",
																	"objectClass": "Block",
																	"sid": 865078652485133,
																	"parameters": {
																		"x": "-32",
																		"y": "-32"
																	}
																}
															],
															"sid": 257676417526804
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Reset the picked state of each block by changing them to false."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 131796835388464,
									"parameters": {
										"object": "Block"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Block",
									"sid": 875701178322757,
									"parameters": {
										"instance-variable": "Picked",
										"value": "false"
									}
								}
							],
							"sid": 748381771966680
						},
						{
							"eventType": "comment",
							"text": "Snap all remaining floating blocks."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "SnapFloatingBlocks",
									"sid": 700174505432201
								}
							],
							"sid": 211705627588219
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once a destroyed block has travelled more than 512 pixels, destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-distance-travelled",
							"objectClass": "DestroyedBlock",
							"sid": 282600858335864,
							"behaviorType": "Bullet",
							"parameters": {
								"comparison": 5,
								"distance": "512"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "DestroyedBlock",
							"sid": 973714729295381
						}
					],
					"sid": 321709826426402
				},
				{
					"eventType": "comment",
					"text": "Constantly update the layout luminosity while the flash animation is being played."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 494826119928376,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-effect-parameter",
							"objectClass": "System",
							"sid": 549476274547560,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "GameManager.Tween.Value(\"Flash\")"
							}
						}
					],
					"sid": 312296706855164
				},
				{
					"eventType": "comment",
					"text": "Count how many blocks are surrounding a specific block using recursion (calling the same function from inside of it)."
				},
				{
					"functionName": "CheckBlockSurroundings",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "BlockUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 449602453649067
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Block",
							"sid": 806274469107072,
							"parameters": {
								"unique-id": "BlockUID"
							}
						}
					],
					"actions": [],
					"sid": 967976854155969,
					"children": [
						{
							"eventType": "comment",
							"text": "Only proceed if the block hasn't being picked yet."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Block",
									"sid": 198666185187607,
									"parameters": {
										"instance-variable": "Picked"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 538987353740463,
							"children": [
								{
									"eventType": "comment",
									"text": "If the block has the same color as the initial one, change its picked state to true and increase the total amount of picked blocks."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "Block",
											"sid": 552837116539080,
											"parameters": {
												"animation": "CurrentColor"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Block",
											"sid": 282769029200574,
											"parameters": {
												"instance-variable": "Picked",
												"value": "true"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 169258698991014,
											"parameters": {
												"variable": "TotalPicked",
												"value": "1"
											}
										},
										{
											"type": "comment",
											"text": "Also create a trigger object that will be used to \"see\" the surroundings of the block and store the block UID in the \"Destroy\" array."
										},
										{
											"id": "spawn-another-object",
											"objectClass": "Block",
											"sid": 767197709192031,
											"parameters": {
												"object": "Trigger",
												"layer": "\"Blocks\"",
												"image-point": "0",
												"create-hierarchy": false
											}
										},
										{
											"id": "push",
											"objectClass": "Destroy",
											"sid": 839573392674422,
											"parameters": {
												"where": "back",
												"value": "Block.UID",
												"axis": "x"
											}
										}
									],
									"sid": 403281833523622,
									"children": [
										{
											"eventType": "comment",
											"text": "Check if the trigger is overlapping any other block around the main one, if it's check their surroundings as well."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 961055012097580,
													"parameters": {
														"count": "4"
													}
												}
											],
											"actions": [],
											"sid": 405565358397312,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-all",
															"objectClass": "System",
															"sid": 397371173289995,
															"parameters": {
																"object": "Block"
															}
														}
													],
													"actions": [],
													"sid": 276821822298023,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "Trigger",
																	"sid": 583867931438701,
																	"parameters": {
																		"object": "Block",
																		"offset-x": "cos(loopindex * 90) * TILESIZE",
																		"offset-y": "sin(loopindex * 90) * TILESIZE"
																	}
																}
															],
															"actions": [
																{
																	"callFunction": "CheckBlockSurroundings",
																	"sid": 458059354540831,
																	"parameters": [
																		"Block.UID"
																	]
																}
															],
															"sid": 381077194119663
														}
													]
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Destroy the trigger, since it won't be used anymore."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "Trigger",
													"sid": 338625973068015
												}
											],
											"sid": 862514657488483
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Snap all floating blocks, so they're all connected."
				},
				{
					"functionName": "SnapFloatingBlocks",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 143274093519953,
					"children": [
						{
							"eventType": "comment",
							"text": "How many blocks had to be snapped."
						},
						{
							"eventType": "variable",
							"name": "SnappedBlocks",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 109502124420203
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 801203292719622,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "MAXCOLUMNS - 1"
									}
								}
							],
							"actions": [],
							"sid": 553034987826963,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 446902646094005,
											"parameters": {
												"name": "\"Y\"",
												"start-index": "0",
												"end-index": "MAXROWS - 1"
											}
										}
									],
									"actions": [],
									"sid": 203825185183806,
									"children": [
										{
											"eventType": "comment",
											"text": "Pick each block based on the X and Y loops."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 905317354152670,
													"parameters": {
														"object": "Block",
														"expression": "Block.X",
														"comparison": 0,
														"value": "StartingX + loopindex(\"X\") * TILESIZE"
													}
												},
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 357197472821571,
													"parameters": {
														"object": "Block",
														"expression": "Block.Y",
														"comparison": 0,
														"value": "StartingY + loopindex(\"Y\") * TILESIZE"
													}
												}
											],
											"actions": [],
											"sid": 925908558505528,
											"children": [
												{
													"eventType": "comment",
													"text": "If the block is far from the initial spawn point and have nothing above it, move it up until it collides with a solid object."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-y",
															"objectClass": "Block",
															"sid": 996246819740287,
															"parameters": {
																"comparison": 4,
																"y-co-ordinate": "TILESIZE / 2"
															}
														}
													],
													"actions": [],
													"sid": 493226979930406,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-overlapping-at-offset",
																	"objectClass": "Block",
																	"sid": 233679562667910,
																	"parameters": {
																		"object": "Solids",
																		"offset-x": "0",
																		"offset-y": "-TILESIZE"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "add-to-eventvar",
																	"objectClass": "System",
																	"sid": 978941394530520,
																	"parameters": {
																		"variable": "SnappedBlocks",
																		"value": "1"
																	}
																}
															],
															"sid": 334885578975172,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "while",
																			"objectClass": "System",
																			"sid": 944796420331059
																		},
																		{
																			"id": "is-overlapping-at-offset",
																			"objectClass": "Block",
																			"sid": 513157001751939,
																			"parameters": {
																				"object": "Solids",
																				"offset-x": "0",
																				"offset-y": "-TILESIZE"
																			},
																			"isInverted": true
																		}
																	],
																	"actions": [
																		{
																			"id": "set-y",
																			"objectClass": "Block",
																			"sid": 887368758620890,
																			"parameters": {
																				"y": "Self.Y - TILESIZE"
																			}
																		}
																	],
																	"sid": 610450289670739
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If at least one block is snapped, search for new matching blocks in the level."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 523068188926667,
									"parameters": {
										"variable": "SnappedBlocks",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SearchForMatchingBlocks",
									"sid": 777206588448084
								}
							],
							"sid": 994607588571538
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Constantly update the destroyed block luminosity while the flash animation is being played."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "DestroyedBlock",
							"sid": 734848343086183,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "DestroyedBlock",
							"sid": 161245654058705,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Self.Tween.Value(\"Flash\")"
							}
						}
					],
					"sid": 333072403928723
				}
			],
			"sid": 768408161169072
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reset both \"IsCarryingBlock\" and \"StoredY\" values to their default states."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 325822906354816
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 469821910217396,
							"parameters": {
								"variable": "IsCarryingBlock",
								"value": "false"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 831170894173032,
							"parameters": {
								"variable": "StoredY",
								"value": "0"
							}
						}
					],
					"sid": 625106591397870
				},
				{
					"eventType": "comment",
					"text": "The left and right edge of the world, where the player can't move beyond."
				},
				{
					"eventType": "variable",
					"name": "LEFTEDGE",
					"type": "number",
					"initialValue": "120",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 676738024024103
				},
				{
					"eventType": "variable",
					"name": "RIGHTEDGE",
					"type": "number",
					"initialValue": "200",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 319458992347296
				},
				{
					"eventType": "comment",
					"text": "Move the player left."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 145705350008532,
							"parameters": {
								"key": 37
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 468807596530647,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-left"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MovePlayer",
							"sid": 402867938186692,
							"parameters": [
								"-1"
							]
						}
					],
					"sid": 204666613180581,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the player right."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 430029736219854,
							"parameters": {
								"key": 39
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 948544191105681,
							"parameters": {
								"gamepad": "0",
								"button": "d-pad-right"
							}
						}
					],
					"actions": [
						{
							"callFunction": "MovePlayer",
							"sid": 845047156055950,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 120699967073734,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Move the player towards an horizontal direction, but with a clamped value, so it's doesn't cross the world edge."
				},
				{
					"functionName": "MovePlayer",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Direction",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 146574089443811
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Player",
							"sid": 854376415848950,
							"parameters": {
								"object": "PlayerTrail",
								"layer": "\"EffectsBelow\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-x",
							"objectClass": "Player",
							"sid": 500970742356367,
							"parameters": {
								"x": "clamp(Self.X + Direction * TILESIZE, LEFTEDGE, RIGHTEDGE)"
							}
						}
					],
					"sid": 615768095578424
				},
				{
					"eventType": "comment",
					"text": "Whether or not the player is carrying a block."
				},
				{
					"eventType": "variable",
					"name": "IsCarryingBlock",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 353427973950171
				},
				{
					"eventType": "comment",
					"text": "The Y position where a picked block will be thrown at."
				},
				{
					"eventType": "variable",
					"name": "StoredY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 106663962866301
				},
				{
					"eventType": "comment",
					"text": "Pick or throw a block if the player is carrying any."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 488182194058524,
							"parameters": {
								"key": 90
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 325021280607470,
							"parameters": {
								"gamepad": "0",
								"button": "button-a"
							}
						}
					],
					"actions": [],
					"sid": 155925176509591,
					"children": [
						{
							"eventType": "comment",
							"text": "If the player isn't carrying a block yet, pick the one that's on the same X position as the player and has the highest Y position, which mean it's closer to the player than all the other blocks in the scene."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 457045726086672,
									"parameters": {
										"variable": "IsCarryingBlock"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 471535709021324,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 114597790667476,
											"parameters": {
												"object": "Block",
												"expression": "Block.X",
												"comparison": 0,
												"value": "Player.X"
											}
										}
									],
									"actions": [],
									"sid": 408665878068373,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 719374075337737,
													"parameters": {
														"first-value": "Block.PickedCount",
														"comparison": 5,
														"second-value": "1"
													}
												}
											],
											"actions": [],
											"sid": 387788501460780,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each-ordered",
															"objectClass": "System",
															"sid": 440875691072794,
															"parameters": {
																"object": "Block",
																"expression": "Block.Y",
																"order": "descending"
															}
														}
													],
													"actions": [],
													"sid": 149212152297670,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 754712869099606,
																	"parameters": {
																		"first-value": "loopindex",
																		"comparison": 0,
																		"second-value": "0"
																	}
																}
															],
															"actions": [],
															"sid": 649875438609690,
															"children": [
																{
																	"eventType": "comment",
																	"text": "Spawn a sequence of pull beam effects based on the distance between the player and the picked block, so it's clear to the player which block was picked."
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "repeat",
																			"objectClass": "System",
																			"sid": 480260083351106,
																			"parameters": {
																				"count": "distance(0, Block.Y, 0, Player.ImagePointY(\"HandlingTool\")) / TILESIZE"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "spawn-another-object",
																			"objectClass": "Player",
																			"sid": 972248093984530,
																			"parameters": {
																				"object": "PullBeam",
																				"layer": "\"EffectsBelow\"",
																				"image-point": "\"HandlingTool\"",
																				"create-hierarchy": false
																			}
																		},
																		{
																			"id": "set-y",
																			"objectClass": "PullBeam",
																			"sid": 368436045373926,
																			"parameters": {
																				"y": "Self.Y - TILESIZE * loopindex"
																			}
																		}
																	],
																	"sid": 835445979560863
																},
																{
																	"eventType": "comment",
																	"text": "Also update the player's state and flash the block."
																},
																{
																	"eventType": "block",
																	"conditions": [],
																	"actions": [
																		{
																			"id": "set-boolean-eventvar",
																			"objectClass": "System",
																			"sid": 315689527991431,
																			"parameters": {
																				"variable": "IsCarryingBlock",
																				"value": "true"
																			}
																		},
																		{
																			"callFunction": "FlashBlock",
																			"sid": 111886856551525,
																			"parameters": [
																				"Block.UID",
																				false
																			]
																		},
																		{
																			"id": "set-position",
																			"objectClass": "Block",
																			"sid": 204484279732483,
																			"parameters": {
																				"x": "Player.ImagePointX(\"BlockHook\")",
																				"y": "Player.ImagePointY(\"BlockHook\")"
																			}
																		},
																		{
																			"callFunction": "FlashBlock",
																			"sid": 931467813140672,
																			"parameters": [
																				"Block.UID",
																				false
																			]
																		},
																		{
																			"id": "add-child",
																			"objectClass": "Player",
																			"sid": 199535742683261,
																			"parameters": {
																				"child": "Block",
																				"transform-x": true,
																				"transform-y": true,
																				"transform-w": false,
																				"transform-h": false,
																				"transform-a": false,
																				"transform-z-elevation": false,
																				"destroy-with-parent": false
																			}
																		},
																		{
																			"id": "stop-loop",
																			"objectClass": "System",
																			"sid": 170226409079575
																		}
																	],
																	"sid": 153558712238635
																}
															]
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "However, if the player is already carrying a block, throw it forward, in front of the next closest block."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 304237382353676
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 555584180526825,
									"parameters": {
										"variable": "IsCarryingBlock"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Initially set the stored Y to be half of a tile size, so the block is sent to the first row if there are no other blocks in front of the player."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 129444854746827,
									"parameters": {
										"variable": "StoredY",
										"value": "TILESIZE / 2"
									}
								}
							],
							"sid": 313879759031497,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 598718721375722,
											"parameters": {
												"object": "Block",
												"expression": "Block.X",
												"comparison": 0,
												"value": "Player.X"
											}
										}
									],
									"actions": [],
									"sid": 434543127680996,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-comparison",
													"objectClass": "System",
													"sid": 688979512213554,
													"parameters": {
														"object": "Block",
														"expression": "Block.Y",
														"comparison": 1,
														"value": "Player.ImagePointY(\"BlockHook\")"
													}
												}
											],
											"actions": [],
											"sid": 108811779440506,
											"children": [
												{
													"eventType": "comment",
													"text": "If there's at least one block in front of the player, store its position Y plus the size of a tile."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 646793277068719,
															"parameters": {
																"first-value": "Block.PickedCount",
																"comparison": 5,
																"second-value": "1"
															}
														}
													],
													"actions": [],
													"sid": 234793919138192,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for-each-ordered",
																	"objectClass": "System",
																	"sid": 744385100316094,
																	"parameters": {
																		"object": "Block",
																		"expression": "Block.Y",
																		"order": "descending"
																	}
																}
															],
															"actions": [],
															"sid": 376704189140738,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-two-values",
																			"objectClass": "System",
																			"sid": 518632829037147,
																			"parameters": {
																				"first-value": "loopindex",
																				"comparison": 0,
																				"second-value": "0"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-eventvar-value",
																			"objectClass": "System",
																			"sid": 559696198941090,
																			"parameters": {
																				"variable": "StoredY",
																				"value": "Block.Y + TILESIZE"
																			}
																		},
																		{
																			"id": "stop-loop",
																			"objectClass": "System",
																			"sid": 782612900184813
																		}
																	],
																	"sid": 567918664965256
																}
															]
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Release the block from the player and move it to the stored Y position. It's important to use a stored value instead doing everything in a single event sequence because the picking system can be a bit confusing to handle that way."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Player",
											"sid": 443038884887187,
											"parameters": {
												"child": "Block",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "remove-child",
											"objectClass": "Player",
											"sid": 737347686518757,
											"parameters": {
												"child": "Block"
											}
										},
										{
											"callFunction": "FlashBlock",
											"sid": 237955639600976,
											"parameters": [
												"Block.UID",
												false
											]
										},
										{
											"id": "set-y",
											"objectClass": "Block",
											"sid": 394420314941340,
											"parameters": {
												"y": "StoredY"
											}
										},
										{
											"callFunction": "FlashBlock",
											"sid": 686821168288505,
											"parameters": [
												"Block.UID",
												false
											]
										},
										{
											"type": "comment",
											"text": "Also update the player state, so it can pick other blocks again."
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 718710312142335,
											"parameters": {
												"variable": "IsCarryingBlock",
												"value": "false"
											}
										}
									],
									"sid": 640620195702412,
									"children": [
										{
											"eventType": "comment",
											"text": "Spawn a sequence of push beam effects based on the distance between the player and the picked block, so it's clear to the player which block was picked."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 339240644835861,
													"parameters": {
														"count": "distance(0, Block.Y, 0, Player.ImagePointY(\"HandlingTool\")) / TILESIZE"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "Player",
													"sid": 305337839845475,
													"parameters": {
														"object": "PushBeam",
														"layer": "\"EffectsBelow\"",
														"image-point": "\"HandlingTool\"",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-y",
													"objectClass": "PushBeam",
													"sid": 590913414422424,
													"parameters": {
														"y": "Self.Y - TILESIZE * loopindex"
													}
												}
											],
											"sid": 517887187979746
										},
										{
											"eventType": "comment",
											"text": "Search for matching blocks."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "SearchForMatchingBlocks",
													"sid": 615451162025382
												}
											],
											"sid": 871436100719653
										}
									]
								},
								{
									"eventType": "comment",
									"text": "At the end check if there are any blocks overlapping the laser."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "CheckLaser",
											"sid": 665450352081897
										}
									],
									"sid": 707579371742268
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Invert the position of two blocks in front of the player, but only if the player isn't carrying a block already."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 501314197711313,
							"parameters": {
								"key": 88
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 866021312933224,
							"parameters": {
								"gamepad": "0",
								"button": "button-b"
							}
						}
					],
					"actions": [],
					"sid": 232000662448604,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 875188592570247,
									"parameters": {
										"variable": "IsCarryingBlock"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 443047918682140,
							"children": [
								{
									"eventType": "comment",
									"text": "There's must be at least two blocks in front of the player for this skill to work."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 894186132606656,
											"parameters": {
												"object": "Block",
												"expression": "Block.X",
												"comparison": 0,
												"value": "Player.X"
											}
										}
									],
									"actions": [],
									"sid": 656376773526308,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 453490338178911,
													"parameters": {
														"first-value": "Block.PickedCount",
														"comparison": 5,
														"second-value": "2"
													}
												}
											],
											"actions": [],
											"sid": 415488457568690,
											"children": [
												{
													"eventType": "comment",
													"text": "Move the top one down and the bottom one up. Also flash both of them and stop the loop."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each-ordered",
															"objectClass": "System",
															"sid": 171442031733265,
															"parameters": {
																"object": "Block",
																"expression": "Block.Y",
																"order": "descending"
															}
														}
													],
													"actions": [],
													"sid": 860116672773011,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 334367455684875,
																	"parameters": {
																		"first-value": "loopindex",
																		"comparison": 0,
																		"second-value": "0"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-y",
																	"objectClass": "Block",
																	"sid": 590102959109618,
																	"parameters": {
																		"y": "Self.Y - 16"
																	}
																},
																{
																	"callFunction": "FlashBlock",
																	"sid": 171708689743464,
																	"parameters": [
																		"Block.UID",
																		true
																	]
																}
															],
															"sid": 771229285579171
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-two-values",
																	"objectClass": "System",
																	"sid": 443404917564113,
																	"parameters": {
																		"first-value": "loopindex",
																		"comparison": 0,
																		"second-value": "1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-y",
																	"objectClass": "Block",
																	"sid": 615931939576038,
																	"parameters": {
																		"y": "Self.Y + 16"
																	}
																},
																{
																	"callFunction": "FlashBlock",
																	"sid": 416192143795155,
																	"parameters": [
																		"Block.UID",
																		true
																	]
																},
																{
																	"id": "stop-loop",
																	"objectClass": "System",
																	"sid": 128768476986993
																}
															],
															"sid": 742383884521184,
															"children": [
																{
																	"eventType": "comment",
																	"text": "Also spawn sequence of switch beam effects based on the distance between the player and the inverted blocks."
																},
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "repeat",
																			"objectClass": "System",
																			"sid": 633110571034096,
																			"parameters": {
																				"count": "distance(0, Block.Y, 0, Player.ImagePointY(\"HandlingTool\")) / TILESIZE"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "spawn-another-object",
																			"objectClass": "Player",
																			"sid": 223923536614882,
																			"parameters": {
																				"object": "SwitchBeam",
																				"layer": "\"EffectsBelow\"",
																				"image-point": "\"HandlingTool\"",
																				"create-hierarchy": false
																			}
																		},
																		{
																			"id": "set-y",
																			"objectClass": "SwitchBeam",
																			"sid": 360857862265510,
																			"parameters": {
																				"y": "Self.Y - TILESIZE * loopindex"
																			}
																		}
																	],
																	"sid": 571020800658944
																}
															]
														},
														{
															"eventType": "comment",
															"text": "At the end search for matching blocks."
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"callFunction": "SearchForMatchingBlocks",
																	"sid": 768513459683291
																}
															],
															"sid": 779530712431055
														}
													]
												}
											]
										}
									]
								}
							]
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Flash a specific block with a big white effect that can be used to create a more impactful visual presentation."
				},
				{
					"functionName": "FlashBlock",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "BlockUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 962178968050869
						},
						{
							"name": "PinToBlock",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 743986606906518
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Block",
							"sid": 303486503749635,
							"parameters": {
								"unique-id": "BlockUID"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Block",
							"sid": 126869342361874,
							"parameters": {
								"object": "BlockFlash",
								"layer": "\"Blocks\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-animation",
							"objectClass": "BlockFlash",
							"sid": 846403035454094,
							"parameters": {
								"animation": "Block.AnimationName",
								"from": "beginning"
							}
						}
					],
					"sid": 615742609253499,
					"children": [
						{
							"eventType": "comment",
							"text": "It's also possible to pin the effect to the block in case it might be moved."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 853188785664014,
									"parameters": {
										"variable": "PinToBlock"
									}
								}
							],
							"actions": [
								{
									"id": "pin-to-object-properties",
									"objectClass": "BlockFlash",
									"sid": 184581219451476,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "Block",
										"x": true,
										"y": true,
										"angle": false,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								}
							],
							"sid": 924411853235991
						}
					]
				}
			],
			"sid": 759313419310905
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Waves",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Whether or not the game should automatically spawn new waves of blocks."
				},
				{
					"eventType": "variable",
					"name": "AutoSpawn",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 201197425265553
				},
				{
					"eventType": "comment",
					"text": "Wait ten seconds before starting the game, so the player has enough time to read the tutorial text."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 361337295448151
						}
					],
					"actions": [
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 996509774662884,
							"parameters": {
								"seconds": "13"
							}
						},
						{
							"type": "comment",
							"text": "Once the game has started, enable the \"AutoSpawn\" mode, so new wave can be created automatically."
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 152906115600790,
							"parameters": {
								"variable": "AutoSpawn",
								"value": "true"
							}
						}
					],
					"sid": 199096209656904,
					"children": [
						{
							"eventType": "comment",
							"text": "Also destroy both the tutorial text and frame, so they don't block the player's vision of the grid."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 416073496198014,
									"parameters": {
										"object": "TextFont",
										"expression": "TextFont.IDName",
										"comparison": 0,
										"value": "\"Tutorial\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "TextFont",
									"sid": 821413536127572
								}
							],
							"sid": 523283505461104
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "TutorialFrame",
									"sid": 985245728779430,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "offsetHeight",
										"end-value": "2",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 597733702244286
						},
						{
							"eventType": "comment",
							"text": "Spawn four rows of blocks, with a small delay between each one of them."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 909884373212457,
									"parameters": {
										"name": "\"InitialSpawn\"",
										"start-index": "1",
										"end-index": "4"
									}
								}
							],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 461831371222667,
									"parameters": {
										"seconds": "0.25 * loopindex(\"InitialSpawn\")"
									}
								},
								{
									"callFunction": "SpawnNewWave",
									"sid": 669990323759427
								}
							],
							"sid": 631653435429733
						}
					]
				},
				{
					"eventType": "comment",
					"text": "How much time has passed in total."
				},
				{
					"eventType": "variable",
					"name": "SpawnTime",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 413650736474664
				},
				{
					"eventType": "comment",
					"text": "Constantly update the auto spawn timer and spawn a new wave every time the value crosses the 6.5 seconds mark."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 913679926984710,
							"parameters": {
								"variable": "AutoSpawn"
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 141387620515715,
							"parameters": {
								"variable": "SpawnTime",
								"value": "dt"
							}
						}
					],
					"sid": 446786146389185,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 423231013207294,
									"parameters": {
										"variable": "SpawnTime",
										"comparison": 5,
										"value": "6.5"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 905921870360245,
									"parameters": {
										"variable": "SpawnTime",
										"value": "6.5"
									}
								},
								{
									"callFunction": "SpawnNewWave",
									"sid": 510773328694373
								}
							],
							"sid": 339094452973360
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the \"S\" key is pressed spawn a new wave, but only of the game is on preview mode (don't work after exporting)."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 327159175175657,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [],
					"sid": 582999398797978,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 778043729578379
								}
							],
							"actions": [
								{
									"callFunction": "SpawnNewWave",
									"sid": 833464768149345
								}
							],
							"sid": 814663831161115
						}
					]
				},
				{
					"eventType": "comment",
					"text": "The type of block on the left side of the spawner, which needs to be avoided.."
				},
				{
					"eventType": "variable",
					"name": "AvoidLeft",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 826683034071286
				},
				{
					"eventType": "comment",
					"text": "The type of block below the spawner, which needs to avoided."
				},
				{
					"eventType": "variable",
					"name": "AvoidBelow",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 367557807729838
				},
				{
					"eventType": "comment",
					"text": "Push all blocks down and spawn a new wave on the top row."
				},
				{
					"functionName": "SpawnNewWave",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 375525031209870,
					"children": [
						{
							"eventType": "comment",
							"text": "Pick all blocks and only move down the ones that doesn't has a parent (is tied to the player)."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 300244972221572,
									"parameters": {
										"object": "Block"
									}
								}
							],
							"actions": [],
							"sid": 217071715135579,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-parent",
											"objectClass": "Block",
											"sid": 133470366520324,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-y",
											"objectClass": "Block",
											"sid": 689082501296493,
											"parameters": {
												"y": "Self.Y + TILESIZE"
											}
										}
									],
									"sid": 892885910150892
								}
							]
						},
						{
							"eventType": "comment",
							"text": "The wave is spawned from left to right using a for loop."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 104162757009293,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "MAXCOLUMNS - 1"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 479388744316300,
									"parameters": {
										"object-to-create": "Block",
										"layer": "\"Blocks\"",
										"x": "StartingX + loopindex(\"X\") * TILESIZE",
										"y": "StartingY",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Initially all blocks have random animations (colors)."
								},
								{
									"id": "set-animation",
									"objectClass": "Block",
									"sid": 607678305868863,
									"parameters": {
										"animation": "choose(\"0\", \"1\", \"2\", \"3\", \"4\")",
										"from": "beginning"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 448649739951277,
									"parameters": {
										"variable": "AvoidLeft",
										"value": "0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 783544367936282,
									"parameters": {
										"variable": "AvoidBelow",
										"value": "0"
									}
								}
							],
							"sid": 867393703462118,
							"children": [
								{
									"eventType": "comment",
									"text": "Store which block color is being by the block neighborhoods on the left side and below it."
								},
								{
									"eventType": "comment",
									"text": "Left side color."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-at-offset",
											"objectClass": "Block",
											"sid": 188538011728861,
											"parameters": {
												"object": "Solids",
												"offset-x": "-TILESIZE",
												"offset-y": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 909628376529764,
											"parameters": {
												"variable": "AvoidLeft",
												"value": "int(Solids.AnimationName)"
											}
										}
									],
									"sid": 778715511547187
								},
								{
									"eventType": "comment",
									"text": "Below color."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-at-offset",
											"objectClass": "Block",
											"sid": 322671607211000,
											"parameters": {
												"object": "Solids",
												"offset-x": "0",
												"offset-y": "TILESIZE"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 303808096600497,
											"parameters": {
												"variable": "AvoidBelow",
												"value": "int(Solids.AnimationName)"
											}
										}
									],
									"sid": 964509827661287
								},
								{
									"eventType": "comment",
									"text": "If the current block has the same color as any of its neighborhoods, then randomize its color in a while loop."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 742637444820762,
											"parameters": {
												"value": "int(Block.AnimationName) = AvoidLeft | int(Block.AnimationName) =  AvoidBelow"
											}
										}
									],
									"actions": [],
									"sid": 437016070413051,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "while",
													"objectClass": "System",
													"sid": 153272992593212
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 221608854872509,
													"parameters": {
														"value": "int(Block.AnimationName) = AvoidLeft | int(Block.AnimationName) =  AvoidBelow"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "Block",
													"sid": 493731252599684,
													"parameters": {
														"animation": "choose(\"0\", \"1\", \"2\", \"3\", \"4\")",
														"from": "beginning"
													}
												}
											],
											"sid": 841794581860427
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Flash the recently created block."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "FlashBlock",
											"sid": 814539576031976,
											"parameters": [
												"Block.UID",
												false
											]
										}
									],
									"sid": 781946762546773
								}
							]
						},
						{
							"eventType": "comment",
							"text": "At the end check if there are any blocks overlapping the laser."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "CheckLaser",
									"sid": 220498850427556
								}
							],
							"sid": 314910371176849
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Count how many blocks are at the same Y position as the laser. If the result is higher than zero, then it's game over."
				},
				{
					"functionName": "CheckLaser",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 468437604722330,
							"parameters": {
								"object": "Block",
								"expression": "Block.Y",
								"comparison": 0,
								"value": "Laser.Y"
							}
						}
					],
					"actions": [],
					"sid": 899470212055307,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 127124328678084,
									"parameters": {
										"first-value": "Block.PickedCount",
										"comparison": 4,
										"second-value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "GameOver",
									"sid": 877830543760012
								}
							],
							"sid": 790130145814991
						}
					]
				}
			],
			"sid": 488336518707913
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Grid",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Spawn a shock wave effect that is created by drawing an outline ellipse in a drawing canvas. A position X and Y parameters are necessary to define the specific position of the shock wave."
				},
				{
					"functionName": "SpawnShockwave",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "PositionX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 718620437752634
						},
						{
							"name": "PositionY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 539892299131374
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 122674696570188,
							"parameters": {
								"object-to-create": "DrawingCanvas",
								"layer": "\"Grid\"",
								"x": "0",
								"y": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-size",
							"objectClass": "DrawingCanvas",
							"sid": 129782023346880,
							"parameters": {
								"width": "LayoutWidth",
								"height": "LayoutHeight"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "DrawingCanvas",
							"sid": 251685290726787,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Thickness\"",
								"start-value": "Self.Thickness",
								"end-value": "0",
								"time": "Self.Time",
								"ease": "noease",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"id": "tween-value",
							"objectClass": "DrawingCanvas",
							"sid": 418089450956580,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Radius\"",
								"start-value": "0",
								"end-value": "Self.Radius",
								"time": "Self.Time",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "DrawingCanvas",
							"sid": 483244009786843,
							"parameters": {
								"instance-variable": "PositionX",
								"value": "PositionX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "DrawingCanvas",
							"sid": 759037606469830,
							"parameters": {
								"instance-variable": "PositionY",
								"value": "PositionY"
							}
						}
					],
					"sid": 752798766672591
				},
				{
					"eventType": "comment",
					"text": "Constantly update the shock wave visuals by clearing the canvas and drawing a new one based on the current \"Thickness\" and \"Radius\" values, which are being slowly tweened down."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "DrawingCanvas",
							"sid": 416308837522485,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Thickness\""
							}
						},
						{
							"id": "is-playing",
							"objectClass": "DrawingCanvas",
							"sid": 415980600385856,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Radius\""
							}
						}
					],
					"actions": [
						{
							"id": "clear-canvas",
							"objectClass": "DrawingCanvas",
							"sid": 967849305428182,
							"parameters": {
								"color": "rgba(0, 0, 0, 0)"
							}
						},
						{
							"id": "outline-ellipse",
							"objectClass": "DrawingCanvas",
							"sid": 124888425207263,
							"parameters": {
								"x": "Self.PositionX",
								"y": "Self.PositionY",
								"radius-x": "Self.Tween.Value(\"Radius\")",
								"radius-y": "Self.Tween.Value(\"Radius\")",
								"color": "rgbEx255(61, 52, 165)",
								"line-thickness": "Self.Tween.Value(\"Thickness\")",
								"edge": "hard"
							}
						}
					],
					"sid": 120948475103122,
					"isOrBlock": true
				}
			],
			"sid": 157300506874162
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "MemoryCleaner",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Once any of the particles has finished its animation, destroy it to prevent the CPU from being overloaded with too many objects."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-animation-finished",
							"objectClass": "Particles",
							"sid": 333557302223102
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Particles",
							"sid": 202572942384325
						}
					],
					"sid": 772853505463417
				}
			],
			"sid": 256738561810587
		},
		{
			"eventType": "comment",
			"text": "How many points the player scored since the beginning of the round."
		},
		{
			"eventType": "variable",
			"name": "Score",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 559826554181185
		},
		{
			"eventType": "comment",
			"text": "How much time has passed since the beginning of the round."
		},
		{
			"eventType": "variable",
			"name": "ElapsedTime",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 423039738700758
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "HUD",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Increase the player score with a specific amount of points."
				},
				{
					"functionName": "IncreaseScore",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 484402957521102
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 152102749210411,
							"parameters": {
								"variable": "Score",
								"value": "Value"
							}
						}
					],
					"sid": 561619176445104,
					"children": [
						{
							"eventType": "comment",
							"text": "Also display the updated score in a text object."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 412676607242535,
									"parameters": {
										"object": "TextFont",
										"expression": "TextFont.IDName",
										"comparison": 0,
										"value": "\"Score\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextFont",
									"sid": 533083735157968,
									"parameters": {
										"text": "\"Score\"\n&newline&\nScore"
									}
								}
							],
							"sid": 970671190258419
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Constantly increase the amount of elapsed time since the game started."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 549152672874392
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 801811529652666,
							"parameters": {
								"variable": "ElapsedTime",
								"value": "dt"
							}
						}
					],
					"sid": 464166565842007,
					"children": [
						{
							"eventType": "comment",
							"text": "Also display the updated elapsed time in a text object with the correct formatting, using \"zeropad()\" to adjust the position of each character."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 132811120935751,
									"parameters": {
										"object": "TextFont",
										"expression": "TextFont.IDName",
										"comparison": 0,
										"value": "\"Time\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextFont",
									"sid": 492169704398918,
									"parameters": {
										"text": "\"Time\"\n&newline&\nzeropad(int(ElapsedTime/60/60% 60),2) & \":\"& zeropad(int(ElapsedTime/60% 60),2) & \":\" & zeropad(int(ElapsedTime%60),2)"
									}
								}
							],
							"sid": 493201458181984
						}
					]
				}
			],
			"sid": 430312316969162
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Background",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Constantly scroll the sky and laser textures, so it look like they're moving."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 932667964227928
						}
					],
					"actions": [
						{
							"id": "set-image-offset-y",
							"objectClass": "Sky",
							"sid": 646929972221749,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + 1 * 60 * dt"
							}
						},
						{
							"id": "set-image-offset-x",
							"objectClass": "Laser",
							"sid": 158199460902288,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + 1 * 60 * dt"
							}
						}
					],
					"sid": 828835370315272
				},
				{
					"eventType": "comment",
					"text": "Spawn a small shine on a random block every second, the position of the shine is also slightly randomized."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 683655387738158,
							"parameters": {
								"interval-seconds": "1"
							}
						}
					],
					"actions": [],
					"sid": 419472064808661,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 774132851525510,
									"parameters": {
										"object": "Block"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Block",
									"sid": 705381699727020,
									"parameters": {
										"object": "Shine",
										"layer": "\"Blocks\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-position",
									"objectClass": "Shine",
									"sid": 854116972501938,
									"parameters": {
										"x": "Self.X + random(-6, 6)",
										"y": "Self.Y + random(-6, 6)"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Block",
									"sid": 982689841533570,
									"parameters": {
										"child": "Shine",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 788319610940194
						}
					]
				}
			],
			"sid": 179161892667316
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GameOver",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game while also resetting all global variables, so nothing from the previous session is carried over."
				},
				{
					"functionName": "GameOver",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 370457302828050
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 992255477231012
						}
					],
					"sid": 922848615682637
				}
			],
			"sid": 116684339743819
		}
	],
	"sid": 907120370556838
}