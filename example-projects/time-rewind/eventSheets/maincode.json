{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "The horizontal direction the player is currently pointing towards."
		},
		{
			"eventType": "variable",
			"name": "PlayerDirection",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 160210955497828
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset all global variables to make sure nothing from previous sessions will interfere the game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 796671218886728
								}
							],
							"actions": [
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 927961188957356
								}
							],
							"sid": 717612525165036
						},
						{
							"eventType": "comment",
							"text": "Setup the player by adding its graphics as a child of the collider."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphics",
									"sid": 594730415360274
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 841884366138315,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "PlayerCollision",
									"sid": 804591260548979,
									"parameters": {
										"child": "PlayerGraphics",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 960983322737064
						},
						{
							"eventType": "comment",
							"text": "Constantly update and store the current player direction, so it can be used later for multiple situations."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 289626576519842,
									"parameters": {
										"first-value": "PlayerGraphics.Count",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 302910414614631,
									"parameters": {
										"variable": "PlayerDirection",
										"value": "sign(PlayerGraphics.Width)"
									}
								}
							],
							"sid": 478589958460144
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 344464537936998
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 725092179223972,
									"parameters": {
										"variable": "PlayerDirection",
										"value": "0"
									}
								}
							],
							"sid": 964949139436688
						}
					],
					"sid": 784603836528212
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerControls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Move the player to the left while also mirroring its graphics."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 940876619458367,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 485439395839532,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-left"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 855623151936150,
									"behaviorType": "Platform",
									"parameters": {
										"control": "left"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "PlayerGraphics",
									"sid": 598178336393665,
									"parameters": {
										"state": "mirrored"
									}
								}
							],
							"sid": 264402595788968,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Move the player to the right while also \"unmirroring\" its graphics."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 419887578263887,
									"parameters": {
										"key": 39
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 910485628604972,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-right"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 519097540705963,
									"behaviorType": "Platform",
									"parameters": {
										"control": "right"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "PlayerGraphics",
									"sid": 745144923172503,
									"parameters": {
										"state": "not-mirrored"
									}
								}
							],
							"sid": 600039708179932,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player jump."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 483631168435843,
									"parameters": {
										"key": 90
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 892685996869684,
									"parameters": {
										"gamepad": "0",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 801526876848270,
									"behaviorType": "Platform",
									"parameters": {
										"control": "jump"
									}
								}
							],
							"sid": 145191292488866,
							"isOrBlock": true
						}
					],
					"sid": 284160857497412
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Change the player's animation states depending on what the player is currently doing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 856515258548587,
									"behaviorType": "Platform"
								}
							],
							"actions": [],
							"sid": 389764283885862,
							"children": [
								{
									"eventType": "comment",
									"text": "Walk animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "PlayerCollision",
											"sid": 207825930110399,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 516732415941566,
											"parameters": {
												"animation": "\"Walk\"",
												"from": "beginning"
											}
										}
									],
									"sid": 452766029252684
								},
								{
									"eventType": "comment",
									"text": "Idle animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 296767768499252
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 928053644826257,
											"parameters": {
												"animation": "\"Idle\"",
												"from": "beginning"
											}
										}
									],
									"sid": 207306889735895
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Jump animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-jumping",
									"objectClass": "PlayerCollision",
									"sid": 693293609655887,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 464405190198737,
									"parameters": {
										"animation": "\"Jump\"",
										"from": "beginning"
									}
								}
							],
							"sid": 491575208204455
						},
						{
							"eventType": "comment",
							"text": "Fall animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-falling",
									"objectClass": "PlayerCollision",
									"sid": 651001489692675,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 559097177558332,
									"parameters": {
										"animation": "\"Fall\"",
										"from": "beginning"
									}
								}
							],
							"sid": 163021654061859
						}
					],
					"sid": 921833879566076
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerParticles",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Leave a small trail of step dust behind the player every 0.1 seconds while moving on the floor."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "PlayerCollision",
									"sid": 463773975665385,
									"behaviorType": "Platform"
								},
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 383060393704507,
									"behaviorType": "Platform"
								}
							],
							"actions": [],
							"sid": 521940510826457,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 254108591978941,
											"parameters": {
												"interval-seconds": "0.1"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "PlayerGraphics",
											"sid": 596607299183355,
											"parameters": {
												"object": "StepDust",
												"layer": "\"World\"",
												"image-point": "\"FeetCenter\"",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-width",
											"objectClass": "StepDust",
											"sid": 805112612424629,
											"parameters": {
												"width": "Self.Width*PlayerDirection"
											}
										}
									],
									"sid": 893563852312136
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "StepDust",
									"sid": 367907465741925,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "StepDust",
									"sid": 433745691568687
								}
							],
							"sid": 261645271310484
						},
						{
							"eventType": "comment",
							"text": "Spawn a land dust below the player after each landing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-landed",
									"objectClass": "PlayerCollision",
									"sid": 513471347308033,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 801293973509553,
									"parameters": {
										"object": "LandDust",
										"layer": "\"World\"",
										"image-point": "\"FeetCenter\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 875075074408110
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "LandDust",
									"sid": 282046888246306,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "LandDust",
									"sid": 112490050948336
								}
							],
							"sid": 281393043506154
						},
						{
							"eventType": "comment",
							"text": "Spawn a jump dust below the player after each jump."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-jump",
									"objectClass": "PlayerCollision",
									"sid": 787812836955384,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 557624123340637,
									"parameters": {
										"object": "JumpDust",
										"layer": "\"World\"",
										"image-point": "\"FeetCenter\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 214279439234230
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "JumpDust",
									"sid": 990240002893332,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "JumpDust",
									"sid": 599271824549731
								}
							],
							"sid": 366382635788223
						}
					],
					"sid": 858999474960428
				}
			],
			"sid": 438447210557978
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Teleporter",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the teleporter collision by moving it on top of the teleporter platform."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "TeleporterCollision",
							"sid": 691960503749229
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "TeleporterCollision",
							"sid": 870799877286167,
							"parameters": {
								"object": "TeleporterPlatform",
								"image-point-optional": "\"Collision\""
							}
						}
					],
					"sid": 998371177364058
				},
				{
					"eventType": "comment",
					"text": "If the player collides with the teleporter while it's charged, destroy the player and display a big white flash."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 632223383188225,
							"parameters": {
								"object": "TeleporterCollision"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TeleporterCollision",
							"sid": 763642753172528,
							"parameters": {
								"instance-variable": "Charged"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "TeleporterCollision",
							"sid": 215487575064132,
							"parameters": {
								"instance-variable": "Charged",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "PlayerCollision",
							"sid": 738698704844020
						},
						{
							"id": "spawn-another-object",
							"objectClass": "TeleporterPlatform",
							"sid": 328176633786300,
							"parameters": {
								"object": "Flash",
								"layer": "\"World\"",
								"image-point": "\"Flash\"",
								"create-hierarchy": false
							}
						}
					],
					"sid": 444812351366441
				},
				{
					"eventType": "comment",
					"text": "Adjust the flash size to make sure it matches the ceiling height."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Flash",
							"sid": 475468299004326
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "Flash",
							"sid": 784168343081722,
							"parameters": {
								"width": "16",
								"height": "0"
							}
						},
						{
							"id": "cast-ray",
							"objectClass": "Flash",
							"sid": 494566479424157,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.X",
								"from-y": "Self.Y",
								"to-x": "Self.X",
								"to-y": "Self.Y-Self.LineOfSight.Range",
								"use-collision-cells": true
							}
						}
					],
					"sid": 984648318403167,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "ray-intersected",
									"objectClass": "Flash",
									"sid": 589851470152846,
									"behaviorType": "LineOfSight"
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Flash",
									"sid": 990748627277483,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HeightUp\"",
										"property": "offsetHeight",
										"end-value": "Self.LineOfSight.HitDistance",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 852766279747460
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Destroy the flash after its animation is over."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Flash",
							"sid": 244193918281834,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HeightUp\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Flash",
							"sid": 636830415887098,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"WidthDown\"",
								"property": "offsetWidth",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 735183857432216
				}
			],
			"sid": 865963099006963
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ArmCannon",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Shoot a bullet from the player's arm cannon, using the player direction variable as a reference for the angle of motion."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 711414680632031,
							"parameters": {
								"key": 88
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 170915429518968,
							"parameters": {
								"gamepad": "0",
								"button": "button-b"
							}
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "PlayerGraphics",
							"sid": 593104836660318,
							"parameters": {
								"object": "Bullet",
								"layer": "\"World\"",
								"image-point": "\"ArmCannon\"",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Bullet",
							"sid": 406738566842707,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "angle(0, 0, PlayerDirection, 0)"
							}
						},
						{
							"id": "spawn-another-object",
							"objectClass": "PlayerGraphics",
							"sid": 230362617460196,
							"parameters": {
								"object": "MuzzleFlash",
								"layer": "\"World\"",
								"image-point": "\"ArmCannon\"",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-width",
							"objectClass": "MuzzleFlash",
							"sid": 860892160801574,
							"parameters": {
								"width": "Self.Width * PlayerDirection"
							}
						},
						{
							"id": "add-child",
							"objectClass": "PlayerGraphics",
							"sid": 717159042554361,
							"parameters": {
								"child": "MuzzleFlash",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-z-elevation": false,
								"destroy-with-parent": false
							}
						}
					],
					"sid": 479881922214519,
					"children": [
						{
							"eventType": "comment",
							"text": "Also reset the player's Y vector when shooting."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-falling",
									"objectClass": "PlayerCollision",
									"sid": 475013105029087,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "set-vector-y",
									"objectClass": "PlayerCollision",
									"sid": 270440432846896,
									"behaviorType": "Platform",
									"parameters": {
										"vector-y": "0"
									}
								}
							],
							"sid": 437648412714920
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "If the bullet collides with the ground, destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 235375324646355,
							"parameters": {
								"object": "Ground"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Bullet",
							"sid": 231512885754794
						}
					],
					"sid": 491766929766208
				},
				{
					"eventType": "comment",
					"text": "Once the bullet has been destroyed, leave a small explosion on top of it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Bullet",
							"sid": 599664952124474
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Bullet",
							"sid": 999828272588399,
							"parameters": {
								"object": "Explosion",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						}
					],
					"sid": 699017243428517
				},
				{
					"eventType": "comment",
					"text": "Destroy all particle related object after their animations are over, to avoid any sort of CPU overload."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Explosion",
							"sid": 653134535523794,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Explosion",
							"sid": 125668889349841
						}
					],
					"sid": 613881021494447
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "MuzzleFlash",
							"sid": 547068526333355,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "MuzzleFlash",
							"sid": 437494835113417
						}
					],
					"sid": 525326701842899
				}
			],
			"sid": 943101734631819
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "TimeRewind",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "How often the game will register the player's position."
				},
				{
					"eventType": "variable",
					"name": "TIMEBETWEENEACHSTEP",
					"type": "number",
					"initialValue": "0.01",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 334441528800855
				},
				{
					"eventType": "comment",
					"text": "How many steps the game can have stored at the same time before starting to rewrite older entries."
				},
				{
					"eventType": "variable",
					"name": "MAXNUMBEROFSTEPS",
					"type": "number",
					"initialValue": "100",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 408723966124446
				},
				{
					"eventType": "comment",
					"text": "Whether or not the game is currently rewinding time."
				},
				{
					"eventType": "variable",
					"name": "IsRewinding",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 526074590799829
				},
				{
					"eventType": "comment",
					"text": "Toggle the rewind mechanic on and off."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 887658441657376,
							"parameters": {
								"key": 67
							}
						}
					],
					"actions": [],
					"sid": 324730243084465,
					"children": [
						{
							"eventType": "comment",
							"text": "Enable."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 384057663140420,
									"parameters": {
										"variable": "IsRewinding"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 707103425763996,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-size",
											"objectClass": "TimeInformation",
											"sid": 943538903432896,
											"parameters": {
												"axis": "x",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Enable the rewind mechanic and start to store information."
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 801753127477411,
											"parameters": {
												"variable": "IsRewinding",
												"value": "true"
											}
										},
										{
											"id": "stop-timer",
											"objectClass": "GameManager",
											"sid": 496697274857399,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"StoreIformation\""
											}
										},
										{
											"type": "comment",
											"text": "Disable most player features, so they don't interfere in anything."
										},
										{
											"id": "set-vector-x",
											"objectClass": "PlayerCollision",
											"sid": 138308553917890,
											"behaviorType": "Platform",
											"parameters": {
												"vector-x": "0"
											}
										},
										{
											"id": "set-vector-y",
											"objectClass": "PlayerCollision",
											"sid": 184046714830596,
											"behaviorType": "Platform",
											"parameters": {
												"vector-y": "0"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "PlayerCollision",
											"sid": 938047006034808,
											"behaviorType": "Platform",
											"parameters": {
												"state": "disabled"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 207428801275542,
											"parameters": {
												"group-name": "\"PlayerAnimations\"",
												"state": "deactivated"
											}
										}
									],
									"sid": 428619140468251
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Disable."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 476399410011415
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 646814695891601,
									"parameters": {
										"variable": "IsRewinding"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Disable the rewind mechanic and stop storing information."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 882874662046299,
									"parameters": {
										"variable": "IsRewinding",
										"value": "false"
									}
								},
								{
									"id": "stop-timer",
									"objectClass": "GameManager",
									"sid": 697871992786171,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"LoadInformation\""
									}
								},
								{
									"type": "comment",
									"text": "Re-enable most player features, since they wont interfere on anything from now on."
								},
								{
									"id": "set-enabled",
									"objectClass": "PlayerCollision",
									"sid": 609004887924620,
									"behaviorType": "Platform",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 658101814362850,
									"parameters": {
										"group-name": "\"PlayerAnimations\"",
										"state": "activated"
									}
								}
							],
							"sid": 214499621895448,
							"children": [
								{
									"eventType": "comment",
									"text": "Clear the time information array after it being used, so the player doesn't start to \"teleport\" around the level in a few situations."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-size",
											"objectClass": "TimeInformation",
											"sid": 396533783534502,
											"parameters": {
												"axis": "x",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 998354997141777,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 123145860434622,
													"parameters": {
														"name": "\"Clear\"",
														"start-index": "0",
														"end-index": "TimeInformation.Width"
													}
												}
											],
											"actions": [
												{
													"id": "pop",
													"objectClass": "TimeInformation",
													"sid": 312749297321895,
													"parameters": {
														"where": "front",
														"axis": "x"
													}
												}
											],
											"sid": 618406253619160
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the game is being rewinded, start to load information about the player position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 481894319478496,
							"parameters": {
								"variable": "IsRewinding"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "GameManager",
							"sid": 756570969223909,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"LoadInformation\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 299181624465285,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "TimeBetweenEachStep",
								"type": "once",
								"tag": "\"LoadInformation\""
							}
						}
					],
					"sid": 153803921134691
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 198113595808812,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"LoadInformation\""
							}
						}
					],
					"actions": [],
					"sid": 699616413173842,
					"children": [
						{
							"eventType": "comment",
							"text": "While there's information left in the time information array, keep loading and emptying it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-size",
									"objectClass": "TimeInformation",
									"sid": 606061638357188,
									"parameters": {
										"axis": "x",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Tween the player position."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "PlayerCollision",
									"sid": 825033860929914,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Position\"",
										"property": "position",
										"end-x": "float(tokenat(TimeInformation.At(0) , 0, \"|\"))",
										"end-y": "float(tokenat(TimeInformation.At(0) , 1, \"|\"))",
										"time": "TimeBetweenEachStep",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Update the player animation."
								},
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 621926515595959,
									"parameters": {
										"animation": "tokenat(TimeInformation.At(0) , 2, \"|\")",
										"from": "beginning"
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerGraphics",
									"sid": 466608730765024,
									"parameters": {
										"width": "float(tokenat(TimeInformation.At(0) , 3, \"|\"))"
									}
								},
								{
									"type": "comment",
									"text": "Leave a matching shadow behind the player."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 959657836962670,
									"parameters": {
										"object": "PlayerGraphicsShadow",
										"layer": "\"World\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicsShadow",
									"sid": 358626116368138,
									"parameters": {
										"animation": "PlayerGraphics.AnimationName",
										"from": "beginning"
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerGraphicsShadow",
									"sid": 346300385226036,
									"parameters": {
										"width": "PlayerGraphics.Width"
									}
								},
								{
									"id": "move-to-object",
									"objectClass": "PlayerGraphicsShadow",
									"sid": 640045857857872,
									"parameters": {
										"where": "behind",
										"object": "PlayerGraphics"
									}
								},
								{
									"type": "comment",
									"text": "Delete the last entry."
								},
								{
									"id": "pop",
									"objectClass": "TimeInformation",
									"sid": 302050040809385,
									"parameters": {
										"where": "front",
										"axis": "x"
									}
								}
							],
							"sid": 554757694882941
						},
						{
							"eventType": "comment",
							"text": "disable"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-size",
									"objectClass": "TimeInformation",
									"sid": 772566205764351,
									"parameters": {
										"axis": "x",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "disable rewinding"
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 851342939114119,
									"parameters": {
										"variable": "IsRewinding",
										"value": "false"
									}
								},
								{
									"id": "stop-timer",
									"objectClass": "GameManager",
									"sid": 829982562434274,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"LoadInformation\""
									}
								},
								{
									"type": "comment",
									"text": "setup"
								},
								{
									"id": "set-enabled",
									"objectClass": "PlayerCollision",
									"sid": 890748619353145,
									"behaviorType": "Platform",
									"parameters": {
										"state": "enabled"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 275359361855531,
									"parameters": {
										"group-name": "\"PlayerAnimations\"",
										"state": "activated"
									}
								}
							],
							"sid": 916920330374614
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the game is not being rewinded, start to store information about the player position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 688389215609643,
							"parameters": {
								"variable": "IsRewinding"
							},
							"isInverted": true
						},
						{
							"id": "is-timer-running",
							"objectClass": "GameManager",
							"sid": 965670940998138,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"StoreInformation\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 951679285402041,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "TimeBetweenEachStep",
								"type": "once",
								"tag": "\"StoreInformation\""
							}
						}
					],
					"sid": 135047942838178
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 392608403136026,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"StoreInformation\""
							}
						}
					],
					"actions": [],
					"sid": 623417672757188,
					"children": [
						{
							"eventType": "comment",
							"text": "Remove older entries if the array exceeds the size limit."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-size",
									"objectClass": "TimeInformation",
									"sid": 878144606837999,
									"parameters": {
										"axis": "x",
										"comparison": 5,
										"value": "MAXNUMBEROFSTEPS"
									}
								}
							],
							"actions": [
								{
									"id": "pop",
									"objectClass": "TimeInformation",
									"sid": 933014831934533,
									"parameters": {
										"where": "back",
										"axis": "x"
									}
								}
							],
							"sid": 933489813485339
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "push",
									"objectClass": "TimeInformation",
									"sid": 531246996637002,
									"parameters": {
										"where": "front",
										"value": "str(PlayerCollision.X)&\"|\"&str(PlayerCollision.Y)&\"|\"&PlayerGraphics.AnimationName&\"|\"&str(PlayerGraphics.Width)",
										"axis": "x"
									}
								}
							],
							"sid": 126097731938149
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Constantly update the time bar and container size to match the amount of entries stored in the array."
				},
				{
					"eventType": "variable",
					"name": "MAXTIMEBARSIZE",
					"type": "number",
					"initialValue": "48",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 105085037179920
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 447936976544116
						}
					],
					"actions": [
						{
							"id": "set-width",
							"objectClass": "TimeBar",
							"sid": 875968269697429,
							"parameters": {
								"width": "lerp(Self.Width, MAXTIMEBARSIZE * (TimeInformation.Width / MAXNUMBEROFSTEPS), 0.1 * 60 * dt)"
							}
						},
						{
							"id": "set-width",
							"objectClass": "Container",
							"sid": 882088355320096,
							"parameters": {
								"width": "lerp(Self.Width, 10 + (MAXTIMEBARSIZE * (TimeInformation.Width / MAXNUMBEROFSTEPS)), 0.1 * 60 * dt)"
							}
						}
					],
					"sid": 410555344302712
				}
			],
			"sid": 602413722729176
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Spike",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game if the player collides with a spike ball, in other words it's game over."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 174515758362378,
							"parameters": {
								"object": "Spike"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 699463130295548
						}
					],
					"sid": 358273904108520
				}
			],
			"sid": 269062095261804
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Restart",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Force the game to restart for testing purposes only."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 886860410172297,
							"parameters": {
								"key": 82
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 549166494317235,
							"parameters": {
								"gamepad": "0",
								"button": "start-menu"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 259241878741840
						}
					],
					"sid": 261502125594386,
					"isOrBlock": true
				}
			],
			"sid": 876242795795519
		}
	],
	"sid": 703169307524782
}