{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Project settings."
		},
		{
			"eventType": "variable",
			"name": "TARGETFRAMERATE",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 762172364557089
		},
		{
			"eventType": "variable",
			"name": "DEFAULTLAYOUTSCALE",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 455783733766901
		},
		{
			"eventType": "comment",
			"text": "Player references."
		},
		{
			"eventType": "variable",
			"name": "InputLeft",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 978318750935198
		},
		{
			"eventType": "variable",
			"name": "InputRight",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 759928168194647
		},
		{
			"eventType": "variable",
			"name": "InputUp",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 491629948748393
		},
		{
			"eventType": "variable",
			"name": "InputDown",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 988659530652295
		},
		{
			"eventType": "variable",
			"name": "HorizontalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 704650960119333
		},
		{
			"eventType": "variable",
			"name": "VerticalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 873836784155865
		},
		{
			"eventType": "variable",
			"name": "AxisAngle",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 486607320101382
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset global variables to prevent traces from previous sessions."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 796671218886728
								}
							],
							"actions": [
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 927961188957356
								},
								{
									"id": "set-layout-scale",
									"objectClass": "System",
									"sid": 871918819024045,
									"parameters": {
										"scale": "DEFAULTLAYOUTSCALE"
									}
								}
							],
							"sid": 717612525165036
						},
						{
							"eventType": "comment",
							"text": "Setup the player by adding its graphics to the collider as a child."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphics",
									"sid": 594730415360274
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 841884366138315,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "PlayerCollision",
									"sid": 764565144345918,
									"parameters": {
										"child": "PlayerGraphics",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 960983322737064
						}
					],
					"sid": 784603836528212
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerControls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Receive and store input from the player to be used later in many situations."
						},
						{
							"eventType": "comment",
							"text": "Toggle input left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 940876619458367,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 485439395839532,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-left"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 798140548127237,
									"parameters": {
										"variable": "InputLeft",
										"value": "1"
									}
								}
							],
							"sid": 264402595788968,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 857228404289996
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 661153111744936,
									"parameters": {
										"variable": "InputLeft",
										"value": "0"
									}
								}
							],
							"sid": 286939735207559
						},
						{
							"eventType": "comment",
							"text": "Toggle input right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 419887578263887,
									"parameters": {
										"key": 39
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 910485628604972,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-right"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 736893529451941,
									"parameters": {
										"variable": "InputRight",
										"value": "1"
									}
								}
							],
							"sid": 600039708179932,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 517755708762973
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 655417879433674,
									"parameters": {
										"variable": "InputRight",
										"value": "0"
									}
								}
							],
							"sid": 740689455255456
						},
						{
							"eventType": "comment",
							"text": "Toggle input up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 616884787279611,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 618941853617328,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-up"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 996680032145102,
									"parameters": {
										"variable": "InputUp",
										"value": "1"
									}
								}
							],
							"sid": 633581533344193,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 353307726704705
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 942415071733078,
									"parameters": {
										"variable": "InputUp",
										"value": "0"
									}
								}
							],
							"sid": 573106451468937
						},
						{
							"eventType": "comment",
							"text": "Toggle input down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 675557998752242,
									"parameters": {
										"key": 40
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 681442548497853,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-down"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 721258906245844,
									"parameters": {
										"variable": "InputDown",
										"value": "1"
									}
								}
							],
							"sid": 508639076125027,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 195726474801099
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 471050106117999,
									"parameters": {
										"variable": "InputDown",
										"value": "0"
									}
								}
							],
							"sid": 373306371993938
						},
						{
							"eventType": "comment",
							"text": "Calculate both axis and looking angle based on the player input."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 653715903966159
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 674592570485943,
									"parameters": {
										"variable": "HorizontalAxis",
										"value": "InputRight - InputLeft"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 170521698251227,
									"parameters": {
										"variable": "VerticalAxis",
										"value": "InputDown - InputUp"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 952715159736944,
									"parameters": {
										"variable": "AxisAngle",
										"value": "round(angle(0, 0, HorizontalAxis, VerticalAxis))"
									}
								}
							],
							"sid": 837605888771891
						},
						{
							"eventType": "comment",
							"text": "Prevent other actions from being performed if the player is currently shooting a bullet, which needs to be done while standing still."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerCollision",
									"sid": 621608827709931,
									"parameters": {
										"instance-variable": "Shooting"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 604975552896849,
							"children": [
								{
									"eventType": "comment",
									"text": "Move the player horizontally based on its horizontal axis."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 627918673727712,
											"parameters": {
												"variable": "HorizontalAxis",
												"comparison": 0,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "PlayerCollision",
											"sid": 584632792050835,
											"behaviorType": "Platform",
											"parameters": {
												"control": "left"
											}
										}
									],
									"sid": 713843699979016
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 523426160037964,
											"parameters": {
												"variable": "HorizontalAxis",
												"comparison": 0,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "PlayerCollision",
											"sid": 630914408628128,
											"behaviorType": "Platform",
											"parameters": {
												"control": "right"
											}
										}
									],
									"sid": 195868210050187
								},
								{
									"eventType": "comment",
									"text": "Simulate player jump."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 833775171386968,
											"parameters": {
												"key": 90
											}
										},
										{
											"id": "is-button-down",
											"objectClass": "Gamepad",
											"sid": 755702736639122,
											"parameters": {
												"gamepad": "0",
												"button": "button-a"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "PlayerCollision",
											"sid": 786696803541517,
											"behaviorType": "Platform",
											"parameters": {
												"control": "jump"
											}
										}
									],
									"sid": 501752395200082,
									"isOrBlock": true
								}
							]
						}
					],
					"sid": 284160857497412
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Prevent other animations from being played if the player is currently shooting a bullet, which needs to be done while standing still."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerCollision",
									"sid": 335448881305434,
									"parameters": {
										"instance-variable": "Shooting"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 737111022596025,
							"children": [
								{
									"eventType": "comment",
									"text": "Mirror the player graphics based on its horizontal axis."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 764205138462606,
											"parameters": {
												"variable": "HorizontalAxis",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "PlayerGraphics",
											"sid": 632259059570768,
											"parameters": {
												"width": "Self.ImageWidth * HorizontalAxis"
											}
										}
									],
									"sid": 807949290898390
								},
								{
									"eventType": "comment",
									"text": "Change the animation states depending on what the player is currently doing."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-floor",
											"objectClass": "PlayerCollision",
											"sid": 944231734795389,
											"behaviorType": "Platform"
										}
									],
									"actions": [],
									"sid": 652212679040833,
									"children": [
										{
											"eventType": "comment",
											"text": "Walk animation."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-moving",
													"objectClass": "PlayerCollision",
													"sid": 736692993605118,
													"behaviorType": "Platform"
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PlayerGraphics",
													"sid": 267752332719729,
													"parameters": {
														"animation": "\"Walk\"",
														"from": "beginning"
													}
												}
											],
											"sid": 628483661231177
										},
										{
											"eventType": "comment",
											"text": "Idle animation."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 602942186932002
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PlayerGraphics",
													"sid": 209187448403767,
													"parameters": {
														"animation": "\"Idle\"",
														"from": "beginning"
													}
												}
											],
											"sid": 389043907688212
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Jump animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-jumping",
											"objectClass": "PlayerCollision",
											"sid": 645652705356036,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 285723790631026,
											"parameters": {
												"animation": "\"Jump\"",
												"from": "beginning"
											}
										}
									],
									"sid": 744867609737493
								},
								{
									"eventType": "comment",
									"text": "Fall animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-falling",
											"objectClass": "PlayerCollision",
											"sid": 564779365382693,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 816091821242878,
											"parameters": {
												"animation": "\"Fall\"",
												"from": "beginning"
											}
										}
									],
									"sid": 283305674361404
								}
							]
						}
					],
					"sid": 921833879566076
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerParticles",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Spawn different types of dust particles depending on the player actions."
						},
						{
							"eventType": "comment",
							"text": "Walking dust."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "PlayerCollision",
									"sid": 463773975665385,
									"behaviorType": "Platform"
								},
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 383060393704507,
									"behaviorType": "Platform"
								}
							],
							"actions": [],
							"sid": 521940510826457,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 254108591978941,
											"parameters": {
												"interval-seconds": "0.1"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "PlayerGraphics",
											"sid": 704684476058782,
											"parameters": {
												"object": "WalkingDust",
												"layer": "\"World\"",
												"image-point": "\"\"",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-width",
											"objectClass": "WalkingDust",
											"sid": 962949973136323,
											"parameters": {
												"width": "Self.Width * HorizontalAxis"
											}
										}
									],
									"sid": 893563852312136
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "WalkingDust",
									"sid": 247077637645545,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "WalkingDust",
									"sid": 433745691568687
								}
							],
							"sid": 261645271310484
						},
						{
							"eventType": "comment",
							"text": "Landing dust."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-landed",
									"objectClass": "PlayerCollision",
									"sid": 513471347308033,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 834442520282317,
									"parameters": {
										"object": "LandingDust",
										"layer": "\"World\"",
										"image-point": "\"\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 875075074408110
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "LandingDust",
									"sid": 397514806585316,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "LandingDust",
									"sid": 112490050948336
								}
							],
							"sid": 281393043506154
						},
						{
							"eventType": "comment",
							"text": "Jumping dust."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-jump",
									"objectClass": "PlayerCollision",
									"sid": 787812836955384,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 557738117087785,
									"parameters": {
										"object": "JumpingDust",
										"layer": "\"World\"",
										"image-point": "\"\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 214279439234230
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "JumpingDust",
									"sid": 340367547331967,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "JumpingDust",
									"sid": 599271824549731
								}
							],
							"sid": 366382635788223
						}
					],
					"sid": 858999474960428
				}
			],
			"sid": 438447210557978
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Teleport",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the trigger position to match to platform top mechanism."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "TeleportTrigger",
							"sid": 691960503749229
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "TeleportTrigger",
							"sid": 393911202696413,
							"parameters": {
								"object": "TeleportPlatformFront",
								"image-point-optional": "\"Trigger\""
							}
						}
					],
					"sid": 998371177364058
				},
				{
					"eventType": "comment",
					"text": "Setup the platform back by moving it to the bottom of the layer, so it's always behind the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "TeleportPlatformBack",
							"sid": 357073584171779
						}
					],
					"actions": [
						{
							"id": "move-to-bottom",
							"objectClass": "TeleportPlatformBack",
							"sid": 801553842697415
						}
					],
					"sid": 738829876531865
				},
				{
					"eventType": "comment",
					"text": "Destroy the player object and create a giant white flash."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 632223383188225,
							"parameters": {
								"object": "TeleportTrigger"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TeleportTrigger",
							"sid": 763642753172528,
							"parameters": {
								"instance-variable": "Charged"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "TeleportTrigger",
							"sid": 215487575064132,
							"parameters": {
								"instance-variable": "Charged",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "PlayerCollision",
							"sid": 738698704844020
						},
						{
							"id": "spawn-another-object",
							"objectClass": "TeleportPlatformFront",
							"sid": 861136958912584,
							"parameters": {
								"object": "Flash",
								"layer": "\"World\"",
								"image-point": "\"Flash\"",
								"create-hierarchy": false
							}
						}
					],
					"sid": 444812351366441
				},
				{
					"eventType": "comment",
					"text": "Setup the giant white flash and animate it to disappear after some time."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Flash",
							"sid": 475468299004326
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "Flash",
							"sid": 784168343081722,
							"parameters": {
								"width": "16",
								"height": "0"
							}
						},
						{
							"id": "cast-ray",
							"objectClass": "Flash",
							"sid": 948758805265042,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.X",
								"from-y": "Self.Y",
								"to-x": "Self.X",
								"to-y": "Self.Y - Self.LineOfSight.Range",
								"use-collision-cells": true
							}
						}
					],
					"sid": 984648318403167,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "ray-intersected",
									"objectClass": "Flash",
									"sid": 589851470152846,
									"behaviorType": "LineOfSight"
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Flash",
									"sid": 277325325206509,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"IncreaseHeight\"",
										"property": "offsetHeight",
										"end-value": "Self.LineOfSight.HitDistance",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 852766279747460
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Flash",
							"sid": 284551763125519,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"IncreaseHeight\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Flash",
							"sid": 305528213774589,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DecreaseWidth\"",
								"property": "offsetWidth",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 735183857432216
				}
			],
			"sid": 865963099006963
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ArmCannon",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Shoot a bullet from the player's arm cannon."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 711414680632031,
							"parameters": {
								"key": 88
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 170915429518968,
							"parameters": {
								"gamepad": "0",
								"button": "button-b"
							}
						}
					],
					"actions": [],
					"sid": 479881922214519,
					"children": [
						{
							"eventType": "comment",
							"text": "The bullet can only be shot if the player is on floor and is not already shooting a bullet."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 277076522757283,
									"behaviorType": "Platform"
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerCollision",
									"sid": 974596961953786,
									"parameters": {
										"instance-variable": "Shooting"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Update the shooting state."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "PlayerCollision",
									"sid": 820819188422998,
									"parameters": {
										"instance-variable": "Shooting",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Play the shooting animation."
								},
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphics",
									"sid": 362222562769880,
									"parameters": {
										"animation": "\"Shoot\"",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Spawn a muzzle flash in front of the arm cannon."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 603160785666689,
									"parameters": {
										"object": "MuzzleFlash",
										"layer": "\"World\"",
										"image-point": "\"ArmCannon\"",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Set the muzzle flash angle of motion based on the player's direction."
								},
								{
									"id": "set-width",
									"objectClass": "MuzzleFlash",
									"sid": 828669221959741,
									"parameters": {
										"width": "Self.Width * sign(PlayerGraphics.Width)"
									}
								},
								{
									"type": "comment",
									"text": "Spawn a bullet in front of the the arm cannon."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 483193785627121,
									"parameters": {
										"object": "Bullet",
										"layer": "\"World\"",
										"image-point": "\"ArmCannon\"",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Update the bullet last position to prevent any issues with the bullet trail."
								},
								{
									"callFunction": "UpdateBulletLastPosition",
									"sid": 478070737473408,
									"parameters": [
										"Bullet.UID"
									]
								},
								{
									"type": "comment",
									"text": "Set the bullet angle of motion based on the player's direction."
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "Bullet",
									"sid": 261505449793257,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "round(angle(0, 0, sign(PlayerGraphics.Width), 0))"
									}
								}
							],
							"sid": 322109417850335
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Once the shooting animation is done, update the shooting state one last time."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "PlayerGraphics",
							"sid": 462854439896427,
							"parameters": {
								"animation": "\"Shoot\""
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "PlayerCollision",
							"sid": 761048734438436,
							"parameters": {
								"instance-variable": "Shooting",
								"value": "false"
							}
						}
					],
					"sid": 532664247779415
				},
				{
					"eventType": "comment",
					"text": "Destroy the bullet whenever it hits a wall."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 235375324646355,
							"parameters": {
								"object": "Ground"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Bullet",
							"sid": 231512885754794
						}
					],
					"sid": 491766929766208
				},
				{
					"eventType": "comment",
					"text": "Spawn explosion particles when the bullet is destroyed."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Bullet",
							"sid": 599664952124474
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Bullet",
							"sid": 360333766675635,
							"parameters": {
								"object": "SmallExplosion",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "spawn-another-object",
							"objectClass": "Bullet",
							"sid": 167736169212426,
							"parameters": {
								"object": "BulletHit",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "BulletHit",
							"sid": 735544436830573,
							"parameters": {
								"angle": "lerp((Bullet.Bullet.AngleOfMotion + 180), 270, 0.5) + random(-10, 10)"
							}
						}
					],
					"sid": 699017243428517
				},
				{
					"eventType": "comment",
					"text": "Destroy the particles after their animation is done to prevent CPU overload."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "SmallExplosion",
							"sid": 887501665736933,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "SmallExplosion",
							"sid": 125668889349841
						}
					],
					"sid": 613881021494447
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "MuzzleFlash",
							"sid": 539957723466190,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "MuzzleFlash",
							"sid": 437494835113417
						}
					],
					"sid": 525326701842899
				},
				{
					"eventType": "comment",
					"text": "Create a trail effect behind the bullet."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 842800337689126,
							"parameters": {
								"first-value": "Bullet.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [],
					"sid": 805578800677227,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 255414711648239,
									"parameters": {
										"object": "Bullet"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Spawn trail effect."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Bullet",
									"sid": 498504906226468,
									"parameters": {
										"object": "BulletTrail",
										"layer": "\"World\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Move trail behind the bullet."
								},
								{
									"id": "move-to-object",
									"objectClass": "BulletTrail",
									"sid": 242519317231086,
									"parameters": {
										"where": "behind",
										"object": "Bullet"
									}
								},
								{
									"type": "comment",
									"text": "Adjust the trail angle to point towards the bullet."
								},
								{
									"id": "set-angle-toward-position",
									"objectClass": "BulletTrail",
									"sid": 974639257606938,
									"parameters": {
										"x": "Bullet.LastX",
										"y": "Bullet.LastY"
									}
								},
								{
									"type": "comment",
									"text": "Adjust the trail width to reach the bullet last position."
								},
								{
									"id": "set-width",
									"objectClass": "BulletTrail",
									"sid": 309846683278263,
									"parameters": {
										"width": "distance(Self.X, Self.Y, Bullet.LastX, Bullet.LastY) * 2"
									}
								},
								{
									"type": "comment",
									"text": "Animate the trail width."
								},
								{
									"id": "tween-one-property",
									"objectClass": "BulletTrail",
									"sid": 434054480491733,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DecreaseHeight\"",
										"property": "offsetHeight",
										"end-value": "0",
										"time": "0.25",
										"ease": "default",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Update the bullet last position."
								},
								{
									"callFunction": "UpdateBulletLastPosition",
									"sid": 764465382713028,
									"parameters": [
										"Bullet.UID"
									]
								}
							],
							"sid": 862591505906268
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update de bullet last position."
				},
				{
					"functionName": "UpdateBulletLastPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "BulletUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 186294154442677
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Bullet",
							"sid": 859364416316590,
							"parameters": {
								"unique-id": "BulletUID"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Bullet",
							"sid": 193434314406368,
							"parameters": {
								"instance-variable": "LastX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Bullet",
							"sid": 547024380623597,
							"parameters": {
								"instance-variable": "LastY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 619267692570739
				}
			],
			"sid": 943101734631819
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "CAMERASPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 491563133307748
				},
				{
					"eventType": "variable",
					"name": "CAMERAOFFSETX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 770507095067125
				},
				{
					"eventType": "variable",
					"name": "CAMERAOFFSETY",
					"type": "number",
					"initialValue": "-32",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 238811815189955
				},
				{
					"eventType": "comment",
					"text": "Interpolate the camera position to constantly track the player with smooth movement."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 537929353001116,
							"parameters": {
								"first-value": "PlayerCollision.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Camera",
							"sid": 973103372446141,
							"parameters": {
								"x": "lerp(Self.X, PlayerCollision.X + CAMERAOFFSETX, CameraSpeed * TARGETFRAMERATE * dt)",
								"y": "lerp(Self.Y, PlayerCollision.Y + CAMERAOFFSETY, CameraSpeed * TARGETFRAMERATE * dt)"
							}
						}
					],
					"sid": 435649057504302
				},
				{
					"eventType": "comment",
					"text": "Create a screen shake effect to add more intensity to specific actions."
				},
				{
					"functionName": "fun_shake_screen",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Intensity",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 284747500709328
						},
						{
							"name": "Duration",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 869993685765301
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 886668294322734,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\"",
								"start-value": "Intensity",
								"end-value": "0",
								"time": "Duration",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 480374386182628
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 679875644675674,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 970711442095747,
							"parameters": {
								"scale": "DEFAULTLAYOUTSCALE + random(-GameManager.Tween.Value(\"ScreenShake\"), GameManager.Tween.Value(\"ScreenShake\"))"
							}
						}
					],
					"sid": 374062129976910
				}
			],
			"sid": 552517355456284
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Hazards",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 174515758362378,
							"parameters": {
								"object": "Spike"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 699463130295548
						}
					],
					"sid": 358273904108520
				}
			],
			"sid": 269062095261804
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "DebugTools",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 886860410172297,
							"parameters": {
								"key": 82
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 549166494317235,
							"parameters": {
								"gamepad": "0",
								"button": "start-menu"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 259241878741840
						}
					],
					"sid": 261502125594386,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Close the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 191029648628512,
							"parameters": {
								"key": 27
							}
						}
					],
					"actions": [
						{
							"id": "close",
							"objectClass": "Browser",
							"sid": 885884145918904
						}
					],
					"sid": 409208253555805
				}
			],
			"sid": 876242795795519
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ScrollingBackground",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "HORIZONTALSPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 617022310168035
				},
				{
					"eventType": "variable",
					"name": "VERTICALSPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 859461312543425
				},
				{
					"eventType": "comment",
					"text": "Constantly scroll the background."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 440248802025647
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Background",
							"sid": 735634255956251,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + HORIZONTALSPEED * TARGETFRAMERATE * dt"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "Background",
							"sid": 809518361183198,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + VERTICALSPEED * TARGETFRAMERATE * dt"
							}
						}
					],
					"sid": 120680822599132
				}
			],
			"sid": 129190677110833
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Group1",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "How long it takes for the platform to move up after being shot."
				},
				{
					"eventType": "variable",
					"name": "TIMEDELAY",
					"type": "number",
					"initialValue": "0.5",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 497353007967080
				},
				{
					"eventType": "comment",
					"text": "How far the platform will move up after being shot."
				},
				{
					"eventType": "variable",
					"name": "DISTANCEPERHIT",
					"type": "number",
					"initialValue": "32",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 380998562170920
				},
				{
					"eventType": "comment",
					"text": "Setup the platform by storing its initial position inside two local variables and spawning both rail edges based on the platform position limits."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Platform",
							"sid": 431523222085955
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Platform",
							"sid": 309614453191303,
							"parameters": {
								"instance-variable": "PointAX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Platform",
							"sid": 637369680460640,
							"parameters": {
								"instance-variable": "PointAY",
								"value": "Self.Y"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 951394330589828,
							"parameters": {
								"object-to-create": "RailEdge",
								"layer": "\"World\"",
								"x": "Platform.PointAX",
								"y": "Platform.PointAY",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "RailEdge",
							"sid": 193922262256107,
							"parameters": {
								"x": "Platform.PointBX",
								"y": "Platform.PointBY"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 804645452254035,
							"parameters": {
								"object-to-create": "RailEdge",
								"layer": "\"World\"",
								"x": "Platform.PointBX",
								"y": "Platform.PointBY",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "RailEdge",
							"sid": 797156054006698,
							"parameters": {
								"x": "Platform.PointAX",
								"y": "Platform.PointAY"
							}
						}
					],
					"sid": 799591481076667
				},
				{
					"eventType": "comment",
					"text": "Setup the platform panel by adding it as a child of the platform."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "PlatformPanel",
							"sid": 783684424768899
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "PlatformPanel",
							"sid": 846268718888087,
							"parameters": {
								"object": "Platform",
								"image-point-optional": "0"
							}
						},
						{
							"id": "add-child",
							"objectClass": "Platform",
							"sid": 348600953426518,
							"parameters": {
								"child": "PlatformPanel",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-z-elevation": false,
								"destroy-with-parent": true
							}
						}
					],
					"sid": 529926805859110
				},
				{
					"eventType": "comment",
					"text": "Setup the rail by pointing it towards the platform Point B and adjusting its width to be equal to distance between the platform Point A and point B. Also moves it to the rails layer."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Rail",
							"sid": 998774826372745
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Rail",
							"sid": 419904214839534,
							"parameters": {
								"angle": "angle(Platform.PointAX, Platform.PointAY, Platform.PointBX, Platform.PointBY)"
							}
						},
						{
							"id": "set-width",
							"objectClass": "Rail",
							"sid": 452110534046723,
							"parameters": {
								"width": "distance(Platform.PointAX, Platform.PointAY, Platform.PointBX, Platform.PointBY)"
							}
						},
						{
							"id": "move-to-layer",
							"objectClass": "Rail",
							"sid": 567462522191523,
							"parameters": {
								"layer": "\"Rails\""
							}
						}
					],
					"sid": 974222152741823
				},
				{
					"eventType": "comment",
					"text": "Setup the sparkles by adjusting a few properties and adding it as child of the platform."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Sparkles",
							"sid": 718635311215806
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Move the sparkle to the platform position."
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "Sparkles",
							"sid": 847238942371495,
							"parameters": {
								"object": "Platform",
								"image-point-optional": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Point the sparkles towards the platform destination (Point B)."
						},
						{
							"id": "set-angle",
							"objectClass": "Sparkles",
							"sid": 379371484549117,
							"parameters": {
								"angle": "angle(Platform.X, Platform.Y, Platform.PointBX, Platform.PointBY)"
							}
						},
						{
							"type": "comment",
							"text": "Move the sparkles to a background layer."
						},
						{
							"id": "move-to-layer",
							"objectClass": "Sparkles",
							"sid": 524044447731887,
							"parameters": {
								"layer": "\"Rails\""
							}
						},
						{
							"type": "comment",
							"text": "Add it as a child of the platform, welding them together."
						},
						{
							"id": "add-child",
							"objectClass": "Platform",
							"sid": 756168726186796,
							"parameters": {
								"child": "Sparkles",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-z-elevation": false,
								"destroy-with-parent": true
							}
						}
					],
					"sid": 231485125579100
				},
				{
					"eventType": "comment",
					"text": "Update the sparkles rate based on the platform progress while moving down. There will be more particles in the beginning and less particles in the end."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Platform",
							"sid": 984430336724215,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveDown\""
							}
						}
					],
					"actions": [
						{
							"id": "set-rate",
							"objectClass": "Sparkles",
							"sid": 278762040546757,
							"parameters": {
								"rate": "64 * (1 - Platform.Tween.Progress(\"MoveDown\"))"
							}
						}
					],
					"sid": 882543979356298
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 836028075479883
						},
						{
							"id": "is-playing",
							"objectClass": "Platform",
							"sid": 988815449074835,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveDown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-rate",
							"objectClass": "Sparkles",
							"sid": 444760655437426,
							"parameters": {
								"rate": "0"
							}
						}
					],
					"sid": 329632582908274
				},
				{
					"eventType": "comment",
					"text": "Activate the platform if the bullet collides with its panel."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 527977733533561,
							"parameters": {
								"object": "PlatformPanel"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy the bullet."
						},
						{
							"id": "destroy",
							"objectClass": "Bullet",
							"sid": 526918438656343
						},
						{
							"type": "comment",
							"text": "Stop all previous tweens to prevent overlapping issues."
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Platform",
							"sid": 840721876887613,
							"behaviorType": "Tween"
						},
						{
							"type": "comment",
							"text": "Move the platform towards its Point B using the distance per hit and time delay variables as a reference."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Platform",
							"sid": 714319316368669,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveUp\"",
								"property": "position",
								"end-x": "Self.X + cos(angle(Self.X, Self.Y, Self.PointBX, Self.PointBY)) * clamp(distance(Self.X, Self.Y, Self.PointBX, Self.PointBY), 0, DISTANCEPERHIT)",
								"end-y": "Self.Y + sin(angle(Self.X, Self.Y, Self.PointBX, Self.PointBY)) * clamp(distance(Self.X, Self.Y, Self.PointBX, Self.PointBY), 0, DISTANCEPERHIT)",
								"time": "TIMEDELAY",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Set the panel animation to on, which will make it blink as it's energized."
						},
						{
							"id": "set-animation",
							"objectClass": "PlatformPanel",
							"sid": 567359471715197,
							"parameters": {
								"animation": "\"On\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Flash the panel in white."
						},
						{
							"id": "tween-value",
							"objectClass": "PlatformPanel",
							"sid": 809373521612881,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\"",
								"start-value": "200",
								"end-value": "100",
								"time": "0.25",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 738893597740359
				},
				{
					"eventType": "comment",
					"text": "Offset the rail image to match the platform movement, giving it a feeling of motion."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Platform",
							"sid": 639193366966030,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveUp\""
							}
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Rail",
							"sid": 770659379402844,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + 2 * (1 -Platform.Tween.Progress(\"MoveUp\")) * 60 * dt"
							}
						}
					],
					"sid": 468074515014358,
					"children": [
						{
							"eventType": "comment",
							"text": "While the platform is moving up, spawn a bunch of sparkles along the rail in the background."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 783903117869085,
									"parameters": {
										"interval-seconds": "0.01"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Randomize the interpolation value."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Platform",
									"sid": 604798189289725,
									"parameters": {
										"instance-variable": "Interpolation",
										"value": "random(0, 1)"
									}
								},
								{
									"type": "comment",
									"text": "Spawn new sparkles."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 686064370685480,
									"parameters": {
										"object-to-create": "RailSparkles",
										"layer": "\"Rails\"",
										"x": "lerp(Platform.PointAX, Platform.PointBX, Platform.Interpolation)",
										"y": "lerp(Platform.PointAY, Platform.PointBY, Platform.Interpolation)",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Change the sparkles position to be somewhere along the rail, using the interpolation variable as a reference."
								},
								{
									"id": "set-position",
									"objectClass": "RailSparkles",
									"sid": 573126213515948,
									"parameters": {
										"x": "Self.X + cos(random(0, 360)) * random(0, 2)",
										"y": "Self.Y + sin(random(0, 360)) * random(0, 2)"
									}
								},
								{
									"type": "comment",
									"text": "Shrink the sparkles until they're gone."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "RailSparkles",
									"sid": 389526339557142,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SelfDestroy\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "0.25",
										"ease": "default",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Randomize the sparkles angle and rotate them towards a random direction."
								},
								{
									"id": "set-angle",
									"objectClass": "RailSparkles",
									"sid": 586014575714064,
									"parameters": {
										"angle": "random(0, 360)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "RailSparkles",
									"sid": 957330041229121,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Rotate\"",
										"property": "offsetAngle",
										"end-value": "Self.Angle + random(-60, 60)",
										"time": "0.25",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 265855993632907
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update the panel brightness."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "PlatformPanel",
							"sid": 418497168670770,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Flash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "PlatformPanel",
							"sid": 834833741861477,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Self.Tween.Value(\"Flash\")"
							}
						}
					],
					"sid": 260415312465932
				},
				{
					"eventType": "comment",
					"text": "Once the platform stops moving up, slowly resets its position to the Point A."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Platform",
							"sid": 411220990250311,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveUp\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Stop all previous tweens to prevent overlapping issues."
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Platform",
							"sid": 534170303790542,
							"behaviorType": "Tween"
						},
						{
							"type": "comment",
							"text": "Move the platform back to its initial position (Point A)."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Platform",
							"sid": 399606454145463,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveDown\"",
								"property": "position",
								"end-x": "Self.PointAX",
								"end-y": "Self.PointAY",
								"time": "distance(Self.X, Self.Y, Self.PointAX, Self.PointAY) / 32",
								"ease": "easeoutbounce",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Set the panel animation to off."
						},
						{
							"id": "set-animation",
							"objectClass": "PlatformPanel",
							"sid": 901869763280260,
							"parameters": {
								"animation": "\"Off\"",
								"from": "beginning"
							}
						}
					],
					"sid": 704154795966757
				}
			],
			"sid": 162560846744878
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ZOrder",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Update the Z order of a few object a single frame after the game is started, preventing issues with objects that are initialized in that same frame."
				},
				{
					"eventType": "variable",
					"name": "CurrentTick",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 100411862692067
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 756929752612330
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 463744656020512,
							"parameters": {
								"variable": "CurrentTick",
								"value": "tickcount"
							}
						}
					],
					"sid": 579984070161832
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 916828033097805,
							"parameters": {
								"first-value": "tickcount",
								"comparison": 0,
								"second-value": "CurrentTick + 1"
							}
						}
					],
					"actions": [
						{
							"id": "move-to-bottom",
							"objectClass": "TeleportPlatformFront",
							"sid": 195841037960166
						},
						{
							"id": "move-to-bottom",
							"objectClass": "PlayerGraphics",
							"sid": 248648417740909
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Spike",
							"sid": 608152778216205
						},
						{
							"id": "move-to-bottom",
							"objectClass": "PlatformPanel",
							"sid": 881835886525111
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Platform",
							"sid": 644581979373099
						},
						{
							"id": "move-to-bottom",
							"objectClass": "RailEdge",
							"sid": 360803634606104
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Rail",
							"sid": 574619920993085
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Ground",
							"sid": 650959716215918
						},
						{
							"id": "move-to-bottom",
							"objectClass": "TeleportPlatformBack",
							"sid": 960870064612931
						}
					],
					"sid": 395853790051432
				}
			],
			"sid": 924283331840910
		}
	],
	"sid": 703169307524782
}