{
	"name": "Gameplay",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "variable",
			"name": "WAVES_PER_LEVEL",
			"type": "number",
			"initialValue": "7",
			"comment": "Number of waves per level",
			"isStatic": false,
			"isConstant": true,
			"sid": 450983611107835
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Move left."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 766954577762931,
							"parameters": {
								"key": 37
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 799807788886851,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 199261277852056,
							"parameters": {
								"instance-variable": "angularPos",
								"value": "Self.angularPos + Self.speed * dt"
							}
						}
					],
					"sid": 348307506342540
				},
				{
					"eventType": "comment",
					"text": "Move right."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 273575342380977,
							"parameters": {
								"key": 39
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 533975802868610,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 183906749679638,
							"parameters": {
								"instance-variable": "angularPos",
								"value": "Self.angularPos - Self.speed * dt"
							}
						}
					],
					"sid": 601423321367805
				},
				{
					"eventType": "comment",
					"text": "Shoot."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 128924941441688,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 331825206765361,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"cooldown\""
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 165611409870615,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Start cooldown."
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 144513943993227,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Self.bulletCD",
								"type": "once",
								"tag": "\"cooldown\""
							}
						},
						{
							"type": "comment",
							"text": "Animate Player."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Player",
							"sid": 379881829266857,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PlayerShoot\"",
								"property": "offsetWidth",
								"end-value": "Self.ImageWidth * 0.75",
								"time": "0.05",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Create the bullet and muzzle flash."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 545451784934881,
							"parameters": {
								"object-to-create": "PlayerBullet",
								"layer": "\"Game\"",
								"x": "Player.ImagePointX(\"FireSpot\")",
								"y": "Player.ImagePointY(\"FireSpot\")",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 729271467755829,
							"parameters": {
								"object-to-create": "MuzzleFlash",
								"layer": "\"Game\"",
								"x": "Player.ImagePointX(\"FireSpot\")",
								"y": "Player.ImagePointY(\"FireSpot\")",
								"create-hierarchy": false,
								"template-name": "\"Player\""
							}
						},
						{
							"type": "comment",
							"text": "Set angles."
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerBullet",
							"sid": 961265519907262,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "PlayerBullet",
							"sid": 547718070487974,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Player.Angle"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "MuzzleFlash",
							"sid": 945523337334039,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"type": "comment",
							"text": "Destroy muzzle flash."
						},
						{
							"id": "set-scale",
							"objectClass": "MuzzleFlash",
							"sid": 895739405011966,
							"parameters": {
								"scale": "0.5"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "MuzzleFlash",
							"sid": 888259878464503,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Expand\"",
								"property": "scale",
								"end-x": "0.6",
								"end-y": "0.6",
								"time": "0.1",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "MuzzleFlash",
							"sid": 419619961663905,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.1",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 759709831520519
				},
				{
					"eventType": "comment",
					"text": "Release energy blast."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 466568883359723,
							"parameters": {
								"key": 17
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 725178876067533,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"cooldown\""
							},
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 131751799914625,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Start cooldown."
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 979336037443542,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "Self.blastCD",
								"type": "once",
								"tag": "\"cooldown\""
							}
						},
						{
							"type": "comment",
							"text": "Create the blast."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 730695696358519,
							"parameters": {
								"object-to-create": "PlayerBlast",
								"layer": "\"Game\"",
								"x": "Player.ImagePointX(\"FireSpot\")",
								"y": "Player.ImagePointY(\"FireSpot\")",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Animate blast creation."
						},
						{
							"id": "set-angle",
							"objectClass": "PlayerBlast",
							"sid": 685444054458622,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "PlayerBlast",
							"sid": 790722287456952,
							"parameters": {
								"scale": "0.8"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "PlayerBlast",
							"sid": 736979967065366,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"IncreaseBlast\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.15",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "PlayerBlast",
							"sid": 451563564513333,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeBlast\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "flash",
							"objectClass": "PlayerBlast",
							"sid": 544403204299862,
							"behaviorType": "Flash",
							"parameters": {
								"on-time": "1 / 60 * 2",
								"off-time": "1 / 60 * 2",
								"duration": "Infinity"
							}
						}
					],
					"sid": 951726901065660
				},
				{
					"eventType": "comment",
					"text": "The player is damaged by overlapping the objects below."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 234228924595999,
							"parameters": {
								"object": "Turret"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 289189875591654,
							"parameters": {
								"object": "EnemyBeam"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 590892066831670,
							"parameters": {
								"object": "EnemyBullet"
							}
						}
					],
					"actions": [
						{
							"customAction": "Hit",
							"objectClass": "Player",
							"sid": 264527480354607
						}
					],
					"sid": 821572281894034,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Player bullets are destroyed when they hit a wall."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerBullet",
							"sid": 244147068088447,
							"parameters": {
								"object": "Collider"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "PlayerBullet",
							"sid": 745945581725556
						}
					],
					"sid": 661496505018243
				},
				{
					"eventType": "comment",
					"text": "Spawn bullet hit animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "PlayerBullet",
							"sid": 610025030945584
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 111518092654057,
							"parameters": {
								"object-to-create": "BulletHit",
								"layer": "\"Game\"",
								"x": "PlayerBullet.X",
								"y": "PlayerBullet.Y",
								"create-hierarchy": false,
								"template-name": "\"Player\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "BulletHit",
							"sid": 626465975082928,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"type": "comment",
							"text": "Destroy bullet hit effect."
						},
						{
							"id": "set-scale",
							"objectClass": "BulletHit",
							"sid": 700224742779309,
							"parameters": {
								"scale": "0.25"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "BulletHit",
							"sid": 184582393228350,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Expand\"",
								"property": "scale",
								"end-x": "0.5",
								"end-y": "0.5",
								"time": "0.15",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "BulletHit",
							"sid": 381574989269155,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.15",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 180357175019653
				},
				{
					"eventType": "comment",
					"text": "Player was damaged by an enemy."
				},
				{
					"aceType": "action",
					"aceName": "Hit",
					"objectClass": "Player",
					"functionDescription": "Player was damaged by an enemy",
					"functionCategory": "Player",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 804486596762289,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						},
						{
							"id": "is-flashing",
							"objectClass": "Player",
							"sid": 231729744257157,
							"behaviorType": "Flash",
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Reduce HP and update the status text."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 983653650839906,
							"parameters": {
								"instance-variable": "HP",
								"value": "max(Self.HP - 1, 0)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "TextHealth",
							"sid": 481118301522809,
							"parameters": {
								"text": "\"[outline=#000000]\" & Player.HP & \"[/outline]\""
							}
						},
						{
							"type": "comment",
							"text": "Flash the damage overlay for a short amount of time."
						},
						{
							"id": "set-opacity",
							"objectClass": "DamageOverlay",
							"sid": 912033722937147,
							"parameters": {
								"opacity": "50"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "DamageOverlay",
							"sid": 772946980571131,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.25",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 313432216201922,
					"children": [
						{
							"eventType": "comment",
							"text": "If no HP is left, restart the level."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Player",
									"sid": 650136916077483,
									"parameters": {
										"instance-variable": "HP",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Player",
									"sid": 183623419500337,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HidePlayer\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 211258343392649,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 165207044974252
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 913434107036736
								},
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 931384306096920,
									"parameters": {
										"reset-static": true
									}
								}
							],
							"sid": 598820174010480
						},
						{
							"eventType": "comment",
							"text": "Otherwise, flash the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 329859281511324
								}
							],
							"actions": [
								{
									"id": "flash",
									"objectClass": "Player",
									"sid": 478484956166791,
									"behaviorType": "Flash",
									"parameters": {
										"on-time": "0.1",
										"off-time": "0.1",
										"duration": "2.0"
									}
								}
							],
							"sid": 185976568743793
						}
					]
				}
			],
			"sid": 746022480242787
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Scenario",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Refresh Z Order."
				},
				{
					"functionName": "RefreshZOrder",
					"functionDescription": "Refresh Z Order",
					"functionCategory": "Tools",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "move-to-bottom",
							"objectClass": "Portal",
							"sid": 749940447564761
						},
						{
							"id": "move-to-bottom",
							"objectClass": "GeometryIn",
							"sid": 537275960341296
						},
						{
							"id": "move-to-bottom",
							"objectClass": "CogTop",
							"sid": 280941472263536
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Tubes",
							"sid": 835504900642190
						},
						{
							"id": "move-to-bottom",
							"objectClass": "CogBottom",
							"sid": 974434874686095
						},
						{
							"id": "move-to-top",
							"objectClass": "Player",
							"sid": 781509580317506
						},
						{
							"id": "move-to-top",
							"objectClass": "MuzzleFlash",
							"sid": 608374698728599
						},
						{
							"id": "move-to-top",
							"objectClass": "GeometryOut",
							"sid": 549136750947050
						},
						{
							"id": "move-to-top",
							"objectClass": "EnemyBlast",
							"sid": 258664271356590
						},
						{
							"id": "move-to-top",
							"objectClass": "PlayerBlast",
							"sid": 970669348397857
						},
						{
							"id": "move-to-top",
							"objectClass": "EnemyBullet",
							"sid": 763225375339393
						},
						{
							"id": "move-to-top",
							"objectClass": "EnemyBeam",
							"sid": 821641575943531
						},
						{
							"id": "move-to-top",
							"objectClass": "PlayerBullet",
							"sid": 720534030441326
						},
						{
							"id": "move-to-top",
							"objectClass": "Glow",
							"sid": 818566866195241
						}
					],
					"sid": 469685814958776
				},
				{
					"eventType": "comment",
					"text": "Cast ray to identify player's position and adjust layer angle."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 980294472879500
						}
					],
					"actions": [
						{
							"id": "cast-ray",
							"objectClass": "Center",
							"sid": 760827070013874,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.X",
								"from-y": "Self.Y",
								"to-x": "Self.X + cos(Player.angularPos) * 2048",
								"to-y": "Self.Y + sin(Player.angularPos) * 2048",
								"use-collision-cells": true
							}
						},
						{
							"id": "set-layer-angle",
							"objectClass": "System",
							"sid": 407030825066143,
							"parameters": {
								"layer": "\"Game\"",
								"angle": "anglelerp(LayerAngle(\"Game\"), (Player.Angle + 90) % 360, 10 * dt)"
							}
						}
					],
					"sid": 597423868107726
				},
				{
					"eventType": "comment",
					"text": "Move player to new position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "ray-intersected",
							"objectClass": "Center",
							"sid": 327704079539053,
							"behaviorType": "LineOfSight"
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Player",
							"sid": 419763611089403,
							"parameters": {
								"x": "Center.LineOfSight.HitX",
								"y": "Center.LineOfSight.HitY"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "Player",
							"sid": 827931664613251,
							"parameters": {
								"angle": "Center.LineOfSight.NormalAngle"
							}
						}
					],
					"sid": 104984529979082
				}
			],
			"sid": 823861106588141
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Enemies",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "enemyIdx",
					"type": "number",
					"initialValue": "0",
					"comment": "Enemy index",
					"isStatic": true,
					"isConstant": false,
					"sid": 380304014751600
				},
				{
					"eventType": "comment",
					"text": "Start enemy spawns."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 782659435825995
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Load waves."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 608553648395177,
							"parameters": {
								"tag": "\"Waves\"",
								"file": "Waves.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 436913749021760
						},
						{
							"id": "load",
							"objectClass": "Array",
							"sid": 122160870655194,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"id": "set-text",
							"objectClass": "TextWave",
							"sid": 996525248000553,
							"parameters": {
								"text": "\"[outline=#000000]\" & (Logic.wave + 1 - Logic.level * WAVES_PER_LEVEL) & \"/\" & WAVES_PER_LEVEL & \"[/outline]\""
							}
						},
						{
							"type": "comment",
							"text": "Hide fader."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 893866584792869,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Hide damage overlay."
						},
						{
							"id": "set-opacity",
							"objectClass": "DamageOverlay",
							"sid": 318781891831947,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Animate the portal creation."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 627240164904448
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 252013785134238,
							"parameters": {
								"object-to-create": "Portal",
								"layer": "\"Game\"",
								"x": "Center.X",
								"y": "Center.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"callFunction": "RefreshZOrder",
							"sid": 152131133388472
						},
						{
							"id": "set-scale",
							"objectClass": "Portal",
							"sid": 573405073301749,
							"parameters": {
								"scale": "0.01"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "Portal",
							"sid": 261876384006211,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Portal",
							"sid": 560330797865856,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PortalSpawn\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.25",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Portal",
							"sid": 701124483125354,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PortalSpawnOp\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Wait for fade."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 583704124001501
						},
						{
							"id": "start-timer",
							"objectClass": "Logic",
							"sid": 269934990542737,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "regular",
								"tag": "\"CallNextWave\""
							}
						}
					],
					"sid": 963925460661902
				},
				{
					"eventType": "comment",
					"text": "Every second, check if there is no wave in progress. If there isn't one, start the next."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "Logic",
							"sid": 654345484501458,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"CallNextWave\""
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 892282437673673,
							"parameters": {
								"value": "Drone.Count = 0 & Turret.Count = 0 & TurretProbe.Count = 0 & EnemyBeam.Count = 0 & EnemyBullet.Count = 0"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Fader",
							"sid": 524786646368062,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "Player",
							"sid": 417970427014598,
							"parameters": {
								"instance-variable": "HP",
								"comparison": 4,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "Logic",
							"sid": 719641181032150,
							"parameters": {
								"instance-variable": "wave",
								"value": "1"
							}
						}
					],
					"sid": 304296960824310,
					"children": [
						{
							"eventType": "comment",
							"text": "Every time the player reaches the (WAVES_PER_LEVEL)th wave, go to the next level."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 411576933347812,
									"parameters": {
										"value": "Logic.wave = (Logic.level + 1) * WAVES_PER_LEVEL"
									}
								}
							],
							"actions": [
								{
									"id": "set-collisions-enabled",
									"objectClass": "Player",
									"sid": 906920443011110,
									"parameters": {
										"collisions": "disabled"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 725455911449174,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 857431299047717
								},
								{
									"id": "go-to-nextprevious-layout",
									"objectClass": "System",
									"sid": 607204112827658,
									"parameters": {
										"which": "next"
									}
								},
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 626790056538101,
									"parameters": {
										"reset-static": true
									}
								}
							],
							"sid": 217419388945942
						},
						{
							"eventType": "comment",
							"text": "Start next wave."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 702453408433091
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "TextWave",
									"sid": 568861459647416,
									"parameters": {
										"text": "\"[outline=#000000]\" & (Logic.wave + 1 - Logic.level * WAVES_PER_LEVEL) & \"/\" & WAVES_PER_LEVEL & \"[/outline]\""
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 700588429297860,
									"parameters": {
										"variable": "enemyIdx",
										"value": "-1"
									}
								}
							],
							"sid": 382616121281726,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 733650752085813
										},
										{
											"id": "compare-at-xy",
											"objectClass": "Array",
											"sid": 580853316623949,
											"parameters": {
												"x": "loopindex",
												"y": "Logic.wave",
												"comparison": 0,
												"value": "\"\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 586237325987502,
											"parameters": {
												"seconds": "loopindex"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 864361351336553,
											"parameters": {
												"variable": "enemyIdx",
												"value": "1"
											}
										}
									],
									"sid": 563253796556841,
									"children": [
										{
											"eventType": "comment",
											"text": "Drone."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 873793328151939,
													"parameters": {
														"value": "left(Array.At(enemyIdx, Logic.wave), 1) = \"D\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "createDrone",
													"sid": 373302471833405,
													"parameters": [
														"int(right(Array.At(enemyIdx, Logic.wave), 1))"
													]
												}
											],
											"sid": 311720640737221
										},
										{
											"eventType": "comment",
											"text": "Turret."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 687456484894238
												}
											],
											"actions": [
												{
													"callFunction": "createTurret",
													"sid": 463027196425089,
													"parameters": [
														"int(right(Array.At(enemyIdx, Logic.wave), 1))"
													]
												}
											],
											"sid": 115119454809765
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Enemy bullets are destroyed when they hit a wall."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "EnemyBullet",
							"sid": 177561874888340,
							"parameters": {
								"object": "Collider"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "EnemyBullet",
							"sid": 669455364464170
						}
					],
					"sid": 172674748884188
				},
				{
					"eventType": "comment",
					"text": "Spawn bullet hit animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "EnemyBullet",
							"sid": 323602143730964
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 345980996484037,
							"parameters": {
								"object-to-create": "BulletHit",
								"layer": "\"Game\"",
								"x": "EnemyBullet.X",
								"y": "EnemyBullet.Y",
								"create-hierarchy": false,
								"template-name": "EnemyBullet.TemplateName"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "BulletHit",
							"sid": 674074386844457,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"type": "comment",
							"text": "Destroy bullet hit effect."
						},
						{
							"id": "set-scale",
							"objectClass": "BulletHit",
							"sid": 182168569728114,
							"parameters": {
								"scale": "0.25"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "BulletHit",
							"sid": 339549815801939,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Expand\"",
								"property": "scale",
								"end-x": "0.5",
								"end-y": "0.5",
								"time": "0.15",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "BulletHit",
							"sid": 759699598350323,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.15",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 558164499593486
				},
				{
					"eventType": "comment",
					"text": "Enemy beams are destroyed when they hit a wall."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "EnemyBeam",
							"sid": 747131624393708,
							"parameters": {
								"object": "Collider"
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "EnemyBeam",
							"sid": 594672770418554,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DestroyAttack\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 193161659998867
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Turret",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "turretRndPos",
							"type": "number",
							"initialValue": "0",
							"comment": "Turret position randomizer",
							"isStatic": false,
							"isConstant": false,
							"sid": 998301948290856
						},
						{
							"eventType": "comment",
							"text": "Process turret hit."
						},
						{
							"aceType": "action",
							"aceName": "Turret Hit",
							"objectClass": "Turret",
							"functionDescription": "Process turret hit",
							"functionCategory": "Turret",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "damage",
									"type": "number",
									"initialValue": "0",
									"comment": "Damage delt by the player",
									"sid": 127273421518378
								}
							],
							"eventType": "custom-ace-block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Turret",
									"sid": 744598079126716,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TurretDestroy\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Subtract HP."
								},
								{
									"id": "subtract-from-instvar",
									"objectClass": "Turret",
									"sid": 675246279253404,
									"parameters": {
										"instance-variable": "HP",
										"value": "damage"
									}
								}
							],
							"sid": 326435533269740,
							"children": [
								{
									"eventType": "comment",
									"text": "Destroy the turret."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Turret",
											"sid": 755583298355366,
											"parameters": {
												"instance-variable": "HP",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "Turret",
											"sid": 611339698603009,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TurretDestroy\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Create turret blast."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 945979472310713,
											"parameters": {
												"object-to-create": "EnemyBlast",
												"layer": "\"Game\"",
												"x": "Turret.ImagePointX(\"Center\")",
												"y": "Turret.ImagePointY(\"Center\")",
												"create-hierarchy": false,
												"template-name": "Turret.TemplateName & \"_Destroy\""
											}
										},
										{
											"type": "comment",
											"text": "Randomize properties."
										},
										{
											"id": "set-angle",
											"objectClass": "EnemyBlast",
											"sid": 562882784364403,
											"parameters": {
												"angle": "random(0, 360)"
											}
										},
										{
											"id": "set-scale",
											"objectClass": "EnemyBlast",
											"sid": 556679678112598,
											"parameters": {
												"scale": "0.9"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "EnemyBlast",
											"sid": 813676260977649,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Expand\"",
												"property": "scale",
												"end-x": "1",
												"end-y": "1",
												"time": "0.25",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "EnemyBlast",
											"sid": 638524603555020,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"FadeOut\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.25",
												"ease": "easeinsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 486675534127642
								},
								{
									"eventType": "comment",
									"text": "Flash the turret."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 758850860929988
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "Turret",
											"sid": 125236189348103,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TurretFlash\"",
												"start-value": "100",
												"end-value": "130",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 829182050976274
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Create turret probe and launch it against the wall."
						},
						{
							"functionName": "createTurret",
							"functionDescription": "Create turret probe and launch it against the wall",
							"functionCategory": "Enemies",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "type",
									"type": "number",
									"initialValue": "0",
									"comment": "Turret type",
									"sid": 796179766874486
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 223184986832349,
									"parameters": {
										"object": "Collider",
										"expression": "Collider.ChildCount = 0"
									}
								},
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 973165920364339,
									"parameters": {
										"object": "Collider"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create the probe."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 104884620209393,
									"parameters": {
										"variable": "turretRndPos",
										"value": "random(-208, 208)"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 396270530223163,
									"parameters": {
										"object-to-create": "TurretProbe",
										"layer": "\"Game\"",
										"x": "Center.X",
										"y": "Center.Y",
										"create-hierarchy": false,
										"template-name": "\"Turret\" & type"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Collider",
									"sid": 859688575369459,
									"parameters": {
										"child": "TurretProbe",
										"transform-x": false,
										"transform-y": false,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"type": "comment",
									"text": "Play a spawn animation."
								},
								{
									"id": "set-scale",
									"objectClass": "TurretProbe",
									"sid": 882007687513078,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "TurretProbe",
									"sid": 724883685348767,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"type": "comment",
									"text": "Send the probe to a random location on a free wall."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "TurretProbe",
									"sid": 469415318500096,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ProbeSpawn\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.25",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TurretProbe",
									"sid": 172087739400456,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ProbeSpawnOp\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.33",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "move-to-position",
									"objectClass": "TurretProbe",
									"sid": 654003095804541,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "Collider.X + cos(Collider.Angle) * turretRndPos",
										"y": "Collider.Y + sin(Collider.Angle) * turretRndPos",
										"mode": "direct"
									}
								}
							],
							"sid": 896888576193263
						},
						{
							"eventType": "comment",
							"text": "When the probe hits a wall, create the corresponding turret."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "TurretProbe",
									"sid": 533938146314154,
									"behaviorType": "MoveTo"
								},
								{
									"id": "pick-parent",
									"objectClass": "TurretProbe",
									"sid": 288551227677011,
									"parameters": {
										"parent": "Collider",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create the turret, but hide it from the player."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 536532151266884,
									"parameters": {
										"object-to-create": "Turret",
										"layer": "\"Game\"",
										"x": "TurretProbe.X",
										"y": "TurretProbe.Y",
										"create-hierarchy": false,
										"template-name": "TurretProbe.TemplateName"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Collider",
									"sid": 276088136168133,
									"parameters": {
										"child": "Turret",
										"transform-x": true,
										"transform-y": true,
										"transform-w": true,
										"transform-h": true,
										"transform-a": true,
										"transform-o": false,
										"transform-z-elevation": true,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"id": "set-width",
									"objectClass": "Turret",
									"sid": 168697441616380,
									"parameters": {
										"width": "1"
									}
								},
								{
									"type": "comment",
									"text": "Show the turret through a rescaling animation."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Turret",
									"sid": 971236779341430,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TurretSpawnAnim\"",
										"property": "offsetWidth",
										"end-value": "Self.ImageWidth",
										"time": "1",
										"ease": "easeoutback",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Turret",
									"sid": 108695487632591,
									"parameters": {
										"angle": "Collider.Angle - 90"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Turret",
									"sid": 611457810237187,
									"parameters": {
										"angle": "Collider.Angle - 90"
									}
								},
								{
									"type": "comment",
									"text": "Create turret blast."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 669402454615338,
									"parameters": {
										"object-to-create": "EnemyBlast",
										"layer": "\"Game\"",
										"x": "TurretProbe.X + cos(Collider.Angle - 90) * 64",
										"y": "TurretProbe.Y + sin(Collider.Angle - 90) * 64",
										"create-hierarchy": false,
										"template-name": "TurretProbe.TemplateName & \"_Spawn\""
									}
								},
								{
									"type": "comment",
									"text": "Randomize properties."
								},
								{
									"id": "set-angle",
									"objectClass": "EnemyBlast",
									"sid": 243857232384075,
									"parameters": {
										"angle": "random(0, 360)"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "EnemyBlast",
									"sid": 615950359571133,
									"parameters": {
										"scale": "0.8"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "EnemyBlast",
									"sid": 384265064746344,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Expand\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "EnemyBlast",
									"sid": 249254552610807,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeOut\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Destroy the probe."
								},
								{
									"id": "destroy",
									"objectClass": "TurretProbe",
									"sid": 297250000453147
								},
								{
									"type": "comment",
									"text": "Refresh Z Order."
								},
								{
									"callFunction": "RefreshZOrder",
									"sid": 889938603458436
								},
								{
									"type": "comment",
									"text": "Start shooting."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 456703708431140
								},
								{
									"id": "start-timer",
									"objectClass": "Turret",
									"sid": 135408558554659,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Self.cooldown",
										"type": "regular",
										"tag": "\"Shoot\""
									}
								}
							],
							"sid": 459290842813308
						},
						{
							"eventType": "comment",
							"text": "Turret hit by a bullet."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerBullet",
									"sid": 690380259052012,
									"parameters": {
										"object": "Turret"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "PlayerBullet",
									"sid": 329747351276116
								},
								{
									"customAction": "Turret Hit",
									"objectClass": "Turret",
									"sid": 966637414457623,
									"parameters": [
										"1"
									]
								}
							],
							"sid": 631173278550552
						},
						{
							"eventType": "comment",
							"text": "Turret hit by a blast."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerBlast",
									"sid": 273076445022779,
									"parameters": {
										"object": "Turret"
									}
								}
							],
							"actions": [
								{
									"customAction": "Turret Hit",
									"objectClass": "Turret",
									"sid": 968076499552273,
									"parameters": [
										"5"
									]
								}
							],
							"sid": 340816516395507
						},
						{
							"eventType": "comment",
							"text": "Flash effect (on hit)."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Turret",
									"sid": 352518704527404,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TurretFlash\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "Turret",
									"sid": 234641586690705,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "Self.Tween.Value(\"TurretFlash\")"
									}
								}
							],
							"sid": 559893639628797
						},
						{
							"eventType": "comment",
							"text": "Shoot."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "Turret",
									"sid": 168739590518050,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"Shoot\""
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 348484039594297,
									"parameters": {
										"object": "Turret"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Animate Turret."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Turret",
									"sid": 238416639159823,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TurretShoot\"",
										"property": "offsetWidth",
										"end-value": "Self.ImageWidth * 0.75",
										"time": "0.1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Create the bullet and muzzle flash."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 954585060793991,
									"parameters": {
										"object-to-create": "EnemyBullet",
										"layer": "\"Game\"",
										"x": "Turret.ImagePointX(\"FireSpot\")",
										"y": "Turret.ImagePointY(\"FireSpot\")",
										"create-hierarchy": false,
										"template-name": "Turret.TemplateName"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 457566060270551,
									"parameters": {
										"object-to-create": "MuzzleFlash",
										"layer": "\"Game\"",
										"x": "Turret.ImagePointX(\"FireSpot\")",
										"y": "Turret.ImagePointY(\"FireSpot\")",
										"create-hierarchy": false,
										"template-name": "Turret.TemplateName"
									}
								},
								{
									"type": "comment",
									"text": "Set angles."
								},
								{
									"id": "set-angle",
									"objectClass": "EnemyBullet",
									"sid": 325713152608061,
									"parameters": {
										"angle": "random(0, 360)"
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "EnemyBullet",
									"sid": 590244391920504,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "Turret.Angle + random(-30, 30)"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MuzzleFlash",
									"sid": 756907118400164,
									"parameters": {
										"angle": "random(0, 360)"
									}
								},
								{
									"type": "comment",
									"text": "Destroy muzzle flash."
								},
								{
									"id": "set-scale",
									"objectClass": "MuzzleFlash",
									"sid": 162198476032276,
									"parameters": {
										"scale": "0.5"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "MuzzleFlash",
									"sid": 422644865229633,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Expand\"",
										"property": "scale",
										"end-x": "0.6",
										"end-y": "0.6",
										"time": "0.1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "MuzzleFlash",
									"sid": 965599328743079,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeOut\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.1",
										"ease": "easeinsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 871598348751644
						}
					],
					"sid": 394051160339101
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Drone",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "variable",
							"name": "droneRndAng",
							"type": "number",
							"initialValue": "0",
							"comment": "Randomized angle for the drone to move",
							"isStatic": true,
							"isConstant": false,
							"sid": 738641594870777
						},
						{
							"eventType": "variable",
							"name": "droneRndDist",
							"type": "number",
							"initialValue": "0",
							"comment": "Randomized distance for the drone to move",
							"isStatic": true,
							"isConstant": false,
							"sid": 648910563412160
						},
						{
							"eventType": "comment",
							"text": "Process drone hit."
						},
						{
							"aceType": "action",
							"aceName": "Drone Hit",
							"objectClass": "Drone",
							"functionDescription": "Process drone hit",
							"functionCategory": "Drone",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "damage",
									"type": "number",
									"initialValue": "0",
									"comment": "Damage delt by the player",
									"sid": 510399855798831
								}
							],
							"eventType": "custom-ace-block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Drone",
									"sid": 188690823239723,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DroneDestroy\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Subtract HP."
								},
								{
									"id": "subtract-from-instvar",
									"objectClass": "Drone",
									"sid": 709717810987058,
									"parameters": {
										"instance-variable": "HP",
										"value": "damage"
									}
								}
							],
							"sid": 602403673677888,
							"children": [
								{
									"eventType": "variable",
									"name": "droneType",
									"type": "string",
									"initialValue": "",
									"comment": "Type of the drone",
									"isStatic": false,
									"isConstant": false,
									"sid": 431821251021703
								},
								{
									"eventType": "comment",
									"text": "Destroy the drone."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Drone",
											"sid": 328084378892451,
											"parameters": {
												"instance-variable": "HP",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Stop moving."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 186695622694569,
											"parameters": {
												"variable": "droneType",
												"value": "Drone.TemplateName"
											}
										},
										{
											"id": "stop",
											"objectClass": "Drone",
											"sid": 778464291528564,
											"behaviorType": "MoveTo"
										},
										{
											"type": "comment",
											"text": "Destroy the drone."
										},
										{
											"id": "tween-value",
											"objectClass": "Drone",
											"sid": 132655123453034,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DroneFlash\"",
												"start-value": "100",
												"end-value": "200",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Drone",
											"sid": 489239473729082,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DroneDestroy\"",
												"property": "size",
												"end-x": "0",
												"end-y": "0",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 732270208086317
										},
										{
											"type": "comment",
											"text": "Create a blast effect."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 851995779706700,
											"parameters": {
												"object-to-create": "Shockwave",
												"layer": "\"Game\"",
												"x": "Drone.X",
												"y": "Drone.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-scale",
											"objectClass": "Shockwave",
											"sid": 564014889868095,
											"parameters": {
												"scale": "0.05"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Shockwave",
											"sid": 728728052617933,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DestroyEffect\"",
												"property": "scale",
												"end-x": "1",
												"end-y": "1",
												"time": "0.5",
												"ease": "easeoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "Shockwave",
											"sid": 508527091285015,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DestroyEffectOp\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.5",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 369655845231774,
									"children": [
										{
											"eventType": "comment",
											"text": "If the drone is charging a beam, launch it immediately."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "Drone",
													"sid": 154028140097511,
													"parameters": {
														"child": "EnemyBeam",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-enabled",
													"objectClass": "EnemyBeam",
													"sid": 481740838571482,
													"behaviorType": "Bullet",
													"parameters": {
														"state": "enabled"
													}
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "EnemyBeam",
													"sid": 831304075141547,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "Drone.Angle"
													}
												}
											],
											"sid": 493100596542725
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Flash the drone."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 471530813354356
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "Drone",
											"sid": 501262137398097,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DroneFlash\"",
												"start-value": "100",
												"end-value": "130",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 456192202409292
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Create an enemy drone."
						},
						{
							"functionName": "createDrone",
							"functionDescription": "Create an enemy drone",
							"functionCategory": "Enemies",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "type",
									"type": "number",
									"initialValue": "0",
									"comment": "Drone type.",
									"sid": 937517678114907
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Select random angle and distance"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 457648945696198,
									"parameters": {
										"variable": "droneRndDist",
										"value": "random(120)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 940642238846103,
									"parameters": {
										"variable": "droneRndAng",
										"value": "random(360)"
									}
								},
								{
									"type": "comment",
									"text": "Create drone."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 373521889075713,
									"parameters": {
										"object-to-create": "Drone",
										"layer": "\"Game\"",
										"x": "Center.X",
										"y": "Center.Y",
										"create-hierarchy": false,
										"template-name": "\"Drone\" & type"
									}
								},
								{
									"type": "comment",
									"text": "Play an animation to bring the drone into the scene."
								},
								{
									"id": "set-scale",
									"objectClass": "Drone",
									"sid": 761597112963609,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "Drone",
									"sid": 590054846722433,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Drone",
									"sid": 395302978853683,
									"parameters": {
										"angle": "droneRndAng"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Drone",
									"sid": 203829998322481,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DroneSpawn\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.25",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Drone",
									"sid": 793573002439828,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DroneSpawnOp\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.33",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Move the drone."
								},
								{
									"id": "move-to-position",
									"objectClass": "Drone",
									"sid": 986986824409594,
									"behaviorType": "MoveTo",
									"parameters": {
										"x": "Center.X + cos(droneRndAng) * (150 + droneRndDist)",
										"y": "Center.Y + sin(droneRndAng) * (150 + droneRndDist)",
										"mode": "direct"
									}
								}
							],
							"sid": 631899192701903
						},
						{
							"eventType": "comment",
							"text": "When the drone reaches its destiny, it charges an attack against the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "Drone",
									"sid": 295755131222527,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Make drone target the player."
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Drone",
									"sid": 321662389573713,
									"parameters": {
										"instance-variable": "targetingPlayer",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Create energy beam."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 614784869016679,
									"parameters": {
										"object-to-create": "EnemyBeam",
										"layer": "\"Game\"",
										"x": "Drone.ImagePointX(\"FireSpot\")",
										"y": "Drone.ImagePointY(\"FireSpot\")",
										"create-hierarchy": false,
										"template-name": "Drone.TemplateName"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "EnemyBeam",
									"sid": 826211623806436,
									"parameters": {
										"angle": "Drone.Angle"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Drone",
									"sid": 865271263828040,
									"parameters": {
										"child": "EnemyBeam",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": true,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "EnemyBeam",
									"sid": 817593564764991,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "EnemyBeam",
									"sid": 110177507619981,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeIn\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.25",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "EnemyBeam",
									"sid": 755267057917599,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "EnemyBeam",
									"sid": 629311921058251,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Expand\"",
										"property": "scale",
										"end-x": "0.3125",
										"end-y": "0.3125",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 902217792413584
						},
						{
							"eventType": "comment",
							"text": "Perform the attack."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 685064564649555,
									"parameters": {
										"object": "Drone"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Drone",
									"sid": 292808598405815,
									"parameters": {
										"instance-variable": "targetingPlayer"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "If the drone is targeting the player, make it stationary and rotate in order to face the player."
								},
								{
									"id": "move-to-object",
									"objectClass": "Drone",
									"sid": 610709093164182,
									"behaviorType": "MoveTo",
									"parameters": {
										"object": "Player",
										"image-point": "0",
										"mode": "direct"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "Drone",
									"sid": 201284009247955,
									"behaviorType": "MoveTo",
									"parameters": {
										"speed": "0"
									}
								}
							],
							"sid": 380482117782619,
							"children": [
								{
									"eventType": "comment",
									"text": "When the drone is facing the player, launch the attack."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 599337690069734,
											"parameters": {
												"value": "abs(((angle(Drone.X, Drone.Y, Player.X, Player.Y) + 180) % 360) - ((Drone.Angle + 180) % 360)) < 1"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Drone",
											"sid": 560857020290783,
											"parameters": {
												"child": "EnemyBeam",
												"which": "own"
											}
										},
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 917018198158586
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Enable bullet behavior to move the beam."
										},
										{
											"id": "set-enabled",
											"objectClass": "EnemyBeam",
											"sid": 236901242314383,
											"behaviorType": "Bullet",
											"parameters": {
												"state": "enabled"
											}
										},
										{
											"id": "set-angle-of-motion",
											"objectClass": "EnemyBeam",
											"sid": 830779633657743,
											"behaviorType": "Bullet",
											"parameters": {
												"angle": "Drone.Angle"
											}
										},
										{
											"type": "comment",
											"text": "Dettach it from the drone."
										},
										{
											"id": "remove-child",
											"objectClass": "Drone",
											"sid": 413885022066636,
											"parameters": {
												"child": "EnemyBeam"
											}
										},
										{
											"type": "comment",
											"text": "Select new destiny for the drone."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 551710774535862,
											"parameters": {
												"variable": "droneRndAng",
												"value": "random(360)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 560805616566986,
											"parameters": {
												"variable": "droneRndDist",
												"value": "random(120)"
											}
										},
										{
											"type": "comment",
											"text": "Drone is no longer targeting the player."
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Drone",
											"sid": 317255873470868,
											"parameters": {
												"instance-variable": "targetingPlayer",
												"value": "false"
											}
										},
										{
											"type": "comment",
											"text": "Move drone to the selected destiny."
										},
										{
											"id": "move-to-position",
											"objectClass": "Drone",
											"sid": 809658561986021,
											"behaviorType": "MoveTo",
											"parameters": {
												"x": "Center.X + cos(droneRndAng) * (150 + droneRndDist)",
												"y": "Center.Y + sin(droneRndAng) * (150 + droneRndDist)",
												"mode": "direct"
											}
										}
									],
									"sid": 150660441565780
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Turret hit by a bullet."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerBullet",
									"sid": 305766141820892,
									"parameters": {
										"object": "Drone"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "PlayerBullet",
									"sid": 474505208841940
								},
								{
									"customAction": "Drone Hit",
									"objectClass": "Drone",
									"sid": 779956047052035,
									"parameters": [
										"1"
									]
								}
							],
							"sid": 504162845783846
						},
						{
							"eventType": "comment",
							"text": "Turret hit by a blast."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "PlayerBlast",
									"sid": 707443711948197,
									"parameters": {
										"object": "Drone"
									}
								}
							],
							"actions": [
								{
									"customAction": "Drone Hit",
									"objectClass": "Drone",
									"sid": 738626910784519,
									"parameters": [
										"5"
									]
								}
							],
							"sid": 892139061072318
						},
						{
							"eventType": "comment",
							"text": "Flash effect (on hit)."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Drone",
									"sid": 760773048535245,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DroneFlash\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "Drone",
									"sid": 326984176858070,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "Self.Tween.Value(\"DroneFlash\")"
									}
								}
							],
							"sid": 645622205738433
						}
					],
					"sid": 481982434346237
				}
			],
			"sid": 130540791380293
		}
	],
	"sid": 295072376207205
}