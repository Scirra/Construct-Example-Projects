{
	"name": "Gameplay",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Global"
		},
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Cats",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the cats bounding boxes."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 989659617399407
						}
					],
					"actions": [],
					"sid": 204044299809861,
					"children": [
						{
							"eventType": "comment",
							"text": "If the array is empty, fill it with the information from every cat in the layout."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 128332368194658,
									"parameters": {
										"value": "Array.Width = 0"
									}
								}
							],
							"actions": [],
							"sid": 424075327787024,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 906823944663731,
											"parameters": {
												"object": "CatBoundingBox"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Add a new cell in the X axis."
										},
										{
											"id": "push",
											"objectClass": "Array",
											"sid": 695685625811521,
											"parameters": {
												"where": "back",
												"value": "0",
												"axis": "x"
											}
										},
										{
											"type": "comment",
											"text": "Store the bounding box UID."
										},
										{
											"id": "set-at-xy",
											"objectClass": "Array",
											"sid": 504959394995776,
											"parameters": {
												"x": "loopindex",
												"y": "0",
												"value": "CatBoundingBox.UID"
											}
										},
										{
											"type": "comment",
											"text": "Set the second value as false."
										},
										{
											"id": "set-at-xy",
											"objectClass": "Array",
											"sid": 182061369071334,
											"parameters": {
												"x": "loopindex",
												"y": "1",
												"value": "0"
											}
										}
									],
									"sid": 479184103635964
								}
							]
						},
						{
							"eventType": "comment",
							"text": "However, if the array isn't empty, refresh the visuals of every cat in the layout."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 670624577254755
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 837610730452210,
									"parameters": {
										"value": "Array.Width > 0"
									}
								}
							],
							"actions": [],
							"sid": 280011699767860,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 618358779690144,
											"parameters": {
												"object": "CatBoundingBox"
											}
										}
									],
									"actions": [
										{
											"callFunction": "RefreshCatVisuals",
											"sid": 990979139539964,
											"parameters": [
												"CatBoundingBox.UID",
												true
											]
										}
									],
									"sid": 715943399582410
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Update the cat counter."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "UpdateCatCounter",
									"sid": 563884051678724
								}
							],
							"sid": 783252696545344
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Mark a specific cat as found, by using their UID as a reference."
				},
				{
					"functionName": "MarkCatAsFound",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "CatUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 938639374652681
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "CatBoundingBox",
							"sid": 314909252615898,
							"parameters": {
								"unique-id": "CatUID"
							}
						}
					],
					"actions": [],
					"sid": 596031499626235,
					"children": [
						{
							"eventType": "comment",
							"text": "Loop through all entries in the array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 710799363126463,
									"parameters": {
										"count": "Array.Width"
									}
								}
							],
							"actions": [],
							"sid": 250182408795574,
							"children": [
								{
									"eventType": "comment",
									"text": "If the cat UID matches the one in the array, and the second value is false, then mark this cat as found."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 788388657416019,
											"parameters": {
												"value": "Array.At(loopindex, 0) = CatBoundingBox.UID"
											}
										}
									],
									"actions": [],
									"sid": 746102488264219,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 661271185855626,
													"parameters": {
														"value": "Array.At(loopindex, 1) = 0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Play a \"whoosh\" sound effect,"
												},
												{
													"callFunction": "PlaySFX",
													"sid": 441986348770616,
													"parameters": [
														"\"Whoosh00\"&choose(1, 2, 3, 4, 5)",
														false
													]
												},
												{
													"type": "comment",
													"text": "Set the second value as true."
												},
												{
													"id": "set-at-xy",
													"objectClass": "Array",
													"sid": 273167005830465,
													"parameters": {
														"x": "loopindex",
														"y": "1",
														"value": "1"
													}
												},
												{
													"type": "comment",
													"text": "Create a circle behind the cat, to make it easier to see against the town background."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 691200623410558,
													"parameters": {
														"object-to-create": "CatBackgroundCircle",
														"layer": "\"Canvas\"",
														"x": "CatBoundingBox.X + CatBoundingBox.Width / 2",
														"y": "CatBoundingBox.Y + CatBoundingBox.Height / 2",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "move-to-object",
													"objectClass": "CatBackgroundCircle",
													"sid": 988582957629138,
													"parameters": {
														"where": "behind",
														"object": "CatBoundingBox"
													}
												},
												{
													"id": "set-size",
													"objectClass": "CatBackgroundCircle",
													"sid": 426158563042410,
													"parameters": {
														"width": "2",
														"height": "2"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "CatBackgroundCircle",
													"sid": 965524839290420,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"FadeIn\"",
														"property": "size",
														"end-x": "Self.ImageWidth",
														"end-y": "Self.ImageHeight",
														"time": "0.25",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "start-timer",
													"objectClass": "CatBackgroundCircle",
													"sid": 736999676421061,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "2.25",
														"type": "once",
														"tag": "\"SelfDestroy\""
													}
												},
												{
													"type": "comment",
													"text": "Refresh the cat viauls."
												},
												{
													"callFunction": "RefreshCatVisuals",
													"sid": 294033059318859,
													"parameters": [
														"CatBoundingBox.UID",
														false
													]
												},
												{
													"type": "comment",
													"text": "Check if the game is over."
												},
												{
													"callFunction": "CheckIfGameIsOver",
													"sid": 428690936874632
												},
												{
													"type": "comment",
													"text": "Stop the loop, since the cat was already found."
												},
												{
													"id": "stop-loop",
													"objectClass": "System",
													"sid": 492311896984409
												}
											],
											"sid": 677600357990672
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Update the cat counter."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "UpdateCatCounter",
									"sid": 624328783273014
								}
							],
							"sid": 248776573573874
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the cat background circle timer is over, destroy the cat background circle."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "CatBackgroundCircle",
							"sid": 966164572243279,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"SelfDestroy\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "CatBackgroundCircle",
							"sid": 786199149111602,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "size",
								"end-x": "2",
								"end-y": "2",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 302385444196914
				},
				{
					"eventType": "comment",
					"text": "Refresh the visuals of a specific cat."
				},
				{
					"functionName": "RefreshCatVisuals",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "CatUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 542560551213548
						},
						{
							"name": "SkipAnimation",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 784531470070926
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "CatBoundingBox",
							"sid": 672246771195646,
							"parameters": {
								"unique-id": "CatUID"
							}
						}
					],
					"actions": [],
					"sid": 549459258189036,
					"children": [
						{
							"eventType": "comment",
							"text": "Loop through all entries in the array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 500461695116142,
									"parameters": {
										"count": "Array.Width"
									}
								}
							],
							"actions": [],
							"sid": 280242125661972,
							"children": [
								{
									"eventType": "comment",
									"text": "If the cat UID matches the one in the array, and the second value is true, change the color of this cat."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 555062871492077,
											"parameters": {
												"value": "Array.At(loopindex, 0) = CatBoundingBox.UID"
											}
										}
									],
									"actions": [],
									"sid": 199108356714666,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 199714160394060,
													"parameters": {
														"value": "Array.At(loopindex, 1) = 1"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Create a color mask to change the color of the cat."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 240844848210959,
													"parameters": {
														"object-to-create": "ColorMask",
														"layer": "\"Cats\"",
														"x": "CatBoundingBox.X + CatBoundingBox.Width / 2",
														"y": "CatBoundingBox.Y + CatBoundingBox.Height/ 2",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-size",
													"objectClass": "ColorMask",
													"sid": 148133218542439,
													"parameters": {
														"width": "CatBoundingBox.Width + 16",
														"height": "CatBoundingBox.Height + 16"
													}
												}
											],
											"sid": 300627134186402,
											"children": [
												{
													"eventType": "comment",
													"text": "If the skip animation option is enabled, then set the opacity value to 100."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 826610339812896,
															"parameters": {
																"value": "SkipAnimation = 1"
															}
														}
													],
													"actions": [
														{
															"id": "set-opacity",
															"objectClass": "ColorMask",
															"sid": 430984418355968,
															"parameters": {
																"opacity": "100"
															}
														}
													],
													"sid": 942408410365754
												},
												{
													"eventType": "comment",
													"text": "However, if the skip animation options is disable, then set the opacity to 0 and gradually increase it to 100."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 235885142846572
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 996125143451023,
															"parameters": {
																"value": "SkipAnimation = 0"
															}
														}
													],
													"actions": [
														{
															"id": "set-opacity",
															"objectClass": "ColorMask",
															"sid": 523890251534223,
															"parameters": {
																"opacity": "0"
															}
														},
														{
															"id": "tween-one-property",
															"objectClass": "ColorMask",
															"sid": 848686238392180,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"Opacity\"",
																"property": "offsetOpacity",
																"end-value": "100",
																"time": "0.5",
																"ease": "noease",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														}
													],
													"sid": 166318732969792
												},
												{
													"eventType": "comment",
													"text": "Stop the loop, since the cat was already found."
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "stop-loop",
															"objectClass": "System",
															"sid": 204015785895256
														}
													],
													"sid": 924504535312922
												}
											]
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 301003709629262
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "GameOver",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check if the game is over, by looking for errors in the array."
				},
				{
					"functionName": "CheckIfGameIsOver",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 315067036457243,
					"children": [
						{
							"eventType": "comment",
							"text": "Whether or not any errors were found in the array."
						},
						{
							"eventType": "variable",
							"name": "FoundAnyErrors",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 411115293959869
						},
						{
							"eventType": "comment",
							"text": "Loop through all entries in the array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 503071682502916,
									"parameters": {
										"count": "Array.Width"
									}
								}
							],
							"actions": [],
							"sid": 112988935685708,
							"children": [
								{
									"eventType": "comment",
									"text": "If any of the entries have their second value set to false, then tag it as an error and stop the loop."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 241818033613520,
											"parameters": {
												"value": "Array.At(loopindex, 1) = 0"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 430796316823142,
											"parameters": {
												"variable": "FoundAnyErrors",
												"value": "true"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 901257195133768
										}
									],
									"sid": 801373938701331
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If no errors are found, then it's game over."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 574459232635280,
									"parameters": {
										"value": "FoundAnyErrors = 0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Change the player input focus, so it can't interact with the game anymore."
								},
								{
									"callFunction": "SetPlayerInputFocus",
									"sid": 961489888272895,
									"parameters": [
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Move the camera position to the center of the level."
								},
								{
									"callFunction": "SetScrollPosition",
									"sid": 588069372009845,
									"parameters": [
										"LayoutWidth / 2",
										"LayoutHeight / 2"
									]
								},
								{
									"callFunction": "SetLayerScale",
									"sid": 544322011766626,
									"parameters": [
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Wait a second before going to the credits screen."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 303918117409287,
									"parameters": {
										"seconds": "1"
									}
								},
								{
									"callFunction": "GoToLayout",
									"sid": 105696390049973,
									"parameters": [
										"\"Credits\""
									]
								}
							],
							"sid": 740315076180881
						}
					]
				}
			],
			"sid": 896533844074311
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Instructions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "The text index currently being shown."
				},
				{
					"eventType": "variable",
					"name": "TextIndex",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 248513624645793
				},
				{
					"eventType": "comment",
					"text": "All dialogue texts stored in a single constant for convenience."
				},
				{
					"eventType": "variable",
					"name": "DIALOGUETEXT",
					"type": "string",
					"initialValue": "Hello, darling! I don't believe we've met before.|I was wondering if you could give a hand to an old lady.|You see, I love kitties! However, this morning I accidentally left my front door open, and by the time I realized it, all 50 of them had wandered off.|Would you be kind enough to help me find them? If you spot any of my kitties just point them out, and I'll figure out how to bring them back home.|Thank you so much, darling!",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 861231723106655
				},
				{
					"eventType": "comment",
					"text": "Setup the scene by hiding all instructions."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 753356814385464
						}
					],
					"actions": [
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 701164217982174,
							"parameters": {
								"layer": "\"Instructions\"",
								"visibility": "invisible"
							}
						}
					],
					"sid": 760332331323897
				},
				{
					"eventType": "comment",
					"text": "Check if instructions need to be shown or not."
				},
				{
					"functionName": "EvaluateInstructions",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 242042144857641,
					"children": [
						{
							"eventType": "comment",
							"text": "If the text index is set to zero, it means the player wasn't instructed yet, so the instructions need to be shown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 476525863974139,
									"parameters": {
										"value": "TextIndex = 0"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 207211751204764,
									"parameters": {
										"layer": "\"Instructions\"",
										"visibility": "visible"
									}
								},
								{
									"type": "comment",
									"text": "Hide all object related to the instructions."
								},
								{
									"id": "set-opacity",
									"objectClass": "Modal",
									"sid": 220437724698396,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-y",
									"objectClass": "Instructor",
									"sid": 996422961211426,
									"parameters": {
										"y": "1720"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "SpeechBalloon",
									"sid": 329287681722908,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "Instructions",
									"sid": 744031576325606,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Wait for the transition to be over."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 565043899147410,
									"parameters": {
										"seconds": "LAYOUTTRANSITIONDURATION * 2"
									}
								},
								{
									"type": "comment",
									"text": "Make the background darker, so it's easier for the player to focus on the instructions."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Modal",
									"sid": 347895657710828,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Opacity\"",
										"property": "offsetOpacity",
										"end-value": "75",
										"time": "0.5",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Wait for the animation to be over."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 182131715648420,
									"parameters": {
										"seconds": "0.5"
									}
								},
								{
									"type": "comment",
									"text": "Move the instructor up."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Instructor",
									"sid": 867126380337321,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "1080",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Wait for the animation to be over."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 575363986995117,
									"parameters": {
										"seconds": "0.5"
									}
								},
								{
									"type": "comment",
									"text": "Allow the player to interact with the instructions and load the next text."
								},
								{
									"callFunction": "SetPlayerInputFocus",
									"sid": 463666407206871,
									"parameters": [
										"2"
									]
								},
								{
									"callFunction": "LoadNextInstruction",
									"sid": 425855874997557
								}
							],
							"sid": 374158319254652
						},
						{
							"eventType": "comment",
							"text": "However, if the text index is higher than zero, it means the player has already been instructed, so the instructions can stay hidden."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 727407340031561
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 973149536761789,
									"parameters": {
										"value": "TextIndex > 0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "SetPlayerInputFocus",
									"sid": 733491121144903,
									"parameters": [
										"1"
									]
								}
							],
							"sid": 126470562597303
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Load the next text from the instructor's dialogue."
				},
				{
					"functionName": "LoadNextInstruction",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 882035952051453,
					"children": [
						{
							"eventType": "comment",
							"text": "If the text index is lower than the token count in the dialogue text, then change the balloon text to the next one."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 168689120178762,
									"parameters": {
										"value": "TextIndex < tokencount(DIALOGUETEXT, \"|\")"
									}
								}
							],
							"actions": [
								{
									"callFunction": "ChangeBalloonText",
									"sid": 259285013600357,
									"parameters": [
										"tokenat(DIALOGUETEXT, TextIndex, \"|\")"
									]
								}
							],
							"sid": 505597693400565
						},
						{
							"eventType": "comment",
							"text": "However, if the text index is equal to the token count in the dialogue text, then end the instructions section and allow the player to play the game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 689600649561281
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 104104905703251,
									"parameters": {
										"value": "TextIndex = tokencount(DIALOGUETEXT, \"|\")"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Finish the typewriter animation, preventing new voice sound effects from being played."
								},
								{
									"id": "typewriter-finish",
									"objectClass": "Instructions",
									"sid": 622460594626324
								},
								{
									"type": "comment",
									"text": "Make the instructions text invisible."
								},
								{
									"id": "set-visible",
									"objectClass": "Instructions",
									"sid": 241646355954368,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Make the speech balloon text invisible."
								},
								{
									"id": "set-visible",
									"objectClass": "SpeechBalloon",
									"sid": 424915806362265,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Temporarily disable the player input."
								},
								{
									"callFunction": "SetPlayerInputFocus",
									"sid": 837975138163542,
									"parameters": [
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Move the instructor downwards until it can't be seen by the player."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Instructor",
									"sid": 403618617272347,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "1720",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 219468033646202
								},
								{
									"type": "comment",
									"text": "Remove the modal from behind the instructor."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Modal",
									"sid": 121312743302615,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Opacity\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "noease",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 579768376778154
								},
								{
									"type": "comment",
									"text": "Make the instructions layer invisible."
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 960641333169160,
									"parameters": {
										"layer": "\"Instructions\"",
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Enable the player input back again."
								},
								{
									"callFunction": "SetPlayerInputFocus",
									"sid": 944237126599637,
									"parameters": [
										"1"
									]
								}
							],
							"sid": 312902695562628
						},
						{
							"eventType": "comment",
							"text": "Increase the text index by one."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 299489752221020,
									"parameters": {
										"variable": "TextIndex",
										"value": "clamp(TextIndex + 1, 0, tokencount(DIALOGUETEXT, \"|\"))"
									}
								}
							],
							"sid": 286421494855939
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Change the appearance of the balloon text."
				},
				{
					"functionName": "ChangeBalloonText",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Text",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 883884643663413
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Make the text visible and load a custom text with a typewriter animaiton."
						},
						{
							"id": "set-visible",
							"objectClass": "Instructions",
							"sid": 242661414179236,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "typewriter-text",
							"objectClass": "Instructions",
							"sid": 953644599426427,
							"parameters": {
								"text": "Text",
								"duration": "len(Text) / 128"
							}
						},
						{
							"type": "comment",
							"text": "Make the balloon visible."
						},
						{
							"id": "set-visible",
							"objectClass": "SpeechBalloon",
							"sid": 818865619415041,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"type": "comment",
							"text": "Play a tween animation that changes the balloon's size over time."
						},
						{
							"id": "stop-tweens",
							"objectClass": "SpeechBalloon",
							"sid": 547921694808653,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Size\""
							}
						},
						{
							"id": "set-size",
							"objectClass": "SpeechBalloon",
							"sid": 477444757264548,
							"parameters": {
								"width": "Instructions.TextWidth + 96 + 96",
								"height": "Instructions.TextHeight + 96 + 96"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "SpeechBalloon",
							"sid": 283709491655413,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Size\"",
								"property": "size",
								"end-x": "Self.Width + 16",
								"end-y": "Self.Height + 16",
								"time": "0.125",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Play a tween animation that changes the balloon's angle over time."
						},
						{
							"id": "stop-tweens",
							"objectClass": "SpeechBalloon",
							"sid": 915445066374477,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Angle\""
							}
						},
						{
							"id": "set-angle",
							"objectClass": "SpeechBalloon",
							"sid": 610349454819577,
							"parameters": {
								"angle": "0"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "SpeechBalloon",
							"sid": 366057712223342,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Angle\"",
								"property": "offsetAngle",
								"end-value": "-1",
								"time": "0.125",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Center the text based on the balloon position and size."
						},
						{
							"id": "set-position",
							"objectClass": "Instructions",
							"sid": 517614948825245,
							"parameters": {
								"x": "SpeechBalloon.X - (Instructions.TextWidth + 96 + 96) / 2",
								"y": "SpeechBalloon.Y - (Instructions.TextHeight + 96 + 96) / 2 - 16"
							}
						},
						{
							"type": "comment",
							"text": "Play a tween animation that changes the instructor's width over time."
						},
						{
							"id": "stop-tweens",
							"objectClass": "Instructor",
							"sid": 795464599233911,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Width\""
							}
						},
						{
							"id": "set-width",
							"objectClass": "Instructor",
							"sid": 583155204646194,
							"parameters": {
								"width": "Self.ImageWidth"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Instructor",
							"sid": 753825179439312,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Width\"",
								"property": "offsetWidth",
								"end-value": "Self.ImageWidth * 1.1",
								"time": "0.125",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Play a tween animation that changes the instructor's height over time."
						},
						{
							"id": "stop-tweens",
							"objectClass": "Instructor",
							"sid": 904210380033797,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Height\""
							}
						},
						{
							"id": "set-height",
							"objectClass": "Instructor",
							"sid": 884833538718400,
							"parameters": {
								"height": "Self.ImageHeight"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Instructor",
							"sid": 273389728960696,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Height\"",
								"property": "offsetHeight",
								"end-value": "Self.ImageHeight * 0.9",
								"time": "0.125",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						}
					],
					"sid": 256804788049528
				},
				{
					"eventType": "comment",
					"text": "How often the \"boop\" sound effect should play while the instructor is talking."
				},
				{
					"eventType": "variable",
					"name": "BoopCooldown",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 894473167067666
				},
				{
					"eventType": "comment",
					"text": "If a typewriter animation is playing, plays a voice sound effect and display a moving mouth animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-running-typewriter-text",
							"objectClass": "Instructions",
							"sid": 254222014382915
						}
					],
					"actions": [],
					"sid": 978757117630286,
					"children": [
						{
							"eventType": "comment",
							"text": "If the boop cooldown is over, play the boop sound effect and reset the boop cooldown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 333711627528982,
									"parameters": {
										"value": "BoopCooldown >= 0.1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "PlaySFX",
									"sid": 675106631980470,
									"parameters": [
										"\"NPCVoice00\"&choose(1, 2, 3, 4, 5)",
										false
									]
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 863568658994086,
									"parameters": {
										"variable": "BoopCooldown",
										"value": "BoopCooldown % 0.1"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Instructor",
									"sid": 353374289628841,
									"parameters": {
										"frame-number": "(Self.AnimationFrame + 1) % 2"
									}
								}
							],
							"sid": 648925040365617
						},
						{
							"eventType": "comment",
							"text": "However, if the boop cooldown isn't over yet, simply increase its value."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 290472917082060
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 181489968559096,
									"parameters": {
										"value": "BoopCooldown < 0.1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 929206247220295,
									"parameters": {
										"variable": "BoopCooldown",
										"value": "BoopCooldown + dt"
									}
								}
							],
							"sid": 253871008413100
						}
					]
				},
				{
					"eventType": "comment",
					"text": "However, if a typewriter animation isn't playing, stop the moving mouth animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 165023671279882
						},
						{
							"id": "is-running-typewriter-text",
							"objectClass": "Instructions",
							"sid": 753632655432032,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation-frame",
							"objectClass": "Instructor",
							"sid": 508982402566711,
							"parameters": {
								"frame-number": "0"
							}
						}
					],
					"sid": 716479138781639
				}
			],
			"sid": 175037351581084
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "HUD",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "The total number of cats found by the player."
				},
				{
					"eventType": "variable",
					"name": "TotalCatsFound",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 595707011472898
				},
				{
					"eventType": "comment",
					"text": "Update the number of cats found in the HUD."
				},
				{
					"functionName": "UpdateCatCounter",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 429101371726497,
					"children": [
						{
							"eventType": "comment",
							"text": "Lop through every cat in the scene and check if they were already found by the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 187427074610891,
									"parameters": {
										"count": "Array.Width"
									}
								}
							],
							"actions": [],
							"sid": 970706127222636,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 289875693363532,
											"parameters": {
												"value": "Array.At(loopindex, 1) = 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 208731057357685,
											"parameters": {
												"variable": "TotalCatsFound",
												"value": "TotalCatsFound + 1"
											}
										}
									],
									"sid": 632324189463329
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Display the total number in the HUD."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "CatCounter",
									"sid": 816174184102772,
									"parameters": {
										"text": "TotalCatsFound&\"/\"&CatBoundingBox.Count"
									}
								}
							],
							"sid": 745171809570336
						}
					]
				}
			],
			"sid": 760565181499342
		}
	],
	"sid": 257087483280884
}