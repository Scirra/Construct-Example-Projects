{
	"name": "Code",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Whether or not the player is allowed to interact with the game."
		},
		{
			"eventType": "variable",
			"name": "AllowPlayerInput",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 462443858543155
		},
		{
			"eventType": "comment",
			"text": "Whether or not the player is interacting with the game for the first time."
		},
		{
			"eventType": "variable",
			"name": "IsFirstInteraction",
			"type": "boolean",
			"initialValue": "true",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 893042739124635
		},
		{
			"eventType": "comment",
			"text": "At which angle shadows will be projected."
		},
		{
			"eventType": "variable",
			"name": "SHADOWPROJECTIONANGLE",
			"type": "number",
			"initialValue": "315",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 883902791656560
		},
		{
			"eventType": "comment",
			"text": "How far shadows can go depending on its source's height."
		},
		{
			"eventType": "variable",
			"name": "SHADOWPROJECTIONDISTANCE",
			"type": "number",
			"initialValue": "128",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 944658051481958
		},
		{
			"eventType": "comment",
			"text": "How many moves in total the cups will perform before stopping."
		},
		{
			"eventType": "variable",
			"name": "TotalMoves",
			"type": "number",
			"initialValue": "3",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 941011050878978
		},
		{
			"eventType": "comment",
			"text": "How many moves the cups still need to perform before stopping."
		},
		{
			"eventType": "variable",
			"name": "RemainingMoves",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 518543521192669
		},
		{
			"eventType": "comment",
			"text": "How many times the player was able to find the hidden ball."
		},
		{
			"eventType": "variable",
			"name": "Score",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 760328826134196
		},
		{
			"eventType": "comment",
			"text": "How hard the game is on a scale from zero to one."
		},
		{
			"eventType": "variable",
			"name": "NormalizedDifficulty",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 389629202190554
		},
		{
			"eventType": "comment",
			"text": "How many times the player need to find the hidden ball before reaching maximum difficulty."
		},
		{
			"eventType": "variable",
			"name": "ROUNDSUNTILMAXDIFFICULTY",
			"type": "number",
			"initialValue": "15",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 231928592859066
		},
		{
			"eventType": "comment",
			"text": "By how the distance between two cups will be divided, in order to determine how fast they will move on easy and hard difficulty. Higher values will result in faster movement speeds."
		},
		{
			"eventType": "variable",
			"name": "EASYDIVIDER",
			"type": "number",
			"initialValue": "512",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 901753364103464
		},
		{
			"eventType": "variable",
			"name": "HARDDIVIDER",
			"type": "number",
			"initialValue": "2560",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 687428547669688
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 444838731455450
						}
					],
					"actions": [],
					"sid": 354311110615462,
					"children": [
						{
							"eventType": "comment",
							"text": "Store the initial Y position of each text object, so it can be referred later."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 750112445799095,
									"parameters": {
										"object": "Text"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Text",
									"sid": 666723028167940,
									"parameters": {
										"instance-variable": "DefaultY",
										"value": "Self.Y"
									}
								}
							],
							"sid": 600768562995999
						},
						{
							"eventType": "comment",
							"text": "Update the text in the HUD."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "SetText",
									"sid": 619590886490028,
									"parameters": [
										"\"Message\"",
										"\"CLICK ANYWHERE TO START THE GAME!\""
									]
								},
								{
									"callFunction": "SetText",
									"sid": 509737361931367,
									"parameters": [
										"\"Score\"",
										"\"SCORE: \" & zeropad(Score, 3) & \".\""
									]
								},
								{
									"type": "comment",
									"text": "Allow the player to interact with the game."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 300103247447624,
									"parameters": {
										"variable": "AllowPlayerInput",
										"value": "true"
									}
								}
							],
							"sid": 298742348337912
						}
					]
				}
			],
			"sid": 715644786327016
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "If the player touches the screen, check which type of interaction they're trying to perform, but only if they're allowed to interact with the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 224049559601268,
							"parameters": {
								"touch-number": "0"
							}
						}
					],
					"actions": [],
					"sid": 860002132319798,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 447458264523991,
									"parameters": {
										"value": "AllowPlayerInput = 1"
									}
								}
							],
							"actions": [],
							"sid": 129563862192430,
							"children": [
								{
									"eventType": "comment",
									"text": "If this it their first interaction, reveal the ball's location, without analyzing if it's the correct cup."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 497857473997137,
											"parameters": {
												"value": "IsFirstInteraction = 1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set the first interaction variable to false."
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 327024903618632,
											"parameters": {
												"variable": "IsFirstInteraction",
												"value": "false"
											}
										},
										{
											"type": "comment",
											"text": "Prevent the player from interaction with the game."
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 739184237231700,
											"parameters": {
												"variable": "AllowPlayerInput",
												"value": "false"
											}
										},
										{
											"type": "comment",
											"text": "Reveal ball."
										},
										{
											"callFunction": "RevealBall",
											"sid": 874439058350771,
											"parameters": [
												"-1"
											]
										}
									],
									"sid": 371201051817422
								},
								{
									"eventType": "comment",
									"text": "However, if this isn't their first interaction, reveal the ball's location, while analyzing if it's the correct cup"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 662586302352516
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 272311901714672,
											"parameters": {
												"value": "IsFirstInteraction = 0"
											}
										}
									],
									"actions": [],
									"sid": 822428648948332,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-touching-object",
													"objectClass": "Touch",
													"sid": 868142699835431,
													"parameters": {
														"object": "Cup"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Prevent the player from interaction with the game."
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 728283713788122,
													"parameters": {
														"variable": "AllowPlayerInput",
														"value": "false"
													}
												},
												{
													"type": "comment",
													"text": "Reveal ball."
												},
												{
													"callFunction": "RevealBall",
													"sid": 822349419453125,
													"parameters": [
														"Cup.Index"
													]
												}
											],
											"sid": 793418927118117
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 354352397601357
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Cups",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reveal the location of the ball."
				},
				{
					"functionName": "RevealBall",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "CheckCupByIndex",
							"type": "number",
							"initialValue": "-1",
							"comment": "",
							"sid": 267014233443225
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Update the order of all HUD elements, so the cups don't obstruct them."
						},
						{
							"callFunction": "UpdateHUDElementsOrder",
							"sid": 270697687616042
						}
					],
					"sid": 169578239054008,
					"children": [
						{
							"eventType": "comment",
							"text": "Pick the cup that has the ball hidden beneath it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 950863390175097,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.HasTheBall = 1"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Store the cup's position, so it can be referred later."
								},
								{
									"callFunction": "StoreCupPosition",
									"sid": 357710165950357,
									"parameters": [
										"Cup.Index"
									]
								},
								{
									"type": "comment",
									"text": "Move the cup up."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 488826907653180,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "Self.PreviousY - 256",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 893640176942991,
							"children": [
								{
									"eventType": "comment",
									"text": "Pick the ball, and detach it from the cup."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Cup",
											"sid": 960242423344488,
											"parameters": {
												"child": "Ball",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "remove-child",
											"objectClass": "Cup",
											"sid": 679911452489417,
											"parameters": {
												"child": "Ball"
											}
										}
									],
									"sid": 622544600508633
								},
								{
									"eventType": "comment",
									"text": "Pick the cup's shadow, and detach it from the cup."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "Cup",
											"sid": 835957764115873,
											"parameters": {
												"child": "CupShadow",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Store the shadow's position, so it can be referred later."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "CupShadow",
											"sid": 895764007893403,
											"parameters": {
												"instance-variable": "PreviousX",
												"value": "Self.X"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "CupShadow",
											"sid": 810200463550615,
											"parameters": {
												"instance-variable": "PreviousY",
												"value": "Self.Y"
											}
										},
										{
											"type": "comment",
											"text": "Detach the shadow from the cup."
										},
										{
											"id": "remove-child",
											"objectClass": "Cup",
											"sid": 686324130132172,
											"parameters": {
												"child": "CupShadow"
											}
										},
										{
											"type": "comment",
											"text": "Move the shadow away from the cup."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "CupShadow",
											"sid": 899800995498721,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Position\"",
												"property": "position",
												"end-x": "Self.PreviousX + cos(SHADOWPROJECTIONANGLE) * SHADOWPROJECTIONDISTANCE",
												"end-y": "Self.PreviousY + sin(SHADOWPROJECTIONANGLE) * SHADOWPROJECTIONDISTANCE",
												"time": "0.5",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 355449835768549
								},
								{
									"eventType": "comment",
									"text": "If no index was provided, don't check if picked cup is the correct cup, and start the game from the beginning."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 802627682471648,
											"parameters": {
												"value": "CheckCupByIndex = -1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Reset the total moves variable."
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 591319046942865,
											"parameters": {
												"variable": "TotalMoves"
											}
										},
										{
											"type": "comment",
											"text": "Set the remaining moves variable to be the same as the total moves variable."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 311462826986483,
											"parameters": {
												"variable": "RemainingMoves",
												"value": "TotalMoves"
											}
										},
										{
											"type": "comment",
											"text": "Reset the normalized difficulty variable."
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 440456441310178,
											"parameters": {
												"variable": "NormalizedDifficulty"
											}
										},
										{
											"type": "comment",
											"text": "Reset the score variable."
										},
										{
											"id": "reset-eventvar",
											"objectClass": "System",
											"sid": 997395350689052,
											"parameters": {
												"variable": "Score"
											}
										},
										{
											"type": "comment",
											"text": "Update the text in the HUD."
										},
										{
											"callFunction": "SetText",
											"sid": 327182805024161,
											"parameters": [
												"\"Message\"",
												"\"WAIT FOR YOUR TURN...\""
											]
										},
										{
											"callFunction": "SetText",
											"sid": 784060707940626,
											"parameters": [
												"\"Score\"",
												"\"SCORE: \" & zeropad(Score, 3) & \".\""
											]
										}
									],
									"sid": 478044334907459
								},
								{
									"eventType": "comment",
									"text": "However, if an index was provided, check if the picked cup is the correct up."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 617506279243307,
											"parameters": {
												"value": "CheckCupByIndex <> -1"
											}
										}
									],
									"actions": [],
									"sid": 578023849757400,
									"children": [
										{
											"eventType": "comment",
											"text": "If the picked cup is the correct cup, increase the game's difficulty, and shuffle the cups again."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 540950710851282,
													"parameters": {
														"value": "Cup.Index = CheckCupByIndex"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Increase the total moves variable by one."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 349989790029696,
													"parameters": {
														"variable": "TotalMoves",
														"value": "TotalMoves + 1"
													}
												},
												{
													"type": "comment",
													"text": "Set the remaining moves variable to be the same as the total moves variable."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 374617329648042,
													"parameters": {
														"variable": "RemainingMoves",
														"value": "TotalMoves"
													}
												},
												{
													"type": "comment",
													"text": "Increase the normalized difficulty variable by a bit."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 855470069082499,
													"parameters": {
														"variable": "NormalizedDifficulty",
														"value": "clamp(NormalizedDifficulty + 1 / ROUNDSUNTILMAXDIFFICULTY, 0, 1)"
													}
												},
												{
													"type": "comment",
													"text": "Increase the score variable by one."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 624330329296002,
													"parameters": {
														"variable": "Score",
														"value": "Score + 1"
													}
												},
												{
													"type": "comment",
													"text": "Update the text in the HUD."
												},
												{
													"callFunction": "SetText",
													"sid": 781212033013985,
													"parameters": [
														"\"Message\"",
														"\"CORRECT! LET'S MAKE THINGS A BIT MORE INTERESTING...\""
													]
												},
												{
													"callFunction": "SetText",
													"sid": 825906871076670,
													"parameters": [
														"\"Score\"",
														"\"SCORE: \" & zeropad(Score, 3) & \".\""
													]
												},
												{
													"type": "comment",
													"text": "Create a blast effect on top of the correct cup."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 719409794535716,
													"parameters": {
														"object-to-create": "Blast",
														"layer": "\"Cups\"",
														"x": "Cup.ImagePointX(\"Center\")",
														"y": "Cup.ImagePointY(\"Center\")",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"type": "comment",
													"text": "Make the blast effect expand over time with a tween animation."
												},
												{
													"id": "set-size",
													"objectClass": "Blast",
													"sid": 884450886756698,
													"parameters": {
														"width": "Self.ImageWidth * 0.25",
														"height": "Self.ImageHeight * 0.25"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Blast",
													"sid": 916437366713414,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Size\"",
														"property": "size",
														"end-x": "Self.ImageWidth",
														"end-y": "Self.ImageHeight",
														"time": "0.5",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Make the blast effect fade out over time with a tween animation."
												},
												{
													"id": "tween-one-property",
													"objectClass": "Blast",
													"sid": 861372226879481,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"Opacity\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "0.5",
														"ease": "noease",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 908461577705777
										},
										{
											"eventType": "comment",
											"text": "However, if the picked cup isn't the correct cup, reset the game's difficulty, and shuffle the cups again."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 477382367388290
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 532971517965544,
													"parameters": {
														"value": "Cup.Index <> CheckCupByIndex"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Reset the total moves variable."
												},
												{
													"id": "reset-eventvar",
													"objectClass": "System",
													"sid": 211596959456850,
													"parameters": {
														"variable": "TotalMoves"
													}
												},
												{
													"type": "comment",
													"text": "Set the remaining moves variable to be the same as the total moves variable."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 676804002587208,
													"parameters": {
														"variable": "RemainingMoves",
														"value": "TotalMoves"
													}
												},
												{
													"type": "comment",
													"text": "Reset the normalized difficulty variable."
												},
												{
													"id": "reset-eventvar",
													"objectClass": "System",
													"sid": 763819091136464,
													"parameters": {
														"variable": "NormalizedDifficulty"
													}
												},
												{
													"type": "comment",
													"text": "Reset the score variable."
												},
												{
													"id": "reset-eventvar",
													"objectClass": "System",
													"sid": 747373590003428,
													"parameters": {
														"variable": "Score"
													}
												},
												{
													"type": "comment",
													"text": "Update the text in the HUD."
												},
												{
													"callFunction": "SetText",
													"sid": 370567066537759,
													"parameters": [
														"\"Message\"",
														"\"WRONG! LET'S START OVER...\""
													]
												},
												{
													"callFunction": "SetText",
													"sid": 595212157285618,
													"parameters": [
														"\"Score\"",
														"\"SCORE: \" & zeropad(Score, 3) & \".\""
													]
												},
												{
													"type": "comment",
													"text": "Shake the screen for a small amount of time."
												},
												{
													"id": "shake",
													"objectClass": "GameManager",
													"sid": 945095665545029,
													"behaviorType": "ScrollTo",
													"parameters": {
														"magnitude": "32",
														"duration": "0.5",
														"mode": "reducing-magnitude"
													}
												}
											],
											"sid": 392944922711064
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Wait 0.5 seconds before the next step in the ball reveal process."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 583285167428634,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.5",
										"type": "once",
										"tag": "\"BallRevealPart001\""
									}
								}
							],
							"sid": 287915504918585
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the previous timer is over, wait 0.5 seconds before the next step in the ball reveal process."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 212010525330743,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"BallRevealPart001\""
							}
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 182718450371240,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "0.5",
								"type": "once",
								"tag": "\"BallRevealPart002\""
							}
						}
					],
					"sid": 968395630363559
				},
				{
					"eventType": "comment",
					"text": "Once the previous timer is over, return the cup's shadow to its previous position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 617678059569110,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"BallRevealPart002\""
							}
						}
					],
					"actions": [],
					"sid": 435934454788576,
					"children": [
						{
							"eventType": "comment",
							"text": "Pick the cup that has the ball hidden beneath it, and move it down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 457401683634654,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.HasTheBall = 1"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 649822675053095,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "Self.PreviousY",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 478315818200597,
							"children": [
								{
									"eventType": "comment",
									"text": "Pick the cup's shadow, and return it to its previous position."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 238059452688255,
											"parameters": {
												"object": "CupShadow",
												"expression": "CupShadow.Index = Cup.Index"
											}
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "CupShadow",
											"sid": 337926307001614,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Position\"",
												"property": "position",
												"end-x": "Self.PreviousX",
												"end-y": "Self.PreviousY",
												"time": "0.5",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 543052899884704
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Wait 0.5 seconds before the next step in the ball reveal process."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 673093333093915,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.5",
										"type": "once",
										"tag": "\"BallRevealPart003\""
									}
								}
							],
							"sid": 110196089327038
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the previous timer is over, attach the ball and the cup's shadow to the cup."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 454198867313283,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"BallRevealPart003\""
							}
						}
					],
					"actions": [],
					"sid": 194518271337275,
					"children": [
						{
							"eventType": "comment",
							"text": "Pick the cup that has the ball hidden beneath it, and attach it ball to it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 182721027420836,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.HasTheBall = 1"
									}
								}
							],
							"actions": [
								{
									"id": "add-child",
									"objectClass": "Cup",
									"sid": 359864618637015,
									"parameters": {
										"child": "Ball",
										"transform-x": true,
										"transform-y": true,
										"transform-w": true,
										"transform-h": true,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 553059285021853,
							"children": [
								{
									"eventType": "comment",
									"text": "Pick the cup's shadow, and attach it to it."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 977997250669388,
											"parameters": {
												"object": "CupShadow",
												"expression": "CupShadow.Index = Cup.Index"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "Cup",
											"sid": 756808951493773,
											"parameters": {
												"child": "CupShadow",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": false,
												"transform-o": false,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": true
											}
										}
									],
									"sid": 481051593474598
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Wait 0.5 seconds before the next step in the ball reveal process."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 847141087207837,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.5",
										"type": "once",
										"tag": "\"BallRevealPart004\""
									}
								}
							],
							"sid": 806210674247780
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the previous timer is over, move a random cup."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 638946803214961,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"BallRevealPart004\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "MoveRandomCup",
							"sid": 446517527880468
						}
					],
					"sid": 370774884880598
				},
				{
					"eventType": "comment",
					"text": "Swap the position of two random cups."
				},
				{
					"functionName": "MoveRandomCup",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Create a permutation table with the same amount of entries as cups."
						},
						{
							"id": "createPermutationTable",
							"objectClass": "AdvancedRandom",
							"sid": 649174678235385,
							"parameters": {
								"length": "Cup.Count",
								"offset": "0"
							}
						}
					],
					"sid": 285663967813071,
					"children": [
						{
							"eventType": "comment",
							"text": "The X position of the first cup."
						},
						{
							"eventType": "variable",
							"name": "FirstCupX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 776622754942006
						},
						{
							"eventType": "comment",
							"text": "The X position of the second cup."
						},
						{
							"eventType": "variable",
							"name": "SecondCupX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 997270501639102
						},
						{
							"eventType": "comment",
							"text": "The horizontal distance between both cups."
						},
						{
							"eventType": "variable",
							"name": "DistanceBetweenCups",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 617280619265940
						},
						{
							"eventType": "comment",
							"text": "Pick the first cup and store its position, so it can referred later."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 429817324087055,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.Index = AdvancedRandom.Permutation(0)"
									}
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "Cup",
									"sid": 112147076154644,
									"behaviorType": "Tween"
								},
								{
									"callFunction": "StoreCupPosition",
									"sid": 509701704503234,
									"parameters": [
										"Cup.Index"
									]
								},
								{
									"type": "comment",
									"text": "The X position needs to be stored separately, since it's hard to reference both cups at the same time in a single event."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 915245856177111,
									"parameters": {
										"variable": "FirstCupX",
										"value": "Cup.X"
									}
								}
							],
							"sid": 953900660555321
						},
						{
							"eventType": "comment",
							"text": "Pick the seconds cup and store its position, so it can referred later."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 214476066144381,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.Index = AdvancedRandom.Permutation(1)"
									}
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "Cup",
									"sid": 299600551959690,
									"behaviorType": "Tween"
								},
								{
									"callFunction": "StoreCupPosition",
									"sid": 350962065403052,
									"parameters": [
										"Cup.Index"
									]
								},
								{
									"type": "comment",
									"text": "The X position needs to be stored separately, since it's hard to reference both cups at the same time in a single event."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 437967809371588,
									"parameters": {
										"variable": "SecondCupX",
										"value": "Cup.X"
									}
								}
							],
							"sid": 334384785731254
						},
						{
							"eventType": "comment",
							"text": "Calculate and store the horizontal distance between both cups."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 870341227797007,
									"parameters": {
										"variable": "DistanceBetweenCups",
										"value": "distance(FirstCupX, 0, SecondCupX, 0)"
									}
								}
							],
							"sid": 463341551501130
						},
						{
							"eventType": "comment",
							"text": "Pick the first cup, and move it to the position of the second cup, using a series of tween animations."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 213782674473105,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.Index = AdvancedRandom.Permutation(0)"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 874945349944436,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"X\"",
										"property": "offsetX",
										"end-value": "SecondCupX",
										"time": "Functions.GetDuration(DistanceBetweenCups)",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 367872751246562,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "Self.PreviousY - 64",
										"time": "Functions.GetDuration(DistanceBetweenCups) / 2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Cup",
									"sid": 758960275931930,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Scale\"",
										"property": "scale",
										"end-x": "0.9",
										"end-y": "0.9",
										"time": "Functions.GetDuration(DistanceBetweenCups) / 2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Move the first cup to the bottom of the layer."
								},
								{
									"id": "move-to-bottom",
									"objectClass": "Cup",
									"sid": 422694838053739
								}
							],
							"sid": 160876308922419
						},
						{
							"eventType": "comment",
							"text": "Pick the second cup, and move it to the position of the first cup, using a series of tween animations."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 486610793077123,
									"parameters": {
										"object": "Cup",
										"expression": "Cup.Index = AdvancedRandom.Permutation(1)"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 837685840957292,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"X\"",
										"property": "offsetX",
										"end-value": "FirstCupX",
										"time": "Functions.GetDuration(DistanceBetweenCups)",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Cup",
									"sid": 432324469309575,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Y\"",
										"property": "offsetY",
										"end-value": "Self.PreviousY + 64",
										"time": "Functions.GetDuration(DistanceBetweenCups) / 2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Cup",
									"sid": 640225167569323,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Scale\"",
										"property": "scale",
										"end-x": "1.1",
										"end-y": "1.1",
										"time": "Functions.GetDuration(DistanceBetweenCups) / 2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Move second cup to the top of the layer."
								},
								{
									"id": "move-to-top",
									"objectClass": "Cup",
									"sid": 519923633865266
								}
							],
							"sid": 530716160887947
						},
						{
							"eventType": "comment",
							"text": "Move the ball to the bottom of the layer."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "move-to-bottom",
									"objectClass": "Ball",
									"sid": 780186949465468
								},
								{
									"type": "comment",
									"text": "Start a timer with the same duration as the cups movement."
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 133223514842231,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Functions.GetDuration(DistanceBetweenCups)",
										"type": "once",
										"tag": "\"CupIsDoneMoving\""
									}
								}
							],
							"sid": 828574755552048
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the cup is done moving, check if another cup needs to be moved or not."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 221313536385747,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"CupIsDoneMoving\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Reduce the remaining moves by one."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 768042517262858,
							"parameters": {
								"variable": "RemainingMoves",
								"value": "clamp(RemainingMoves - 1, 0, TotalMoves)"
							}
						}
					],
					"sid": 276946468588193,
					"children": [
						{
							"eventType": "comment",
							"text": "If the remaining moves is higher than zero, move another cup."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 121094420714509,
									"parameters": {
										"value": "RemainingMoves > 0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "MoveRandomCup",
									"sid": 623994162926663
								}
							],
							"sid": 798558579806873
						},
						{
							"eventType": "comment",
							"text": "However, if the remaining moves is equal to zero, give control back to the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 866808450161524
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 411753912393384,
									"parameters": {
										"value": "RemainingMoves = 0"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 188071329975215,
									"parameters": {
										"variable": "AllowPlayerInput",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Update the text in the HUD."
								},
								{
									"callFunction": "SetText",
									"sid": 693859588242767,
									"parameters": [
										"\"Message\"",
										"\"YOUR TURN! FIND THE BALL.\""
									]
								}
							],
							"sid": 902599596724773
						}
					]
				}
			],
			"sid": 120371101054435
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "AssistFunctions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Store the position of a cup, so it can be referred later."
				},
				{
					"functionName": "StoreCupPosition",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "CupIndex",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 974701648803744
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 858937880779368,
							"parameters": {
								"object": "Cup",
								"expression": "Cup.Index = CupIndex"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Cup",
							"sid": 136545943273126,
							"parameters": {
								"instance-variable": "PreviousX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Cup",
							"sid": 112831586499570,
							"parameters": {
								"instance-variable": "PreviousY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 537639216903096
				},
				{
					"eventType": "comment",
					"text": "Calculate and return the duration of a tween animation between two cups, based on the current difficulty level."
				},
				{
					"functionName": "GetDuration",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "DistanceBetweenCups",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 987236733256426
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 549432403306072,
							"parameters": {
								"value": "DistanceBetweenCups / lerp(EASYDIVIDER, HARDDIVIDER, NormalizedDifficulty)"
							}
						}
					],
					"sid": 495404064470170
				},
				{
					"eventType": "comment",
					"text": "Set the text of a text object to a custom string."
				},
				{
					"functionName": "SetText",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "TextID",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 486276538311583
						},
						{
							"name": "Text",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 411271935359799
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 588349443132358,
							"parameters": {
								"object": "Text",
								"expression": "Text.ID = TextID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Display custom text."
						},
						{
							"id": "set-text",
							"objectClass": "Text",
							"sid": 401928094432850,
							"parameters": {
								"text": "Text"
							}
						},
						{
							"type": "comment",
							"text": "Stop all tween animations."
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Text",
							"sid": 797386709430110,
							"behaviorType": "Tween"
						},
						{
							"type": "comment",
							"text": "Move the text down."
						},
						{
							"id": "set-y",
							"objectClass": "Text",
							"sid": 329092258801393,
							"parameters": {
								"y": "Self.DefaultY + 64"
							}
						},
						{
							"type": "comment",
							"text": "Make the text gradually move up over time."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Text",
							"sid": 239039020631980,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Y\"",
								"property": "offsetY",
								"end-value": "Self.DefaultY",
								"time": "0.25",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set the text's opacity to zero."
						},
						{
							"id": "set-opacity",
							"objectClass": "Text",
							"sid": 366302894263297,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Make the text gradually appear over time."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Text",
							"sid": 529097854735229,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Opacity\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.25",
								"ease": "noease",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 149335251246453
				},
				{
					"eventType": "comment",
					"text": "Update the order of all HUD elements, so they're properly displayed."
				},
				{
					"functionName": "UpdateHUDElementsOrder",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 959680823950395,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 518225015499145,
									"parameters": {
										"object": "Text"
									}
								}
							],
							"actions": [],
							"sid": 727461424786023,
							"children": [
								{
									"eventType": "comment",
									"text": "If the HUD element isn't tagged as a shadow, move it to the top of the layer."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 882381882619967,
											"parameters": {
												"value": "Text.IsShadow = 0"
											}
										}
									],
									"actions": [
										{
											"id": "move-to-top",
											"objectClass": "Text",
											"sid": 542930799878261
										}
									],
									"sid": 736791910692530
								},
								{
									"eventType": "comment",
									"text": "However, if the HUD element is tagged as a shadow, move to it to the bottom of the layer."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 608711009342527
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 741613475250386,
											"parameters": {
												"value": "Text.IsShadow = 1"
											}
										}
									],
									"actions": [
										{
											"id": "move-to-bottom",
											"objectClass": "Text",
											"sid": 109109926100957
										}
									],
									"sid": 687703653370124
								}
							]
						}
					]
				}
			],
			"sid": 678383244124300
		}
	],
	"sid": 430303402952134
}