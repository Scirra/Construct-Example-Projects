{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Project settings."
		},
		{
			"eventType": "variable",
			"name": "GamepadDeadzone",
			"type": "number",
			"initialValue": "50",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 150922619252988
		},
		{
			"eventType": "comment",
			"text": "Project references."
		},
		{
			"eventType": "variable",
			"name": "InputLeft",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 213660477946553
		},
		{
			"eventType": "variable",
			"name": "InputRight",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 772487823708823
		},
		{
			"eventType": "variable",
			"name": "InputUp",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 327454925403862
		},
		{
			"eventType": "variable",
			"name": "InputDown",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 400109782312389
		},
		{
			"eventType": "variable",
			"name": "HorizontalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 148617655293388
		},
		{
			"eventType": "variable",
			"name": "VerticalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": true,
			"isConstant": false,
			"sid": 974477479303786
		},
		{
			"eventType": "comment",
			"text": "Player properties."
		},
		{
			"eventType": "variable",
			"name": "PlayerDirection",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 572205369236741
		},
		{
			"eventType": "variable",
			"name": "LookingAngle",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 712159789913432
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset global variables to prevent traces from previous sessions."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 796671218886728
								}
							],
							"actions": [
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 927961188957356
								}
							],
							"sid": 717612525165036
						},
						{
							"eventType": "comment",
							"text": "Change the player collision filter, so it only collides with the ground and the teleport platform."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerCollision",
									"sid": 394898074040406
								}
							],
							"actions": [
								{
									"id": "set-solid-collision-filter",
									"objectClass": "PlayerCollision",
									"sid": 934781648004972,
									"parameters": {
										"mode": "inclusive",
										"tags": "\"Ground TeleportPlatform\""
									}
								}
							],
							"sid": 886627428359445
						},
						{
							"eventType": "comment",
							"text": "Pin all player graphics (bottom, top and gun) to the player collision, so they always stay together as a single piece."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphicBottom",
									"sid": 594730415360274
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphicBottom",
									"sid": 841884366138315,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "pin-to-object-properties",
									"objectClass": "PlayerGraphicBottom",
									"sid": 456359055717821,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "PlayerCollision",
										"x": true,
										"y": true,
										"angle": false,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								}
							],
							"sid": 960983322737064
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphicTop",
									"sid": 430859273465984
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphicTop",
									"sid": 668841046590371,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "pin-to-object-properties",
									"objectClass": "PlayerGraphicTop",
									"sid": 940064951432858,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "PlayerCollision",
										"x": true,
										"y": true,
										"angle": false,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								}
							],
							"sid": 755719022043766
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "Gun",
									"sid": 904841670243045
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "Gun",
									"sid": 489992744919472,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "\"Gun\""
									}
								},
								{
									"id": "pin-to-object-imagepoint",
									"objectClass": "Gun",
									"sid": 278717935986251,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "PlayerCollision",
										"image-point": "\"Gun\"",
										"angle": false,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								},
								{
									"type": "comment",
									"text": "Also move the gun above the rest of the player body."
								},
								{
									"id": "move-to-top",
									"objectClass": "Gun",
									"sid": 873409127372215
								}
							],
							"sid": 704062512418317
						}
					],
					"sid": 784603836528212
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerControls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Toggle input left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 940876619458367,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 485439395839532,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-left"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 799593633071819,
									"parameters": {
										"variable": "InputLeft",
										"value": "1"
									}
								}
							],
							"sid": 264402595788968,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 517121735068294
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 509036833293158,
									"parameters": {
										"variable": "InputLeft",
										"value": "0"
									}
								}
							],
							"sid": 147251037366255
						},
						{
							"eventType": "comment",
							"text": "Toggle input right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 419887578263887,
									"parameters": {
										"key": 39
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 910485628604972,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-right"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 770128768941717,
									"parameters": {
										"variable": "InputRight",
										"value": "1"
									}
								}
							],
							"sid": 600039708179932,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 410723839389955
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 660905612473097,
									"parameters": {
										"variable": "InputRight",
										"value": "0"
									}
								}
							],
							"sid": 662861480517478
						},
						{
							"eventType": "comment",
							"text": "Toggle input up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 255953009566708,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 627308229824476,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-up"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 100680386816992,
									"parameters": {
										"variable": "InputUp",
										"value": "1"
									}
								}
							],
							"sid": 482093227495196,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 655683574744947
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 805328293120475,
									"parameters": {
										"variable": "InputUp",
										"value": "0"
									}
								}
							],
							"sid": 234141806110642
						},
						{
							"eventType": "comment",
							"text": "Toggle input down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 576546650518011,
									"parameters": {
										"key": 40
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 902213117505964,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-down"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 388622910498235,
									"parameters": {
										"variable": "InputDown",
										"value": "1"
									}
								}
							],
							"sid": 384693957057056,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 830518266240592
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 934873951466901,
									"parameters": {
										"variable": "InputDown",
										"value": "0"
									}
								}
							],
							"sid": 444235053526656
						},
						{
							"eventType": "comment",
							"text": "Calculate and store both horizontal and vertical axis in global variables, so they can be accessed from the whole project."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 564136566458964
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 539771525466703,
									"parameters": {
										"variable": "HorizontalAxis",
										"value": "InputRight - InputLeft"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 315598707534520,
									"parameters": {
										"variable": "VerticalAxis",
										"value": "InputDown - InputUp"
									}
								}
							],
							"sid": 913450979691900
						},
						{
							"eventType": "comment",
							"text": "Do the same as above for the looking angle, but only of at least one of the axis isn't equal to zero."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 999591742832321,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 668318314665466,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 878582705820237,
									"parameters": {
										"variable": "LookingAngle",
										"value": "round(angle(0, 0, HorizontalAxis, VerticalAxis))"
									}
								},
								{
									"type": "comment",
									"text": "Also update the gun angle."
								},
								{
									"id": "set-angle",
									"objectClass": "Gun",
									"sid": 677460855282863,
									"parameters": {
										"angle": "LookingAngle"
									}
								}
							],
							"sid": 352532950668873,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player walk depending on the value of the horizontal axis."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 479627980460247,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 901511686623106,
									"behaviorType": "Platform",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 273983480310370,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 294778537487882,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 325467831404072,
									"behaviorType": "Platform",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 400847131051436,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Make the player jump."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 483631168435843,
									"parameters": {
										"key": 90
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 892685996869684,
									"parameters": {
										"gamepad": "0",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 801526876848270,
									"behaviorType": "Platform",
									"parameters": {
										"control": "jump"
									}
								}
							],
							"sid": 145191292488866,
							"isOrBlock": true
						}
					],
					"sid": 284160857497412
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Set the initial settings for the player, so it starts with the machine gun in hands."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphicTop",
									"sid": 900667795902817
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 560916567667284,
									"parameters": {
										"animation": "\"Forward\"",
										"from": "beginning"
									}
								}
							],
							"sid": 620489444563393
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "Gun",
									"sid": 767276487866448
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 936039470389659,
									"parameters": {
										"frame-number": "2"
									}
								}
							],
							"sid": 315431606704396
						},
						{
							"eventType": "comment",
							"text": "Mirror the player graphics while it's moving."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 943995111840471,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 1,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Top and bottom direction."
								},
								{
									"id": "set-width",
									"objectClass": "PlayerGraphicBottom",
									"sid": 390998237056859,
									"parameters": {
										"width": "Self.ImageWidth * HorizontalAxis"
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerGraphicTop",
									"sid": 870982086452036,
									"parameters": {
										"width": "Self.ImageWidth * HorizontalAxis"
									}
								},
								{
									"type": "comment",
									"text": "Gun direction."
								},
								{
									"id": "set-height",
									"objectClass": "Gun",
									"sid": 512431614775505,
									"parameters": {
										"height": "Self.ImageHeight * HorizontalAxis"
									}
								},
								{
									"type": "comment",
									"text": "Player direction."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 532126910255740,
									"parameters": {
										"variable": "PlayerDirection",
										"value": "HorizontalAxis"
									}
								}
							],
							"sid": 426261559791022
						},
						{
							"eventType": "comment",
							"text": "Change the player top animation and the gun animation depending on the player input."
						},
						{
							"eventType": "comment",
							"text": "Straight up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 628869316516492,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 415191382400296,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 371366432431444,
									"parameters": {
										"animation": "\"Up\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 165226804458249,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 268038549736918
						},
						{
							"eventType": "comment",
							"text": "Diagonal up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 424674664606400,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 981798989292442,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 989031135173370,
									"parameters": {
										"animation": "\"DiagonalUp\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 122641793406581,
									"parameters": {
										"frame-number": "1"
									}
								}
							],
							"sid": 619664216823241
						},
						{
							"eventType": "comment",
							"text": "Forward."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 889877244754799,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 194687539823128,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 933992001915144,
									"parameters": {
										"animation": "\"Forward\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 414762640511134,
									"parameters": {
										"frame-number": "2"
									}
								}
							],
							"sid": 446457301256836
						},
						{
							"eventType": "comment",
							"text": "Diagonal down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 585822914240695,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 1,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 696356011521333,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 152936875130610,
									"parameters": {
										"animation": "\"DiagonalDown\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 701354462212184,
									"parameters": {
										"frame-number": "3"
									}
								}
							],
							"sid": 515840081890002
						},
						{
							"eventType": "comment",
							"text": "Straight down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 719929969163999,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 301479514983069,
									"parameters": {
										"variable": "VerticalAxis",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicTop",
									"sid": 198179532636589,
									"parameters": {
										"animation": "\"Down\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 816170853869948,
									"parameters": {
										"frame-number": "4"
									}
								}
							],
							"sid": 438557166118357
						},
						{
							"eventType": "comment",
							"text": "Change player bottom animations depending on the action it's currently performing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 856515258548587,
									"behaviorType": "Platform"
								}
							],
							"actions": [],
							"sid": 389764283885862,
							"children": [
								{
									"eventType": "comment",
									"text": "Walk animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "PlayerCollision",
											"sid": 207825930110399,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphicBottom",
											"sid": 874640397194834,
											"parameters": {
												"animation": "\"Walk\"",
												"from": "beginning"
											}
										}
									],
									"sid": 452766029252684
								},
								{
									"eventType": "comment",
									"text": "Idle animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 296767768499252
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphicBottom",
											"sid": 923675004113794,
											"parameters": {
												"animation": "\"Idle\"",
												"from": "beginning"
											}
										}
									],
									"sid": 207306889735895
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Jump animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-jumping",
									"objectClass": "PlayerCollision",
									"sid": 693293609655887,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicBottom",
									"sid": 813513575181665,
									"parameters": {
										"animation": "\"Jump\"",
										"from": "beginning"
									}
								}
							],
							"sid": 491575208204455
						},
						{
							"eventType": "comment",
							"text": "Fall animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-falling",
									"objectClass": "PlayerCollision",
									"sid": 651001489692675,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "PlayerGraphicBottom",
									"sid": 800050869132074,
									"parameters": {
										"animation": "\"Fall\"",
										"from": "beginning"
									}
								}
							],
							"sid": 163021654061859
						}
					],
					"sid": 921833879566076
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerParticles",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Leave a trail of dust behind the player while it's moving on the floor."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-moving",
									"objectClass": "PlayerCollision",
									"sid": 463773975665385,
									"behaviorType": "Platform"
								},
								{
									"id": "is-on-floor",
									"objectClass": "PlayerCollision",
									"sid": 383060393704507,
									"behaviorType": "Platform"
								}
							],
							"actions": [],
							"sid": 521940510826457,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 558539828216086,
											"parameters": {
												"interval-seconds": "0.25"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "PlayerGraphicBottom",
											"sid": 581109926964249,
											"parameters": {
												"object": "StepDust",
												"layer": "\"World\"",
												"image-point": "\"FeetCenter\"",
												"create-hierarchy": false
											}
										},
										{
											"type": "comment",
											"text": "Make the dust match the player direction."
										},
										{
											"id": "set-width",
											"objectClass": "StepDust",
											"sid": 805112612424629,
											"parameters": {
												"width": "Self.Width*PlayerDirection"
											}
										}
									],
									"sid": 893563852312136
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Spawn a bit of dust below the player when it jumps."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-landed",
									"objectClass": "PlayerCollision",
									"sid": 513471347308033,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphicBottom",
									"sid": 899873107505722,
									"parameters": {
										"object": "LandDust",
										"layer": "\"World\"",
										"image-point": "\"FeetCenter\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 875075074408110
						},
						{
							"eventType": "comment",
							"text": "Spawn a bit of dust below the player when it lands."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-jump",
									"objectClass": "PlayerCollision",
									"sid": 787812836955384,
									"behaviorType": "Platform"
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphicBottom",
									"sid": 143987120817735,
									"parameters": {
										"object": "JumpDust",
										"layer": "\"World\"",
										"image-point": "\"FeetCenter\"",
										"create-hierarchy": false
									}
								}
							],
							"sid": 214279439234230
						},
						{
							"eventType": "comment",
							"text": "Once any of the dust particles are done with their animations, destroy them to prevent any sort of CPU overload."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "StepDust",
									"sid": 125413472384767,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "StepDust",
									"sid": 552600501064406
								}
							],
							"sid": 120511617151442
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "LandDust",
									"sid": 808055458659693,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "LandDust",
									"sid": 781650530773062
								}
							],
							"sid": 877235922040677
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "JumpDust",
									"sid": 870443481814489,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "JumpDust",
									"sid": 599271824549731
								}
							],
							"sid": 366382635788223
						}
					],
					"sid": 858999474960428
				}
			],
			"sid": 438447210557978
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Flag",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the teleport flag by moving it to the top of the teleporter."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "TeleportFlag",
							"sid": 691960503749229
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "TeleportFlag",
							"sid": 200070684080425,
							"parameters": {
								"object": "TeleportPlatform",
								"image-point-optional": "\"Flag\""
							}
						}
					],
					"sid": 998371177364058
				},
				{
					"eventType": "comment",
					"text": "If the player collides with a charged teleporter, destroy the player and create a big white flash."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 632223383188225,
							"parameters": {
								"object": "TeleportFlag"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TeleportFlag",
							"sid": 763642753172528,
							"parameters": {
								"instance-variable": "Charged"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "TeleportFlag",
							"sid": 215487575064132,
							"parameters": {
								"instance-variable": "Charged",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "PlayerCollision",
							"sid": 738698704844020
						},
						{
							"id": "spawn-another-object",
							"objectClass": "TeleportPlatform",
							"sid": 480613431583844,
							"parameters": {
								"object": "Flash",
								"layer": "\"World\"",
								"image-point": "\"Flash\"",
								"create-hierarchy": false
							}
						}
					],
					"sid": 444812351366441
				},
				{
					"eventType": "comment",
					"text": "Adjust the size of the flash based on the ceiling height, which is found by casting a ray towards it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Flash",
							"sid": 475468299004326
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "Flash",
							"sid": 784168343081722,
							"parameters": {
								"width": "16",
								"height": "0"
							}
						},
						{
							"id": "cast-ray",
							"objectClass": "Flash",
							"sid": 494566479424157,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.X",
								"from-y": "Self.Y",
								"to-x": "Self.X",
								"to-y": "Self.Y-Self.LineOfSight.Range",
								"use-collision-cells": true
							}
						}
					],
					"sid": 984648318403167,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "ray-intersected",
									"objectClass": "Flash",
									"sid": 589851470152846,
									"behaviorType": "LineOfSight"
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Flash",
									"sid": 181821924950752,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HeightUp\"",
										"property": "offsetHeight",
										"end-value": "Self.LineOfSight.HitDistance",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 852766279747460
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the flash is matching the ceiling height, destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Flash",
							"sid": 856210213126702,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HeightUp\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Flash",
							"sid": 128371963724558,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"WidthDown\"",
								"property": "offsetWidth",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 735183857432216
				}
			],
			"sid": 865963099006963
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "How fast the camera will track the player (lower values are faster)."
				},
				{
					"eventType": "variable",
					"name": "Speed",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 910891188181431
				},
				{
					"eventType": "comment",
					"text": "Constantly track the player position, by moving the camera towards it with linear interpolation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 742960399605355
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Camera",
							"sid": 212391076383631,
							"parameters": {
								"x": "lerp(Self.X, PlayerCollision.ImagePointX(\"Center\"), Speed*60*dt)",
								"y": "lerp(Self.Y, PlayerCollision.ImagePointY(\"Center\"), Speed*60*dt)"
							}
						}
					],
					"sid": 435649057504302
				}
			],
			"sid": 552517355456284
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Spike",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "If the player collides with a spike, restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 174515758362378,
							"parameters": {
								"object": "Spike"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 699463130295548
						}
					],
					"sid": 358273904108520
				}
			],
			"sid": 269062095261804
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Guns",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Cycle through all available guns in the arsenal."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 935674093074795,
							"parameters": {
								"key": 67
							}
						}
					],
					"actions": [
						{
							"callFunction": "CycleGuns",
							"sid": 494135271132198,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 353160525179545
				},
				{
					"eventType": "comment",
					"text": "How many guns are inside the player bag."
				},
				{
					"eventType": "variable",
					"name": "GunBagSize",
					"type": "number",
					"initialValue": "3",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 177222322810748
				},
				{
					"eventType": "comment",
					"text": "Cycle through all available guns in the arsenal."
				},
				{
					"functionName": "CycleGuns",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Direction",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 502366477357684
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "add-to-instvar",
							"objectClass": "PlayerCollision",
							"sid": 175026932407031,
							"parameters": {
								"instance-variable": "GunType",
								"value": "Direction"
							}
						}
					],
					"sid": 580238768602536,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset the cycle position back to zero if it exceeds the gun bag size."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerCollision",
									"sid": 886805054513007,
									"parameters": {
										"instance-variable": "GunType",
										"comparison": 5,
										"value": "GunBagSize"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "PlayerCollision",
									"sid": 462948998773884,
									"parameters": {
										"instance-variable": "GunType",
										"value": "0"
									}
								}
							],
							"sid": 519511662448289
						},
						{
							"eventType": "variable",
							"name": "PreviousGunFrame",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 301340379259544
						},
						{
							"eventType": "comment",
							"text": "Store the current gun frame inside a local variable, so it can be accessed after the animation has been swapped."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 203785190389934,
									"parameters": {
										"variable": "PreviousGunFrame",
										"value": "Gun.AnimationFrame"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "Gun",
									"sid": 740042244444915,
									"parameters": {
										"animation": "\"Gun\"&PlayerCollision.GunType",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Gun",
									"sid": 520954701559188,
									"parameters": {
										"frame-number": "PreviousGunFrame"
									}
								}
							],
							"sid": 672121796461249
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Shoot the current gun."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 306831888936663,
							"parameters": {
								"key": 88
							}
						},
						{
							"id": "is-button-down",
							"objectClass": "Gamepad",
							"sid": 488750282248563,
							"parameters": {
								"gamepad": "0",
								"button": "button-b"
							}
						}
					],
					"actions": [],
					"sid": 364376937888438,
					"children": [
						{
							"eventType": "comment",
							"text": "Shoot the machine gun, but only if it's not on cooldown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerCollision",
									"sid": 144971466094354,
									"parameters": {
										"instance-variable": "GunType",
										"comparison": 0,
										"value": "0"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "PlayerCollision",
									"sid": 810178764671188,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"MachineGunCooldown\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Start a new cooldown timer."
								},
								{
									"id": "start-timer",
									"objectClass": "PlayerCollision",
									"sid": 417456044092195,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.1",
										"type": "once",
										"tag": "\"MachineGunCooldown\""
									}
								},
								{
									"type": "comment",
									"text": "Shoot a bullet based on the player angle."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 457326651287724,
									"parameters": {
										"object": "Bullet",
										"layer": "\"World\"",
										"image-point": "\"Muzzle\"",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-y",
									"objectClass": "Bullet",
									"sid": 271276185487314,
									"parameters": {
										"y": "Self.Y + random(-2, 2)"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "Bullet",
									"sid": 963499395350118,
									"parameters": {
										"angle": "Self.Angle + random(-5, 5)"
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "Bullet",
									"sid": 134869009801842,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "angle(0, 0, PlayerDirection, 0)"
									}
								},
								{
									"type": "comment",
									"text": "Spawn a muzzle flash from the gun tip."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 201778367922528,
									"parameters": {
										"object": "MuzzleFlash",
										"layer": "\"EffectsAbove\"",
										"image-point": "\"Muzzle\"",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MuzzleFlash",
									"sid": 510522895533645,
									"parameters": {
										"angle": "random(0, 360)"
									}
								},
								{
									"type": "comment",
									"text": "Spawn an extra flash for a more impatcful effect."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 154424496169613,
									"parameters": {
										"object": "ExtraFlash",
										"layer": "\"EffectsAbove\"",
										"image-point": "\"Muzzle\"",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle",
									"objectClass": "ExtraFlash",
									"sid": 922917344921349,
									"parameters": {
										"angle": "0"
									}
								},
								{
									"id": "pin-to-object-imagepoint",
									"objectClass": "MuzzleFlash",
									"sid": 569455919392631,
									"behaviorType": "Pin",
									"parameters": {
										"pin-to": "Gun",
										"image-point": "\"Muzzle\"",
										"angle": true,
										"width-type": "no",
										"height-type": "no",
										"z": false
									}
								},
								{
									"type": "comment",
									"text": "Spawn a shell from the gun chamber."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 157204392840256,
									"parameters": {
										"object": "Shell",
										"layer": "\"World\"",
										"image-point": "\"Chamber\"",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "Shell",
									"sid": 827493354670084,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "270 + random(-30, 30)"
									}
								}
							],
							"sid": 960474277324187
						},
						{
							"eventType": "comment",
							"text": "Shoot the laser gun, but only if it's not on cooldown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerCollision",
									"sid": 827068819647936,
									"parameters": {
										"instance-variable": "GunType",
										"comparison": 0,
										"value": "1"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "PlayerCollision",
									"sid": 678785480995732,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"LaserGunCooldown\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Start a new cooldown timer."
								},
								{
									"id": "start-timer",
									"objectClass": "PlayerCollision",
									"sid": 183192436779873,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.5",
										"type": "once",
										"tag": "\"LaserGunCooldown\""
									}
								},
								{
									"type": "comment",
									"text": "Cast ray from the gun tip."
								},
								{
									"id": "cast-ray",
									"objectClass": "Gun",
									"sid": 110859138628584,
									"behaviorType": "LineOfSight",
									"parameters": {
										"from-x": "Self.ImagePointX(\"Muzzle\")",
										"from-y": "Self.ImagePointY(\"Muzzle\")",
										"to-x": "Self.ImagePointX(\"Muzzle\") + cos(LookingAngle) * Self.LineOfSight.Range",
										"to-y": "Self.ImagePointY(\"Muzzle\") + sin(LookingAngle) * Self.LineOfSight.Range",
										"use-collision-cells": true
									}
								}
							],
							"sid": 609999766758554,
							"children": [
								{
									"eventType": "comment",
									"text": "If the ray intersects a solid object, spawn a shock with the same length as the casted ray."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "ray-intersected",
											"objectClass": "Gun",
											"sid": 949474318553255,
											"behaviorType": "LineOfSight"
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Spawn main shock object."
										},
										{
											"id": "spawn-another-object",
											"objectClass": "Gun",
											"sid": 881206528015097,
											"parameters": {
												"object": "Shock",
												"layer": "\"EffectsAbove\"",
												"image-point": "\"Muzzle\"",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-width",
											"objectClass": "Shock",
											"sid": 994528337261359,
											"parameters": {
												"width": "Gun.LineOfSight.HitDistance"
											}
										},
										{
											"id": "set-angle",
											"objectClass": "Shock",
											"sid": 744689863146035,
											"parameters": {
												"angle": "LookingAngle"
											}
										},
										{
											"type": "comment",
											"text": "Also spawn a few particles around the main shock object."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 431681221861824,
											"parameters": {
												"object-to-create": "ShockExplosion",
												"layer": "\"EffectsAbove\"",
												"x": "Gun.LineOfSight.HitX",
												"y": "Gun.LineOfSight.HitY",
												"create-hierarchy": false
											}
										},
										{
											"id": "spawn-another-object",
											"objectClass": "Gun",
											"sid": 120210136000679,
											"parameters": {
												"object": "ShockExplosion",
												"layer": "\"EffectsAbove\"",
												"image-point": "\"Muzzle\"",
												"create-hierarchy": false
											}
										},
										{
											"type": "comment",
											"text": "Spawn an extra flash for a more impatcful effect."
										},
										{
											"id": "spawn-another-object",
											"objectClass": "Gun",
											"sid": 727932237214565,
											"parameters": {
												"object": "ExtraFlash",
												"layer": "\"EffectsAbove\"",
												"image-point": "\"Muzzle\"",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-angle",
											"objectClass": "ExtraFlash",
											"sid": 797930845411213,
											"parameters": {
												"angle": "0"
											}
										}
									],
									"sid": 297181822952936,
									"children": [
										{
											"eventType": "comment",
											"text": "Spawn sparkles around the hit area."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 271862621518026,
													"parameters": {
														"count": "4"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 802116929603175,
													"parameters": {
														"object-to-create": "ShockSparkles",
														"layer": "\"EffectsAbove\"",
														"x": "Gun.LineOfSight.HitX",
														"y": "Gun.LineOfSight.HitY",
														"create-hierarchy": false
													}
												},
												{
													"type": "comment",
													"text": "Randomize the angle of motion and speed of each spark individually."
												},
												{
													"id": "set-angle-of-motion",
													"objectClass": "ShockSparkles",
													"sid": 910484102387063,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "LookingAngle + 180 + random(-5, 5)"
													}
												},
												{
													"id": "set-speed",
													"objectClass": "ShockSparkles",
													"sid": 297693341500905,
													"behaviorType": "Bullet",
													"parameters": {
														"speed": "Self.Bullet.Speed + random(-256, 256)"
													}
												}
											],
											"sid": 972203276417307
										},
										{
											"eventType": "variable",
											"name": "LoopSize",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 825001467909661
										},
										{
											"eventType": "comment",
											"text": "Calculate the loop size based on the shock length."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 563047024273233,
													"parameters": {
														"variable": "LoopSize",
														"value": "floor(Shock.Width / 16)"
													}
												}
											],
											"sid": 662924005030049
										},
										{
											"eventType": "comment",
											"text": "Spawn perfectly spaced particles along the shock object."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "repeat",
													"objectClass": "System",
													"sid": 404996258585593,
													"parameters": {
														"count": "LoopSize"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 858543275131219,
													"parameters": {
														"object-to-create": "ShockParticles",
														"layer": "\"EffectsAbove\"",
														"x": "Shock.X + cos(LookingAngle) * loopindex * (Shock.Width / LoopSize)",
														"y": "Shock.Y + sin(LookingAngle) * loopindex * (Shock.Width / LoopSize)",
														"create-hierarchy": false
													}
												}
											],
											"sid": 540858164679281
										},
										{
											"eventType": "comment",
											"text": "Deal massive damage to the target."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "Target",
													"sid": 294978393918967,
													"parameters": {
														"unique-id": "Gun.LineOfSight.HitUID"
													}
												}
											],
											"actions": [
												{
													"callFunction": "DamageTarget",
													"sid": 651776890622339,
													"parameters": [
														"Target.UID",
														"3"
													]
												}
											],
											"sid": 721297809682276
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Shoot the missile gun, but only if it's not on cooldown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "PlayerCollision",
									"sid": 458176742119061,
									"parameters": {
										"instance-variable": "GunType",
										"comparison": 0,
										"value": "2"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "PlayerCollision",
									"sid": 279833026861780,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"MissileGunCooldown\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Start a new cooldown timer."
								},
								{
									"id": "start-timer",
									"objectClass": "PlayerCollision",
									"sid": 478259171415326,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.2",
										"type": "once",
										"tag": "\"MissileGunCooldown\""
									}
								},
								{
									"type": "comment",
									"text": "Shoot a missile based on the player angle."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 809357815783050,
									"parameters": {
										"object": "Missile",
										"layer": "\"World\"",
										"image-point": "\"Muzzle\"",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Spawn an extra flash for a more impatcful effect."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "Gun",
									"sid": 603645346635027,
									"parameters": {
										"object": "ExtraFlash",
										"layer": "\"EffectsAbove\"",
										"image-point": "\"Muzzle\"",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle",
									"objectClass": "ExtraFlash",
									"sid": 552426785652008,
									"parameters": {
										"angle": "0"
									}
								},
								{
									"type": "comment",
									"text": "Update the missile trail position."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Missile",
									"sid": 964360336640010,
									"parameters": {
										"instance-variable": "LastX",
										"value": "Self.X"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Missile",
									"sid": 515049834650205,
									"parameters": {
										"instance-variable": "LastY",
										"value": "Self.Y"
									}
								},
								{
									"type": "comment",
									"text": "Track closest target."
								},
								{
									"id": "add-object-to-target",
									"objectClass": "Missile",
									"sid": 705492333054500,
									"behaviorType": "Turret",
									"parameters": {
										"target": "Target"
									}
								},
								{
									"type": "comment",
									"text": "Slightly randomize the missile angle."
								},
								{
									"id": "set-angle",
									"objectClass": "Missile",
									"sid": 251636086548286,
									"parameters": {
										"angle": "Self.Angle + random(-15, 15)"
									}
								}
							],
							"sid": 498491059402359
						}
					],
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Destroy each projectile depending on what they hit."
				},
				{
					"eventType": "comment",
					"text": "If the bullet collides with a wall, simply destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 905014787747352,
							"parameters": {
								"object": "LevelCollision"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Bullet",
							"sid": 265921409891084
						}
					],
					"sid": 560110460080135
				},
				{
					"eventType": "comment",
					"text": "However, if the bullet collides with a target, destroy it and deal damage to the target."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 738590440842623,
							"parameters": {
								"object": "Target"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Bullet",
							"sid": 129466770755570
						},
						{
							"callFunction": "DamageTarget",
							"sid": 265833378129120,
							"parameters": [
								"Target.UID",
								"1"
							]
						}
					],
					"sid": 843671418161372
				},
				{
					"eventType": "comment",
					"text": "If the missile collides with a wall, simply destroy it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Missile",
							"sid": 760185951061450,
							"parameters": {
								"object": "LevelCollision"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Missile",
							"sid": 890197990939902
						}
					],
					"sid": 155190023139342
				},
				{
					"eventType": "comment",
					"text": "However, if the missile collides with a target, destroy it and deal damage to the target."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Missile",
							"sid": 399131275719080,
							"parameters": {
								"object": "Target"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Missile",
							"sid": 444296069324886
						},
						{
							"callFunction": "DamageTarget",
							"sid": 781442643469481,
							"parameters": [
								"Target.UID",
								"3"
							]
						}
					],
					"sid": 826102043563681
				},
				{
					"eventType": "comment",
					"text": "If there's any shock object in the layout, keep scrolling its texture, so it look like it's moving."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 272180077360019,
							"parameters": {
								"first-value": "Shock.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Shock",
							"sid": 119119798244790,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + cos(Self.ShootingAngle) * 60 * dt"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "Shock",
							"sid": 859704219327593,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + sin(Self.ShootingAngle) * 60 * dt"
							}
						}
					],
					"sid": 430691182648049
				},
				{
					"eventType": "comment",
					"text": "Once a bullet is destroyed, spawn a small fire explosion."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Bullet",
							"sid": 331795820544717
						}
					],
					"actions": [
						{
							"id": "spawn-another-object",
							"objectClass": "Bullet",
							"sid": 592717770159690,
							"parameters": {
								"object": "FireExplosion",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Reset the fire explosion angle back to zero."
						},
						{
							"id": "set-angle",
							"objectClass": "FireExplosion",
							"sid": 739910570598450,
							"parameters": {
								"angle": "0"
							}
						}
					],
					"sid": 802478041059482
				},
				{
					"eventType": "comment",
					"text": "Once a missile is destroyed, spawn a sequence of three fire explosions with a slightly randomized position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Missile",
							"sid": 595544936497365
						}
					],
					"actions": [],
					"sid": 311837702433752,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 192645402662112,
									"parameters": {
										"count": "3"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "Missile",
									"sid": 892925471163582,
									"parameters": {
										"object": "FireExplosion",
										"layer": "\"World\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-angle",
									"objectClass": "FireExplosion",
									"sid": 705032214548912,
									"parameters": {
										"angle": "0"
									}
								},
								{
									"id": "move-at-angle",
									"objectClass": "FireExplosion",
									"sid": 643839750404404,
									"parameters": {
										"angle": "(360 / 3) * loopindex + random(-15, 15)",
										"distance": "8 + random(-4, 4)"
									}
								}
							],
							"sid": 486091583946535
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once any of the particles are done with their animations, destroy them to prevent any sort of CPU overload."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "FireExplosion",
							"sid": 352200491385835,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "FireExplosion",
							"sid": 336115394971087
						}
					],
					"sid": 499531872692926
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "ShockExplosion",
							"sid": 279425670740965,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "ShockExplosion",
							"sid": 745202359557321
						}
					],
					"sid": 430054717935336
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "MuzzleFlash",
							"sid": 885356591665961,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "MuzzleFlash",
							"sid": 893612843824665
						}
					],
					"sid": 862736753906750
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "RocketLauncherFireExplosion",
							"sid": 195369542528029,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "RocketLauncherFireExplosion",
							"sid": 905559305517827
						}
					],
					"sid": 374086829614421
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "SmokeExplosion",
							"sid": 263108753127525,
							"parameters": {
								"animation": "\"Default\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "SmokeExplosion",
							"sid": 399629223693681
						}
					],
					"sid": 992522327326022
				},
				{
					"eventType": "comment",
					"text": "If there's any missile on the layout, leave a trail of smoke behind each one of them."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 928291077351474,
							"parameters": {
								"first-value": "Missile.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Spawn smoke trail."
						},
						{
							"id": "spawn-another-object",
							"objectClass": "Missile",
							"sid": 437068573308787,
							"parameters": {
								"object": "SmokeTrail",
								"layer": "\"EffectsBelow\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Point the smoke trail towards the target."
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "SmokeTrail",
							"sid": 609907538258419,
							"parameters": {
								"x": "Missile.LastX",
								"y": "Missile.LastY"
							}
						},
						{
							"type": "comment",
							"text": "Set the correct size."
						},
						{
							"id": "set-width",
							"objectClass": "SmokeTrail",
							"sid": 948059586891870,
							"parameters": {
								"width": "distance(Self.X, Self.Y, Missile.LastX, Missile.LastY)+8"
							}
						},
						{
							"id": "set-height",
							"objectClass": "SmokeTrail",
							"sid": 881532455139851,
							"parameters": {
								"height": "Self.ImageHeight * random(0.25, 1)"
							}
						},
						{
							"type": "comment",
							"text": "Tween the size, so it slowly fades away."
						},
						{
							"id": "tween-one-property",
							"objectClass": "SmokeTrail",
							"sid": 609040189102852,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HeightDown\"",
								"property": "offsetHeight",
								"end-value": "0",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Update the last target position."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Missile",
							"sid": 759803990692316,
							"parameters": {
								"instance-variable": "LastX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Missile",
							"sid": 516931507709704,
							"parameters": {
								"instance-variable": "LastY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 162578535274691
				}
			],
			"sid": 806707262037036
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Target",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup each target by storing its last position and checking if they're air or ground type."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Target",
							"sid": 543088321650176
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Target",
							"sid": 433121297100581,
							"parameters": {
								"instance-variable": "LastX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Target",
							"sid": 246785289682249,
							"parameters": {
								"instance-variable": "LastY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 675530631564306,
					"children": [
						{
							"eventType": "comment",
							"text": "If the target is in the air, enable the sine behavior for a floaty movement."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Target",
									"sid": 143491808573093,
									"parameters": {
										"animation": "\"Air\""
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "Target",
									"sid": 393623491194674,
									"behaviorType": "Sine",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 111948386890528
						},
						{
							"eventType": "comment",
							"text": "However, if the target is on the ground, disable the sine behavior for no movement at all."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "Target",
									"sid": 568804564213907,
									"parameters": {
										"animation": "\"Ground\""
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "Target",
									"sid": 703565246751947,
									"behaviorType": "Sine",
									"parameters": {
										"state": "inactive"
									}
								}
							],
							"sid": 490576045458500
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Deal damage to a specific target, while also flashing it white."
				},
				{
					"functionName": "DamageTarget",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "TargetUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 913064496066233
						},
						{
							"name": "Damage",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 400648889294715
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Target",
							"sid": 486177071793367,
							"parameters": {
								"unique-id": "TargetUID"
							}
						}
					],
					"actions": [
						{
							"id": "subtract-from-instvar",
							"objectClass": "Target",
							"sid": 534316016074361,
							"parameters": {
								"instance-variable": "HitPoints",
								"value": "Damage"
							}
						},
						{
							"callFunction": "Flash",
							"sid": 942931344898334,
							"parameters": [
								"Target.UID"
							]
						}
					],
					"sid": 610100898903993,
					"children": [
						{
							"eventType": "comment",
							"text": "If the targe has no more hit points, destroy it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Target",
									"sid": 628786007148946,
									"parameters": {
										"instance-variable": "HitPoints",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 457584552483240,
							"children": [
								{
									"eventType": "comment",
									"text": "Air type targets will start to fly in random direction until they hit something."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "Target",
											"sid": 718577453503476,
											"parameters": {
												"animation": "\"Air\""
											}
										}
									],
									"actions": [
										{
											"id": "set-active",
											"objectClass": "Target",
											"sid": 747217883868993,
											"behaviorType": "Sine",
											"parameters": {
												"state": "inactive"
											}
										},
										{
											"id": "set-enabled",
											"objectClass": "Target",
											"sid": 550963981368448,
											"behaviorType": "Bullet",
											"parameters": {
												"state": "enabled"
											}
										}
									],
									"sid": 320460965447978
								},
								{
									"eventType": "comment",
									"text": "Ground type targets are immediately destroyed."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-animation-playing",
											"objectClass": "Target",
											"sid": 913557881694676,
											"parameters": {
												"animation": "\"Ground\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "Target",
											"sid": 408369388795635
										}
									],
									"sid": 389791808724495
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "While flying in the air, randomize the angle of motion of the target, by creating tween animations with random properties."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-enabled",
							"objectClass": "Target",
							"sid": 614926587981337,
							"behaviorType": "Bullet"
						}
					],
					"actions": [],
					"sid": 376026089121472,
					"children": [
						{
							"eventType": "comment",
							"text": "Randomize the angle of motion."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Target",
									"sid": 918270394308260,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"RandomDirection\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Target",
									"sid": 894913482969967,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"RandomDirection\"",
										"property": "offsetAngle",
										"end-value": "Self.Angle + random(-60, 60)",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 210659567144902
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Target",
									"sid": 429443189112728,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"RandomDirection\""
									}
								}
							],
							"actions": [
								{
									"id": "set-angle-of-motion",
									"objectClass": "Target",
									"sid": 656020290346769,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "Self.Angle - 90"
									}
								}
							],
							"sid": 114737283326414
						},
						{
							"eventType": "comment",
							"text": "Once the target hits a wall, destroy it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Target",
									"sid": 786818710075720,
									"parameters": {
										"object": "LevelCollision"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Target",
									"sid": 637448970007547
								}
							],
							"sid": 919261626561302
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If a target is moving like a bullet, leave a consistent trail of smoke behind it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-enabled",
							"objectClass": "Target",
							"sid": 230266658229785,
							"behaviorType": "Bullet"
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Spawn smoke trail."
						},
						{
							"id": "spawn-another-object",
							"objectClass": "Target",
							"sid": 759994354696711,
							"parameters": {
								"object": "SmokeTrail",
								"layer": "\"EffectsBelow\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Point the smoke trail towards the target."
						},
						{
							"id": "set-angle-toward-position",
							"objectClass": "SmokeTrail",
							"sid": 120844621830626,
							"parameters": {
								"x": "Target.LastX",
								"y": "Target.LastY"
							}
						},
						{
							"type": "comment",
							"text": "Set the correct size."
						},
						{
							"id": "set-width",
							"objectClass": "SmokeTrail",
							"sid": 679134438197439,
							"parameters": {
								"width": "distance(Self.X, Self.Y, Target.LastX, Target.LastY)+8"
							}
						},
						{
							"id": "set-height",
							"objectClass": "SmokeTrail",
							"sid": 727939354504374,
							"parameters": {
								"height": "Self.ImageHeight * random(0.25, 1)"
							}
						},
						{
							"type": "comment",
							"text": "Tween the size, so it slowly fades away."
						},
						{
							"id": "tween-one-property",
							"objectClass": "SmokeTrail",
							"sid": 998683173196879,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HeightDown\"",
								"property": "offsetHeight",
								"end-value": "0",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Update the last target position."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Target",
							"sid": 973132570528836,
							"parameters": {
								"instance-variable": "LastX",
								"value": "Self.X"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Target",
							"sid": 938381863456883,
							"parameters": {
								"instance-variable": "LastY",
								"value": "Self.Y"
							}
						}
					],
					"sid": 340914748724616
				},
				{
					"eventType": "comment",
					"text": "Once a target is destroyed, spawn a big explosion on top of it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "Target",
							"sid": 710245409947055
						}
					],
					"actions": [
						{
							"callFunction": "BigExplosion",
							"sid": 753118314298906,
							"parameters": [
								"Target.X",
								"Target.Y"
							]
						}
					],
					"sid": 906123918965097
				},
				{
					"eventType": "comment",
					"text": "Spawn a big explosion at a specific position, while also shake the screen."
				},
				{
					"functionName": "BigExplosion",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ExplosionX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 116849767507310
						},
						{
							"name": "ExplosionY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 831469591537278
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ShakeScreen",
							"sid": 815031751825299,
							"parameters": [
								"0.5",
								"0.1"
							]
						}
					],
					"sid": 217006248853629,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 657670778863423,
									"parameters": {
										"count": "8"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 936915248430742,
									"parameters": {
										"object-to-create": "RocketLauncherFireExplosion",
										"layer": "\"EffectsAbove\"",
										"x": "ExplosionX",
										"y": "ExplosionY",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Reset the angle of the explosion to zero."
								},
								{
									"id": "set-angle",
									"objectClass": "RocketLauncherFireExplosion",
									"sid": 418883070962920,
									"parameters": {
										"angle": "0"
									}
								},
								{
									"type": "comment",
									"text": "Randomize the angle of motion of each explosion object."
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "RocketLauncherFireExplosion",
									"sid": 650523052599020,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "loopindex * 45 + random(- 30, 30)"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "RocketLauncherFireExplosion",
									"sid": 495891774202529,
									"behaviorType": "Bullet",
									"parameters": {
										"speed": "Self.Bullet.Speed + random(-64, 64)"
									}
								}
							],
							"sid": 257166623553582
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Leave a trail of smoke behind every fire explosion object."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 419750718949587,
							"parameters": {
								"first-value": "RocketLauncherFireExplosion.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [],
					"sid": 370042176111011,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 469145987230887,
									"parameters": {
										"interval-seconds": "0.1"
									}
								}
							],
							"actions": [],
							"sid": 441075469647284,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 864680226302046,
											"parameters": {
												"object": "RocketLauncherFireExplosion"
											}
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "RocketLauncherFireExplosion",
											"sid": 892273191978475,
											"parameters": {
												"object": "SmokeExplosion",
												"layer": "\"World\"",
												"image-point": "0",
												"create-hierarchy": false
											}
										},
										{
											"id": "move-to-object",
											"objectClass": "SmokeExplosion",
											"sid": 315555800607753,
											"parameters": {
												"where": "behind",
												"object": "RocketLauncherFireExplosion"
											}
										},
										{
											"id": "set-angle-of-motion",
											"objectClass": "SmokeExplosion",
											"sid": 722383920544006,
											"behaviorType": "Bullet",
											"parameters": {
												"angle": "RocketLauncherFireExplosion.Bullet.AngleOfMotion"
											}
										}
									],
									"sid": 357869435399359
								}
							]
						}
					]
				}
			],
			"sid": 773078872212981
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "FlashEffect",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "By default, disable the flash effect on every related object."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "FlashEffect",
							"sid": 203858289944991
						}
					],
					"actions": [
						{
							"id": "set-effect-enabled",
							"objectClass": "FlashEffect",
							"sid": 581954905219339,
							"parameters": {
								"mode": "disable",
								"effect": "\"ReplaceSolidColor\""
							}
						}
					],
					"sid": 568229370251676
				},
				{
					"eventType": "comment",
					"text": "Flash a specific object in white for a brief amount of time."
				},
				{
					"functionName": "Flash",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ObjectUID",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 671777595366657
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "FlashEffect",
							"sid": 637326091350205,
							"parameters": {
								"unique-id": "ObjectUID"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create randomly angled slash effect on top of the object."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 475341395013304,
							"parameters": {
								"object-to-create": "Slash",
								"layer": "\"EffectsAbove\"",
								"x": "FlashEffect.X",
								"y": "FlashEffect.Y",
								"create-hierarchy": false
							}
						},
						{
							"id": "set-angle",
							"objectClass": "Slash",
							"sid": 851181177127360,
							"parameters": {
								"angle": "random(0, 360)"
							}
						},
						{
							"type": "comment",
							"text": "Make the object completely white for \"0.1\" seconds, then disable the effect."
						},
						{
							"id": "set-default-color",
							"objectClass": "FlashEffect",
							"sid": 429501048023425,
							"parameters": {
								"color": "rgbEx255(0, 0, 0)"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "FlashEffect",
							"sid": 390885126725659,
							"parameters": {
								"mode": "enable",
								"effect": "\"ReplaceSolidColor\""
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 468772525346331,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "FlashEffect",
							"sid": 473157627583405,
							"parameters": {
								"color": "rgbEx255(255, 255, 255)"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "FlashEffect",
							"sid": 825929301440768,
							"parameters": {
								"mode": "disable",
								"effect": "\"ReplaceSolidColor\""
							}
						},
						{
							"type": "comment",
							"text": "Also destroy the slash effect."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Slash",
							"sid": 172875063462151,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SizeSine\"",
								"property": "size",
								"end-x": "48",
								"end-y": "48",
								"time": "0.05",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "yes"
							}
						}
					],
					"sid": 623603826763334
				}
			],
			"sid": 566184890334746
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ScreenShake",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Shake the screen based on a \"Duration\" and \"Intensity\" parameters."
				},
				{
					"functionName": "ShakeScreen",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Duration",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 882162362960496
						},
						{
							"name": "Intensity",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 315074266378677
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 913044692261563,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\"",
								"start-value": "Intensity",
								"end-value": "0",
								"time": "Duration",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 755026715703651
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 241543512136736,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 629816032471000,
							"parameters": {
								"scale": "1 + random(0, GameManager.Tween.Value(\"ScreenShake\"))"
							}
						}
					],
					"sid": 961172289354330
				},
				{
					"eventType": "comment",
					"text": "Once the screen shake is over, reset the layout scale back to one."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "GameManager",
							"sid": 187213307918566,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 293054404460093,
							"parameters": {
								"scale": "1"
							}
						}
					],
					"sid": 267753765012523
				}
			],
			"sid": 118858757310041
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PixellateEffects",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Constantly update the pixellate effect in every layer it's present."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 224246213216311
						}
					],
					"actions": [
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 458917959586018,
							"parameters": {
								"layer": "\"EffectsAbove\"",
								"effect": "\"Pixellate\"",
								"parameter-index": "0",
								"value": "PlatformInfo.CanvasDeviceWidth / OriginalViewportWidth"
							}
						},
						{
							"id": "set-layer-effect-parameter",
							"objectClass": "System",
							"sid": 164973235297370,
							"parameters": {
								"layer": "\"EffectsBelow\"",
								"effect": "\"Pixellate\"",
								"parameter-index": "0",
								"value": "PlatformInfo.CanvasDeviceWidth / OriginalViewportWidth"
							}
						}
					],
					"sid": 462835281451037
				}
			],
			"sid": 708183692789448
		}
	],
	"sid": 703169307524782
}