{
	"name": "Game events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\nBased on Scirra's \"Multiplayer: Real-Time Game\" example.\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Multiplayer settings"
		},
		{
			"eventType": "variable",
			"name": "GAME_NAME",
			"type": "string",
			"initialValue": "multiplayer_time_attack",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 2783528050303823
		},
		{
			"eventType": "variable",
			"name": "INSTANCE_NAME",
			"type": "string",
			"initialValue": "default",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 313861102059647
		},
		{
			"eventType": "variable",
			"name": "ROOM_NAME",
			"type": "string",
			"initialValue": "main",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 9805164627532192
		},
		{
			"eventType": "comment",
			"text": "Game settings"
		},
		{
			"eventType": "variable",
			"name": "PEER_STARTING_X",
			"type": "number",
			"initialValue": "224",
			"comment": "Starting X position",
			"isStatic": false,
			"isConstant": true,
			"sid": 827429724018645
		},
		{
			"eventType": "variable",
			"name": "PEER_STARTING_Y",
			"type": "number",
			"initialValue": "256",
			"comment": "Starting Y position",
			"isStatic": false,
			"isConstant": true,
			"sid": 910268512157499
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tool functions",
			"description": "Functions that are used in different places in the code.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Convert timestamp integer into 00:00.000 format."
				},
				{
					"functionName": "formatTimeStamp",
					"functionDescription": "Convert timestamp integer into 00:00.000 format.",
					"functionCategory": "",
					"functionReturnType": "string",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "timeStamp",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 279409229485920
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 504660661046838,
							"parameters": {
								"value": "zeropad(Date.GetMinutes(timeStamp), 2) & \":\" & zeropad(Date.GetSeconds(timeStamp), 2) & \".\" & zeropad(Date.GetMilliseconds(timeStamp), 3)"
							}
						}
					],
					"sid": 542368473724967
				},
				{
					"eventType": "comment",
					"text": "Reset car position."
				},
				{
					"functionName": "resetCarPos",
					"functionDescription": "Restart car position",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Peer",
							"sid": 415458353099187,
							"parameters": {
								"x": "PEER_STARTING_X",
								"y": "PEER_STARTING_Y"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "Peer",
							"sid": 211494182344782,
							"parameters": {
								"angle": "0"
							}
						},
						{
							"id": "stop",
							"objectClass": "Peer",
							"sid": 532917043893187,
							"behaviorType": "Car"
						},
						{
							"id": "set-enabled",
							"objectClass": "Peer",
							"sid": 184294494534504,
							"behaviorType": "Car",
							"parameters": {
								"state": "enabled"
							}
						}
					],
					"sid": 634157140493303
				}
			],
			"sid": 594599452239870
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Message log",
			"description": "Functions to manage updating the LogText object as messages are added.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Add log messages and make the text scroll when there are more than 4 logs present."
				},
				{
					"functionName": "AddLog",
					"functionDescription": "Add log messages and make the text scroll when there are more than 4 logs present.",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "message",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 461118231039956
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "push",
							"objectClass": "LogMessagesArr",
							"sid": 340763000710870,
							"parameters": {
								"where": "back",
								"value": "message",
								"axis": "x"
							}
						},
						{
							"id": "set-text",
							"objectClass": "LogMessagesText",
							"sid": 920015628641958,
							"parameters": {
								"text": "\"\""
							}
						}
					],
					"sid": 634555308342937,
					"children": [
						{
							"eventType": "comment",
							"text": "If there are over 4 logs, delete the oldest log."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-size",
									"objectClass": "LogMessagesArr",
									"sid": 103581883195329,
									"parameters": {
										"axis": "x",
										"comparison": 4,
										"value": "4"
									}
								}
							],
							"actions": [
								{
									"id": "pop",
									"objectClass": "LogMessagesArr",
									"sid": 335579014586631,
									"parameters": {
										"where": "front",
										"axis": "x"
									}
								}
							],
							"sid": 363451260473944
						},
						{
							"eventType": "comment",
							"text": "Build the log text considering the contents inside the log array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "LogMessagesArr",
									"sid": 468386405338870,
									"parameters": {
										"axes": "x"
									}
								}
							],
							"actions": [
								{
									"id": "append-text",
									"objectClass": "LogMessagesText",
									"sid": 956645727879532,
									"parameters": {
										"text": "LogMessagesArr.CurValue & newline"
									}
								}
							],
							"sid": 818584858020751
						}
					]
				}
			],
			"sid": 1791290436183513
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Signalling",
			"description": "Manages connecting to the signalling server and joining the room.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "On start of layout, connect to the signalling server. We also set up which client input values the peers will be using, and sync the Peer object with its position, angle and additional instance variables."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 8545342922442215
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Let the client send inputs to the host."
						},
						{
							"id": "add-client-input-value",
							"objectClass": "Multiplayer",
							"sid": 215118277476213,
							"parameters": {
								"tag": "\"inputs\"",
								"precision": "very-low-uint8-1-byte",
								"interpolation": "none"
							}
						},
						{
							"type": "comment",
							"text": "Let the client receive information about the Peer objects from the host."
						},
						{
							"id": "sync-object",
							"objectClass": "Multiplayer",
							"sid": 300881139015781,
							"parameters": {
								"object": "Peer",
								"data": "position-and-angle",
								"precision": "high-double-8-bytes",
								"bandwidth": "normal-bandwidth-unpredictable"
							}
						},
						{
							"id": "sync-instance-variable",
							"objectClass": "Multiplayer",
							"sid": 655624331804906,
							"parameters": {
								"object": "Peer",
								"instance-variable": {
									"name": "colorAnim",
									"objectClass": "Peer"
								},
								"precision": "very-low-uint8-1-byte",
								"interpolation": "none",
								"client-value-tag": "\"\""
							}
						},
						{
							"id": "sync-instance-variable",
							"objectClass": "Multiplayer",
							"sid": 765920121547222,
							"parameters": {
								"object": "Peer",
								"instance-variable": {
									"name": "timeToShow",
									"objectClass": "Peer"
								},
								"precision": "normal-float-4-bytes",
								"interpolation": "none",
								"client-value-tag": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Connect to the signalling server."
						},
						{
							"id": "connect",
							"objectClass": "Multiplayer",
							"sid": 864871814108262,
							"parameters": {
								"server": "\"wss://multiplayer.construct.net\""
							}
						}
					],
					"sid": 4621074164691963
				},
				{
					"eventType": "comment",
					"text": "When connected, request to log in."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-connected",
							"objectClass": "Multiplayer",
							"sid": 633718780657259
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 891006002438031,
							"parameters": [
								"\"Connected, logging in...\""
							]
						},
						{
							"id": "log-in",
							"objectClass": "Multiplayer",
							"sid": 5152430702167834,
							"parameters": {
								"alias": "MyNickname"
							}
						}
					],
					"sid": 6173368493187684
				},
				{
					"eventType": "comment",
					"text": "When logged in, request to join the room."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-logged-in",
							"objectClass": "Multiplayer",
							"sid": 5883027386699968
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 816109599584440,
							"parameters": [
								"\"Logged in with alias: \" & Multiplayer.MyAlias & \" (\" & Multiplayer.MyID & \")\" & newline & \"Joining room...\""
							]
						},
						{
							"id": "join-room",
							"objectClass": "Multiplayer",
							"sid": 762037812944588,
							"parameters": {
								"game": "GAME_NAME",
								"instance": "INSTANCE_NAME",
								"room": "ROOM_NAME",
								"max-peers": "0"
							}
						}
					],
					"sid": 7761898484234081
				},
				{
					"eventType": "comment",
					"text": "After the player joined the room, activate either the Host or the Peer group."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-joined-room",
							"objectClass": "Multiplayer",
							"sid": 9574597696892548
						}
					],
					"actions": [],
					"sid": 1579184355259559,
					"children": [
						{
							"eventType": "comment",
							"text": "As the host, we also adopt the existing Peer object in the layout as our own player. We must set its peer ID to our own ID and tell the Multiplayer object it is associated with ourselves."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 6151152733133221
								}
							],
							"actions": [
								{
									"callFunction": "AddLog",
									"sid": 288961442980966,
									"parameters": [
										"\"Joined room as host\""
									]
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 5094248200865487,
									"parameters": {
										"group-name": "\"Host\"",
										"state": "activated"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 7688405092844826,
									"parameters": {
										"instance-variable": "peerid",
										"value": "Multiplayer.MyID"
									}
								},
								{
									"id": "associate-object-with-peer",
									"objectClass": "Multiplayer",
									"sid": 4474902942186349,
									"parameters": {
										"object": "Peer",
										"peer-id": "Multiplayer.MyID"
									}
								}
							],
							"sid": 611524856039149
						},
						{
							"eventType": "comment",
							"text": "When not the host, the Peer object already in the layout is destroyed. 'Sync object' will create the peer object for the current player, which will be associated. (See the 'Peer' group's 'On object created')"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 4491209143547917
								}
							],
							"actions": [
								{
									"callFunction": "AddLog",
									"sid": 932372020491156,
									"parameters": [
										"\"Joined room as peer\""
									]
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 3086355252968577,
									"parameters": {
										"group-name": "\"Peer\"",
										"state": "activated"
									}
								},
								{
									"callFunction": "AddLog",
									"sid": 390953381993613,
									"parameters": [
										"\"Connecting to host...\""
									]
								},
								{
									"id": "destroy",
									"objectClass": "Peer",
									"sid": 9105323197347260
								}
							],
							"sid": 8025172574882813
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If a peer leaves, gets disconnected or encounters an error, add it to the log."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-disconnected",
							"objectClass": "Multiplayer",
							"sid": 7355024061540087
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 661756315006612,
							"parameters": [
								"\"Signalling disconnected\""
							]
						}
					],
					"sid": 3191386697509821
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-error",
							"objectClass": "Multiplayer",
							"sid": 7405991194607134
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 443101548670459,
							"parameters": [
								"\"Signalling error: \" & Multiplayer.ErrorMessage"
							]
						}
					],
					"sid": 7454512880658015
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-left-room",
							"objectClass": "Multiplayer",
							"sid": 4349773980818516
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 798607560333980,
							"parameters": [
								"\"Signalling: left room\""
							]
						}
					],
					"sid": 833882481570433
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-kicked",
							"objectClass": "Multiplayer",
							"sid": 3123559417693109
						}
					],
					"actions": [
						{
							"callFunction": "AddLog",
							"sid": 614891547175878,
							"parameters": [
								"\"Kicked (either could not connect to host or host quit)\""
							]
						}
					],
					"sid": 5945267911170749
				},
				{
					"eventType": "comment",
					"text": "Update the NetStatsText object with details like the peer count, inbound and outbound bandwidth, host ping and PDV."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 5568020922559877
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "NetStatsText",
							"sid": 3573965697186698,
							"parameters": {
								"text": "Multiplayer.PeerCount & \" peers connected\" & newline & Multiplayer.StatInboundCount & \" in (\" & (round(Multiplayer.StatInboundBandwidth/100)/10) & \" k) / sec\" & newline & Multiplayer.StatOutboundCount & \" out (\" & (round(Multiplayer.StatOutboundBandwidth/100)/10) & \" k) / sec\" & newline & \"Host ping \" & round(Multiplayer.PeerLatency(Multiplayer.HostID)) & \", PDV \" & round(Multiplayer.PeerPDV(Multiplayer.HostID))"
							}
						}
					],
					"sid": 6222937938240554
				}
			],
			"sid": 5828038468308097
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game",
			"description": "Manages the gameplay and synchronisation.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Peer",
					"description": "Events specific to peers (i.e. non-host users)",
					"isActiveOnStart": false,
					"children": [
						{
							"eventType": "comment",
							"text": "When a Peer is created from 'Sync object', Multiplayer.PeerID has the ID of the peer that the object represents. This must be stored in an instance variable to know which peer the object represents."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "Peer",
									"sid": 128854278609083
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 5022147858615494,
									"parameters": {
										"instance-variable": "peerid",
										"value": "Multiplayer.PeerID"
									}
								},
								{
									"id": "associate-object-with-peer",
									"objectClass": "Multiplayer",
									"sid": 5675541743454471,
									"parameters": {
										"object": "Peer",
										"peer-id": "Multiplayer.PeerID"
									}
								}
							],
							"sid": 1051554076065893,
							"children": [
								{
									"eventType": "comment",
									"text": "If the peer that is created represents the local player, enable local input prediction for it. This means instead of being locked to whatever position it is on the host, it can start to move around. However as it moves it will correct its position if it starts to deviate from where it is on the host, so it's important both the peer and the host move it in exactly the same way."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Peer",
											"sid": 1405275483588588,
											"parameters": {
												"instance-variable": "peerid",
												"comparison": 0,
												"value": "Multiplayer.MyID"
											}
										}
									],
									"actions": [
										{
											"id": "enable-local-input-prediction",
											"objectClass": "Multiplayer",
											"sid": 5862494689345266,
											"parameters": {
												"object": "Peer"
											}
										}
									],
									"sid": 4955614740866377
								}
							]
						},
						{
							"eventType": "comment",
							"text": "'On client update' triggers when the Multiplayer object is about to send our inputs to the host, so they need to be updated. To save bandwidth, an 8-bit value in the 'inputs' instance variable is used to store five controls: movement and restarting."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-client-update",
									"objectClass": "Multiplayer",
									"sid": 3792084110379575
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Peer",
									"sid": 6671657526076101,
									"parameters": {
										"instance-variable": "peerid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [],
							"sid": 2007320409318159,
							"children": [
								{
									"eventType": "comment",
									"text": "For each of the five controls, update the corresponding bit in 'inputs' to 1 for pressed or 0 for not pressed."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 5471011033077451,
											"parameters": {
												"key": 37
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 772481891434137,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 0, 1)"
											}
										}
									],
									"sid": 1432909299591165,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 2914374961707698
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 7055135451678822,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 0, 0)"
											}
										}
									],
									"sid": 4970503563561218
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 3536706645476638,
											"parameters": {
												"key": 38
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 4719626626007025,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 1, 1)"
											}
										}
									],
									"sid": 2880113630043788,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 104254603064592
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 1092724608942388,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 1, 0)"
											}
										}
									],
									"sid": 1731932375889037
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 6690059492620113,
											"parameters": {
												"key": 39
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 9510432981832498,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 2, 1)"
											}
										}
									],
									"sid": 1916808374760034,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 4192449857612555
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 6136403609508365,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 2, 0)"
											}
										}
									],
									"sid": 5063772367601722
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 1350570646088154,
											"parameters": {
												"key": 40
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 3520421563379619,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 3, 1)"
											}
										}
									],
									"sid": 9781446253588016,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 9981225923432296
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 3576768970502815,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 3, 0)"
											}
										}
									],
									"sid": 8619149667179953
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 841960441773651,
											"parameters": {
												"key": 13
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 852596971385476,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 4, 1)"
											}
										}
									],
									"sid": 113892967581371,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 954656332244519
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 330422455962103,
											"parameters": {
												"instance-variable": "inputs",
												"value": "setbit(Self.inputs, 4, 0)"
											}
										}
									],
									"sid": 683994829951837
								},
								{
									"eventType": "comment",
									"text": "After all the bits in the instance variable are updated, set the client input state to the resulting value."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-client-state",
											"objectClass": "Multiplayer",
											"sid": 2605505774378409,
											"parameters": {
												"tag": "\"inputs\"",
												"value": "Peer.inputs"
											}
										}
									],
									"sid": 1683219513945691
								}
							]
						},
						{
							"eventType": "comment",
							"text": "This condition picks our own peer instance, so that it can be controlled."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Peer",
									"sid": 9780832115620216,
									"parameters": {
										"instance-variable": "peerid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [],
							"sid": 9854061062979332,
							"children": [
								{
									"eventType": "comment",
									"text": "The bits in the 'inputs' variable is used to know which controls are being pressed. This is done instead of directly testing the keyboard to avoid larger desyncs, since the input states are by default only sent to the host 30 times a second, whereas the game typically runs at 60 FPS."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 6698704042410297,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 0)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 578227424799844,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-left"
											}
										}
									],
									"sid": 3523813498314173
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 1183072686910039,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 1)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 271074367821745,
											"behaviorType": "Car",
											"parameters": {
												"control": "accelerate"
											}
										}
									],
									"sid": 7852755613872817
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 332538370085694,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 2)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 752099788787631,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-right"
											}
										}
									],
									"sid": 4229564653035917
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 4321894230804913,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 3)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 865885656217715,
											"behaviorType": "Car",
											"parameters": {
												"control": "brake"
											}
										}
									],
									"sid": 9219847413697906
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 810887344126615,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 4)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Reset car position."
										},
										{
											"callFunction": "resetCarPos",
											"sid": 759799048197453
										},
										{
											"type": "comment",
											"text": "Hide restart text."
										},
										{
											"id": "stop-flashing",
											"objectClass": "RestartText",
											"sid": 358638812038028,
											"behaviorType": "Flash"
										},
										{
											"id": "set-visible",
											"objectClass": "RestartText",
											"sid": 712887804732526,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 152350880614073
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Mark end of trial for the peer. The car is stopped and the restart message is shown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Peer",
									"sid": 387151363414683,
									"parameters": {
										"object": "FinishLine"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Peer",
									"sid": 465368578657380,
									"parameters": {
										"instance-variable": "peerid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"id": "stop",
									"objectClass": "Peer",
									"sid": 783590605033042,
									"behaviorType": "Car"
								},
								{
									"id": "set-enabled",
									"objectClass": "Peer",
									"sid": 945248159191823,
									"behaviorType": "Car",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "RestartText",
									"sid": 869985394015709,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "flash",
									"objectClass": "RestartText",
									"sid": 928961671317843,
									"behaviorType": "Flash",
									"parameters": {
										"on-time": "0.2",
										"off-time": "0.2",
										"duration": "604800"
									}
								}
							],
							"sid": 625400399641522
						}
					],
					"sid": 3251139189519888
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Host",
					"description": "Events specific to the host.",
					"isActiveOnStart": false,
					"children": [
						{
							"eventType": "comment",
							"text": "The host creates a Peer object for each client that joins the game. 'Sync object' will then notify all the peers that this object was created."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-connected",
									"objectClass": "Multiplayer",
									"sid": 5278329796908354
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Create object and set animation."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 468362216670292,
									"parameters": {
										"object-to-create": "Peer",
										"layer": "0",
										"x": "PEER_STARTING_X",
										"y": "PEER_STARTING_Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Peer",
									"sid": 626469693815535,
									"parameters": {
										"frame-number": "Peer.Count % 8"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 481616848381614,
									"parameters": {
										"instance-variable": "colorAnim",
										"value": "Self.AnimationFrame"
									}
								},
								{
									"type": "comment",
									"text": "Set Peer ID."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 3882820210993065,
									"parameters": {
										"instance-variable": "peerid",
										"value": "Multiplayer.PeerID"
									}
								},
								{
									"type": "comment",
									"text": "Associate the Peer object to the player with matching ID."
								},
								{
									"id": "associate-object-with-peer",
									"objectClass": "Multiplayer",
									"sid": 5439525522788724,
									"parameters": {
										"object": "Peer",
										"peer-id": "Multiplayer.PeerID"
									}
								}
							],
							"sid": 3431678512597868
						},
						{
							"eventType": "comment",
							"text": "The host can control its own object directly, as it runs the authoritative version of the game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Peer",
									"sid": 3453378984847341,
									"parameters": {
										"instance-variable": "peerid",
										"comparison": 0,
										"value": "Multiplayer.MyID"
									}
								}
							],
							"actions": [],
							"sid": 6667545845080172,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 8203931042283762,
											"parameters": {
												"key": 37
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 976605159369856,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-left"
											}
										}
									],
									"sid": 9818674066350092,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 2415820614732377,
											"parameters": {
												"key": 38
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 623804373807476,
											"behaviorType": "Car",
											"parameters": {
												"control": "accelerate"
											}
										}
									],
									"sid": 2630787970132579,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 3144923944661772,
											"parameters": {
												"key": 39
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 236486637569117,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-right"
											}
										}
									],
									"sid": 7581182234293559,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 6540405097566699,
											"parameters": {
												"key": 40
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 401185783785583,
											"behaviorType": "Car",
											"parameters": {
												"control": "brake"
											}
										}
									],
									"sid": 9667144375544474,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 202955048705484,
											"parameters": {
												"key": 13
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Reset car position."
										},
										{
											"callFunction": "resetCarPos",
											"sid": 206698650864935
										},
										{
											"type": "comment",
											"text": "Set starting time to the current wall time."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 351982560662478,
											"parameters": {
												"instance-variable": "startingTime",
												"value": "Date.Now"
											}
										},
										{
											"type": "comment",
											"text": "Hide restart text."
										},
										{
											"id": "stop-flashing",
											"objectClass": "RestartText",
											"sid": 358972183864161,
											"behaviorType": "Flash"
										},
										{
											"id": "set-visible",
											"objectClass": "RestartText",
											"sid": 595860397970411,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 547941852831545,
									"isOrBlock": true
								}
							]
						},
						{
							"eventType": "comment",
							"text": "The host also updates all the other players to reflect their inputs."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Peer",
									"sid": 1724488587194735,
									"parameters": {
										"instance-variable": "peerid",
										"comparison": 1,
										"value": "Multiplayer.MyID"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 233319911430755,
									"parameters": {
										"object": "Peer"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 6998076668578183,
									"parameters": {
										"instance-variable": "inputs",
										"value": "Multiplayer.PeerState(Peer.peerid, \"inputs\")"
									}
								}
							],
							"sid": 9848056887334072,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 4035119645032269,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 0)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 143309366934885,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-left"
											}
										}
									],
									"sid": 6433742001913361
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 4195570173097406,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 1)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 574840144203967,
											"behaviorType": "Car",
											"parameters": {
												"control": "accelerate"
											}
										}
									],
									"sid": 1396571984520324
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 8818673675349892,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 2)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 412624344073653,
											"behaviorType": "Car",
											"parameters": {
												"control": "steer-right"
											}
										}
									],
									"sid": 2217910608625926
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 167345276341326,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 3)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "Peer",
											"sid": 119177268435501,
											"behaviorType": "Car",
											"parameters": {
												"control": "brake"
											}
										}
									],
									"sid": 133455056238674
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 493965124580852,
											"parameters": {
												"first-value": "getbit(Peer.inputs, 4)",
												"comparison": 0,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"callFunction": "resetCarPos",
											"sid": 212688371796577
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Peer",
											"sid": 174350894347769,
											"parameters": {
												"instance-variable": "startingTime",
												"value": "Date.Now"
											}
										}
									],
									"sid": 714118395192730
								}
							]
						},
						{
							"eventType": "comment",
							"text": "This event relays logs to other peers."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-message",
									"objectClass": "Multiplayer",
									"sid": 134539605091452,
									"parameters": {
										"tag": "\"log\""
									}
								}
							],
							"actions": [
								{
									"id": "broadcast-message",
									"objectClass": "Multiplayer",
									"sid": 771464042170159,
									"parameters": {
										"from-id": "Multiplayer.FromID",
										"tag": "\"log\"",
										"message": "Multiplayer.Message",
										"mode": "reliable-ordered"
									}
								}
							],
							"sid": 3740149403622605
						},
						{
							"eventType": "comment",
							"text": "Mark end of trial for a peer. As the host, peer time is broadcasted to all other peers."
						},
						{
							"eventType": "variable",
							"name": "peerTime",
							"type": "number",
							"initialValue": "0",
							"comment": "Time for a peer's trial",
							"isStatic": false,
							"isConstant": false,
							"sid": 589874797748282
						},
						{
							"eventType": "variable",
							"name": "peerMsg",
							"type": "string",
							"initialValue": "",
							"comment": "Message for the time of a peer's trial",
							"isStatic": false,
							"isConstant": false,
							"sid": 894994713390728
						},
						{
							"eventType": "comment",
							"text": "Detect the collision with the finish line."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Peer",
									"sid": 110453856639660,
									"parameters": {
										"object": "FinishLine"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Set variables."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 475523737858537,
									"parameters": {
										"variable": "peerTime",
										"value": "Date.Difference(Peer.startingTime, Date.Now)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 563629372648593,
									"parameters": {
										"variable": "peerMsg",
										"value": "Multiplayer.PeerAliasFromID(Peer.peerid) & \" time: \" & Functions.formatTimeStamp(peerTime)"
									}
								},
								{
									"type": "comment",
									"text": "Broadcast new lap to all peers."
								},
								{
									"callFunction": "AddLog",
									"sid": 888812064120716,
									"parameters": [
										"peerMsg"
									]
								},
								{
									"id": "broadcast-message",
									"objectClass": "Multiplayer",
									"sid": 798560629952326,
									"parameters": {
										"from-id": "Multiplayer.MyID",
										"tag": "\"log\"",
										"message": "peerMsg",
										"mode": "reliable-ordered"
									}
								},
								{
									"type": "comment",
									"text": "Update current peer."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 779217509790660,
									"parameters": {
										"instance-variable": "timeToShow",
										"value": "peerTime"
									}
								},
								{
									"id": "stop",
									"objectClass": "Peer",
									"sid": 904947463947099,
									"behaviorType": "Car"
								},
								{
									"id": "set-enabled",
									"objectClass": "Peer",
									"sid": 945248159191823,
									"behaviorType": "Car",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"type": "comment",
									"text": "Update leaderboard. Records should appear from smallest time to largest time."
								},
								{
									"id": "push",
									"objectClass": "LeaderboardArr",
									"sid": 756018388148446,
									"parameters": {
										"where": "back",
										"value": "zeropad(peerTime, 10) & \" \" & Multiplayer.PeerAliasFromID(Peer.peerid)",
										"axis": "x"
									}
								},
								{
									"id": "sort",
									"objectClass": "LeaderboardArr",
									"sid": 948643794828320,
									"parameters": {
										"axis": "x"
									}
								},
								{
									"id": "set-text",
									"objectClass": "LeaderboardText",
									"sid": 150061659246302,
									"parameters": {
										"text": "\"\""
									}
								}
							],
							"sid": 896696228078346,
							"children": [
								{
									"eventType": "comment",
									"text": "Limit the leaderboard to the 5 best times."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-size",
											"objectClass": "LeaderboardArr",
											"sid": 312763763587619,
											"parameters": {
												"axis": "x",
												"comparison": 4,
												"value": "5"
											}
										}
									],
									"actions": [
										{
											"id": "pop",
											"objectClass": "LeaderboardArr",
											"sid": 227608963370122,
											"parameters": {
												"where": "back",
												"axis": "x"
											}
										}
									],
									"sid": 942840757391775
								},
								{
									"eventType": "comment",
									"text": "Build the leaderboard text considering the contents inside the leaderboard array."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-element",
											"objectClass": "LeaderboardArr",
											"sid": 941898872349905,
											"parameters": {
												"axes": "x"
											}
										}
									],
									"actions": [],
									"sid": 461523623580568,
									"children": [
										{
											"eventType": "comment",
											"text": "If the text is empty, just insert a new line with the first time."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-text",
													"objectClass": "LeaderboardText",
													"sid": 851523449265775,
													"parameters": {
														"text-to-compare": "\"\"",
														"case-sensitivity": "ignore-case"
													}
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "LeaderboardText",
													"sid": 856243428578093,
													"parameters": {
														"text": "tokenat(LeaderboardArr.CurValue, 1, \" \") &  \" \" & Functions.formatTimeStamp(int(tokenat(LeaderboardArr.CurValue, 0, \" \")))"
													}
												}
											],
											"sid": 305879935060909
										},
										{
											"eventType": "comment",
											"text": "Otherwise, append a new line and the newly recorded time to the text."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 716683486392171
												}
											],
											"actions": [
												{
													"id": "set-text",
													"objectClass": "LeaderboardText",
													"sid": 360269097137018,
													"parameters": {
														"text": "Self.Text & newline & tokenat(LeaderboardArr.CurValue, 1, \" \") &  \" \" & Functions.formatTimeStamp(int(tokenat(LeaderboardArr.CurValue, 0, \" \")))"
													}
												}
											],
											"sid": 411385361429589
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the text is still invisible (initial state), make it show up with a quick fade-in."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-opacity",
											"objectClass": "LeaderboardText",
											"sid": 257618719962631,
											"parameters": {
												"comparison": 1,
												"opacity": "100"
											}
										},
										{
											"id": "is-any-playing",
											"objectClass": "LeaderboardText",
											"sid": 483656549208895,
											"behaviorType": "Tween",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LeaderboardText",
											"sid": 143459589021548,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 890555575912545
								},
								{
									"eventType": "comment",
									"text": "Broadcast the text to all other peers."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "broadcast-message",
											"objectClass": "Multiplayer",
											"sid": 434606588549831,
											"parameters": {
												"from-id": "Multiplayer.MyID",
												"tag": "\"leaderboard\"",
												"message": "LeaderboardText.Text",
												"mode": "reliable-ordered"
											}
										}
									],
									"sid": 536839716893961
								},
								{
									"eventType": "comment",
									"text": "If the peer is the host, show the restart text"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Peer",
											"sid": 229462796493079,
											"parameters": {
												"instance-variable": "peerid",
												"comparison": 0,
												"value": "Multiplayer.MyID"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "RestartText",
											"sid": 297742272313927,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"id": "flash",
											"objectClass": "RestartText",
											"sid": 867569705725594,
											"behaviorType": "Flash",
											"parameters": {
												"on-time": "0.2",
												"off-time": "0.2",
												"duration": "604800"
											}
										}
									],
									"sid": 822613827607918
								}
							]
						}
					],
					"sid": 5993157518437331
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Common",
					"description": "Events that are common to both the host and peers.",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Set starting time for the current trial."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "Peer",
									"sid": 935132607669623
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Peer",
									"sid": 992678044513297,
									"parameters": {
										"instance-variable": "startingTime",
										"value": "Date.Now"
									}
								}
							],
							"sid": 184726781971936
						},
						{
							"eventType": "comment",
							"text": "Camera starts looking at the car."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 805575136727226
								}
							],
							"actions": [
								{
									"id": "scroll-to-position",
									"objectClass": "System",
									"sid": 297630132367464,
									"parameters": {
										"x": "PEER_STARTING_X",
										"y": "PEER_STARTING_Y"
									}
								}
							],
							"sid": 517717174157535
						},
						{
							"eventType": "comment",
							"text": "Camera follows the car smoothly."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 974951891517612
								},
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 807848234086526,
									"parameters": {
										"object": "Peer",
										"expression": "Peer.peerid = Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"id": "scroll-to-position",
									"objectClass": "System",
									"sid": 630021786824211,
									"parameters": {
										"x": "lerp(scrollx, Peer.X, 8 * dt)",
										"y": "lerp(scrolly, Peer.Y, 8 * dt)"
									}
								}
							],
							"sid": 453649393043702
						},
						{
							"eventType": "comment",
							"text": "Whenever a peer joins or leaves, log the event so the user can see what happened."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-connected",
									"objectClass": "Multiplayer",
									"sid": 8555101434504378
								}
							],
							"actions": [
								{
									"callFunction": "AddLog",
									"sid": 965852658191863,
									"parameters": [
										"\"'\" & Multiplayer.PeerAlias & \"' joined\""
									]
								}
							],
							"sid": 4933736723213277
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-disconnected",
									"objectClass": "Multiplayer",
									"sid": 8841003295953043
								}
							],
							"actions": [
								{
									"callFunction": "AddLog",
									"sid": 132395516113281,
									"parameters": [
										"\"'\" & Multiplayer.PeerAlias & \"' left\""
									]
								}
							],
							"sid": 6299574777196556
						},
						{
							"eventType": "comment",
							"text": "PeerName labels are palced above each peer and set it to their name."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 4628645942487063
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "Peer",
									"sid": 347020853118059,
									"parameters": {
										"frame-number": "Peer.colorAnim"
									}
								},
								{
									"id": "set-position",
									"objectClass": "PeerNameText",
									"sid": 932047925702930,
									"parameters": {
										"x": "Peer.X",
										"y": "Peer.Y - 20"
									}
								},
								{
									"id": "set-text",
									"objectClass": "PeerNameText",
									"sid": 860895015849997,
									"parameters": {
										"text": "Multiplayer.PeerAliasFromID(Peer.peerid)"
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "Peer",
									"sid": 7434418277838572,
									"parameters": {
										"layer": "\"Game\""
									}
								},
								{
									"id": "move-to-layer",
									"objectClass": "PeerNameText",
									"sid": 101768347348349,
									"parameters": {
										"layer": "\"PeerText\""
									}
								}
							],
							"sid": 5649120662471453
						},
						{
							"eventType": "comment",
							"text": "Update restart text every frame to guarantee that the most recent time is being shown."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 507568215236687,
									"parameters": {
										"object": "Peer",
										"expression": "Peer.peerid = Multiplayer.MyID"
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "RestartText",
									"sid": 376084160419082,
									"parameters": {
										"text": "\"Your time: \" & Functions.formatTimeStamp(Peer.timeToShow) & newline & \"Press [b][color=#ffff00]\\[Enter][/color][/b] to restart...\""
									}
								}
							],
							"sid": 130394248579823
						},
						{
							"eventType": "comment",
							"text": "Add received logs to the log history."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-message",
									"objectClass": "Multiplayer",
									"sid": 391460193072749,
									"parameters": {
										"tag": "\"log\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "AddLog",
									"sid": 804121597670488,
									"parameters": [
										"Multiplayer.Message"
									]
								}
							],
							"sid": 9786408180718612
						},
						{
							"eventType": "comment",
							"text": "Display received leaderboards."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-peer-message",
									"objectClass": "Multiplayer",
									"sid": 392242749773024,
									"parameters": {
										"tag": "\"leaderboard\""
									}
								},
								{
									"id": "is-host",
									"objectClass": "Multiplayer",
									"sid": 712693202395702,
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "LeaderboardText",
									"sid": 933111442569717,
									"parameters": {
										"text": "Multiplayer.Message"
									}
								}
							],
							"sid": 643406482851382,
							"children": [
								{
									"eventType": "comment",
									"text": "If the text is still invisible (initial state), make it show up with a quick fade-in."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-opacity",
											"objectClass": "LeaderboardText",
											"sid": 473367382049156,
											"parameters": {
												"comparison": 1,
												"opacity": "100"
											}
										},
										{
											"id": "is-any-playing",
											"objectClass": "LeaderboardText",
											"sid": 443722341034858,
											"behaviorType": "Tween",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LeaderboardText",
											"sid": 416290298112786,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 800796679391824
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Show/Hide logs and stats."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 802785377320300,
									"parameters": {
										"key": 8
									}
								},
								{
									"id": "is-any-playing",
									"objectClass": "LogMessagesText",
									"sid": 834934074070277,
									"behaviorType": "Tween",
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 904669577032820,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-opacity",
											"objectClass": "LogMessagesText",
											"sid": 303145473783961,
											"parameters": {
												"comparison": 0,
												"opacity": "100"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LogMessagesText",
											"sid": 663267951696137,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "NetStatsText",
											"sid": 663585684226016,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 955337931628925
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 420753602483763
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LogMessagesText",
											"sid": 833533879271007,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "NetStatsText",
											"sid": 463016035922649,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"TextFade\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 345462606190730
								}
							]
						}
					],
					"sid": 5870562097836775
				}
			],
			"sid": 8255319576193919
		}
	],
	"sid": 434100748332892
}