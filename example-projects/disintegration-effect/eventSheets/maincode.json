{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Project settings."
		},
		{
			"eventType": "variable",
			"name": "TARGETFRAMERATE",
			"type": "number",
			"initialValue": "60",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 762172364557089
		},
		{
			"eventType": "variable",
			"name": "DEFAULTLAYOUTSCALE",
			"type": "number",
			"initialValue": "1.5",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 455783733766901
		},
		{
			"eventType": "comment",
			"text": "Player references."
		},
		{
			"eventType": "variable",
			"name": "InputLeft",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 978318750935198
		},
		{
			"eventType": "variable",
			"name": "InputRight",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 759928168194647
		},
		{
			"eventType": "variable",
			"name": "InputUp",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 491629948748393
		},
		{
			"eventType": "variable",
			"name": "InputDown",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 988659530652295
		},
		{
			"eventType": "variable",
			"name": "HorizontalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 704650960119333
		},
		{
			"eventType": "variable",
			"name": "VerticalAxis",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 873836784155865
		},
		{
			"eventType": "variable",
			"name": "AxisAngle",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 486607320101382
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerSetup",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Reset global variables to prevent traces from previous sessions."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 796671218886728
								}
							],
							"actions": [
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 927961188957356
								},
								{
									"id": "set-layout-scale",
									"objectClass": "System",
									"sid": 871918819024045,
									"parameters": {
										"scale": "DEFAULTLAYOUTSCALE"
									}
								}
							],
							"sid": 717612525165036
						},
						{
							"eventType": "comment",
							"text": "Setup the player by adding its graphics to the collider as a child."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "PlayerGraphics",
									"sid": 594730415360274
								}
							],
							"actions": [
								{
									"id": "set-position-to-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 841884366138315,
									"parameters": {
										"object": "PlayerCollision",
										"image-point-optional": "0"
									}
								},
								{
									"id": "add-child",
									"objectClass": "PlayerCollision",
									"sid": 764565144345918,
									"parameters": {
										"child": "PlayerGraphics",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": false,
										"destroy-with-parent": true
									}
								}
							],
							"sid": 960983322737064
						}
					],
					"sid": 784603836528212
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerControls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Receive and store input from the player to be used later in many situations."
						},
						{
							"eventType": "comment",
							"text": "Toggle input left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 940876619458367,
									"parameters": {
										"key": 37
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 485439395839532,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-left"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 798140548127237,
									"parameters": {
										"variable": "InputLeft",
										"value": "1"
									}
								}
							],
							"sid": 264402595788968,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 857228404289996
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 661153111744936,
									"parameters": {
										"variable": "InputLeft",
										"value": "0"
									}
								}
							],
							"sid": 286939735207559
						},
						{
							"eventType": "comment",
							"text": "Toggle input right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 419887578263887,
									"parameters": {
										"key": 39
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 910485628604972,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-right"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 736893529451941,
									"parameters": {
										"variable": "InputRight",
										"value": "1"
									}
								}
							],
							"sid": 600039708179932,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 517755708762973
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 655417879433674,
									"parameters": {
										"variable": "InputRight",
										"value": "0"
									}
								}
							],
							"sid": 740689455255456
						},
						{
							"eventType": "comment",
							"text": "Toggle input up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 616884787279611,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 618941853617328,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-up"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 996680032145102,
									"parameters": {
										"variable": "InputUp",
										"value": "1"
									}
								}
							],
							"sid": 633581533344193,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 353307726704705
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 942415071733078,
									"parameters": {
										"variable": "InputUp",
										"value": "0"
									}
								}
							],
							"sid": 573106451468937
						},
						{
							"eventType": "comment",
							"text": "Toggle input down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 675557998752242,
									"parameters": {
										"key": 40
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 681442548497853,
									"parameters": {
										"gamepad": "0",
										"button": "d-pad-down"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 721258906245844,
									"parameters": {
										"variable": "InputDown",
										"value": "1"
									}
								}
							],
							"sid": 508639076125027,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 195726474801099
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 471050106117999,
									"parameters": {
										"variable": "InputDown",
										"value": "0"
									}
								}
							],
							"sid": 373306371993938
						},
						{
							"eventType": "comment",
							"text": "Calculate both axis and looking angle based on the player input."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 653715903966159
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 674592570485943,
									"parameters": {
										"variable": "HorizontalAxis",
										"value": "InputRight - InputLeft"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 170521698251227,
									"parameters": {
										"variable": "VerticalAxis",
										"value": "InputDown - InputUp"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 952715159736944,
									"parameters": {
										"variable": "AxisAngle",
										"value": "round(angle(0, 0, HorizontalAxis, VerticalAxis))"
									}
								}
							],
							"sid": 837605888771891
						},
						{
							"eventType": "comment",
							"text": "Move the player horizontally based on its horizontal axis."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 663923931773018,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 320390961629747,
									"behaviorType": "Platform",
									"parameters": {
										"control": "left"
									}
								}
							],
							"sid": 944241251070615
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 448267358412793,
									"parameters": {
										"variable": "HorizontalAxis",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 790575075471283,
									"behaviorType": "Platform",
									"parameters": {
										"control": "right"
									}
								}
							],
							"sid": 495429092397420
						},
						{
							"eventType": "comment",
							"text": "Simulate player jump."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 483631168435843,
									"parameters": {
										"key": 90
									}
								},
								{
									"id": "is-button-down",
									"objectClass": "Gamepad",
									"sid": 892685996869684,
									"parameters": {
										"gamepad": "0",
										"button": "button-a"
									}
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "PlayerCollision",
									"sid": 801526876848270,
									"behaviorType": "Platform",
									"parameters": {
										"control": "jump"
									}
								}
							],
							"sid": 145191292488866,
							"isOrBlock": true
						}
					],
					"sid": 284160857497412
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerAnimations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerCollision",
									"sid": 488793171183916,
									"parameters": {
										"instance-variable": "IsTeleporting"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 150206422991589,
							"children": [
								{
									"eventType": "comment",
									"text": "Mirro the player graphics based on its horizontal axis."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 230809470242210,
											"parameters": {
												"variable": "HorizontalAxis",
												"comparison": 1,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "PlayerGraphics",
											"sid": 759091058885051,
											"parameters": {
												"width": "Self.ImageWidth * HorizontalAxis"
											}
										}
									],
									"sid": 922347252641934
								},
								{
									"eventType": "comment",
									"text": "Change the animation states depending on what the player is currently doing."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-floor",
											"objectClass": "PlayerCollision",
											"sid": 707659241901961,
											"behaviorType": "Platform"
										}
									],
									"actions": [],
									"sid": 401647276024634,
									"children": [
										{
											"eventType": "comment",
											"text": "Walk animation."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-moving",
													"objectClass": "PlayerCollision",
													"sid": 820854551732542,
													"behaviorType": "Platform"
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PlayerGraphics",
													"sid": 922215693118291,
													"parameters": {
														"animation": "\"Walk\"",
														"from": "beginning"
													}
												}
											],
											"sid": 578190551528310
										},
										{
											"eventType": "comment",
											"text": "Idle animation."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 419061898434771
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PlayerGraphics",
													"sid": 823207287573016,
													"parameters": {
														"animation": "\"Idle\"",
														"from": "beginning"
													}
												}
											],
											"sid": 456460260633921
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Jump animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-jumping",
											"objectClass": "PlayerCollision",
											"sid": 736060827195106,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 321615517059269,
											"parameters": {
												"animation": "\"Jump\"",
												"from": "beginning"
											}
										}
									],
									"sid": 161537949950622
								},
								{
									"eventType": "comment",
									"text": "Fall animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-falling",
											"objectClass": "PlayerCollision",
											"sid": 574848001551477,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "PlayerGraphics",
											"sid": 569307546243237,
											"parameters": {
												"animation": "\"Fall\"",
												"from": "beginning"
											}
										}
									],
									"sid": 344741815757440
								}
							]
						}
					],
					"sid": 921833879566076
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PlayerParticles",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "PlayerCollision",
									"sid": 607391470837352,
									"parameters": {
										"instance-variable": "IsTeleporting"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 587402549412977,
							"children": [
								{
									"eventType": "comment",
									"text": "Spawn different types of dust particles depending on the player actions."
								},
								{
									"eventType": "comment",
									"text": "Walking dust."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-moving",
											"objectClass": "PlayerCollision",
											"sid": 162107356384683,
											"behaviorType": "Platform"
										},
										{
											"id": "is-on-floor",
											"objectClass": "PlayerCollision",
											"sid": 919601214923482,
											"behaviorType": "Platform"
										}
									],
									"actions": [],
									"sid": 124252356930878,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "every-x-seconds",
													"objectClass": "System",
													"sid": 266942492858014,
													"parameters": {
														"interval-seconds": "0.1"
													}
												}
											],
											"actions": [
												{
													"id": "spawn-another-object",
													"objectClass": "PlayerGraphics",
													"sid": 389983447808554,
													"parameters": {
														"object": "WalkingDust",
														"layer": "\"World\"",
														"image-point": "\"\"",
														"create-hierarchy": false
													}
												},
												{
													"id": "set-width",
													"objectClass": "WalkingDust",
													"sid": 292223292716194,
													"parameters": {
														"width": "Self.Width * HorizontalAxis"
													}
												}
											],
											"sid": 367036000329486
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Landing dust."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-landed",
											"objectClass": "PlayerCollision",
											"sid": 272059843719412,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "PlayerGraphics",
											"sid": 849784960810551,
											"parameters": {
												"object": "LandingDust",
												"layer": "\"World\"",
												"image-point": "\"\"",
												"create-hierarchy": false
											}
										}
									],
									"sid": 863974917637911
								},
								{
									"eventType": "comment",
									"text": "Jumping dust."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-jump",
											"objectClass": "PlayerCollision",
											"sid": 554788601410499,
											"behaviorType": "Platform"
										}
									],
									"actions": [
										{
											"id": "spawn-another-object",
											"objectClass": "PlayerGraphics",
											"sid": 515574839100667,
											"parameters": {
												"object": "JumpingDust",
												"layer": "\"World\"",
												"image-point": "\"\"",
												"create-hierarchy": false
											}
										}
									],
									"sid": 721614990111841
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Destroy the dust objects after their animations are done to prevent CPU overload."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "WalkingDust",
									"sid": 785799846667822,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "WalkingDust",
									"sid": 206535255877088
								}
							],
							"sid": 836571957802337
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "LandingDust",
									"sid": 998514579400623,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "LandingDust",
									"sid": 607265171229897
								}
							],
							"sid": 227135837780389
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-animation-finished",
									"objectClass": "JumpingDust",
									"sid": 340367547331967,
									"parameters": {
										"animation": "\"Default\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "JumpingDust",
									"sid": 599271824549731
								}
							],
							"sid": 366382635788223
						}
					],
					"sid": 858999474960428
				}
			],
			"sid": 438447210557978
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "MainTeleporter",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup the trigger position to match to platform top mechanism."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "TeleporterTrigger",
							"sid": 691960503749229
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "TeleporterTrigger",
							"sid": 393911202696413,
							"parameters": {
								"object": "TeleporterPlatformFront",
								"image-point-optional": "\"Trigger\""
							}
						}
					],
					"sid": 998371177364058
				},
				{
					"eventType": "comment",
					"text": "Destroy the player object and create a giant white flash."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 632223383188225,
							"parameters": {
								"object": "TeleporterTrigger"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TeleporterTrigger",
							"sid": 763642753172528,
							"parameters": {
								"instance-variable": "Charged"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "TeleporterTrigger",
							"sid": 215487575064132,
							"parameters": {
								"instance-variable": "Charged",
								"value": "false"
							}
						},
						{
							"id": "destroy",
							"objectClass": "PlayerCollision",
							"sid": 738698704844020
						},
						{
							"id": "spawn-another-object",
							"objectClass": "TeleporterPlatformFront",
							"sid": 861136958912584,
							"parameters": {
								"object": "Flash",
								"layer": "\"World\"",
								"image-point": "\"Flash\"",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Shake the screen."
						},
						{
							"callFunction": "ShakeScreen",
							"sid": 969805763797343,
							"parameters": [
								"0.1",
								"0.25"
							]
						}
					],
					"sid": 444812351366441
				},
				{
					"eventType": "comment",
					"text": "Setup the giant white flash and animate it to disappear after some time."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "Flash",
							"sid": 475468299004326
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "Flash",
							"sid": 784168343081722,
							"parameters": {
								"width": "16",
								"height": "0"
							}
						},
						{
							"id": "cast-ray",
							"objectClass": "Flash",
							"sid": 948758805265042,
							"behaviorType": "LineOfSight",
							"parameters": {
								"from-x": "Self.X",
								"from-y": "Self.Y",
								"to-x": "Self.X",
								"to-y": "Self.Y - Self.LineOfSight.Range",
								"use-collision-cells": true
							}
						}
					],
					"sid": 984648318403167,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "ray-intersected",
									"objectClass": "Flash",
									"sid": 589851470152846,
									"behaviorType": "LineOfSight"
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Flash",
									"sid": 277325325206509,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"IncreaseHeight\"",
										"property": "offsetHeight",
										"end-value": "Self.LineOfSight.HitDistance",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 852766279747460
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Flash",
							"sid": 284551763125519,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"IncreaseHeight\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Flash",
							"sid": 305528213774589,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"DecreaseWidth\"",
								"property": "offsetWidth",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 735183857432216
				}
			],
			"sid": 865963099006963
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "CAMERASPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 491563133307748
				},
				{
					"eventType": "variable",
					"name": "CAMERAOFFSETX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 770507095067125
				},
				{
					"eventType": "variable",
					"name": "CAMERAOFFSETY",
					"type": "number",
					"initialValue": "-32",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 238811815189955
				},
				{
					"eventType": "comment",
					"text": "Interpolate the camera position to constantly track the player with smooth movement."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 537929353001116,
							"parameters": {
								"first-value": "PlayerCollision.Count",
								"comparison": 4,
								"second-value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "Camera",
							"sid": 973103372446141,
							"parameters": {
								"x": "lerp(Self.X, PlayerCollision.X + CAMERAOFFSETX, CameraSpeed * TARGETFRAMERATE * dt)",
								"y": "lerp(Self.Y, PlayerCollision.Y + CAMERAOFFSETY, CameraSpeed * TARGETFRAMERATE * dt)"
							}
						}
					],
					"sid": 435649057504302
				},
				{
					"eventType": "comment",
					"text": "Create a screen shake effect to add more intensity to specific actions."
				},
				{
					"functionName": "ShakeScreen",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "Intensity",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 284747500709328
						},
						{
							"name": "Duration",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 869993685765301
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "tween-value",
							"objectClass": "GameManager",
							"sid": 886668294322734,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\"",
								"start-value": "Intensity",
								"end-value": "0",
								"time": "Duration",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 480374386182628
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 679875644675674,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScreenShake\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 970711442095747,
							"parameters": {
								"scale": "DEFAULTLAYOUTSCALE + random(-GameManager.Tween.Value(\"ScreenShake\"), GameManager.Tween.Value(\"ScreenShake\"))"
							}
						}
					],
					"sid": 374062129976910
				}
			],
			"sid": 552517355456284
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Hazards",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 174515758362378,
							"parameters": {
								"object": "Spike"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 699463130295548
						}
					],
					"sid": 358273904108520
				}
			],
			"sid": 269062095261804
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "DebugTools",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 886860410172297,
							"parameters": {
								"key": 82
							}
						},
						{
							"id": "on-button-pressed",
							"objectClass": "Gamepad",
							"sid": 549166494317235,
							"parameters": {
								"gamepad": "0",
								"button": "start-menu"
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 259241878741840
						}
					],
					"sid": 261502125594386,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Close the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 191029648628512,
							"parameters": {
								"key": 27
							}
						}
					],
					"actions": [
						{
							"id": "close",
							"objectClass": "Browser",
							"sid": 885884145918904
						}
					],
					"sid": 409208253555805
				}
			],
			"sid": 876242795795519
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ScrollingBackground",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "HORIZONTALSPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 617022310168035
				},
				{
					"eventType": "variable",
					"name": "VERTICALSPEED",
					"type": "number",
					"initialValue": "0.1",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 859461312543425
				},
				{
					"eventType": "comment",
					"text": "Constantly scroll the background."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 440248802025647
						}
					],
					"actions": [
						{
							"id": "set-image-offset-x",
							"objectClass": "Background",
							"sid": 735634255956251,
							"parameters": {
								"offset-x": "Self.ImageOffsetX + HORIZONTALSPEED * TARGETFRAMERATE * dt"
							}
						},
						{
							"id": "set-image-offset-y",
							"objectClass": "Background",
							"sid": 809518361183198,
							"parameters": {
								"offset-y": "Self.ImageOffsetY + VERTICALSPEED * TARGETFRAMERATE * dt"
							}
						}
					],
					"sid": 120680822599132
				}
			],
			"sid": 129190677110833
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "DisintegrationEffect",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "How large each canvas cell is."
				},
				{
					"eventType": "variable",
					"name": "CANVASSIZE",
					"type": "number",
					"initialValue": "2",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 243000668056341
				},
				{
					"eventType": "comment",
					"text": "How many canvas cells on each axis."
				},
				{
					"eventType": "variable",
					"name": "GRIDSIZE",
					"type": "number",
					"initialValue": "12",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 682144389380120
				},
				{
					"eventType": "comment",
					"text": "How far from the player center the cells will be."
				},
				{
					"eventType": "variable",
					"name": "XOFFSET",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 292928427542507
				},
				{
					"eventType": "variable",
					"name": "YOFFSET",
					"type": "number",
					"initialValue": "-12",
					"comment": "",
					"isStatic": false,
					"isConstant": true,
					"sid": 301452655664525
				},
				{
					"eventType": "comment",
					"text": "The amount of delay between each action."
				},
				{
					"eventType": "variable",
					"name": "DELAY",
					"type": "number",
					"initialValue": "0.25",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 594108223423505
				},
				{
					"eventType": "comment",
					"text": "How long it takes for the main disintegration effects to move the player."
				},
				{
					"eventType": "variable",
					"name": "DURATION",
					"type": "number",
					"initialValue": "2",
					"comment": "",
					"isStatic": true,
					"isConstant": true,
					"sid": 111222900737752
				},
				{
					"eventType": "comment",
					"text": "Setup the glow particles by adjusting their position and rate."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "GlowParticles",
							"sid": 454902229505858
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "GlowParticles",
							"sid": 710429741040561,
							"parameters": {
								"object": "SmallTeleporterFront",
								"image-point-optional": "\"Particles\""
							}
						},
						{
							"id": "set-rate",
							"objectClass": "GlowParticles",
							"sid": 464554619442539,
							"parameters": {
								"rate": "0"
							}
						}
					],
					"sid": 670469800423027
				},
				{
					"eventType": "comment",
					"text": "Trigger the teleporter if the player collides with it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "PlayerCollision",
							"sid": 174592280176049,
							"parameters": {
								"object": "SmallTeleporterFront"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Request a teleport sequence."
						},
						{
							"callFunction": "TeleportPlayer",
							"sid": 586965109412645,
							"parameters": [
								"SmallTeleporterFront.X",
								"SmallTeleporterFront.Y",
								"SmallTeleporterFront.OffsetPositionX",
								"SmallTeleporterFront.OffsetPositionY"
							]
						},
						{
							"type": "comment",
							"text": "Prevent the player from showing the shadow effect while using a teleporter."
						},
						{
							"id": "stop-timer",
							"objectClass": "PlayerCollision",
							"sid": 395338683641874,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Shadow\""
							}
						},
						{
							"type": "comment",
							"text": "Spawn a big green light in front of the player."
						},
						{
							"id": "spawn-another-object",
							"objectClass": "SmallTeleporterFront",
							"sid": 426760359222640,
							"parameters": {
								"object": "MainLight",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Activate the glow effect, which will spawn smaller lights in front of the player."
						},
						{
							"id": "start-timer",
							"objectClass": "SmallTeleporterFront",
							"sid": 585807254160426,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "once",
								"tag": "\"Glow\""
							}
						},
						{
							"type": "comment",
							"text": "Activate the glow particles by increasing their rate."
						},
						{
							"id": "set-rate",
							"objectClass": "GlowParticles",
							"sid": 545467912028538,
							"parameters": {
								"rate": "32"
							}
						},
						{
							"type": "comment",
							"text": "Shake the screen."
						},
						{
							"callFunction": "ShakeScreen",
							"sid": 522919717702823,
							"parameters": [
								"0.025",
								"0.5"
							]
						}
					],
					"sid": 818869416533542
				},
				{
					"eventType": "comment",
					"text": "While the glow effect is on, spawn a bunch of smaller lights and randomize their X position with tween animations."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-timer-running",
							"objectClass": "SmallTeleporterFront",
							"sid": 677246607036181,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Glow\""
							}
						}
					],
					"actions": [],
					"sid": 638152487828360,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 247634793595306,
									"parameters": {
										"interval-seconds": "0.1"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "SmallTeleporterFront",
									"sid": 883837213344411,
									"parameters": {
										"object": "SecundaryLight",
										"layer": "\"World\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "SecundaryLight",
									"sid": 748761620734707,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"RandomX\"",
										"property": "offsetX",
										"end-value": "Self.X + random(-4, 4)",
										"time": "0.5",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								}
							],
							"sid": 735544172326311
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the glow effect is over, disable the glow particles by reducing their rate."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "SmallTeleporterFront",
							"sid": 863874595158035,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Glow\""
							}
						}
					],
					"actions": [
						{
							"id": "set-rate",
							"objectClass": "GlowParticles",
							"sid": 149498612444734,
							"parameters": {
								"rate": "0"
							}
						}
					],
					"sid": 773351768116765
				},
				{
					"functionName": "TeleportPlayer",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "TeleporterX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 456329242417382
						},
						{
							"name": "TeleporterY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 153458682893844
						},
						{
							"name": "DestinationX",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 831636269095104
						},
						{
							"name": "DestinationY",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 695684518803025
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Toggle the teleporting bool on, which works as some sort of signal for a few parts of the code."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PlayerCollision",
							"sid": 391187802342008,
							"parameters": {
								"instance-variable": "IsTeleporting",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Store the destination position inside the player object, so it can be used outside this function in a later moment."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerCollision",
							"sid": 463415564193829,
							"parameters": {
								"instance-variable": "StoredDestinationX",
								"value": "DestinationX"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "PlayerCollision",
							"sid": 454819352275170,
							"parameters": {
								"instance-variable": "StoredDestinationY",
								"value": "DestinationY"
							}
						},
						{
							"type": "comment",
							"text": "Reset both movement vectors."
						},
						{
							"id": "set-vector-x",
							"objectClass": "PlayerCollision",
							"sid": 741450601733466,
							"behaviorType": "Platform",
							"parameters": {
								"vector-x": "0"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "PlayerCollision",
							"sid": 937289104342288,
							"behaviorType": "Platform",
							"parameters": {
								"vector-y": "0"
							}
						},
						{
							"type": "comment",
							"text": "Disable the platform behavior."
						},
						{
							"id": "set-enabled",
							"objectClass": "PlayerCollision",
							"sid": 921648369356606,
							"behaviorType": "Platform",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Snap the player's position, so it's perfectly aligned with the teleporter."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "PlayerCollision",
							"sid": 819469582689387,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SnapToTeleporter\"",
								"property": "position",
								"end-x": "TeleporterX",
								"end-y": "TeleporterY - 8",
								"time": "0.1",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 845846520898422
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "PlayerCollision",
							"sid": 100970205690092,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SnapToTeleporter\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Start the teleport in animation in the player object, making it look towards the camera."
						},
						{
							"id": "set-animation",
							"objectClass": "PlayerGraphics",
							"sid": 307929225409899,
							"parameters": {
								"animation": "\"TeleportIn\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Spawn and animate a rotating shape."
						},
						{
							"id": "spawn-another-object",
							"objectClass": "PlayerCollision",
							"sid": 303456722699655,
							"parameters": {
								"object": "RotatingShape",
								"layer": "\"World\"",
								"image-point": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Setup multiple properties, like: angle, size, position and opacity."
						},
						{
							"id": "set-angle",
							"objectClass": "RotatingShape",
							"sid": 168857695999286,
							"parameters": {
								"angle": "45"
							}
						},
						{
							"id": "set-size",
							"objectClass": "RotatingShape",
							"sid": 206740624094488,
							"parameters": {
								"width": "48",
								"height": "48"
							}
						},
						{
							"id": "set-position",
							"objectClass": "RotatingShape",
							"sid": 167899670121931,
							"parameters": {
								"x": "Self.X",
								"y": "Self.Y - 8"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "RotatingShape",
							"sid": 195797949038799,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Gradually show the shape by tweening its opacity."
						},
						{
							"id": "tween-one-property",
							"objectClass": "RotatingShape",
							"sid": 792609487849674,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeIn\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Also rotate the shape by tweening its angle."
						},
						{
							"id": "tween-one-property",
							"objectClass": "RotatingShape",
							"sid": 366941403841048,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Rotate\"",
								"property": "offsetAngle",
								"end-value": "180+45",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 945862206242106
				},
				{
					"eventType": "comment",
					"text": "Once the fade animation is complete, destroy the shape tweening its opacity and size."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "RotatingShape",
							"sid": 867062024297343,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeIn\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Gradually hide the shape by tweening its opacity."
						},
						{
							"id": "tween-one-property",
							"objectClass": "RotatingShape",
							"sid": 301276441308508,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOut\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Also increase its size by tweening both width and height."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "RotatingShape",
							"sid": 488191533095600,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Expand\"",
								"property": "size",
								"end-x": "Self.Width + 16",
								"end-y": "Self.Height + 16",
								"time": "0.5",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Shake the screen."
						},
						{
							"callFunction": "ShakeScreen",
							"sid": 657527033978327,
							"parameters": [
								"0.1",
								"0.25"
							]
						}
					],
					"sid": 994443824312806
				},
				{
					"eventType": "comment",
					"text": "Once the player is properly positioned, spawn a grid of canvases that will store an image of the player that can be animated individually, creating the disintegration effect."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "PlayerGraphics",
							"sid": 743414032138649,
							"parameters": {
								"animation": "\"TeleportIn\""
							}
						}
					],
					"actions": [],
					"sid": 767196315234712,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 613384492298276,
									"parameters": {
										"name": "\"y\"",
										"start-index": "0",
										"end-index": "GRIDSIZE - 1"
									}
								}
							],
							"actions": [],
							"sid": 944119700333507,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 969345449438995,
											"parameters": {
												"name": "\"x\"",
												"start-index": "0",
												"end-index": "GRIDSIZE - 1"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 790927313168672,
											"parameters": {
												"object-to-create": "DrawingCanvas",
												"layer": "\"World\"",
												"x": "(PlayerGraphics.X + XOFFSET) - ((GRIDSIZE / 2) * CANVASSIZE) + (loopindex(\"x\") * CANVASSIZE)",
												"y": "(PlayerGraphics.Y + YOFFSET) - ((GRIDSIZE / 2) * CANVASSIZE) + (loopindex(\"y\") * CANVASSIZE)",
												"create-hierarchy": false
											}
										},
										{
											"id": "set-size",
											"objectClass": "DrawingCanvas",
											"sid": 392823463490263,
											"parameters": {
												"width": "CANVASSIZE",
												"height": "CANVASSIZE"
											}
										},
										{
											"id": "paste-object",
											"objectClass": "DrawingCanvas",
											"sid": 748367249694495,
											"parameters": {
												"object": "PlayerGraphics",
												"effects": "with-effects"
											}
										}
									],
									"sid": 754192388977107
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Since the canvas object can take a couple of frames to store the player image, it's important to wait a bit with a small delay."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "PlayerCollision",
									"sid": 714270224453295,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "DELAY",
										"type": "once",
										"tag": "\"Delay1\""
									}
								}
							],
							"sid": 780625961272696
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the first delay is over, both player and canvases can be animated and sent to their position in the scene."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "PlayerCollision",
							"sid": 596965106154740,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Delay1\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide the true player graphics, so it doesn't overlap what is inside the canvases."
						},
						{
							"id": "set-visible",
							"objectClass": "PlayerGraphics",
							"sid": 270458938813211,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"type": "comment",
							"text": "Move the player to its new position."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "PlayerCollision",
							"sid": 391699849545376,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"GoToDestination\"",
								"property": "position",
								"end-x": "Self.X + PlayerCollision.StoredDestinationX",
								"end-y": "Self.Y + PlayerCollision.StoredDestinationY",
								"time": "DURATION",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"type": "comment",
							"text": "Start a new delay, which will be used to trigger the final animation."
						},
						{
							"id": "start-timer",
							"objectClass": "PlayerCollision",
							"sid": 342062188185047,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "DURATION + DELAY",
								"type": "once",
								"tag": "\"Delay2\""
							}
						}
					],
					"sid": 723777802967293,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 892605905377972,
									"parameters": {
										"object": "DrawingCanvas"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Also move each canvas object to its new position, just like the player itself."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "DrawingCanvas",
									"sid": 139077668443545,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GoToDestination\"",
										"property": "position",
										"end-x": "Self.X + PlayerCollision.StoredDestinationX",
										"end-y": "Self.Y + PlayerCollision.StoredDestinationY",
										"time": "DURATION - random(0, DURATION * 0.75)",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Slightly rotate each canvas object to create an even more good looking effect."
								},
								{
									"id": "tween-one-property",
									"objectClass": "DrawingCanvas",
									"sid": 128031919083804,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Rotate\"",
										"property": "offsetAngle",
										"end-value": "Self.Angle + random(-60, 60)",
										"time": "DURATION / 2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes"
									}
								},
								{
									"type": "comment",
									"text": "Randomize the size of each canvas object, also enhancing the effect visuals."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "DrawingCanvas",
									"sid": 340255977599715,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Resize\"",
										"property": "size",
										"end-x": "Self.Width * random(0, 2)",
										"end-y": "Self.Height * random(0, 2)",
										"time": "DURATION / 2",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes"
									}
								},
								{
									"type": "comment",
									"text": "Used as reference to change parameters from multiple effects."
								},
								{
									"id": "tween-value",
									"objectClass": "DrawingCanvas",
									"sid": 643583967293589,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Effects\"",
										"start-value": "0",
										"end-value": "100",
										"time": "DURATION / 2",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes"
									}
								}
							],
							"sid": 912948962679455
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update the intensity of multiple effects on each canvas objects in order to simulate exposure and glow."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "DrawingCanvas",
							"sid": 506214924382523,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Effects\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "DrawingCanvas",
							"sid": 122173601979410,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "100 + Self.Tween.Value(\"Effects\")"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "DrawingCanvas",
							"sid": 609837405101859,
							"parameters": {
								"effect": "\"GlowHorizontal\"",
								"parameter-index": "0",
								"value": "Self.Tween.Value(\"Effects\")"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "DrawingCanvas",
							"sid": 802526599284223,
							"parameters": {
								"effect": "\"GlowVertical\"",
								"parameter-index": "0",
								"value": "Self.Tween.Value(\"Effects\")"
							}
						}
					],
					"sid": 934455146455367
				},
				{
					"eventType": "comment",
					"text": "Once the second and last delay is over, start to reset most objects in the scene."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "PlayerCollision",
							"sid": 931473859971728,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Delay2\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Show the true player graphics again."
						},
						{
							"id": "set-visible",
							"objectClass": "PlayerGraphics",
							"sid": 784770023657020,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"type": "comment",
							"text": "Start the final teleport animation."
						},
						{
							"id": "set-animation",
							"objectClass": "PlayerGraphics",
							"sid": 561762043962809,
							"parameters": {
								"animation": "\"TeleportOut\"",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Create the shadow effect in the player object for one second."
						},
						{
							"id": "start-timer",
							"objectClass": "PlayerCollision",
							"sid": 939813076001530,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1",
								"type": "once",
								"tag": "\"Shadow\""
							}
						},
						{
							"type": "comment",
							"text": "Shake the screen."
						},
						{
							"callFunction": "ShakeScreen",
							"sid": 136980777164085,
							"parameters": [
								"0.1",
								"0.25"
							]
						}
					],
					"sid": 381551549925237,
					"children": [
						{
							"eventType": "comment",
							"text": "Destroy all canvases in the scene, which won't be used anymore."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 868999123707230,
									"parameters": {
										"object": "DrawingCanvas"
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "DrawingCanvas",
									"sid": 199922900767980
								}
							],
							"sid": 783978594090808
						}
					]
				},
				{
					"eventType": "comment",
					"text": "The shadow effect leaves a trail of greenish clones behind the player while he's moving."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-timer-running",
							"objectClass": "PlayerCollision",
							"sid": 201995802593082,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Shadow\""
							}
						}
					],
					"actions": [],
					"sid": 451066366532233,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-x-seconds",
									"objectClass": "System",
									"sid": 469248535485871,
									"parameters": {
										"interval-seconds": "0.1"
									}
								}
							],
							"actions": [
								{
									"id": "spawn-another-object",
									"objectClass": "PlayerGraphics",
									"sid": 349668878364158,
									"parameters": {
										"object": "PlayerShadow",
										"layer": "\"World\"",
										"image-point": "0",
										"create-hierarchy": false
									}
								},
								{
									"type": "comment",
									"text": "Match properties like: animation, frame and width."
								},
								{
									"id": "set-animation",
									"objectClass": "PlayerShadow",
									"sid": 440590834533733,
									"parameters": {
										"animation": "PlayerGraphics.AnimationName",
										"from": "beginning"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "PlayerShadow",
									"sid": 975745954091996,
									"parameters": {
										"frame-number": "PlayerGraphics.AnimationFrame"
									}
								},
								{
									"id": "set-width",
									"objectClass": "PlayerShadow",
									"sid": 195452932392959,
									"parameters": {
										"width": "PlayerGraphics.Width"
									}
								}
							],
							"sid": 469972331812100
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the final animation is over, allow the player to move again."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "PlayerGraphics",
							"sid": 723617469344751,
							"parameters": {
								"animation": "\"TeleportOut\""
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Enable the platform behavior."
						},
						{
							"id": "set-enabled",
							"objectClass": "PlayerCollision",
							"sid": 348376137823514,
							"behaviorType": "Platform",
							"parameters": {
								"state": "enabled"
							}
						},
						{
							"type": "comment",
							"text": "Reset both movement vectors."
						},
						{
							"id": "set-vector-x",
							"objectClass": "PlayerCollision",
							"sid": 882971488413224,
							"behaviorType": "Platform",
							"parameters": {
								"vector-x": "0"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "PlayerCollision",
							"sid": 666154197186271,
							"behaviorType": "Platform",
							"parameters": {
								"vector-y": "0"
							}
						},
						{
							"type": "comment",
							"text": "Toggle the teleporting bool off, which works as some sort of signal for a few parts of the code."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "PlayerCollision",
							"sid": 137707199672327,
							"parameters": {
								"instance-variable": "IsTeleporting",
								"value": "false"
							}
						}
					],
					"sid": 190330098785857
				}
			],
			"sid": 749581085903475
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "ZOrder",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Constantly update the Z order of multiple objects in the scene to make sure they don't overlap incorrectly."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 875758752841306
						}
					],
					"actions": [
						{
							"id": "move-to-bottom",
							"objectClass": "PlayerShadow",
							"sid": 794403692466733
						},
						{
							"id": "move-to-bottom",
							"objectClass": "TeleporterPlatformFront",
							"sid": 515196195771172
						},
						{
							"id": "move-to-bottom",
							"objectClass": "SmallTeleporterFront",
							"sid": 254830419050385
						},
						{
							"id": "move-to-bottom",
							"objectClass": "MainLight",
							"sid": 428464733100222
						},
						{
							"id": "move-to-bottom",
							"objectClass": "GlowParticles",
							"sid": 797690751424132
						},
						{
							"id": "move-to-bottom",
							"objectClass": "SecundaryLight",
							"sid": 849859249524097
						},
						{
							"id": "move-to-bottom",
							"objectClass": "DrawingCanvas",
							"sid": 835205060120843
						},
						{
							"id": "move-to-bottom",
							"objectClass": "PlayerGraphics",
							"sid": 451294192654171
						},
						{
							"id": "move-to-bottom",
							"objectClass": "TeleporterPlatformBack",
							"sid": 409769958958432
						},
						{
							"id": "move-to-bottom",
							"objectClass": "SmallTeleporterBack",
							"sid": 361750044933639
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Spike",
							"sid": 899356415337130
						},
						{
							"id": "move-to-bottom",
							"objectClass": "Ground",
							"sid": 550111920787507
						}
					],
					"sid": 221367660324292
				}
			],
			"sid": 383195553333612
		}
	],
	"sid": 703169307524782
}