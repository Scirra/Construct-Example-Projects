{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of our patrons on https://www.patreon.com/viridinostudios and our good friends at https://www.construct.net."
		},
		{
			"eventType": "comment",
			"text": "Which player is currently active."
		},
		{
			"eventType": "variable",
			"name": "CurrentPlayer",
			"type": "number",
			"initialValue": "1",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 359123966546006
		},
		{
			"eventType": "comment",
			"text": "How large the grid is (don't modify)."
		},
		{
			"eventType": "variable",
			"name": "GRIDWIDTH",
			"type": "number",
			"initialValue": "7",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 582398645948923
		},
		{
			"eventType": "comment",
			"text": "How tall the grid is (don't modify)."
		},
		{
			"eventType": "variable",
			"name": "GRIDHEIGHT",
			"type": "number",
			"initialValue": "6",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 325147185776315
		},
		{
			"eventType": "comment",
			"text": "The X position of the first cell in the grid (don't modify)."
		},
		{
			"eventType": "variable",
			"name": "INDEXZEROX",
			"type": "number",
			"initialValue": "112",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 369180861628491
		},
		{
			"eventType": "comment",
			"text": "The Y position of the first cell in the grid (don't modify)."
		},
		{
			"eventType": "variable",
			"name": "INDEXZEROY",
			"type": "number",
			"initialValue": "50",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 143124908455879
		},
		{
			"eventType": "comment",
			"text": "How large each tile is (don't modify)."
		},
		{
			"eventType": "variable",
			"name": "TILESIZE",
			"type": "number",
			"initialValue": "16",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 942085580554609
		},
		{
			"eventType": "comment",
			"text": "How long it takes for the disc to fall."
		},
		{
			"eventType": "variable",
			"name": "FALLTIME",
			"type": "number",
			"initialValue": "0.1",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 614472260346257
		},
		{
			"eventType": "comment",
			"text": "Whether or not the player is allowed to send any input to the game."
		},
		{
			"eventType": "variable",
			"name": "AllowInput",
			"type": "boolean",
			"initialValue": "true",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 811152090588281
		},
		{
			"eventType": "comment",
			"text": "Setup the camera, by moving it away from the main board."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 754607377450403
				}
			],
			"actions": [
				{
					"id": "look-at-position",
					"objectClass": "3DCamera",
					"sid": 907066196613549,
					"parameters": {
						"cam-x": "160 + 128",
						"cam-y": "90 - 32",
						"cam-z": "192",
						"look-x": "160",
						"look-y": "90",
						"look-z": "0",
						"up-x": "0",
						"up-y": "1",
						"up-z": "0"
					}
				},
				{
					"type": "comment",
					"text": "Also set the opacity of all triggers to 0."
				},
				{
					"id": "set-opacity",
					"objectClass": "Trigger",
					"sid": 898181093947236,
					"parameters": {
						"opacity": "0"
					}
				},
				{
					"type": "comment",
					"text": "Wait a few seconds before destroying the tutorial text, so the player has enough time to read it."
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 161045146167281,
					"parameters": {
						"seconds": "7"
					}
				},
				{
					"id": "tween-one-property",
					"objectClass": "Tutorial",
					"sid": 984049560044493,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"SelfDestroy\"",
						"property": "offsetY",
						"end-value": "180",
						"time": "1",
						"ease": "easeinsine",
						"destroy-on-complete": "yes",
						"loop": "no",
						"ping-pong": "no"
					}
				}
			],
			"sid": 785383277226767
		},
		{
			"eventType": "comment",
			"text": "Constantly update the opacity of each trigger."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "for-each",
					"objectClass": "System",
					"sid": 572508021950894,
					"parameters": {
						"object": "Trigger"
					}
				}
			],
			"actions": [],
			"sid": 773071695836917,
			"children": [
				{
					"eventType": "comment",
					"text": "If the mouse is over the trigger, increase its opacity."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 730112200647190,
							"parameters": {
								"object": "Trigger"
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "Trigger",
							"sid": 590325022767950,
							"parameters": {
								"opacity": "clamp(Self.Opacity + 10 * 60 * dt, 0, 100)"
							}
						}
					],
					"sid": 504499345589201
				},
				{
					"eventType": "comment",
					"text": "However, if the mouse isn't over the trigger, decrease its opacity."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 960103703670595
						},
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 743936994229824,
							"parameters": {
								"object": "Trigger"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "Trigger",
							"sid": 169396869404354,
							"parameters": {
								"opacity": "clamp(Self.Opacity - 10 * 60 * dt, 0, 100)"
							}
						}
					],
					"sid": 526842794095768
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Drop a new disc if any of the triggers are touched by the player."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-touched-object",
					"objectClass": "Touch",
					"sid": 916376505007816,
					"parameters": {
						"object": "Trigger"
					}
				}
			],
			"actions": [
				{
					"callFunction": "DropNewDisc",
					"sid": 628636689623932,
					"parameters": [
						"Trigger.UID"
					]
				}
			],
			"sid": 798444551094166
		},
		{
			"eventType": "comment",
			"text": "Drop a new disc on top of a specific trigger and make it fall downwards, but only if input is allow, the trigger isn't overlapping a discs and there's no cooldown running."
		},
		{
			"functionName": "DropNewDisc",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "RoleUID",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 483543045181813
				}
			],
			"eventType": "function-block",
			"conditions": [
				{
					"id": "pick-by-unique-id",
					"objectClass": "Trigger",
					"sid": 812991570496529,
					"parameters": {
						"unique-id": "RoleUID"
					}
				}
			],
			"actions": [],
			"sid": 790161418379436,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 863592522030842,
							"parameters": {
								"variable": "AllowInput"
							}
						},
						{
							"id": "is-overlapping-at-offset",
							"objectClass": "Trigger",
							"sid": 203314105358068,
							"parameters": {
								"object": "Disc",
								"offset-x": "0",
								"offset-y": "TILESIZE"
							},
							"isInverted": true
						},
						{
							"id": "is-timer-running",
							"objectClass": "GameManager",
							"sid": 679136204373165,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Cooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Use a separte collider to detect how far the disc will be able to fall."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 382724104614230,
							"parameters": {
								"object-to-create": "CollisionDetector",
								"layer": "\"World\"",
								"x": "Trigger.X",
								"y": "Trigger.Y",
								"create-hierarchy": false
							}
						}
					],
					"sid": 229356751566980,
					"children": [
						{
							"eventType": "comment",
							"text": "How many cells the disc will pass through."
						},
						{
							"eventType": "variable",
							"name": "Cells",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 241869774713011
						},
						{
							"eventType": "comment",
							"text": "Keep moving the collision detector down an increasing the cell count until it reaches the bottom."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 661259459376161,
									"parameters": {
										"name": "\"Collision\"",
										"start-index": "1",
										"end-index": "GRIDHEIGHT"
									}
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "CollisionDetector",
									"sid": 851639695252483,
									"parameters": {
										"y": "Trigger.Y + loopindex(\"Collision\") * 16"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 439922523525653,
									"parameters": {
										"variable": "Cells",
										"value": "Cells + 1"
									}
								}
							],
							"sid": 475905845647646,
							"children": [
								{
									"eventType": "comment",
									"text": "However, if the collision detector hits a disc, move it back, reduce the cells count and stop the loop."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "CollisionDetector",
											"sid": 885920174967182,
											"parameters": {
												"object": "Disc"
											}
										}
									],
									"actions": [
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 614698596793096
										},
										{
											"id": "set-y",
											"objectClass": "CollisionDetector",
											"sid": 874833714210069,
											"parameters": {
												"y": "Self.Y - 16"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 760792054120666,
											"parameters": {
												"variable": "Cells",
												"value": "Cells - 1"
											}
										}
									],
									"sid": 458122850618199
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Once the collision detector has done its job, create a disc on top of the trigger and tween its position down until reaches the collision detector position."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 436399454172271,
									"parameters": {
										"object-to-create": "Disc",
										"layer": "\"World\"",
										"x": "Trigger.X",
										"y": "Trigger.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Disc",
									"sid": 452713973231472,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Fall\"",
										"property": "offsetY",
										"end-value": "CollisionDetector.Y",
										"time": "FALLTIME * Cells",
										"ease": "easeoutbounce",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Make the disc tiny and then make it grow again over time with a tween animation."
								},
								{
									"id": "set-size",
									"objectClass": "Disc",
									"sid": 272313920712495,
									"parameters": {
										"width": "0",
										"height": "0"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Disc",
									"sid": 205433746320986,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"Grow\"",
										"property": "size",
										"end-x": "16",
										"end-y": "16",
										"time": "FALLTIME * Cells / 2",
										"ease": "noease",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no"
									}
								},
								{
									"type": "comment",
									"text": "Set the disc animation to match the color of each player."
								},
								{
									"id": "set-animation",
									"objectClass": "Disc",
									"sid": 849283474761064,
									"parameters": {
										"animation": "\"Player\"&CurrentPlayer",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Also destroy the collision detector and start a cooldown timer, so the player don't release discs to quickly."
								},
								{
									"id": "destroy",
									"objectClass": "CollisionDetector",
									"sid": 676528290546442
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 407045811106477,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "FALLTIME * Cells",
										"type": "once",
										"tag": "\"Cooldown\""
									}
								}
							],
							"sid": 790800151096349
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Toggle between player 1 and player 2, depending on which one is currently playing."
		},
		{
			"functionName": "ToggleCurrentPlayer",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 820135878164211,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 721750130479098,
							"parameters": {
								"value": "CurrentPlayer = 1"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 680876813784412,
							"parameters": {
								"variable": "CurrentPlayer",
								"value": "2"
							}
						}
					],
					"sid": 250148822178840
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 537275859820001
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 681912025362160,
							"parameters": {
								"value": "CurrentPlayer = 2"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 196531819164946,
							"parameters": {
								"variable": "CurrentPlayer",
								"value": "1"
							}
						}
					],
					"sid": 732884706887043
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Once a dics has finished its falling animation, refresh the position index of all discs in the layout."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-tweens-finished",
					"objectClass": "Disc",
					"sid": 743333970789069,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"Fall\""
					}
				}
			],
			"actions": [
				{
					"callFunction": "RefreshPositionIndex",
					"sid": 732880298140122
				}
			],
			"sid": 760034728020402
		},
		{
			"eventType": "comment",
			"text": "Refresh the position index of each disc, by storing their X and Y index values in local variables."
		},
		{
			"functionName": "RefreshPositionIndex",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 372868647915575,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 764760970195416,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "0",
								"end-index": "GRIDHEIGHT - 1"
							}
						}
					],
					"actions": [],
					"sid": 387301153700581,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 908027314202491,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "GRIDWIDTH - 1"
									}
								}
							],
							"actions": [],
							"sid": 373495647305374,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 801977653496148,
											"parameters": {
												"object": "Disc",
												"expression": "Disc.X",
												"comparison": 0,
												"value": "INDEXZEROX + 16 * loopindex(\"X\")"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 902892261467977,
											"parameters": {
												"object": "Disc",
												"expression": "Disc.Y",
												"comparison": 0,
												"value": "INDEXZEROY + 16 * loopindex(\"Y\")"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Disc",
											"sid": 420668678406104,
											"parameters": {
												"instance-variable": "XIndex",
												"value": "loopindex(\"X\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Disc",
											"sid": 908259613650636,
											"parameters": {
												"instance-variable": "YIndex",
												"value": "loopindex(\"Y\")"
											}
										}
									],
									"sid": 425369007615033,
									"children": [
										{
											"eventType": "comment",
											"text": "Also create a data representation of all discs inside an array, by using 0 to represent empty spots, 1 for the player 1 discs and 2 for the player 2 discs."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "Disc",
													"sid": 730353250450604,
													"parameters": {
														"animation": "\"Player1\""
													}
												}
											],
											"actions": [
												{
													"id": "set-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 455217447119618,
													"parameters": {
														"x": "loopindex(\"X\")",
														"y": "loopindex(\"Y\")",
														"value": "1"
													}
												}
											],
											"sid": 582564784623218
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 636423757972382
												},
												{
													"id": "is-animation-playing",
													"objectClass": "Disc",
													"sid": 629945705992194,
													"parameters": {
														"animation": "\"Player2\""
													}
												}
											],
											"actions": [
												{
													"id": "set-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 871739768586444,
													"parameters": {
														"x": "loopindex(\"X\")",
														"y": "loopindex(\"Y\")",
														"value": "2"
													}
												}
											],
											"sid": 746586332114767
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Once the array is ready, analyze it."
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "AnalyzeGrid",
							"sid": 457325147763122
						}
					],
					"sid": 913806768276357
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Analyze the entire grid and search for sequences of 4 discs."
		},
		{
			"functionName": "AnalyzeGrid",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 922667739746737,
			"children": [
				{
					"eventType": "comment",
					"text": "How many discs are in a streak."
				},
				{
					"eventType": "variable",
					"name": "Streak",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 253318782833787
				},
				{
					"eventType": "comment",
					"text": "Whether or not the player won."
				},
				{
					"eventType": "variable",
					"name": "Won",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 705316092024859
				},
				{
					"eventType": "comment",
					"text": "Search for disc sequences in a vertical (90 degrees) pattern."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 332588031436549,
							"parameters": {
								"name": "\"90DegreesOriginX\"",
								"start-index": "0",
								"end-index": "6"
							}
						}
					],
					"actions": [],
					"sid": 721177667629484,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 337825037228227,
									"parameters": {
										"name": "\"90DegreesOriginY\"",
										"start-index": "0",
										"end-index": "2"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Reset the streak value back to 0."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 175151460746957,
									"parameters": {
										"variable": "Streak",
										"value": "0"
									}
								}
							],
							"sid": 775329773853290,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 916869392636272,
											"parameters": {
												"name": "\"90DegreesOffset\"",
												"start-index": "0",
												"end-index": "3"
											}
										}
									],
									"actions": [],
									"sid": 485759087749832,
									"children": [
										{
											"eventType": "comment",
											"text": "If a disc is found in the are covered by this type of sequence, store it X and Y index value in the selected discs array and increase the streak count."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 344149085661696,
													"parameters": {
														"x": "loopindex(\"90DegreesOriginX\")",
														"y": "loopindex(\"90DegreesOriginY\") + loopindex(\"90DegreesOffset\")",
														"comparison": 0,
														"value": "CurrentPlayer"
													}
												}
											],
											"actions": [
												{
													"id": "set-at-x",
													"objectClass": "SelectedDiscs",
													"sid": 914644672976142,
													"parameters": {
														"x": "Streak",
														"value": "loopindex(\"90DegreesOriginX\")&\"|\"&loopindex(\"90DegreesOriginY\") + loopindex(\"90DegreesOffset\")"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 885082635293083,
													"parameters": {
														"variable": "Streak",
														"value": "Streak + 1"
													}
												}
											],
											"sid": 508867768754834,
											"children": [
												{
													"eventType": "comment",
													"text": "If the streak of discs is equal to 4, copy the content from the selected discs array to the winning discs array, while also making the player win."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 502853051213824,
															"parameters": {
																"value": "Streak = 4"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 105393199670968,
															"parameters": {
																"variable": "Won",
																"value": "true"
															}
														},
														{
															"id": "load",
															"objectClass": "WinningDiscs",
															"sid": 656163998138974,
															"parameters": {
																"json": "SelectedDiscs.AsJSON"
															}
														}
													],
													"sid": 691406413738460
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Search for disc sequences in a diagonal (45 degrees) pattern."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 627948719530602,
							"parameters": {
								"name": "\"45DegreesOriginX\"",
								"start-index": "0",
								"end-index": "3"
							}
						}
					],
					"actions": [],
					"sid": 950118363378765,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 773559259057579,
									"parameters": {
										"name": "\"45DegreesOriginY\"",
										"start-index": "0",
										"end-index": "2"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Reset the streak value back to 0."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 122511206198712,
									"parameters": {
										"variable": "Streak",
										"value": "0"
									}
								}
							],
							"sid": 169632828533508,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 690250336871140,
											"parameters": {
												"name": "\"45DegreesOffset\"",
												"start-index": "0",
												"end-index": "3"
											}
										}
									],
									"actions": [],
									"sid": 277543684408769,
									"children": [
										{
											"eventType": "comment",
											"text": "If a disc is found in the are covered by this type of sequence, store it X and Y index value in the selected discs array and increase the streak count."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 885899766666197,
													"parameters": {
														"x": "loopindex(\"45DegreesOriginX\") + loopindex(\"45DegreesOffset\")",
														"y": "loopindex(\"45DegreesOriginY\") + loopindex(\"45DegreesOffset\")",
														"comparison": 0,
														"value": "CurrentPlayer"
													}
												}
											],
											"actions": [
												{
													"id": "set-at-x",
													"objectClass": "SelectedDiscs",
													"sid": 204633497954668,
													"parameters": {
														"x": "Streak",
														"value": "loopindex(\"45DegreesOriginX\") + loopindex(\"45DegreesOffset\")&\"|\"&loopindex(\"45DegreesOriginY\") + loopindex(\"45DegreesOffset\")"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 715824064554132,
													"parameters": {
														"variable": "Streak",
														"value": "Streak + 1"
													}
												}
											],
											"sid": 288428991562971,
											"children": [
												{
													"eventType": "comment",
													"text": "If the streak of discs is equal to 4, copy the content from the selected discs array to the winning discs array, while also making the player win."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 437977051229816,
															"parameters": {
																"value": "Streak = 4"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 705957371123129,
															"parameters": {
																"variable": "Won",
																"value": "true"
															}
														},
														{
															"id": "load",
															"objectClass": "WinningDiscs",
															"sid": 873935597897114,
															"parameters": {
																"json": "SelectedDiscs.AsJSON"
															}
														}
													],
													"sid": 257795194731748
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Search for disc sequences in a horizontal (0 degrees) pattern."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 611143184674741,
							"parameters": {
								"name": "\"0DegreesOriginX\"",
								"start-index": "0",
								"end-index": "3"
							}
						}
					],
					"actions": [],
					"sid": 759081171797783,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 225048974549415,
									"parameters": {
										"name": "\"0DegreesOriginY\"",
										"start-index": "0",
										"end-index": "6"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Reset the streak value back to 0."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 910460560219299,
									"parameters": {
										"variable": "Streak",
										"value": "0"
									}
								}
							],
							"sid": 899783252003182,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 978887359344176,
											"parameters": {
												"name": "\"0DegreesOffset\"",
												"start-index": "0",
												"end-index": "3"
											}
										}
									],
									"actions": [],
									"sid": 901201638081043,
									"children": [
										{
											"eventType": "comment",
											"text": "If a disc is found in the are covered by this type of sequence, store it X and Y index value in the selected discs array and increase the streak count."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 803004449561222,
													"parameters": {
														"x": "loopindex(\"0DegreesOriginX\") + loopindex(\"0DegreesOffset\")",
														"y": "loopindex(\"0DegreesOriginY\")",
														"comparison": 0,
														"value": "CurrentPlayer"
													}
												}
											],
											"actions": [
												{
													"id": "set-at-x",
													"objectClass": "SelectedDiscs",
													"sid": 842050349660174,
													"parameters": {
														"x": "Streak",
														"value": "loopindex(\"0DegreesOriginX\") + loopindex(\"0DegreesOffset\")&\"|\"&loopindex(\"0DegreesOriginY\")"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 220043731437480,
													"parameters": {
														"variable": "Streak",
														"value": "Streak + 1"
													}
												}
											],
											"sid": 642300353831424,
											"children": [
												{
													"eventType": "comment",
													"text": "If the streak of discs is equal to 4, copy the content from the selected discs array to the winning discs array, while also making the player win."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 796632629764974,
															"parameters": {
																"value": "Streak = 4"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 913675843293898,
															"parameters": {
																"variable": "Won",
																"value": "true"
															}
														},
														{
															"id": "load",
															"objectClass": "WinningDiscs",
															"sid": 536770732506491,
															"parameters": {
																"json": "SelectedDiscs.AsJSON"
															}
														}
													],
													"sid": 332639583104387
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Search for disc sequences in a diagonal (-45 degrees) pattern."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 778381577704512,
							"parameters": {
								"name": "\"-45DegreesOriginX\"",
								"start-index": "0",
								"end-index": "3"
							}
						}
					],
					"actions": [],
					"sid": 628168899231600,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 388950886749117,
									"parameters": {
										"name": "\"-45DegreesOriginY\"",
										"start-index": "3",
										"end-index": "5"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Reset the streak value back to 0."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 907607608289125,
									"parameters": {
										"variable": "Streak",
										"value": "0"
									}
								}
							],
							"sid": 385452546945530,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 962232988702414,
											"parameters": {
												"name": "\"-45DegreesOffset\"",
												"start-index": "0",
												"end-index": "3"
											}
										}
									],
									"actions": [],
									"sid": 282036950524462,
									"children": [
										{
											"eventType": "comment",
											"text": "If a disc is found in the are covered by this type of sequence, store it X and Y index value in the selected discs array and increase the streak count."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-at-xy",
													"objectClass": "DiscsGrid",
													"sid": 244008734114263,
													"parameters": {
														"x": "loopindex(\"-45DegreesOriginX\") + loopindex(\"-45DegreesOffset\")",
														"y": "loopindex(\"-45DegreesOriginY\") - loopindex(\"-45DegreesOffset\")",
														"comparison": 0,
														"value": "CurrentPlayer"
													}
												}
											],
											"actions": [
												{
													"id": "set-at-x",
													"objectClass": "SelectedDiscs",
													"sid": 133571674827426,
													"parameters": {
														"x": "Streak",
														"value": "loopindex(\"-45DegreesOriginX\") + loopindex(\"-45DegreesOffset\")&\"|\"&loopindex(\"-45DegreesOriginY\") - loopindex(\"-45DegreesOffset\")"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 293866837043730,
													"parameters": {
														"variable": "Streak",
														"value": "Streak + 1"
													}
												}
											],
											"sid": 608249620444990,
											"children": [
												{
													"eventType": "comment",
													"text": "If the streak of discs is equal to 4, copy the content from the selected discs array to the winning discs array, while also making the player win."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 287964997026128,
															"parameters": {
																"value": "Streak = 4"
															}
														}
													],
													"actions": [
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 614564670939864,
															"parameters": {
																"variable": "Won",
																"value": "true"
															}
														},
														{
															"id": "load",
															"objectClass": "WinningDiscs",
															"sid": 768731253733735,
															"parameters": {
																"json": "SelectedDiscs.AsJSON"
															}
														}
													],
													"sid": 911161581040721
												}
											]
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the player wins, prevent it from sending any other input and start a flash animation in the winning discs."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 373487777538063,
							"parameters": {
								"variable": "Won"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 925131410298055,
							"parameters": {
								"variable": "AllowInput",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Also display a text in the center of the screen, informing which player won the match."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Text",
							"sid": 867177676388960,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Show\"",
								"property": "offsetY",
								"end-value": "74",
								"time": "1.5",
								"ease": "easeoutback",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no"
							}
						},
						{
							"id": "set-text",
							"objectClass": "Text",
							"sid": 575988107977489,
							"parameters": {
								"text": "\"Player \"&CurrentPlayer&\" won!\""
							}
						}
					],
					"sid": 352072409441298,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 694019530918837,
									"parameters": {
										"name": "\"Select\"",
										"start-index": "0",
										"end-index": "3"
									}
								}
							],
							"actions": [],
							"sid": 641046720800874,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 305814518124689,
											"parameters": {
												"object": "Disc",
												"expression": "Disc.XIndex",
												"comparison": 0,
												"value": "int(tokenat(WinningDiscs.At(loopindex(\"Select\")), 0, \"|\"))"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 452697297129173,
											"parameters": {
												"object": "Disc",
												"expression": "Disc.YIndex",
												"comparison": 0,
												"value": "int(tokenat(WinningDiscs.At(loopindex(\"Select\")), 1, \"|\"))"
											}
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "Disc",
											"sid": 714132853012606,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Flash\"",
												"start-value": "0",
												"end-value": "100",
												"time": "1",
												"ease": "default",
												"destroy-on-complete": "no",
												"loop": "yes",
												"ping-pong": "yes"
											}
										}
									],
									"sid": 431747357543475
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "However, if the player didn't win, switch to the next player, so it can perform its move."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 496304838492521
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 625027110670290,
							"parameters": {
								"variable": "Won"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"callFunction": "ToggleCurrentPlayer",
							"sid": 288843898781779
						}
					],
					"sid": 956799016631773
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Constantly update the HSL effect on the disc while the flash animation is being played."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-playing",
					"objectClass": "Disc",
					"sid": 299942652143586,
					"behaviorType": "Tween",
					"parameters": {
						"tags": "\"Flash\""
					}
				}
			],
			"actions": [
				{
					"id": "set-effect-parameter",
					"objectClass": "Disc",
					"sid": 648457311399531,
					"parameters": {
						"effect": "\"AdjustHSL\"",
						"parameter-index": "0",
						"value": "Self.Tween.Value(\"Flash\")"
					}
				}
			],
			"sid": 477429895239929
		}
	],
	"sid": 524308464112995
}