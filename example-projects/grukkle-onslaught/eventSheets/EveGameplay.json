{
	"name": "EveGameplay",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "lives",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of remaining lives",
			"isStatic": false,
			"isConstant": false,
			"sid": 646286857962581
		},
		{
			"eventType": "variable",
			"name": "gold",
			"type": "number",
			"initialValue": "0",
			"comment": "Amount of gold",
			"isStatic": false,
			"isConstant": false,
			"sid": 445028181601679
		},
		{
			"eventType": "variable",
			"name": "interest",
			"type": "number",
			"initialValue": "0",
			"comment": "Current intereset",
			"isStatic": false,
			"isConstant": false,
			"sid": 670183053374781
		},
		{
			"eventType": "variable",
			"name": "ember",
			"type": "number",
			"initialValue": "0",
			"comment": "Ember tech points",
			"isStatic": false,
			"isConstant": false,
			"sid": 179847227766379
		},
		{
			"eventType": "variable",
			"name": "crystal",
			"type": "number",
			"initialValue": "0",
			"comment": "Crystal tech points",
			"isStatic": false,
			"isConstant": false,
			"sid": 388327703215222
		},
		{
			"eventType": "variable",
			"name": "flux",
			"type": "number",
			"initialValue": "0",
			"comment": "Flux tech points",
			"isStatic": false,
			"isConstant": false,
			"sid": 546849767806220
		},
		{
			"eventType": "variable",
			"name": "timeToWave",
			"type": "number",
			"initialValue": "0",
			"comment": "Time left to next wave",
			"isStatic": false,
			"isConstant": false,
			"sid": 147437602488084
		},
		{
			"eventType": "variable",
			"name": "wave",
			"type": "number",
			"initialValue": "0",
			"comment": "Identification number for the next wave",
			"isStatic": false,
			"isConstant": false,
			"sid": 914312859793518
		},
		{
			"eventType": "variable",
			"name": "inputFocus",
			"type": "string",
			"initialValue": "",
			"comment": "Player control context",
			"isStatic": false,
			"isConstant": false,
			"sid": 313147034385310
		},
		{
			"eventType": "variable",
			"name": "currWaveID",
			"type": "number",
			"initialValue": "0",
			"comment": "Current wave ID in the array",
			"isStatic": false,
			"isConstant": false,
			"sid": 249388589787929
		},
		{
			"eventType": "variable",
			"name": "currEnemyID",
			"type": "number",
			"initialValue": "0",
			"comment": "Current enemy ID in the array",
			"isStatic": false,
			"isConstant": false,
			"sid": 222703301179126
		},
		{
			"eventType": "variable",
			"name": "tutorialState",
			"type": "number",
			"initialValue": "0",
			"comment": "Current state of the tutorial",
			"isStatic": false,
			"isConstant": false,
			"sid": 866137894585468
		},
		{
			"eventType": "variable",
			"name": "isOnMobile",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the player on a mobile device?",
			"isStatic": false,
			"isConstant": false,
			"sid": 340485400385448
		},
		{
			"eventType": "variable",
			"name": "chosenTech",
			"type": "string",
			"initialValue": "",
			"comment": "Tech chosen in the beginning of the level",
			"isStatic": false,
			"isConstant": false,
			"sid": 691544751499645
		},
		{
			"eventType": "comment",
			"text": "Colors."
		},
		{
			"eventType": "variable",
			"name": "TIP_HL_COL",
			"type": "string",
			"initialValue": "#ffff00",
			"comment": "Tip highlight color",
			"isStatic": false,
			"isConstant": true,
			"sid": 517659482284444
		},
		{
			"eventType": "variable",
			"name": "TIP_GOLD_COL",
			"type": "string",
			"initialValue": "#00ff00",
			"comment": "Tip gold color",
			"isStatic": false,
			"isConstant": true,
			"sid": 694379333856368
		},
		{
			"eventType": "variable",
			"name": "TIP_STD_COL",
			"type": "string",
			"initialValue": "#ffffff",
			"comment": "Tip standard color",
			"isStatic": false,
			"isConstant": true,
			"sid": 964260689138518
		},
		{
			"eventType": "comment",
			"text": "Starting values."
		},
		{
			"eventType": "variable",
			"name": "STARTING_LIVES",
			"type": "number",
			"initialValue": "10",
			"comment": "Starting number of lives",
			"isStatic": false,
			"isConstant": true,
			"sid": 801177423424383
		},
		{
			"eventType": "variable",
			"name": "STARTING_INTEREST",
			"type": "number",
			"initialValue": "0.005",
			"comment": "Starting interest value",
			"isStatic": false,
			"isConstant": true,
			"sid": 710549733039369
		},
		{
			"eventType": "comment",
			"text": "Other settings."
		},
		{
			"eventType": "variable",
			"name": "WAVE_GOLD_INC",
			"type": "number",
			"initialValue": "0.1",
			"comment": "Gold ratio to increase per wave",
			"isStatic": false,
			"isConstant": true,
			"sid": 658794240123180
		},
		{
			"eventType": "variable",
			"name": "WAVE_SPEED_INC",
			"type": "number",
			"initialValue": "0.025",
			"comment": "speed ratio to increase per wave",
			"isStatic": false,
			"isConstant": true,
			"sid": 664637478392661
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tools",
			"description": "Tool functions that help setup the game.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Set initial variable values."
				},
				{
					"functionName": "setInitialVarValues",
					"functionDescription": "Set initial variable values",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "The following variables can have their initial values adjusted by the corresponding constants."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 797343477658687,
							"parameters": {
								"variable": "lives",
								"value": "STARTING_LIVES"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 340408039348179,
							"parameters": {
								"variable": "gold",
								"value": "ArrLevel.At(2, currLevel - 1)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 621074324025894,
							"parameters": {
								"variable": "interest",
								"value": "STARTING_INTEREST"
							}
						},
						{
							"type": "comment",
							"text": "There is no point in adjusting the ones below, as the code will change them or need them to start at the informed values."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 740198724743598,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"none\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 178154907390605,
							"parameters": {
								"variable": "wave",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 198328920413970,
							"parameters": {
								"variable": "currWaveID",
								"value": "Functions.getWaveID(currLevel, wave)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 442750164293376,
							"parameters": {
								"variable": "currEnemyID",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 253413109252021,
							"parameters": {
								"variable": "tutorialState",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 294702898260259,
							"parameters": {
								"variable": "chosenTech",
								"value": "\"None\""
							}
						}
					],
					"sid": 906945914986515,
					"children": [
						{
							"eventType": "comment",
							"text": "Check if the player is on mobile."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-mobile",
									"objectClass": "PlatformInfo",
									"sid": 290018955030511
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 273353017672287,
									"parameters": {
										"variable": "isOnMobile",
										"value": "true"
									}
								}
							],
							"sid": 652136781464826
						},
						{
							"eventType": "comment",
							"text": "Load tech points."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 634021387479288,
									"parameters": {
										"variable": "ember",
										"value": "int(DictProfile.Get(\"Ember\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 284124305038411,
									"parameters": {
										"variable": "crystal",
										"value": "int(DictProfile.Get(\"Crystal\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 927375806829716,
									"parameters": {
										"variable": "flux",
										"value": "int(DictProfile.Get(\"Flux\"))"
									}
								}
							],
							"sid": 560591635781878
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Load all arrays and dictionaries."
				},
				{
					"functionName": "loadContainers",
					"functionDescription": "Load all arrays and dictionaries",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Load tutorial array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 314781691914062,
							"parameters": {
								"tag": "\"ArrTutorial\"",
								"file": "Tutorial.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 719917485655473
						},
						{
							"id": "load",
							"objectClass": "ArrTutorial",
							"sid": 233939395626738,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Load level info array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 204257291284093,
							"parameters": {
								"tag": "\"ArrLevelInfo\"",
								"file": "LevelInfo.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 422386812359893
						},
						{
							"id": "load",
							"objectClass": "ArrLevel",
							"sid": 867176153855303,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Load towers array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 714287961884084,
							"parameters": {
								"tag": "\"ArrTowers\"",
								"file": "Towers.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 812328005073171
						},
						{
							"id": "load",
							"objectClass": "ArrTowers",
							"sid": 555188489371699,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Load enemies array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 562811523313382,
							"parameters": {
								"tag": "\"ArrEnemies\"",
								"file": "Enemies.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 387082776716384
						},
						{
							"id": "load",
							"objectClass": "ArrEnemies",
							"sid": 236519493800587,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Load waves array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 219253279847506,
							"parameters": {
								"tag": "\"ArrWaves\"",
								"file": "Waves.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 889606774031959
						},
						{
							"id": "load",
							"objectClass": "ArrWaves",
							"sid": 590062860931613,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Load tech multipliers dictionary."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 227237057482076,
							"parameters": {
								"tag": "\"DictTechs\"",
								"file": "TechMultipliers.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 916592764799471
						},
						{
							"id": "load",
							"objectClass": "DictTech",
							"sid": 891165494965215,
							"parameters": {
								"json": "AJAX.LastData"
							}
						}
					],
					"sid": 479326411054441
				},
				{
					"eventType": "comment",
					"text": "Load starting level objects."
				},
				{
					"functionName": "loadLevelObjects",
					"functionDescription": "Load starting level objects",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy any leftovers."
						},
						{
							"id": "destroy",
							"objectClass": "LVBackground",
							"sid": 893616552519930
						},
						{
							"id": "destroy",
							"objectClass": "LVLevelBlocks",
							"sid": 475824626636761
						},
						{
							"id": "destroy",
							"objectClass": "GPPortalBase",
							"sid": 143398439439954
						},
						{
							"id": "destroy",
							"objectClass": "GPPortalSpawner",
							"sid": 694303000376768
						},
						{
							"type": "comment",
							"text": "Create level."
						},
						{
							"id": "recreate-initial-objects",
							"objectClass": "System",
							"sid": 896984528473352,
							"parameters": {
								"object": "LVLevelBlocks",
								"from-x": "0",
								"from-y": "0",
								"to-x": "1920",
								"to-y": "1080",
								"source-layout": "\"Level\" & currLevel",
								"source-layer": "-1",
								"offset-x": "0",
								"offset-y": "0",
								"create-hierarchy": false
							}
						},
						{
							"id": "recreate-initial-objects",
							"objectClass": "System",
							"sid": 140300729391859,
							"parameters": {
								"object": "LVBackground",
								"from-x": "0",
								"from-y": "0",
								"to-x": "1920",
								"to-y": "1080",
								"source-layout": "\"Level\" & currLevel",
								"source-layer": "-1",
								"offset-x": "0",
								"offset-y": "0",
								"create-hierarchy": false
							}
						},
						{
							"type": "comment",
							"text": "Hide level blocks."
						},
						{
							"id": "set-opacity",
							"objectClass": "LVLevelBlocks",
							"sid": 939594084636083,
							"parameters": {
								"opacity": "0"
							}
						}
					],
					"sid": 274708845485185
				},
				{
					"eventType": "comment",
					"text": "Set input focus to a different value and update needed items."
				},
				{
					"functionName": "setInputFocus",
					"functionDescription": "Set input focus to a different value and update needed items",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "focus",
							"type": "string",
							"initialValue": "game",
							"comment": "Input focus",
							"sid": 835568856565327
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 989432707215393,
							"parameters": {
								"variable": "inputFocus",
								"value": "focus"
							}
						}
					],
					"sid": 119800840111400,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 873007203972564,
									"parameters": {
										"value": "inputFocus = \"game\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-opacity",
									"objectClass": "System",
									"sid": 324006202889053,
									"parameters": {
										"layer": "\"UICornerButtons\"",
										"opacity": "75"
									}
								}
							],
							"sid": 553633065879428
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 199622490619505
								}
							],
							"actions": [
								{
									"id": "set-layer-opacity",
									"objectClass": "System",
									"sid": 719549535091547,
									"parameters": {
										"layer": "\"UICornerButtons\"",
										"opacity": "25"
									}
								}
							],
							"sid": 541043283065510
						}
					]
				}
			],
			"sid": 335147180134867
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Gameplay Setup",
			"description": "Initial gameplay setup.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Begin the first wave countdown.."
				},
				{
					"functionName": "beginGame",
					"functionDescription": "Begin the first wave countdown",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Update the UI."
						},
						{
							"callFunction": "updateUI",
							"sid": 311061723187891
						},
						{
							"type": "comment",
							"text": "Start interest ticking."
						},
						{
							"id": "start-timer",
							"objectClass": "GPInterestTimer",
							"sid": 778333320790833,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "regular",
								"tag": "\"InterestTick\""
							}
						},
						{
							"type": "comment",
							"text": "Start waves timer."
						},
						{
							"id": "start-timer",
							"objectClass": "GPNextWave",
							"sid": 766226226965914,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "20",
								"type": "once",
								"tag": "\"NextWave\""
							}
						}
					],
					"sid": 916007124403868,
					"children": [
						{
							"eventType": "comment",
							"text": "Hide tutorial UI."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 842593457991714,
									"parameters": {
										"value": "inputFocus = \"tutorial\""
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 124576259047780,
									"parameters": {
										"value": "inputFocus = \"tutorialTech\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameTutorial",
									"sid": 164633304167534,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFrameTutorial\"",
										"property": "offsetY",
										"end-value": "LayoutHeight + 512",
										"time": "0.2",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameTutorial",
									"sid": 688055158955323,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFrameTutorialOp\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.1",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 969705946802788,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Hide tech UI."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 927490065381419,
									"parameters": {
										"value": "inputFocus = \"newTech\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameTech",
									"sid": 170781621642466,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFrameTutorial\"",
										"property": "offsetY",
										"end-value": "LayoutHeight + 512",
										"time": "0.2",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameTech",
									"sid": 798279962791763,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFrameTutorialOp\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.1",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 622200367537968
						},
						{
							"eventType": "comment",
							"text": "Make current wave portal shine."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 124967097201795,
									"parameters": {
										"object": "GPPortalSpawner"
									}
								}
							],
							"actions": [],
							"sid": 462059866312216,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 181708983673624,
											"parameters": {
												"value": "GPPortalSpawner.spawnerID = ArrWaves.At(3, currWaveID)"
											}
										}
									],
									"actions": [
										{
											"id": "set-active",
											"objectClass": "GPPortalSpawner",
											"sid": 797634541573725,
											"behaviorType": "Sine",
											"parameters": {
												"state": "active"
											}
										}
									],
									"sid": 628147956286067,
									"children": [
										{
											"eventType": "comment",
											"text": "If level has overlapping portals, make the current wave's portal visible."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 531895689736598,
													"parameters": {
														"value": "ArrLevel.At(4, currLevel - 1) = 1"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "GPPortalSpawner",
													"sid": 200733904688508,
													"parameters": {
														"visibility": "visible"
													}
												}
											],
											"sid": 529420918454728
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 699925203061729
										}
									],
									"actions": [
										{
											"id": "set-active",
											"objectClass": "GPPortalSpawner",
											"sid": 291090392013995,
											"behaviorType": "Sine",
											"parameters": {
												"state": "inactive"
											}
										},
										{
											"id": "set-effect-parameter",
											"objectClass": "GPPortalSpawner",
											"sid": 316756728032841,
											"parameters": {
												"effect": "\"AdjustHSL\"",
												"parameter-index": "2",
												"value": "100"
											}
										}
									],
									"sid": 427630132753086,
									"children": [
										{
											"eventType": "comment",
											"text": "If level has overlapping portals, make inactive portals invisible."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 132314603034951,
													"parameters": {
														"value": "ArrLevel.At(4, currLevel - 1) = 1"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "GPPortalSpawner",
													"sid": 987673768784271,
													"parameters": {
														"visibility": "invisible"
													}
												}
											],
											"sid": 497302175941882
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Change input focus to game."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 103536848185350,
									"parameters": {
										"seconds": "0.1"
									}
								},
								{
									"callFunction": "setInputFocus",
									"sid": 137776691415719,
									"parameters": [
										"\"game\""
									]
								}
							],
							"sid": 771359126190174
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Set everything to start a new level from the beginning."
				},
				{
					"functionName": "prepareLevel",
					"functionDescription": "Set everything to start a new level from the beginning",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Setup ambience woosh."
						},
						{
							"callFunction": "playWoosh",
							"sid": 571097354405741
						},
						{
							"type": "comment",
							"text": "Setup BGM."
						},
						{
							"callFunction": "nextGPTrack",
							"sid": 842571481678273
						},
						{
							"id": "set-animation-frame",
							"objectClass": "GPBGM",
							"sid": 991600594702049,
							"parameters": {
								"frame-number": "BGMPlaying"
							}
						},
						{
							"type": "comment",
							"text": "Setup SFX."
						},
						{
							"id": "set-animation-frame",
							"objectClass": "GPSFX",
							"sid": 375857970419376,
							"parameters": {
								"frame-number": "SFXPlaying"
							}
						},
						{
							"type": "comment",
							"text": "Destroy any remaining enemies and load new objects."
						},
						{
							"id": "destroy",
							"objectClass": "GPEnemy",
							"sid": 967058134627152
						},
						{
							"callFunction": "loadLevelObjects",
							"sid": 662585598860177
						},
						{
							"type": "comment",
							"text": "Load all containers."
						},
						{
							"callFunction": "loadContainers",
							"sid": 443060414788938
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 521942479277312
						},
						{
							"type": "comment",
							"text": "Set GPNextWave animation."
						},
						{
							"id": "set-animation",
							"objectClass": "GPNextWave",
							"sid": 487777187242246,
							"parameters": {
								"animation": "str(zeropad(ArrWaves.At(2, Functions.getWaveID(currLevel, 0)), 3))",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Setup vars."
						},
						{
							"callFunction": "setInitialVarValues",
							"sid": 127506836108460
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 693153829824245,
							"parameters": {
								"seconds": "0"
							}
						},
						{
							"type": "comment",
							"text": "Show necessary UI elements."
						},
						{
							"id": "set-opacity",
							"objectClass": "GPUIFrameTutorial",
							"sid": 261424591975457,
							"parameters": {
								"opacity": "100"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "GPUIFrameTech",
							"sid": 240366619083292,
							"parameters": {
								"opacity": "100"
							}
						},
						{
							"id": "set-y",
							"objectClass": "GPUIFrameTech",
							"sid": 552328459130807,
							"parameters": {
								"y": "LayoutHeight/2"
							}
						},
						{
							"id": "set-y",
							"objectClass": "GPUIFrameTutorial",
							"sid": 518703253886902,
							"parameters": {
								"y": "LayoutHeight/2"
							}
						},
						{
							"type": "comment",
							"text": "Hide unnecessary UI elements."
						},
						{
							"id": "set-opacity",
							"objectClass": "FadeFinish",
							"sid": 871615185286781,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "GPUIFrameTip",
							"sid": 538768633528661,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Set input focus as game."
						},
						{
							"callFunction": "setInputFocus",
							"sid": 293749854140080,
							"parameters": [
								"\"game\""
							]
						},
						{
							"type": "comment",
							"text": "Reset tutorial."
						},
						{
							"callFunction": "resetTutorial",
							"sid": 684881861895504
						},
						{
							"type": "comment",
							"text": "Set information textboxes."
						},
						{
							"callFunction": "updateUI",
							"sid": 139598333821539
						},
						{
							"type": "comment",
							"text": "Fade the game in."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 144989729949215,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 107992132689765,
					"children": [
						{
							"eventType": "comment",
							"text": "Spawn portals."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 208766651310746,
									"parameters": {
										"object": "LVSpawner"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 890018887134971,
									"parameters": {
										"object-to-create": "GPPortalSpawner",
										"layer": "\"Entities\"",
										"x": "LVSpawner.X",
										"y": "LVSpawner.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPPortalSpawner",
									"sid": 258974943839223,
									"parameters": {
										"instance-variable": "spawnerID",
										"value": "LVSpawner.spawnerID"
									}
								}
							],
							"sid": 684141910891202
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 564256726986764,
									"parameters": {
										"object": "LVBase"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 974831820066859,
									"parameters": {
										"object-to-create": "GPPortalBase",
										"layer": "\"Entities\"",
										"x": "LVBase.X",
										"y": "LVBase.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 641817146440108
						},
						{
							"eventType": "comment",
							"text": "If the current level is bigger than 1, the player does not need to see the tutorial."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 230353455526126,
									"parameters": {
										"value": "currLevel > 1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "setInputFocus",
									"sid": 904863168591856,
									"parameters": [
										"\"newTech\""
									]
								},
								{
									"id": "set-y",
									"objectClass": "GPUIFrameTutorial",
									"sid": 259375028341757,
									"parameters": {
										"y": "LayoutHeight + GPUIFrameTutorial.ImageHeight"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "GPNextWave",
									"sid": 821091157487004,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Infinity",
										"type": "once",
										"tag": "\"NextWave\""
									}
								}
							],
							"sid": 982634849267862
						},
						{
							"eventType": "comment",
							"text": "Otherwise, show it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 935784039227072
								}
							],
							"actions": [
								{
									"callFunction": "setInputFocus",
									"sid": 629977338024639,
									"parameters": [
										"\"tutorial\""
									]
								},
								{
									"id": "set-y",
									"objectClass": "GPUIFrameTech",
									"sid": 164092326490353,
									"parameters": {
										"y": "LayoutHeight + GPUIFrameTech.ImageHeight"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "GPNextWave",
									"sid": 684107530135990,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Infinity",
										"type": "once",
										"tag": "\"NextWave\""
									}
								}
							],
							"sid": 189632649383774
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Setup gameplay."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 374926281062864
						}
					],
					"actions": [
						{
							"callFunction": "initializeRandomBGM",
							"sid": 516576227815842
						},
						{
							"callFunction": "prepareLevel",
							"sid": 129939087444088
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 678280322743482
						}
					],
					"sid": 330841832268134,
					"children": [
						{
							"eventType": "comment",
							"text": "If player is on desktop, remove \"?\" icons from tower menu and fix positions."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 886994406116543,
									"parameters": {
										"variable": "isOnMobile"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "GPTowerIcon",
									"sid": 463820787561667,
									"parameters": {
										"x": "Self.X + 48",
										"y": "Self.Y"
									}
								}
							],
							"sid": 372967695975094,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 934307437620004,
											"parameters": {
												"object": "GPIcon",
												"expression": "GPIcon.AnimationName = \"Help\""
											}
										}
									],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "GPIcon",
											"sid": 417757126161815,
											"parameters": {
												"x": "10000",
												"y": "10000"
											}
										}
									],
									"sid": 714852150338178
								}
							]
						}
					]
				}
			],
			"sid": 958618927028941
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tech",
			"description": "\"Choose a tech point\" screen logic.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Add tech and begin the game."
				},
				{
					"functionName": "addTechAndBegin",
					"functionDescription": "Add tech and begin the game",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "techPressed",
							"type": "string",
							"initialValue": "",
							"comment": "Tech button pressed.",
							"sid": 114526104913013
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 274015040295775,
					"children": [
						{
							"eventType": "comment",
							"text": "Add correct tech."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 401106637478715,
									"parameters": {
										"object": "GPButtonEmber"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 981116714008498,
									"parameters": {
										"value": "techPressed = \"GPButtonEmber\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 711594378353650,
									"parameters": {
										"variable": "ember",
										"value": "1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 591459173897950,
									"parameters": {
										"variable": "chosenTech",
										"value": "\"Ember\""
									}
								}
							],
							"sid": 593525065745317
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 836035340379513
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 591956653542237,
									"parameters": {
										"object": "GPButtonCrystal"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 747265786549383,
									"parameters": {
										"value": "techPressed = \"GPButtonCrystal\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 894549218549300,
									"parameters": {
										"variable": "crystal",
										"value": "1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 281050708498353,
									"parameters": {
										"variable": "chosenTech",
										"value": "\"Crystal\""
									}
								}
							],
							"sid": 907871896546769
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 182937568074877
								},
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 620007986034027,
									"parameters": {
										"object": "GPButtonFlux"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 590200313591284,
									"parameters": {
										"value": "techPressed = \"GPButtonFlux\""
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 121262263926240,
									"parameters": {
										"variable": "flux",
										"value": "1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 224354003756420,
									"parameters": {
										"variable": "chosenTech",
										"value": "\"Flux\""
									}
								}
							],
							"sid": 964691236988315
						},
						{
							"eventType": "comment",
							"text": "Play select sound and begin game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 505780830828441,
									"parameters": {
										"object": "GPTechButtons"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 472322666627313,
									"parameters": {
										"value": "techPressed = GPTechButtons.ObjectTypeName"
									}
								}
							],
							"actions": [
								{
									"callFunction": "playSFX",
									"sid": 924367374733418,
									"parameters": [
										"\"menu/menuselect\"",
										false,
										"0"
									]
								},
								{
									"callFunction": "beginGame",
									"sid": 617953416624977
								}
							],
							"sid": 874860150222480
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Process tech button press."
				},
				{
					"eventType": "variable",
					"name": "techButtonPressed",
					"type": "string",
					"initialValue": "",
					"comment": "Which tech button was pressed",
					"isStatic": true,
					"isConstant": false,
					"sid": 197062519743500
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 260038473174306,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 169998141959700,
							"parameters": {
								"value": "inputFocus = \"newTech\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 228806133876935,
							"parameters": {
								"object": "GPTechButtons"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPTechButtons",
							"sid": 779492224962645
						},
						{
							"id": "compare-opacity",
							"objectClass": "GPTechButtons",
							"sid": 660543200991645,
							"parameters": {
								"comparison": 0,
								"opacity": "100"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPTechButtons",
							"sid": 769674329138379,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPTechButtons",
							"sid": 698760563074216,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 518079816851945,
							"parameters": {
								"variable": "techButtonPressed",
								"value": "GPTechButtons.ObjectTypeName"
							}
						}
					],
					"sid": 217557224990739
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 457884712817296,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 963866031650119,
							"parameters": {
								"value": "inputFocus = \"newTech\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPTechButtons",
							"sid": 468242505135388,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPTechButtons",
							"sid": 383847069530085,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						},
						{
							"callFunction": "addTechAndBegin",
							"sid": 748574252195113,
							"parameters": [
								"techButtonPressed"
							]
						}
					],
					"sid": 641722552991709
				}
			],
			"sid": 187480240343114
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "Tutorial screen logic.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reset tutorial to initial state."
				},
				{
					"functionName": "resetTutorial",
					"functionDescription": "Reset tutorial to initial state",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 231547608043662,
							"parameters": {
								"variable": "tutorialState",
								"value": "0"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextTutorial",
							"sid": 806441801483745,
							"parameters": {
								"text": "ArrTutorial.At(isOnMobile, tutorialState)"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "GPButtonProceed",
							"sid": 685870260412622,
							"parameters": {
								"scale": "1"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "GPButtonProceed",
							"sid": 453555799692238,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "GPButtonSkip",
							"sid": 588988610000978,
							"parameters": {
								"scale": "1"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "GPButtonSkip",
							"sid": 689017172572082,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "GPButtonEmber",
							"sid": 939283078582035,
							"parameters": {
								"scale": "1"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "GPButtonCrystal",
							"sid": 668227275469799,
							"parameters": {
								"scale": "1"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "GPButtonFlux",
							"sid": 909673839911490,
							"parameters": {
								"scale": "1"
							}
						}
					],
					"sid": 915115182541385,
					"children": [
						{
							"eventType": "comment",
							"text": "All levels, except the first, should start with tech buttons visible."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 908184558124228,
									"parameters": {
										"value": "currLevel > 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "GPButtonEmber",
									"sid": 676636872528697,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonCrystal",
									"sid": 622624428220679,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonFlux",
									"sid": 686356171831645,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"type": "comment",
									"text": "Disable tech button if player already has the maximum allowed amount of that tech."
								},
								{
									"id": "set-opacity",
									"objectClass": "GPButtonEmber",
									"sid": 369484023907928,
									"parameters": {
										"opacity": "ember < 3 ? 100 : 25"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "GPButtonCrystal",
									"sid": 323548926793604,
									"parameters": {
										"opacity": "crystal < 3 ? 100 : 25"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "GPButtonFlux",
									"sid": 465872473983895,
									"parameters": {
										"opacity": "flux < 3 ? 100 : 25"
									}
								}
							],
							"sid": 401468396003068
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 856200466268601
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "GPButtonEmber",
									"sid": 327851954011155,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonCrystal",
									"sid": 402786577678588,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonFlux",
									"sid": 635277225599200,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 506456750260703
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Process current tutorial step."
				},
				{
					"functionName": "processTutorialStep",
					"functionDescription": "Process current tutorial step",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "GPTextTutorial",
							"sid": 114550563393083,
							"parameters": {
								"text": "ArrTutorial.At(isOnMobile, tutorialState)"
							}
						}
					],
					"sid": 238748454656718,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 210015698470586,
									"parameters": {
										"value": "tutorialState = 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "GPUIFrameTop",
									"sid": 872717286067254,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 752439149677951
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 895205003805833
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 554843438622714,
									"parameters": {
										"value": "tutorialState = 3"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "GPUIFrameTop",
									"sid": 777600657687761,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPExit",
									"sid": 210390527637560,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPSFX",
									"sid": 543691367206214,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPBGM",
									"sid": 724743803282899,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								},
								{
									"id": "set-layer-opacity",
									"objectClass": "System",
									"sid": 344770729436031,
									"parameters": {
										"layer": "\"UICornerButtons\"",
										"opacity": "75"
									}
								}
							],
							"sid": 801053632920507
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 686088256427600
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 596333542985977,
									"parameters": {
										"value": "tutorialState = 4"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "GPNextWave",
									"sid": 373090416976158,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPPortalSpawner",
									"sid": 583104033048838,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPExit",
									"sid": 458596931136088,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPSFX",
									"sid": 360468810017725,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPBGM",
									"sid": 199945301912210,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-layer-opacity",
									"objectClass": "System",
									"sid": 473331146757458,
									"parameters": {
										"layer": "\"UICornerButtons\"",
										"opacity": "25"
									}
								}
							],
							"sid": 544363692144418
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 937132396427017
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 639410624081763,
									"parameters": {
										"value": "tutorialState = 5"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "GPNextWave",
									"sid": 463558166438568,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPPortalSpawner",
									"sid": 795104073373577,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPPortalBase",
									"sid": 285334590199964,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "active"
									}
								}
							],
							"sid": 309915600284718
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 281131439991394
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 170533540041389,
									"parameters": {
										"value": "tutorialState = 6"
									}
								}
							],
							"actions": [
								{
									"id": "set-active",
									"objectClass": "GPPortalBase",
									"sid": 691496745080276,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								}
							],
							"sid": 684622471751791
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 917490669320255
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 960135926687886,
									"parameters": {
										"value": "tutorialState = 8"
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "GPButtonProceed",
									"sid": 203972587637977,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ProceedScale\"",
										"property": "scale",
										"end-x": "0.01",
										"end-y": "0.01",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPButtonSkip",
									"sid": 935727176584793,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SkipScale\"",
										"property": "scale",
										"end-x": "0.01",
										"end-y": "0.01",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 448897175076787
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonProceed",
									"sid": 987088083440935,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonSkip",
									"sid": 191483395713146,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "GPButtonEmber",
									"sid": 179515558744120,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonEmber",
									"sid": 576111510574407,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPButtonEmber",
									"sid": 250433068720733,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"EmberScale\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "GPButtonCrystal",
									"sid": 631347849918206,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonCrystal",
									"sid": 421355017434296,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPButtonCrystal",
									"sid": 773609421283539,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CrystalScale\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "GPButtonFlux",
									"sid": 606807244764344,
									"parameters": {
										"scale": "0.01"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "GPButtonFlux",
									"sid": 955874510968697,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPButtonFlux",
									"sid": 287803572544531,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FluxScale\"",
										"property": "scale",
										"end-x": "1",
										"end-y": "1",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 362628307671576
								},
								{
									"callFunction": "setInputFocus",
									"sid": 317169727068401,
									"parameters": [
										"\"tutorialTech\""
									]
								}
							],
							"sid": 448461744225144
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When the proceed button is activated, go to the next step of the tutorial."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 725121072781108,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 357206337972105,
							"parameters": {
								"value": "inputFocus = \"tutorial\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 285448064299298,
							"parameters": {
								"object": "GPButtonProceed"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPButtonProceed",
							"sid": 134113459621732
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPButtonProceed",
							"sid": 462298803940925,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonProceed",
							"sid": 315084910568045,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 848966914799017
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 615767334950104,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 883895388930586,
							"parameters": {
								"value": "inputFocus = \"tutorial\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPButtonProceed",
							"sid": 617058533404235,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonProceed",
							"sid": 301806745707582,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 889744150131802,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 121093228331879,
									"parameters": {
										"object": "GPButtonProceed"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play select sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 624784909761743,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Change tutorial state and process step."
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 425811450063746,
									"parameters": {
										"variable": "tutorialState",
										"value": "1"
									}
								},
								{
									"callFunction": "processTutorialStep",
									"sid": 322023080736905
								}
							],
							"sid": 849292565442631
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the skip button is pressed, go directly to the last step of the tutorial."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 533170653732495,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 414429546257266,
							"parameters": {
								"value": "inputFocus = \"tutorial\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 272517425325498,
							"parameters": {
								"object": "GPButtonSkip"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPButtonSkip",
							"sid": 856384324712371
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPButtonSkip",
							"sid": 575465673152826,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonSkip",
							"sid": 353426808485978,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 608861898853137
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 227270647780664,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 337324217409949,
							"parameters": {
								"value": "inputFocus = \"tutorial\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPButtonSkip",
							"sid": 391145330620273,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonSkip",
							"sid": 942413976230099,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 779227520750191,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 865899303664567,
									"parameters": {
										"object": "GPButtonSkip"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play select sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 194926342384583,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Disable all flashing UI elements."
								},
								{
									"id": "set-active",
									"objectClass": "GPUIFrameTop",
									"sid": 175557448541088,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPExit",
									"sid": 949297655839083,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPSFX",
									"sid": 901368916228278,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPBGM",
									"sid": 837110043693563,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPNextWave",
									"sid": 886113154058999,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPPortalSpawner",
									"sid": 262093279961242,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"id": "set-active",
									"objectClass": "GPPortalBase",
									"sid": 967710705040374,
									"behaviorType": "SineFlash",
									"parameters": {
										"state": "inactive"
									}
								},
								{
									"type": "comment",
									"text": "Change tutorial state and process step."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 748786552584102,
									"parameters": {
										"variable": "tutorialState",
										"value": "8"
									}
								},
								{
									"callFunction": "processTutorialStep",
									"sid": 930976494723958
								}
							],
							"sid": 115858324960562
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When GPUIFlashable object's sine is playing, flash accordingly."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 675340596515293,
							"parameters": {
								"object": "GPUIFlashables"
							}
						}
					],
					"actions": [],
					"sid": 950923182619303,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-active",
									"objectClass": "GPUIFlashables",
									"sid": 328335334846931,
									"behaviorType": "SineFlash"
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPUIFlashables",
									"sid": 797658818406766,
									"parameters": {
										"effect": "\"AdjustHSLFlash\"",
										"parameter-index": "2",
										"value": "100 + abs(Self.SineFlash.Value)"
									}
								}
							],
							"sid": 280465810479859
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 926743795969622
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPUIFlashables",
									"sid": 321534788764556,
									"parameters": {
										"effect": "\"AdjustHSLFlash\"",
										"parameter-index": "2",
										"value": "100"
									}
								}
							],
							"sid": 415355593139209
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Process tech button press."
				},
				{
					"eventType": "variable",
					"name": "techButtonPressed",
					"type": "string",
					"initialValue": "",
					"comment": "Which tech button was pressed",
					"isStatic": true,
					"isConstant": false,
					"sid": 465560168858833
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 765799854520434,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 709426485634368,
							"parameters": {
								"value": "inputFocus = \"tutorialTech\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 519831322760282,
							"parameters": {
								"object": "GPTechButtons"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPTechButtons",
							"sid": 286575102773325
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPTechButtons",
							"sid": 989057094162111,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPTechButtons",
							"sid": 894224985182896,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 647199299231413,
							"parameters": {
								"variable": "techButtonPressed",
								"value": "GPTechButtons.ObjectTypeName"
							}
						}
					],
					"sid": 902804007959698
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 269915601434071,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 461728605908941,
							"parameters": {
								"value": "inputFocus = \"tutorialTech\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPTechButtons",
							"sid": 135027354964024,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPTechButtons",
							"sid": 328318726924578,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						},
						{
							"callFunction": "addTechAndBegin",
							"sid": 823880959943789,
							"parameters": [
								"techButtonPressed"
							]
						}
					],
					"sid": 635901277980944
				}
			],
			"sid": 629871410481895
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Interest",
			"description": "Interest logic.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Add funds based on a percentage of current funds, every InterestTick."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GPInterestTimer",
							"sid": 801750740254148,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"InterestTick\""
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 491867033869436,
							"parameters": {
								"value": "gold < 999999"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 314475860905040,
							"parameters": {
								"variable": "gold",
								"value": "min(round(gold + max(gold * interest, 1)), 999999)"
							}
						},
						{
							"callFunction": "updateUI",
							"sid": 100014541181044
						}
					],
					"sid": 505955084209671
				}
			],
			"sid": 439060852284297
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Build Menu",
			"description": "Events related to the build menu.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Menu Util Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Pick tower array ID by animation name."
						},
						{
							"functionName": "pickTowerWithAnim",
							"functionDescription": "Pick tower array ID by animation name",
							"functionCategory": "Gameplay",
							"functionReturnType": "number",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "towerAnim",
									"type": "string",
									"initialValue": "",
									"comment": "Animation name",
									"sid": 934955642063865
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 945082763977234,
									"parameters": {
										"name": "\"i\"",
										"start-index": "0",
										"end-index": "ArrTowers.Height - 1"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 920508280156225,
									"parameters": {
										"value": "(str(ArrTowers.At(2, loopindex(\"i\"))) & str(ArrTowers.At(3, loopindex(\"i\"))) & str(ArrTowers.At(4, loopindex(\"i\")))) = towerAnim"
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 589869987764217,
									"parameters": {
										"value": "loopindex(\"i\")"
									}
								}
							],
							"sid": 184964180413447
						},
						{
							"eventType": "comment",
							"text": "Fill in frame with tower information."
						},
						{
							"functionName": "fillTowerInfo",
							"functionDescription": "Fill in frame with tower information",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "towerAnim",
									"type": "string",
									"initialValue": "",
									"comment": "Tower animation name",
									"sid": 703847034696282
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 632517006422956,
							"children": [
								{
									"eventType": "variable",
									"name": "idx",
									"type": "number",
									"initialValue": "0",
									"comment": "Current index",
									"isStatic": false,
									"isConstant": false,
									"sid": 237587000094754
								},
								{
									"eventType": "variable",
									"name": "newAnimName",
									"type": "string",
									"initialValue": "",
									"comment": "Name of the new tower animation",
									"isStatic": false,
									"isConstant": false,
									"sid": 915945362460590
								},
								{
									"eventType": "variable",
									"name": "arrTowerID",
									"type": "string",
									"initialValue": "",
									"comment": "ID that represents a given tower in the towers array",
									"isStatic": false,
									"isConstant": false,
									"sid": 274901528766006
								},
								{
									"eventType": "comment",
									"text": "If no animation has been passed, the player accessed a vacant space."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 693964463275136,
											"parameters": {
												"value": "towerAnim = \"\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 843251798389942,
											"parameters": {
												"variable": "newAnimName",
												"value": "\"000\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "GPTowerIcon",
											"sid": 617637543216318,
											"parameters": {
												"animation": "\"000\"",
												"from": "beginning"
											}
										}
									],
									"sid": 694468830943201,
									"children": [
										{
											"eventType": "comment",
											"text": "Being a vacant space, the player should be able to build the non-tech tower, as well as basic towers if they have the tech for them."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each-ordered",
													"objectClass": "System",
													"sid": 417836682994374,
													"parameters": {
														"object": "GPTowerIcon",
														"expression": "GPTowerIcon.towerID",
														"order": "ascending"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "GPTowerIcon",
													"sid": 239443249895517,
													"parameters": {
														"child": "GPTextTower",
														"which": "own"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "GPTowerIcon",
													"sid": 206399829229770,
													"parameters": {
														"child": "GPIcon",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "This math trick will set the animations to 000, 100, 010 and 001, depending on the loopindex."
												},
												{
													"id": "set-animation",
													"objectClass": "GPTowerIcon",
													"sid": 788070789378448,
													"parameters": {
														"animation": "right(str(zeropad(10^(3-loopindex), 3)), 3)",
														"from": "beginning"
													}
												},
												{
													"type": "comment",
													"text": "Fill text with correct information about the tower."
												},
												{
													"id": "set-text",
													"objectClass": "GPTextTower",
													"sid": 932701925457789,
													"parameters": {
														"text": "\"\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "GPTextTower",
													"sid": 148799587545169,
													"parameters": {
														"text": "\"[iconoffsety=16][size=48][icon=funds][/iconoffset][size=24]\" & zeropad(ArrTowers.At(1, loopindex), 4) & \" \""
													}
												},
												{
													"id": "set-text",
													"objectClass": "GPTextTower",
													"sid": 239682743815529,
													"parameters": {
														"text": "Self.Text & \"[iconoffsety=16][size=48][icon=ember][/iconoffsety][size=24][offsetx=-48][lineThickness=2][outline=#000000]\" & ArrTowers.At(2, loopindex) & \"[/offsetx]\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "GPTextTower",
													"sid": 752461955682873,
													"parameters": {
														"text": "Self.Text & \"[iconoffsety=16][size=48][icon=crystal][/iconoffset][size=24][offsetx=-48]\" & ArrTowers.At(3, loopindex) & \"[/offsetx]\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "GPTextTower",
													"sid": 989652984015107,
													"parameters": {
														"text": "Self.Text & \"[iconoffsety=16][size=48][icon=flux][/iconoffset][size=24][offsetx=-48]\" & ArrTowers.At(4, loopindex) & \"[/offsetx]\""
													}
												},
												{
													"type": "comment",
													"text": "Set tips with the appropriate text."
												},
												{
													"id": "set-instvar-value",
													"objectClass": "GPIcon",
													"sid": 819095084658942,
													"parameters": {
														"instance-variable": "tipText",
														"value": "\"[color=\" & TIP_HL_COL & \"]\" & ArrTowers.At(0, loopindex) & \"[color=\" & TIP_STD_COL & \"]: \" & ArrTowers.At(5, loopindex) & newline & newline &\n\"[color=\" & TIP_HL_COL & \"]Damage: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(10, loopindex) &\n\" | [color=\" & TIP_HL_COL & \"]Range: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(7, loopindex) & \n\" | [color=\" & TIP_HL_COL & \"]AoE: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(9, loopindex) & \n\" | [color=\" & TIP_HL_COL & \"]Cooldown: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(11, loopindex)\n"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "GPTowerIcon",
													"sid": 771266652392636,
													"parameters": {
														"instance-variable": "tipText",
														"value": "\"[color=\" & TIP_HL_COL & \"]\" & ArrTowers.At(0, loopindex) & \"[color=\" & TIP_STD_COL & \"]: \" & ArrTowers.At(5, loopindex) & newline & newline &\r\n\"[color=\" & TIP_HL_COL & \"]Damage: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(10, loopindex) &\r\n\" | [color=\" & TIP_HL_COL & \"]Range: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(7, loopindex) & \r\n\" | [color=\" & TIP_HL_COL & \"]AoE: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(9, loopindex) & \r\n\" | [color=\" & TIP_HL_COL & \"]Cooldown: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(11, loopindex)"
													}
												},
												{
													"type": "comment",
													"text": "Activate tips."
												},
												{
													"id": "set-visible",
													"objectClass": "GPTowerIcon",
													"sid": 680296805292954,
													"parameters": {
														"visibility": "visible"
													}
												},
												{
													"id": "set-boolean-instvar",
													"objectClass": "GPTowerIcon",
													"sid": 887267003076080,
													"parameters": {
														"instance-variable": "tipActive",
														"value": "true"
													}
												}
											],
											"sid": 502738637027853
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If an animation has been passed, the player tapped an existing tower."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 841130585386867
										}
									],
									"actions": [],
									"sid": 247294663804483,
									"children": [
										{
											"eventType": "comment",
											"text": "Being an occupied space, the player should be able to sell tapped tower or upgrade it."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each-ordered",
													"objectClass": "System",
													"sid": 986643114192377,
													"parameters": {
														"object": "GPTowerIcon",
														"expression": "GPTowerIcon.towerID",
														"order": "ascending"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "GPTowerIcon",
													"sid": 423354612046902,
													"parameters": {
														"child": "GPTextTower",
														"which": "own"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "GPTowerIcon",
													"sid": 613742045377414,
													"parameters": {
														"child": "GPIcon",
														"which": "own"
													}
												}
											],
											"actions": [],
											"sid": 853715055350307,
											"children": [
												{
													"eventType": "comment",
													"text": "First spot should always be the option to sell the tower."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 167964430397185,
															"parameters": {
																"value": "loopindex = 0 "
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "Pick tower array ID by animation name."
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 496024209708992,
															"parameters": {
																"variable": "arrTowerID",
																"value": "Functions.pickTowerWithAnim(towerAnim)"
															}
														},
														{
															"type": "comment",
															"text": "Set new animation."
														},
														{
															"id": "set-animation",
															"objectClass": "GPTowerIcon",
															"sid": 333626283358877,
															"parameters": {
																"animation": "\"Sell\"",
																"from": "beginning"
															}
														}
													],
													"sid": 499118227039927,
													"children": [
														{
															"eventType": "variable",
															"name": "sellValue",
															"type": "number",
															"initialValue": "0",
															"comment": "Tower sell value",
															"isStatic": false,
															"isConstant": false,
															"sid": 418569165314875
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 866781629847806,
																	"parameters": {
																		"value": "arrTowerID = \"0\""
																	}
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 758411907632232,
																	"parameters": {
																		"variable": "sellValue",
																		"value": "0"
																	}
																}
															],
															"sid": 948461991649034
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 792330890268253
																}
															],
															"actions": [
																{
																	"id": "set-eventvar-value",
																	"objectClass": "System",
																	"sid": 875053114047479,
																	"parameters": {
																		"variable": "sellValue",
																		"value": "floor(ArrTowers.at(1, arrTowerID)/2)"
																	}
																}
															],
															"sid": 662377222721125
														},
														{
															"eventType": "block",
															"conditions": [],
															"actions": [
																{
																	"type": "comment",
																	"text": "Fill text with correct information about selling the tower."
																},
																{
																	"id": "set-text",
																	"objectClass": "GPTextTower",
																	"sid": 575122721175454,
																	"parameters": {
																		"text": "\"[iconoffsety=16][size=48][icon=funds][/iconoffset][size=24][color=\" & TIP_GOLD_COL & \"]\" & zeropad(sellValue, 4) & \" \""
																	}
																},
																{
																	"type": "comment",
																	"text": "Set tips with the appropriate text."
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPIcon",
																	"sid": 477512076068425,
																	"parameters": {
																		"instance-variable": "tipText",
																		"value": "\"Sell selected tower for [iconoffsety=16][size=48][icon=funds][/iconoffset][size=24][color=\" & TIP_GOLD_COL & \"]\" & sellValue & \"[color=\" & TIP_STD_COL & \"].\""
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerIcon",
																	"sid": 566697426761623,
																	"parameters": {
																		"instance-variable": "tipText",
																		"value": "\"Sell selected tower for [iconoffsety=16][size=48][icon=funds][/iconoffset][size=24][color=\" & TIP_GOLD_COL & \"]\" & sellValue & \"[color=\" & TIP_STD_COL & \"].\""
																	}
																},
																{
																	"type": "comment",
																	"text": "Activate tips."
																},
																{
																	"id": "set-visible",
																	"objectClass": "GPTowerIcon",
																	"sid": 926716965795977,
																	"parameters": {
																		"visibility": "visible"
																	}
																},
																{
																	"id": "set-boolean-instvar",
																	"objectClass": "GPTowerIcon",
																	"sid": 849501399293692,
																	"parameters": {
																		"instance-variable": "tipActive",
																		"value": "true"
																	}
																}
															],
															"sid": 489092156802988
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Remaining options are upgrades, if the player has the tech for them."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 234220324750171
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 575189842486567,
															"parameters": {
																"value": "int(tokenat(towerAnim, 0, \"\")) + int(tokenat(towerAnim, 1, \"\")) + int(tokenat(towerAnim, 2, \"\")) < 3"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "This gets the current animation, then adds 1 to a character, depending on the loopindex."
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 555929973093708,
															"parameters": {
																"variable": "newAnimName",
																"value": "left(towerAnim, loopindex - 1) & int(tokenat(towerAnim, loopindex - 1, \"\")) + 1 & right(towerAnim, len(towerAnim)-loopindex)\n"
															}
														},
														{
															"type": "comment",
															"text": "Pick tower array ID by animation name."
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 445484857757920,
															"parameters": {
																"variable": "arrTowerID",
																"value": "Functions.pickTowerWithAnim(newAnimName)"
															}
														},
														{
															"type": "comment",
															"text": "Set new animation."
														},
														{
															"id": "set-animation",
															"objectClass": "GPTowerIcon",
															"sid": 674002688397508,
															"parameters": {
																"animation": "newAnimName",
																"from": "beginning"
															}
														},
														{
															"type": "comment",
															"text": "Fill text with correct information about the tower."
														},
														{
															"id": "set-text",
															"objectClass": "GPTextTower",
															"sid": 479364690808235,
															"parameters": {
																"text": "\"\""
															}
														},
														{
															"id": "set-text",
															"objectClass": "GPTextTower",
															"sid": 497685349822926,
															"parameters": {
																"text": "\"[iconoffsety=16][size=48][icon=funds][/iconoffset][size=24]\" & zeropad(ArrTowers.at(1, arrTowerID), 4) & \" \""
															}
														},
														{
															"id": "set-text",
															"objectClass": "GPTextTower",
															"sid": 423032471493482,
															"parameters": {
																"text": "Self.Text & \"[iconoffsety=16][size=48][icon=ember][/iconoffsety][size=24][offsetx=-48]\" & ArrTowers.at(2, arrTowerID) & \"[/offsetx]\""
															}
														},
														{
															"id": "set-text",
															"objectClass": "GPTextTower",
															"sid": 774138157912763,
															"parameters": {
																"text": "Self.Text & \"[iconoffsety=16][size=48][icon=crystal][/iconoffset][size=24][offsetx=-48]\" & ArrTowers.at(3, arrTowerID) & \"[/offsetx]\""
															}
														},
														{
															"id": "set-text",
															"objectClass": "GPTextTower",
															"sid": 556854149629842,
															"parameters": {
																"text": "Self.Text & \"[iconoffsety=16][size=48][icon=flux][/iconoffset][size=24][offsetx=-48]\" & ArrTowers.at(4, arrTowerID) & \"[/offsetx]\""
															}
														},
														{
															"type": "comment",
															"text": "Set tips with the appropriate text."
														},
														{
															"id": "set-instvar-value",
															"objectClass": "GPIcon",
															"sid": 841398229639998,
															"parameters": {
																"instance-variable": "tipText",
																"value": "\"[color=\" & TIP_HL_COL & \"]\" & ArrTowers.At(0, arrTowerID) & \"[color=\" & TIP_STD_COL & \"]: \" & ArrTowers.At(5, arrTowerID) & newline & newline &\r\n\"[color=\" & TIP_HL_COL & \"]Damage: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(10, arrTowerID) &\r\n\" | [color=\" & TIP_HL_COL & \"]Range: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(7, arrTowerID) & \r\n\" | [color=\" & TIP_HL_COL & \"]AoE: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(9, arrTowerID) & \r\n\" | [color=\" & TIP_HL_COL & \"]Cooldown: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(11, arrTowerID)"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "GPTowerIcon",
															"sid": 890337307523150,
															"parameters": {
																"instance-variable": "tipText",
																"value": "\"[color=\" & TIP_HL_COL & \"]\" & ArrTowers.At(0, arrTowerID) & \"[color=\" & TIP_STD_COL & \"]: \" & ArrTowers.At(5, arrTowerID) & newline & newline &\r\n\"[color=\" & TIP_HL_COL & \"]Damage: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(10, arrTowerID) &\r\n\" | [color=\" & TIP_HL_COL & \"]Range: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(7, arrTowerID) & \r\n\" | [color=\" & TIP_HL_COL & \"]AoE: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(9, arrTowerID) & \r\n\" | [color=\" & TIP_HL_COL & \"]Cooldown: [color=\" & TIP_STD_COL & \"]\" & ArrTowers.At(11, arrTowerID)"
															}
														},
														{
															"type": "comment",
															"text": "Activate tips."
														},
														{
															"id": "set-visible",
															"objectClass": "GPTowerIcon",
															"sid": 891892343257054,
															"parameters": {
																"visibility": "visible"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "GPTowerIcon",
															"sid": 878875294986617,
															"parameters": {
																"instance-variable": "tipActive",
																"value": "true"
															}
														}
													],
													"sid": 189519469010430
												},
												{
													"eventType": "comment",
													"text": "Tower is already fully upgraded, therefore, show no upgrades and disable tips."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 377527275925863
														}
													],
													"actions": [
														{
															"id": "set-visible",
															"objectClass": "GPTowerIcon",
															"sid": 736902263614013,
															"parameters": {
																"visibility": "invisible"
															}
														},
														{
															"id": "set-boolean-instvar",
															"objectClass": "GPTowerIcon",
															"sid": 388106221157948,
															"parameters": {
																"instance-variable": "tipActive",
																"value": "false"
															}
														}
													],
													"sid": 119855330118165
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 676501344758173
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Menu Display",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Show build tower menu."
						},
						{
							"functionName": "showBuildMenu",
							"functionDescription": "Show build tower menu",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "touchX",
									"type": "number",
									"initialValue": "0",
									"comment": "Touch X position",
									"sid": 476657837897488
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"callFunction": "playSFX",
									"sid": 580804736607987,
									"parameters": [
										"\"menu/menutower\"",
										false,
										"0"
									]
								}
							],
							"sid": 689223284669008,
							"children": [
								{
									"eventType": "comment",
									"text": "Always bring tower menu from the opposite side of the screen from where the player touched."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 860253163192724,
											"parameters": {
												"value": "touchX < LayoutWidth/2"
											}
										}
									],
									"actions": [
										{
											"id": "set-x",
											"objectClass": "GPUIFrameTowers",
											"sid": 412255818216821,
											"parameters": {
												"x": "LayoutWidth + Self.ImageWidth"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "GPUIFrameTowers",
											"sid": 568445739042747,
											"parameters": {
												"opacity": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 703412432732174,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTowerMenu\"",
												"property": "offsetX",
												"end-value": "LayoutWidth - GPUIFrameTowers.ImageWidth/2",
												"time": "0.2",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 592897446620422,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTowerMenuOp\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.4",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 263740493301933
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 302581250211985
										}
									],
									"actions": [
										{
											"id": "set-x",
											"objectClass": "GPUIFrameTowers",
											"sid": 561588964757820,
											"parameters": {
												"x": "-Self.ImageWidth"
											}
										},
										{
											"id": "set-opacity",
											"objectClass": "GPUIFrameTowers",
											"sid": 270057089165199,
											"parameters": {
												"opacity": "0"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 707248079332237,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTowerMenu\"",
												"property": "offsetX",
												"end-value": "GPUIFrameTowers.ImageWidth/2",
												"time": "0.2",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 755703204975688,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTowerMenuOp\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.4",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 955025672721104
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Hide build tower menu."
						},
						{
							"functionName": "hideBuildMenu",
							"functionDescription": "Hide build tower menu",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Hide range marker."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPRangeMarker",
									"sid": 922757296263181,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShrinkRangeMarker\"",
										"property": "size",
										"end-x": "0",
										"end-y": "0",
										"time": "0.1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-position",
									"objectClass": "GPRangeMarker",
									"sid": 363864406145309,
									"parameters": {
										"x": "10000",
										"y": "10000"
									}
								}
							],
							"sid": 278809966969943,
							"children": [
								{
									"eventType": "comment",
									"text": "Always send tower menu to the same side it currently is in."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 145053432936722,
											"parameters": {
												"value": "GPUIFrameTowers.X < LayoutWidth/2"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 662064920469941,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenu\"",
												"property": "offsetX",
												"end-value": "-Self.ImageWidth",
												"time": "0.2",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 988830866751653,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenuOp\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 565873494372948
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 934368817473362
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 363858096219505,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenu\"",
												"property": "offsetX",
												"end-value": "LayoutWidth + Self.ImageWidth",
												"time": "0.2",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTowers",
											"sid": 759972100883873,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenuOp\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 616778766949593
								}
							]
						}
					],
					"sid": 562923102598870
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Menu Update",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Update tower menu items opacity according to player's tech and funds."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 878444287637711
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 330695437686257,
									"parameters": {
										"value": "inputFocus = \"buildmenu\""
									}
								}
							],
							"actions": [],
							"sid": 273431527655652,
							"children": [
								{
									"eventType": "variable",
									"name": "arrTowerID",
									"type": "string",
									"initialValue": "",
									"comment": "ID that represents a given tower in the towers array",
									"isStatic": false,
									"isConstant": false,
									"sid": 390339192132799
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 571658270353217,
											"parameters": {
												"object": "GPTowerIcon"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "GPTowerIcon",
											"sid": 527613613793022,
											"parameters": {
												"child": "GPTextTower",
												"which": "own"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "GPTowerIcon",
											"sid": 627616082196970,
											"parameters": {
												"child": "GPIcon",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 357743562254980,
									"children": [
										{
											"eventType": "comment",
											"text": "Sell is aways enabled."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "GPTowerIcon",
													"sid": 626237419848855,
													"parameters": {
														"animation": "\"Sell\""
													}
												}
											],
											"actions": [
												{
													"id": "set-opacity",
													"objectClass": "GPTowerIcon",
													"sid": 797404243123656,
													"parameters": {
														"opacity": "100"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "GPTextTower",
													"sid": 639676375684853,
													"parameters": {
														"opacity": "100"
													}
												},
												{
													"id": "set-opacity",
													"objectClass": "GPIcon",
													"sid": 436242371734654,
													"parameters": {
														"opacity": "100"
													}
												}
											],
											"sid": 381223675119384
										},
										{
											"eventType": "comment",
											"text": "Other towers may not be enabled."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 613859504958132
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 926694712363438,
													"parameters": {
														"variable": "arrTowerID",
														"value": "Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)"
													}
												}
											],
											"sid": 158842778006725,
											"children": [
												{
													"eventType": "comment",
													"text": "Insufficient technology or funds."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 974485230036538,
															"parameters": {
																"value": "ember < ArrTowers.at(2, arrTowerID)"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 893576294040891,
															"parameters": {
																"value": "crystal < ArrTowers.at(3, arrTowerID)"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 167480050510867,
															"parameters": {
																"value": "flux < ArrTowers.at(4, arrTowerID)"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 819403266915310,
															"parameters": {
																"value": "gold < ArrTowers.at(1, arrTowerID)"
															}
														}
													],
													"actions": [
														{
															"id": "set-opacity",
															"objectClass": "GPTowerIcon",
															"sid": 324443797158723,
															"parameters": {
																"opacity": "25"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "GPTextTower",
															"sid": 652993556867624,
															"parameters": {
																"opacity": "25"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "GPIcon",
															"sid": 823971532730664,
															"parameters": {
																"opacity": "25"
															}
														}
													],
													"sid": 558704771822100,
													"isOrBlock": true
												},
												{
													"eventType": "comment",
													"text": "Sufficient tech and funds."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 675631493741612
														}
													],
													"actions": [
														{
															"id": "set-opacity",
															"objectClass": "GPTowerIcon",
															"sid": 388243957074630,
															"parameters": {
																"opacity": "100"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "GPTextTower",
															"sid": 156111236287957,
															"parameters": {
																"opacity": "100"
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "GPIcon",
															"sid": 981132045956497,
															"parameters": {
																"opacity": "100"
															}
														}
													],
													"sid": 666154287016314
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 687245888908531
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Menu Actions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "If the player chooses an item from the menu or just click outside it, close the menu."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap",
									"objectClass": "Touch",
									"sid": 144915543053833
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 903133983533793,
									"parameters": {
										"value": "inputFocus = \"buildmenu\""
									}
								}
							],
							"actions": [],
							"sid": 618077634592935,
							"children": [
								{
									"eventType": "comment",
									"text": "Player selected a menu item."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 204904043480261,
											"parameters": {
												"object": "GPTowerIcon"
											}
										},
										{
											"id": "compare-opacity",
											"objectClass": "GPTowerIcon",
											"sid": 218170630592856,
											"parameters": {
												"comparison": 0,
												"opacity": "100"
											}
										}
									],
									"actions": [],
									"sid": 222704081916382,
									"children": [
										{
											"eventType": "variable",
											"name": "arrTowerID",
											"type": "string",
											"initialValue": "",
											"comment": "ID that represents a given tower in the towers array",
											"isStatic": false,
											"isConstant": false,
											"sid": 804991935834830
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 891697423116238,
													"parameters": {
														"variable": "arrTowerID",
														"value": "Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)"
													}
												}
											],
											"sid": 801520075465991
										},
										{
											"eventType": "variable",
											"name": "sellValue",
											"type": "number",
											"initialValue": "0",
											"comment": "Tower sell value",
											"isStatic": false,
											"isConstant": false,
											"sid": 822692909076826
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 402116797210686,
													"parameters": {
														"value": "arrTowerID = \"0\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 928773039590892,
													"parameters": {
														"variable": "sellValue",
														"value": "0"
													}
												}
											],
											"sid": 506607519104102
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 477313082613032
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 757744411331243,
													"parameters": {
														"variable": "sellValue",
														"value": "floor(ArrTowers.at(1, arrTowerID)/2)"
													}
												}
											],
											"sid": 898269244688802
										},
										{
											"eventType": "comment",
											"text": "Selling a tower."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "GPTowerIcon",
													"sid": 848577667005812,
													"parameters": {
														"animation": "\"Sell\""
													}
												},
												{
													"id": "compare-opacity",
													"objectClass": "LVBuildingSpot",
													"sid": 255105970531665,
													"parameters": {
														"comparison": 4,
														"opacity": "0"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "LVBuildingSpot",
													"sid": 454270373362941,
													"parameters": {
														"child": "GPTower",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Hide building spot."
												},
												{
													"id": "tween-one-property",
													"objectClass": "LVBuildingSpot",
													"sid": 696128308306628,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"HideSingleBuildSpot\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Add gold to balance and update UI."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 426632772158260,
													"parameters": {
														"variable": "gold",
														"value": "min(gold + sellValue, 999999)"
													}
												},
												{
													"callFunction": "updateUI",
													"sid": 591265671209847
												},
												{
													"type": "comment",
													"text": "Destroy tower with an animation."
												},
												{
													"id": "tween-two-properties",
													"objectClass": "GPTower",
													"sid": 985369923021038,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"GPTowerDestroy\"",
														"property": "scale",
														"end-x": "0.01",
														"end-y": "0.01",
														"time": "0.2",
														"ease": "easeinsine",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Play tower sell sound."
												},
												{
													"callFunction": "playSFX",
													"sid": 877467642878005,
													"parameters": [
														"\"towers/towersell\"",
														false,
														"0"
													]
												}
											],
											"sid": 704467069519202
										},
										{
											"eventType": "comment",
											"text": "Building/Upgrading tower."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 695451747743025
												},
												{
													"id": "compare-opacity",
													"objectClass": "LVBuildingSpot",
													"sid": 846758192269968,
													"parameters": {
														"comparison": 4,
														"opacity": "0"
													}
												}
											],
											"actions": [],
											"sid": 329057489059229,
											"children": [
												{
													"eventType": "comment",
													"text": "Upgrading tower."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-children",
															"objectClass": "LVBuildingSpot",
															"sid": 186354217824785,
															"parameters": {
																"child": "GPTower",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "tween-two-properties",
															"objectClass": "GPTower",
															"sid": 640442949777713,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"GPTowerDestroy\"",
																"property": "scale",
																"end-x": "0.01",
																"end-y": "0.01",
																"time": "0.2",
																"ease": "easeinsine",
																"destroy-on-complete": "yes",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"type": "comment",
															"text": "Play tower sell sound."
														},
														{
															"callFunction": "playSFX",
															"sid": 556741712622211,
															"parameters": [
																"\"towers/towersell\"",
																false,
																"0"
															]
														}
													],
													"sid": 621573805037542
												},
												{
													"eventType": "comment",
													"text": "(Updating)/Building tower."
												},
												{
													"eventType": "variable",
													"name": "tempFireSpotX",
													"type": "number",
													"initialValue": "0",
													"comment": "Store original FireSpot X",
													"isStatic": false,
													"isConstant": false,
													"sid": 899214741345209
												},
												{
													"eventType": "variable",
													"name": "tempFireSpotY",
													"type": "number",
													"initialValue": "0",
													"comment": "Store original FireSpot Y",
													"isStatic": false,
													"isConstant": false,
													"sid": 433146112912444
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"type": "comment",
															"text": "If the tower is being upgraded, wait a little."
														},
														{
															"id": "wait",
															"objectClass": "System",
															"sid": 353583600898316,
															"parameters": {
																"seconds": "0.2 * LVBuildingSpot.ChildCount"
															}
														},
														{
															"type": "comment",
															"text": "Play tower build sound."
														},
														{
															"callFunction": "playSFX",
															"sid": 408463188773139,
															"parameters": [
																"\"towers/towerbuild\"",
																false,
																"0"
															]
														},
														{
															"type": "comment",
															"text": "Create the tower and set its properties."
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 517035446130493,
															"parameters": {
																"object-to-create": "GPTower",
																"layer": "\"Entities\"",
																"x": "LVBuildingSpot.X",
																"y": "LVBuildingSpot.Y",
																"create-hierarchy": true,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-animation",
															"objectClass": "GPTower",
															"sid": 593184764228307,
															"parameters": {
																"animation": "GPTowerIcon.AnimationName",
																"from": "beginning"
															}
														},
														{
															"id": "set-effect-parameter",
															"objectClass": "GPTower",
															"sid": 855586591393717,
															"parameters": {
																"effect": "\"AdjustHSL\"",
																"parameter-index": "2",
																"value": "200"
															}
														},
														{
															"type": "comment",
															"text": "Store original FireSpot X and Y, before rescaling the tower for the spawn animation."
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 407931486132606,
															"parameters": {
																"variable": "tempFireSpotX",
																"value": "GPTower.ImagePointX(\"FireSpot\")"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 663865529167938,
															"parameters": {
																"variable": "tempFireSpotY",
																"value": "GPTower.ImagePointY(\"FireSpot\")"
															}
														},
														{
															"type": "comment",
															"text": "Rescale the tower for the spawn animation."
														},
														{
															"id": "set-height",
															"objectClass": "GPTower",
															"sid": 555607505189544,
															"parameters": {
																"height": "0.001"
															}
														},
														{
															"id": "set-y",
															"objectClass": "GPTower",
															"sid": 720218875026985,
															"parameters": {
																"y": "Self.Y - 80"
															}
														},
														{
															"type": "comment",
															"text": "Start playing a \"summon\" tween."
														},
														{
															"id": "tween-two-properties",
															"objectClass": "GPTower",
															"sid": 741706052693370,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"GPTowerSummon\"",
																"property": "size",
																"end-x": "GPTower.ImageWidth",
																"end-y": "GPTower.ImageHeight",
																"time": "0.5",
																"ease": "easeoutback",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"id": "tween-one-property",
															"objectClass": "GPTower",
															"sid": 539164777215017,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"GPTowerDown\"",
																"property": "offsetY",
																"end-value": "Self.Y + 80",
																"time": "0.5",
																"ease": "easeoutsine",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"type": "comment",
															"text": "Make the tower a child of the spot."
														},
														{
															"id": "add-child",
															"objectClass": "LVBuildingSpot",
															"sid": 848393758701340,
															"parameters": {
																"child": "GPTower",
																"transform-x": true,
																"transform-y": true,
																"transform-w": true,
																"transform-h": true,
																"transform-a": true,
																"transform-o": false,
																"transform-z-elevation": true,
																"transform-visibility": false,
																"destroy-with-parent": false
															}
														},
														{
															"type": "comment",
															"text": "Hide the spot with an opacity tween."
														},
														{
															"id": "tween-one-property",
															"objectClass": "LVBuildingSpot",
															"sid": 136772057389895,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"HideSingleBuildSpot\"",
																"property": "offsetOpacity",
																"end-value": "0",
																"time": "0.1",
																"ease": "easeinoutsine",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"type": "comment",
															"text": "Subtract gold from balance and update UI."
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 728722754903400,
															"parameters": {
																"variable": "gold",
																"value": "gold - ArrTowers.At(1, Functions.pickTowerWithAnim(GPTower.AnimationName))"
															}
														},
														{
															"callFunction": "updateUI",
															"sid": 571949155676137
														}
													],
													"sid": 903647490735762,
													"children": [
														{
															"eventType": "comment",
															"text": "If tower fires projectiles, create a turret."
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 277233947380489,
																	"parameters": {
																		"value": "ArrTowers.At(8, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) <> \"Pulse AoE\""
																	}
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "Create turret and set as child of the tower."
																},
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 616498307279849,
																	"parameters": {
																		"object-to-create": "GPTowerTurret",
																		"layer": "\"Entities\"",
																		"x": "tempFireSpotX",
																		"y": "tempFireSpotY",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "GPTower",
																	"sid": 290521660932443,
																	"parameters": {
																		"child": "GPTowerTurret",
																		"transform-x": false,
																		"transform-y": false,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-o": true,
																		"transform-z-elevation": false,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"type": "comment",
																	"text": "Set turret properties."
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 258072542266151,
																	"parameters": {
																		"instance-variable": "towerID",
																		"value": "Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 935632332069397,
																	"parameters": {
																		"instance-variable": "realRange",
																		"value": "ArrTowers.At(7, GPTowerTurret.towerID)"
																	}
																},
																{
																	"id": "set-rate-of-fire",
																	"objectClass": "GPTowerTurret",
																	"sid": 744290387122236,
																	"behaviorType": "Turret",
																	"parameters": {
																		"rate-of-fire": "ArrTowers.At(11, GPTowerTurret.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 952401293464934,
																	"parameters": {
																		"instance-variable": "tech",
																		"value": "ArrTowers.At(6, GPTowerTurret.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 765673917434583,
																	"parameters": {
																		"instance-variable": "radiusAoE",
																		"value": "ArrTowers.At(9, GPTowerTurret.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 524187802926179,
																	"parameters": {
																		"instance-variable": "damage",
																		"value": "ArrTowers.At(10, GPTowerTurret.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerTurret",
																	"sid": 132826109491526,
																	"parameters": {
																		"instance-variable": "special",
																		"value": "ArrTowers.At(12, GPTowerTurret.towerID)"
																	}
																}
															],
															"sid": 954761508612807,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "evaluate-expression",
																			"objectClass": "System",
																			"sid": 254624045733533,
																			"parameters": {
																				"value": "ArrTowers.At(8, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) = \"Line AoE\""
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-boolean-instvar",
																			"objectClass": "GPTowerTurret",
																			"sid": 168246620594484,
																			"parameters": {
																				"instance-variable": "linearBullet",
																				"value": "true"
																			}
																		}
																	],
																	"sid": 573059465907488
																}
															]
														},
														{
															"eventType": "comment",
															"text": "Otherwise, it is a pulse tower, so create a pulse object."
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "else",
																	"objectClass": "System",
																	"sid": 401364525675527
																}
															],
															"actions": [
																{
																	"type": "comment",
																	"text": "Create pulse and set as child of the tower."
																},
																{
																	"id": "create-object",
																	"objectClass": "System",
																	"sid": 254055389272737,
																	"parameters": {
																		"object-to-create": "GPTowerPulse",
																		"layer": "\"Entities\"",
																		"x": "tempFireSpotX",
																		"y": "tempFireSpotY",
																		"create-hierarchy": false,
																		"template-name": "\"\""
																	}
																},
																{
																	"id": "add-child",
																	"objectClass": "GPTower",
																	"sid": 444237386836883,
																	"parameters": {
																		"child": "GPTowerPulse",
																		"transform-x": false,
																		"transform-y": false,
																		"transform-w": false,
																		"transform-h": false,
																		"transform-a": false,
																		"transform-o": true,
																		"transform-z-elevation": false,
																		"transform-visibility": false,
																		"destroy-with-parent": true
																	}
																},
																{
																	"type": "comment",
																	"text": "Set pulse properties."
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 187775696289194,
																	"parameters": {
																		"instance-variable": "towerID",
																		"value": "Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 844707641846219,
																	"parameters": {
																		"instance-variable": "tech",
																		"value": "ArrTowers.At(6, GPTowerPulse.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 370432550831283,
																	"parameters": {
																		"instance-variable": "range",
																		"value": "ArrTowers.At(7, GPTowerPulse.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 248318073384543,
																	"parameters": {
																		"instance-variable": "damage",
																		"value": "ArrTowers.At(10, GPTowerPulse.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 213722298084269,
																	"parameters": {
																		"instance-variable": "cooldown",
																		"value": "ArrTowers.At(11, GPTowerPulse.towerID)"
																	}
																},
																{
																	"id": "set-instvar-value",
																	"objectClass": "GPTowerPulse",
																	"sid": 671499767341813,
																	"parameters": {
																		"instance-variable": "special",
																		"value": "ArrTowers.At(12, GPTowerPulse.towerID)"
																	}
																}
															],
															"sid": 129601557682358
														}
													]
												},
												{
													"eventType": "comment",
													"text": "Update UI."
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"callFunction": "updateUI",
															"sid": 454072568601796
														}
													],
													"sid": 200598705882191
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Close build menu."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "hideBuildMenu",
													"sid": 843939598442143
												},
												{
													"callFunction": "setInputFocus",
													"sid": 349930417682600,
													"parameters": [
														"\"game\""
													]
												}
											],
											"sid": 992729782482027
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Player just closed the menu."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 736402537976845
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 502030333409314,
											"parameters": {
												"value": "inputFocus = \"buildmenu\""
											}
										},
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 280191267896497,
											"parameters": {
												"object": "GPUIFrameTowers"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "hideBuildMenu",
											"sid": 257408704216820
										},
										{
											"callFunction": "setInputFocus",
											"sid": 390735478810648,
											"parameters": [
												"\"game\""
											]
										}
									],
									"sid": 154012168292404,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-opacity",
													"objectClass": "LVBuildingSpot",
													"sid": 609898145649703,
													"parameters": {
														"comparison": 4,
														"opacity": "0"
													}
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "LVBuildingSpot",
													"sid": 247113922902566,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"HideSingleBuildSpot\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 472468114578872
										}
									]
								}
							]
						}
					],
					"sid": 276161974186740
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Menu Platform Dependent Behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Show tower range on mobile."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 482906150934846,
									"parameters": {
										"variable": "isOnMobile"
									}
								}
							],
							"actions": [],
							"sid": 691840577347534,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if the player tapped the help icon."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-tap-object",
											"objectClass": "Touch",
											"sid": 970909969850821,
											"parameters": {
												"object": "GPIcon"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "GPIcon",
											"sid": 153570443322857,
											"parameters": {
												"animation": "\"Help\""
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "GPIcon",
											"sid": 168842645111152,
											"parameters": {
												"parent": "GPTowerIcon",
												"which": "own"
											}
										}
									],
									"actions": [],
									"sid": 725607485118762,
									"children": [
										{
											"eventType": "comment",
											"text": "If the help icon belongs to a button to build/upgrade a tower, show the range."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "GPTowerIcon",
													"sid": 867994405082997,
													"parameters": {
														"animation": "\"Sell\""
													},
													"isInverted": true
												},
												{
													"id": "is-visible",
													"objectClass": "GPTowerIcon",
													"sid": 171317283945488
												},
												{
													"id": "pick-by-evaluate",
													"objectClass": "System",
													"sid": 156459605925029,
													"parameters": {
														"object": "LVBuildingSpot",
														"expression": "LVBuildingSpot.Opacity > 0"
													}
												}
											],
											"actions": [
												{
													"id": "set-position-to-another-object",
													"objectClass": "GPRangeMarker",
													"sid": 485165231371314,
													"parameters": {
														"object": "LVBuildingSpot",
														"image-point-optional": "0"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "GPRangeMarker",
													"sid": 193742679782726,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ShrinkRangeMarker\"",
														"property": "size",
														"end-x": "ArrTowers.At(7, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) * 2",
														"end-y": "ArrTowers.At(7, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) * 2",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 139673908360990
										},
										{
											"eventType": "comment",
											"text": "Otherwise, if the help icon belongs to a button to sell a tower, hide the range."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 142477800513810
												}
											],
											"actions": [
												{
													"id": "tween-two-properties",
													"objectClass": "GPRangeMarker",
													"sid": 139283692802324,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ShrinkRangeMarker\"",
														"property": "size",
														"end-x": "0",
														"end-y": "0",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 851282927349740
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Show tower range on desktop."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 856788794355426
								}
							],
							"actions": [],
							"sid": 524516256206876,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if the player is hovering the tower icon. If so, show range marker."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 181454260732286,
											"parameters": {
												"object": "GPTowerIcon"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "GPTowerIcon",
											"sid": 560512331349923,
											"parameters": {
												"animation": "\"Sell\""
											},
											"isInverted": true
										},
										{
											"id": "is-visible",
											"objectClass": "GPTowerIcon",
											"sid": 721458550551681
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 607150984069490,
											"parameters": {
												"object": "LVBuildingSpot",
												"expression": "LVBuildingSpot.Opacity > 0"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 744556988619968,
											"parameters": {
												"value": "inputFocus = \"buildmenu\""
											}
										},
										{
											"id": "is-any-playing",
											"objectClass": "GPRangeMarker",
											"sid": 281454234360673,
											"behaviorType": "Tween",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-position-to-another-object",
											"objectClass": "GPRangeMarker",
											"sid": 600437937763810,
											"parameters": {
												"object": "LVBuildingSpot",
												"image-point-optional": "0"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "GPRangeMarker",
											"sid": 440415700973671,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"GrowRangeMarker\"",
												"property": "size",
												"end-x": "ArrTowers.At(7, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) * 2",
												"end-y": "ArrTowers.At(7, Functions.pickTowerWithAnim(GPTowerIcon.AnimationName)) * 2",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 727607567981034
								},
								{
									"eventType": "comment",
									"text": "Otherwise, hide it."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 719764238243938
										},
										{
											"id": "is-any-playing",
											"objectClass": "GPRangeMarker",
											"sid": 706099003237974,
											"behaviorType": "Tween",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-two-properties",
											"objectClass": "GPRangeMarker",
											"sid": 984168584711892,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShrinkRangeMarker\"",
												"property": "size",
												"end-x": "0",
												"end-y": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 360614480241641
								}
							]
						},
						{
							"eventType": "comment",
							"text": "If the player presses Esc, close the build menu."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 902508299627942,
									"parameters": {
										"key": 27
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 560256515718546,
									"parameters": {
										"value": "inputFocus = \"buildmenu\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "hideBuildMenu",
									"sid": 577551211251624
								},
								{
									"callFunction": "setInputFocus",
									"sid": 251517919076636,
									"parameters": [
										"\"game\""
									]
								}
							],
							"sid": 825710244802945,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-opacity",
											"objectClass": "LVBuildingSpot",
											"sid": 403611528131947,
											"parameters": {
												"comparison": 4,
												"opacity": "0"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LVBuildingSpot",
											"sid": 134529953596622,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideSingleBuildSpot\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 383900431317321
								}
							]
						}
					],
					"sid": 926892389700776
				}
			],
			"sid": 208181639937703
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Build",
			"description": "Events related to a tower build action.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Actions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Check for screen tap/click."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap",
									"objectClass": "Touch",
									"sid": 192183777761084
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 739647828918678,
									"parameters": {
										"value": "inputFocus = \"game\""
									}
								}
							],
							"actions": [],
							"sid": 684343186058153,
							"children": [
								{
									"eventType": "comment",
									"text": "Player touched a building spot, therefore this spot should be visible while the tower menu is open."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 351756802488856,
											"parameters": {
												"object": "LVBuildingSpot"
											}
										},
										{
											"id": "is-playing",
											"objectClass": "GPUIFrameTowers",
											"sid": 225827840181400,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTowerMenu\""
											},
											"isInverted": true
										},
										{
											"id": "is-playing",
											"objectClass": "GPUIFrameTowers",
											"sid": 362779256946147,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenu\""
											},
											"isInverted": true
										},
										{
											"id": "is-playing",
											"objectClass": "LVBuildingSpot",
											"sid": 970372964813469,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealBuildSpots\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LVBuildingSpot",
											"sid": 202472609563329,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealSingleBuildSpot\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.5",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"callFunction": "setInputFocus",
											"sid": 611119714506422,
											"parameters": [
												"\"buildmenu\""
											]
										}
									],
									"sid": 164022641315720,
									"children": [
										{
											"eventType": "comment",
											"text": "Spot already has a tower built."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "LVBuildingSpot",
													"sid": 971167887735779,
													"parameters": {
														"child": "GPTower",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"callFunction": "fillTowerInfo",
													"sid": 895459916900889,
													"parameters": [
														"GPTower.AnimationName"
													]
												}
											],
											"sid": 886616711558344
										},
										{
											"eventType": "comment",
											"text": "Spot is empty."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 245791031877730
												}
											],
											"actions": [
												{
													"callFunction": "fillTowerInfo",
													"sid": 465762609659772,
													"parameters": [
														"\"\""
													]
												}
											],
											"sid": 853512637542464
										},
										{
											"eventType": "comment",
											"text": "Show the menu and change input focus."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "showBuildMenu",
													"sid": 744377725983835,
													"parameters": [
														"Touch.X"
													]
												}
											],
											"sid": 511156626212454
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If player touched an invalid spot, reveal all building spots."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 837894846451943
										},
										{
											"id": "is-playing",
											"objectClass": "LVBuildingSpot",
											"sid": 522558132125094,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealBuildSpots\""
											},
											"isInverted": true
										},
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 899612930723267,
											"parameters": {
												"object": "GPDontShowBlocks"
											},
											"isInverted": true
										},
										{
											"id": "is-playing",
											"objectClass": "GPUIFrameTowers",
											"sid": 551068654080786,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTowerMenu\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LVBuildingSpot",
											"sid": 491813489551256,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealBuildSpots\"",
												"property": "offsetOpacity",
												"end-value": "50",
												"time": "0.5",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 527719171882281
								}
							]
						}
					],
					"sid": 549964230210510
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Build Platform Dependent Behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "When on desktop mode, hovering over a building spot will cause it to appear, then disappear when mouse is no longer over it."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 818364785388894,
									"parameters": {
										"variable": "isOnMobile"
									},
									"isInverted": true
								},
								{
									"id": "is-playing",
									"objectClass": "LVBuildingSpot",
									"sid": 439437333839448,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"RevealBuildSpots\""
									},
									"isInverted": true
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 326316403431495,
									"parameters": {
										"value": "inputFocus = \"game\""
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 154551174016854,
									"parameters": {
										"object": "LVBuildingSpot"
									}
								}
							],
							"actions": [],
							"sid": 667880962229249,
							"children": [
								{
									"eventType": "comment",
									"text": "Show spot."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "cursor-is-over-object",
											"objectClass": "Mouse",
											"sid": 506890821454751,
											"parameters": {
												"object": "LVBuildingSpot"
											}
										},
										{
											"id": "is-playing",
											"objectClass": "LVBuildingSpot",
											"sid": 518110801196284,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealSingleBuildSpots\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LVBuildingSpot",
											"sid": 506985597627899,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"RevealSingleBuildSpot\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.05",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 637490747625544
								},
								{
									"eventType": "comment",
									"text": "Hide spot."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 154882981893430
										},
										{
											"id": "is-playing",
											"objectClass": "LVBuildingSpot",
											"sid": 507287443566158,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideSingleBuildSpot\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "LVBuildingSpot",
											"sid": 779479837827674,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideSingleBuildSpot\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 233038868987334
								}
							]
						}
					],
					"sid": 139494065961277
				}
			],
			"sid": 435051357497949
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tips",
			"description": "Tips/hints logic.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Tips Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Show tip text."
						},
						{
							"functionName": "showTip",
							"functionDescription": "Show tip text",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "text",
									"type": "string",
									"initialValue": "",
									"comment": "Text to be displayed",
									"sid": 136535344327739
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 971404329381652,
									"parameters": {
										"value": "text <> \"\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Set tip text, replacing special tags by their values."
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 719738913678882,
									"parameters": {
										"text": "text"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 680027064157577,
									"parameters": {
										"text": "replace(Self.Text, \"[lives]\", str(lives))"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 882608643578395,
									"parameters": {
										"text": "replace(Self.Text, \"[ember]\", str(ember))"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 871854862799441,
									"parameters": {
										"text": "replace(Self.Text, \"[crystal]\", str(crystal))"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 378070047837617,
									"parameters": {
										"text": "replace(Self.Text, \"[flux]\", str(flux))"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 222096422576993,
									"parameters": {
										"text": "replace(Self.text, \"[gold]\", str(gold))"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextTip",
									"sid": 294816980206939,
									"parameters": {
										"text": "replace(Self.text, \"[interest]\", \"+\" & (left(right(str(roundToDp(interest * 100, 1)), 2), 1) = \".\" ? roundToDp(interest * 100, 1) : roundToDp(interest * 100, 1) & \".0\") & \"%\")"
									}
								}
							],
							"sid": 920908806610518,
							"children": [
								{
									"eventType": "variable",
									"name": "enemyToShow",
									"type": "number",
									"initialValue": "0",
									"comment": "Enemy ID in the array to show icon and tip.",
									"isStatic": false,
									"isConstant": false,
									"sid": 162739271700575
								},
								{
									"eventType": "comment",
									"text": "There is a next wave to show."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-timer-running",
											"objectClass": "GPNextWave",
											"sid": 128116470435137,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"NextWave\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 992819233780479,
											"parameters": {
												"variable": "enemyToShow",
												"value": "ArrWaves.At(2, Functions.getWaveID(currLevel, wave))"
											}
										},
										{
											"id": "set-text",
											"objectClass": "GPTextTip",
											"sid": 147570356424498,
											"parameters": {
												"text": "replace(Self.Text, \"[wave]\", \"[color=\" & TIP_HL_COL & \"]\" & ArrEnemies.At(0, enemyToShow) & \"[/color]\")"
											}
										},
										{
											"id": "set-text",
											"objectClass": "GPTextTip",
											"sid": 452010951879396,
											"parameters": {
												"text": "replace(Self.Text, \"[wavedesc]\", ArrEnemies.At(1, enemyToShow))"
											}
										},
										{
											"id": "set-text",
											"objectClass": "GPTextTip",
											"sid": 351914093034595,
											"parameters": {
												"text": "replace(\n    Self.Text,\n    \"[wavestats]\",\n    \"[color=\" & TIP_HL_COL & \"]Count: [color=\" & TIP_STD_COL & \"]\" & ArrWaves.At(4, enemyToShow) & \" | \" &\n    \"[color=\" & TIP_HL_COL & \"]HP: [color=\" & TIP_STD_COL & \"]\" & ceil(ArrEnemies.At(2, enemyToShow) * (1 + wave * ArrLevel.At(3,currLevel-1))) & \" | \" &\n    \"[color=\" & TIP_HL_COL & \"]Speed: [color=\" & TIP_STD_COL & \"]\" & ceil(ArrEnemies.At(3, enemyToShow)  * (1 + wave * WAVE_SPEED_INC) )& \" | \" &\n    \"[color=\" & TIP_HL_COL & \"]Tech: [color=\" & TIP_STD_COL & \"]\" & ArrEnemies.At(4, enemyToShow)  * (1 + wave * WAVE_GOLD_INC) \n)"
											}
										}
									],
									"sid": 853666219717648
								},
								{
									"eventType": "comment",
									"text": "Ther is no next wave."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 466569153588442
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 241748045501504,
											"parameters": {
												"value": "find(text, \"[wavedesc]\") <> -1"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GPTextTip",
											"sid": 909130919373248,
											"parameters": {
												"text": "\"No waves left.\""
											}
										}
									],
									"sid": 929499691039884
								},
								{
									"eventType": "comment",
									"text": "Fade-in Tip box."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "GPUIFrameTip",
											"sid": 940787562701427,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTip\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTip",
											"sid": 492423748404447,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTip\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 555273346158106
								},
								{
									"eventType": "comment",
									"text": "On mobile, hide tip after some time."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 119739999832593,
											"parameters": {
												"variable": "isOnMobile"
											}
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "GPUIFrameTip",
											"sid": 141576997665107,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "10.0",
												"type": "once",
												"tag": "\"HideTip\""
											}
										}
									],
									"sid": 579724547960908
								},
								{
									"eventType": "comment",
									"text": "On desktop, hide tip almos immediately."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 795926402548484
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "GPUIFrameTip",
											"sid": 526801375154203,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "0.15",
												"type": "once",
												"tag": "\"HideTip\""
											}
										}
									],
									"sid": 766599559458970
								}
							]
						}
					],
					"sid": 268402264460155
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Tips Platform Dependent Behaviors",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Manage tips on mobile platforms."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tap",
									"objectClass": "Touch",
									"sid": 783845624986369
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 142667602694594,
									"parameters": {
										"variable": "isOnMobile"
									}
								}
							],
							"actions": [],
							"sid": 953091351151856,
							"children": [
								{
									"eventType": "comment",
									"text": "When the player touches valid items, a tip text is displayed."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-touching-object",
											"objectClass": "Touch",
											"sid": 459882677267276,
											"parameters": {
												"object": "GPTipObjects"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GPTipObjects",
											"sid": 262129038432270,
											"parameters": {
												"instance-variable": "tipActive"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GPTipObjects",
											"sid": 331893811468058,
											"parameters": {
												"instance-variable": "desktopOnly"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "showTip",
											"sid": 950176550812299,
											"parameters": [
												"GPTipObjects.tipText"
											]
										}
									],
									"sid": 231558834822918
								},
								{
									"eventType": "comment",
									"text": "If the touch happens outside valid items, hide tip."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 195379427875651
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPUIFrameTip",
											"sid": 196963878086206,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"HideTip\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "stop-timer",
											"objectClass": "GPUIFrameTip",
											"sid": 578155212460476,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"HideTip\""
											}
										},
										{
											"id": "stop-tweens",
											"objectClass": "GPUIFrameTip",
											"sid": 363816194923822,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowTip\""
											}
										}
									],
									"sid": 925089891805490
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Hide tip after some time."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPUIFrameTip",
									"sid": 978357078640087,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"HideTip\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameTip",
									"sid": 345695977892612,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideTip\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 723786677258288
						},
						{
							"eventType": "comment",
							"text": "Mange tips on desktop platforms."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "Mouse",
									"sid": 290221766129786,
									"parameters": {
										"object": "GPTipObjects"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "GPTipObjects",
									"sid": 300857957234021,
									"parameters": {
										"instance-variable": "tipActive"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 788459489224252,
									"parameters": {
										"variable": "isOnMobile"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "showTip",
									"sid": 556310064985672,
									"parameters": [
										"GPTipObjects.tipText"
									]
								}
							],
							"sid": 578903269041755
						}
					],
					"sid": 836942064425486
				}
			],
			"sid": 547179941014409
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Entities Z-Ordering",
			"description": "Events that control de Z-Order of certain objects.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Order ZOrderables every tick."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 268793611674534
						}
					],
					"actions": [],
					"sid": 950254430544769,
					"children": [
						{
							"eventType": "comment",
							"text": "Update YPos of every ZOrderable."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 351192958247747,
									"parameters": {
										"object": "GPZOrderables"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GPZOrderables",
									"sid": 246514609737071,
									"parameters": {
										"instance-variable": "YPos",
										"value": "Self.Y"
									}
								}
							],
							"sid": 990731135088913
						},
						{
							"eventType": "comment",
							"text": "Sort Z Order by YPos."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "sort-z-order",
									"objectClass": "System",
									"sid": 946688638739817,
									"parameters": {
										"object": "GPZOrderables",
										"instance-variable": {
											"name": "YPos",
											"objectClass": "GPZOrderables"
										}
									}
								}
							],
							"sid": 482284304332544
						}
					]
				}
			],
			"sid": 377807662790434
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Waves",
			"description": "Waves logic.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Waves Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Create an enemy according to currEnemyID and set properties."
						},
						{
							"functionName": "createEnemy",
							"functionDescription": "Create an enemy according to currEnemyID and set properties",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 959082788208313,
									"parameters": {
										"object": "LVSpawner",
										"expression": "LVSpawner.spawnerID = ArrWaves.At(3, currWaveID)"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 721899561548432,
									"parameters": {
										"value": "inputFocus <> \"finish\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play portal sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 402130005178085,
									"parameters": [
										"\"misc/portal\"",
										true,
										"0.25"
									]
								},
								{
									"type": "comment",
									"text": "Create portal effect."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 230719398835178,
									"parameters": {
										"object-to-create": "GPPortalEffect",
										"layer": "\"EntitiesAbove\"",
										"x": "LVSpawner.X",
										"y": "LVSpawner.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPPortalEffect",
									"sid": 448915042904559,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PortalGrowAndDestroy\"",
										"property": "scale",
										"end-x": "2",
										"end-y": "2",
										"time": "0.33",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPPortalEffect",
									"sid": 293809628337444,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PortalDisappear\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.33",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Create the enemy."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 512469637616161,
									"parameters": {
										"object-to-create": "GPEnemy",
										"layer": "\"Entities\"",
										"x": "LVSpawner.X",
										"y": "LVSpawner.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"type": "comment",
									"text": "Set the properties."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 134843417649856,
									"parameters": {
										"instance-variable": "spawnedFrom",
										"value": "LVSpawner.spawnerID"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GPEnemy",
									"sid": 964216382993128,
									"parameters": {
										"animation": "str(zeropad(currEnemyID, 3))",
										"from": "current-frame"
									}
								},
								{
									"id": "set-width",
									"objectClass": "GPEnemy",
									"sid": 417273859368007,
									"parameters": {
										"width": "LVSpawner.startMirrored ? -Self.ImageWidth : Self.ImageWidth"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 773559220829807,
									"parameters": {
										"instance-variable": "hp",
										"value": "ceil(ArrEnemies.At(2, currEnemyID) * (1 + wave * ArrLevel.At(3,currLevel-1)))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 699856035250233,
									"parameters": {
										"instance-variable": "defaultSpeed",
										"value": "ceil(ArrEnemies.At(3, currEnemyID) * (1 + wave * WAVE_SPEED_INC))"
									}
								},
								{
									"id": "set-max-speed",
									"objectClass": "GPEnemy",
									"sid": 982695807329965,
									"behaviorType": "MoveTo",
									"parameters": {
										"max-speed": "ceil(ArrEnemies.At(3, currEnemyID) * (1 + wave * WAVE_SPEED_INC))"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 176602122962034,
									"parameters": {
										"instance-variable": "tech",
										"value": "ArrEnemies.At(4, currEnemyID)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 397964512998209,
									"parameters": {
										"instance-variable": "specialPower",
										"value": "ArrEnemies.At(5, currEnemyID)"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPEnemy",
									"sid": 746960515022489,
									"parameters": {
										"instance-variable": "gold",
										"value": "ceil(ArrEnemies.At(6, currEnemyID) * (1 + wave * WAVE_GOLD_INC))"
									}
								}
							],
							"sid": 947373918802118,
							"children": [
								{
									"eventType": "comment",
									"text": "Set the path."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each-ordered",
											"objectClass": "System",
											"sid": 941247274920174,
											"parameters": {
												"object": "LVEnemyWaypoint",
												"expression": "LVEnemyWaypoint.wptID",
												"order": "ascending"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 484847123328161,
											"parameters": {
												"value": "LVEnemyWaypoint.spawnerID = GPEnemy.spawnedFrom"
											}
										}
									],
									"actions": [
										{
											"id": "move-to-object",
											"objectClass": "GPEnemy",
											"sid": 433756848031622,
											"behaviorType": "MoveTo",
											"parameters": {
												"object": "LVEnemyWaypoint",
												"image-point": "0",
												"mode": "add-waypoint"
											}
										}
									],
									"sid": 456183695381180
								},
								{
									"eventType": "comment",
									"text": "If enemy is equipped with Dash special, set dash timer."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPEnemy",
											"sid": 306910165901829,
											"parameters": {
												"instance-variable": "specialPower",
												"comparison": 0,
												"value": "\"Dash\""
											}
										}
									],
									"actions": [
										{
											"id": "start-timer",
											"objectClass": "GPEnemy",
											"sid": 680024795294383,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "0.85",
												"type": "regular",
												"tag": "\"Dash\""
											}
										}
									],
									"sid": 328720564653144
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Get wave ID based on level and wave number."
						},
						{
							"functionName": "getWaveID",
							"functionDescription": "Get wave ID based on level and wave number",
							"functionCategory": "",
							"functionReturnType": "number",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "levelNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "Level number",
									"sid": 252984021683419
								},
								{
									"name": "waveNumber",
									"type": "number",
									"initialValue": "0",
									"comment": "Wave number",
									"sid": 773495526128962
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 390006790618709,
									"parameters": {
										"value": "ArrLevel.At(0, levelNumber-1 ) + waveNumber"
									}
								}
							],
							"sid": 259137421534104
						}
					],
					"sid": 567131625165689
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Waves Timer",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Update wave timer."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 689159359309239
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "GPTextTime",
									"sid": 465083666898641,
									"parameters": {
										"text": "max(int(GPNextWave.Timer.Duration(\"NextWave\") - GPNextWave.Timer.CurrentTime(\"NextWave\")), 0)"
									}
								}
							],
							"sid": 981563465997864,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 992049380865084,
											"parameters": {
												"value": "GPNextWave.Timer.Duration(\"NextWave\") = Infinity"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GPTextTime",
											"sid": 188550142366748,
											"parameters": {
												"text": "30"
											}
										}
									],
									"sid": 659902712029959
								}
							]
						}
					],
					"sid": 763155770631132
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Waves Spawn",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Spawn wave."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPNextWave",
									"sid": 910150913776013,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"NextWave\""
									}
								}
							],
							"actions": [],
							"sid": 549863749854906,
							"children": [
								{
									"eventType": "comment",
									"text": "Calculate currWaveID and currEnemyID. Also, set the next wave symbol according to the next enemy."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 835828539840891,
											"parameters": {
												"variable": "currWaveID",
												"value": "Functions.getWaveID(currLevel, wave)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 982763467008265,
											"parameters": {
												"variable": "currEnemyID",
												"value": "ArrWaves.At(2, currWaveID)"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "GPNextWave",
											"sid": 416564306210522,
											"parameters": {
												"animation": "str(\n    zeropad(\n        ArrWaves.At(\n            2, min(Functions.getWaveID(currLevel, wave + 1), ArrLevel.At(1, currLevel-1))\n        ), 3)\n)\n",
												"from": "beginning"
											}
										}
									],
									"sid": 753316812245773
								},
								{
									"eventType": "comment",
									"text": "Update wave tip text if needed."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-opacity",
											"objectClass": "GPTextTip",
											"sid": 526286541157426,
											"parameters": {
												"comparison": 0,
												"opacity": "100"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 754518252585288,
											"parameters": {
												"value": "left(GPTextTip.Text, 9) = \"Next wave\""
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "GPTextTip",
											"sid": 563916122985997,
											"parameters": {
												"text": "replace(Self.Text, \"[wave]\", \"[color=\" & TIP_HL_COL & \"]\" & ArrEnemies.At(0, currEnemyID) & \"[/color]\")"
											}
										}
									],
									"sid": 887730611825302
								},
								{
									"eventType": "comment",
									"text": "Make correct spawn portal flash."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 232747864177985,
											"parameters": {
												"object": "GPPortalSpawner"
											}
										}
									],
									"actions": [],
									"sid": 527298212798985,
									"children": [
										{
											"eventType": "comment",
											"text": "If it's the last wave, don't flash any portal."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 887053545543010,
													"parameters": {
														"value": "wave >= ArrLevel.At(1, currLevel-1) - ArrLevel.At(0, currLevel-1)"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "GPPortalSpawner",
													"sid": 192369110356014,
													"parameters": {
														"visibility": "visible"
													}
												},
												{
													"id": "set-active",
													"objectClass": "GPPortalSpawner",
													"sid": 336234867736187,
													"behaviorType": "Sine",
													"parameters": {
														"state": "inactive"
													}
												},
												{
													"id": "set-effect-parameter",
													"objectClass": "GPPortalSpawner",
													"sid": 277811383607406,
													"parameters": {
														"effect": "\"AdjustHSL\"",
														"parameter-index": "2",
														"value": "100"
													}
												}
											],
											"sid": 624808268852406
										},
										{
											"eventType": "comment",
											"text": "Otherwise, flash current portal."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 737385014679167
												}
											],
											"actions": [],
											"sid": 484553668464389,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 726437270378301,
															"parameters": {
																"value": "GPPortalSpawner.spawnerID = ArrWaves.At(3, currWaveID + 1)"
															}
														}
													],
													"actions": [
														{
															"id": "set-active",
															"objectClass": "GPPortalSpawner",
															"sid": 946540802441382,
															"behaviorType": "Sine",
															"parameters": {
																"state": "active"
															}
														}
													],
													"sid": 170545601532820,
													"children": [
														{
															"eventType": "comment",
															"text": "If level has overlapping portals, make the current wave's portal visible."
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 103922015436851,
																	"parameters": {
																		"value": "ArrLevel.At(4, currLevel - 1) = 1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-visible",
																	"objectClass": "GPPortalSpawner",
																	"sid": 855695223427076,
																	"parameters": {
																		"visibility": "visible"
																	}
																}
															],
															"sid": 763927715750079
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 711982429451147
														}
													],
													"actions": [
														{
															"id": "set-active",
															"objectClass": "GPPortalSpawner",
															"sid": 927397408377591,
															"behaviorType": "Sine",
															"parameters": {
																"state": "inactive"
															}
														},
														{
															"id": "set-effect-parameter",
															"objectClass": "GPPortalSpawner",
															"sid": 623279684555957,
															"parameters": {
																"effect": "\"AdjustHSL\"",
																"parameter-index": "2",
																"value": "100"
															}
														}
													],
													"sid": 884092781136404,
													"children": [
														{
															"eventType": "comment",
															"text": "If level has overlapping portals, make inactive portals invisible."
														},
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "evaluate-expression",
																	"objectClass": "System",
																	"sid": 554312235072898,
																	"parameters": {
																		"value": "ArrLevel.At(4, currLevel - 1) = 1"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-visible",
																	"objectClass": "GPPortalSpawner",
																	"sid": 515176748389870,
																	"parameters": {
																		"visibility": "invisible"
																	}
																}
															],
															"sid": 421565349873339
														}
													]
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Summon wave enemies."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 755367378008543,
											"parameters": {
												"count": "ArrWaves.At(4, currWaveID)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Delay before spawning an enemy."
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 932790968167761,
											"parameters": {
												"seconds": "loopindex * ArrWaves.At(5, currWaveID)"
											}
										},
										{
											"type": "comment",
											"text": "Spawn enemy."
										},
										{
											"callFunction": "createEnemy",
											"sid": 302663000627499
										}
									],
									"sid": 998386971596314
								},
								{
									"eventType": "comment",
									"text": "Restart next wave timer, if there is a next wave."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 394604454752824,
											"parameters": {
												"value": "wave < ArrLevel.At(1, currLevel - 1) - ArrLevel.At(0, currLevel - 1)"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Start next waves timer."
										},
										{
											"id": "start-timer",
											"objectClass": "GPNextWave",
											"sid": 785260776415598,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "ArrWaves.At(6, currWaveID)",
												"type": "once",
												"tag": "\"NextWave\""
											}
										}
									],
									"sid": 607089175838337
								},
								{
									"eventType": "comment",
									"text": "Otherwise, just make next wave icon blank and do not start a next wave."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 360471171307799
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "GPNextWave",
											"sid": 256682693419170,
											"parameters": {
												"animation": "\"None\"",
												"from": "beginning"
											}
										}
									],
									"sid": 121668937673657
								},
								{
									"eventType": "comment",
									"text": "Bring boss."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 731303014198203,
											"parameters": {
												"value": "ArrWaves.At(7, currWaveID) = \"Yes\""
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 805943537200002,
											"parameters": {
												"seconds": "ArrWaves.At(4, currWaveID) * ArrWaves.At(5, currWaveID)"
											}
										}
									],
									"sid": 577565565668382,
									"children": [
										{
											"eventType": "comment",
											"text": "Spawn boss of the tech the player chose in the beginning of the level."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 139593395476006,
													"parameters": {
														"value": "chosenTech = \"Ember\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 598210233122815,
													"parameters": {
														"variable": "currEnemyID",
														"value": "30"
													}
												}
											],
											"sid": 434566803662840
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 603875615167973
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 453385819252317,
													"parameters": {
														"value": "chosenTech = \"Crystal\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 689532196956393,
													"parameters": {
														"variable": "currEnemyID",
														"value": "31"
													}
												}
											],
											"sid": 171694166484359
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 935415023212521
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 850438912529855,
													"parameters": {
														"value": "chosenTech = \"Flux\""
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 618683227870916,
													"parameters": {
														"variable": "currEnemyID",
														"value": "32"
													}
												}
											],
											"sid": 959894115024420
										},
										{
											"eventType": "comment",
											"text": "Create the boss and set its properties."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "createEnemy",
													"sid": 711652313519997
												}
											],
											"sid": 299000741330205
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "Next wave."
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 365935671954437,
											"parameters": {
												"variable": "wave",
												"value": "1"
											}
										},
										{
											"callFunction": "updateUI",
											"sid": 619543462937559
										}
									],
									"sid": 730024864733099
								}
							]
						}
					],
					"sid": 192443885984288
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Waves End Game Catch",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Destroy any spawning enemies if the game has already ended."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "GPEnemy",
									"sid": 933458046719607
								}
							],
							"actions": [],
							"sid": 175286819499546,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 464947585979790,
											"parameters": {
												"value": "inputFocus = \"finish\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 313303821094728,
											"parameters": {
												"value": "inputFocus = \"none\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "GPEnemy",
											"sid": 819370523671923
										}
									],
									"sid": 923829864108539,
									"isOrBlock": true
								}
							]
						}
					],
					"sid": 105691607906996
				}
			],
			"sid": 157064244352003
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Enemies",
			"description": "Events to process enemy behaviors.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Enemy Hit",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Process enemy hit."
						},
						{
							"functionName": "enemyHit",
							"functionDescription": "Process enemy hit",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "damage",
									"type": "number",
									"initialValue": "0",
									"comment": "How much damage the enemy should take",
									"sid": 577838196272457
								},
								{
									"name": "enemyUID",
									"type": "number",
									"initialValue": "0",
									"comment": "UID of the enemy",
									"sid": 868787410211309
								},
								{
									"name": "special",
									"type": "string",
									"initialValue": "",
									"comment": "Special effect",
									"sid": 409558265959938
								},
								{
									"name": "tech",
									"type": "string",
									"initialValue": "",
									"comment": "type of tech used",
									"sid": 344051616717544
								},
								{
									"name": "earnGold",
									"type": "boolean",
									"initialValue": "true",
									"comment": "Should the player earn gold when this enemy is destroyed?",
									"sid": 946386598643502
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "GPEnemy",
									"sid": 482566147888028,
									"parameters": {
										"unique-id": "enemyUID"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GPEnemy",
									"sid": 965254180991824,
									"parameters": {
										"instance-variable": "hp",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 391705930868663,
							"children": [
								{
									"eventType": "variable",
									"name": "totalDamage",
									"type": "number",
									"initialValue": "0",
									"comment": "Total damage to be delt",
									"isStatic": false,
									"isConstant": false,
									"sid": 179491532063627
								},
								{
									"eventType": "group",
									"disabled": false,
									"title": "Enemy Tower Hit Effects",
									"description": "",
									"isActiveOnStart": true,
									"children": [
										{
											"eventType": "comment",
											"text": "Slow effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 610161555389904,
													"parameters": {
														"value": "special = \"Slow\" & GPEnemy.specialPower <> \"NoSlow\""
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "GPEnemy",
													"sid": 597457116542778,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "1.0",
														"type": "once",
														"tag": "\"EffectSlow\""
													}
												}
											],
											"sid": 882029667567667
										},
										{
											"eventType": "comment",
											"text": "Strong Slow effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 294110226576778
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 926445217983079,
													"parameters": {
														"value": "special = \"SlowStrong\" & GPEnemy.specialPower <> \"NoSlow\""
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "GPEnemy",
													"sid": 473742428463551,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "1.5",
														"type": "once",
														"tag": "\"EffectSlowStrong\""
													}
												}
											],
											"sid": 168136460463518
										},
										{
											"eventType": "comment",
											"text": "Freeze effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 573158574347903
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 694177503680458,
													"parameters": {
														"value": "special = \"Freeze\" & GPEnemy.specialPower <> \"NoSlow\""
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "GPEnemy",
													"sid": 828472652587004,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "0.125",
														"type": "once",
														"tag": "\"EffectFreeze\""
													}
												}
											],
											"sid": 757051945832249
										},
										{
											"eventType": "comment",
											"text": "Damage based on HP percentage effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 448263921630081
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 210452921787732,
													"parameters": {
														"value": "special = \"PctHp\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 833997528257500,
													"parameters": {
														"variable": "totalDamage",
														"value": "GPEnemy.hp * 0.05"
													}
												}
											],
											"sid": 707015256839019
										},
										{
											"eventType": "comment",
											"text": "Damage based on HP percentage effect (Strong)."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 435648074174505
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 926422398612075,
													"parameters": {
														"value": "special = \"PctHpStrong\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 654330187212278,
													"parameters": {
														"variable": "totalDamage",
														"value": "GPEnemy.hp * 0.08"
													}
												}
											],
											"sid": 813055608315311
										},
										{
											"eventType": "comment",
											"text": "Damage per second effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 990502356357718
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 305596555120264,
													"parameters": {
														"value": "special = \"Dps\""
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "GPEnemy",
													"sid": 904629830667218,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "5.0",
														"type": "once",
														"tag": "\"EffectDps\""
													}
												}
											],
											"sid": 292962126077062
										},
										{
											"eventType": "comment",
											"text": "Damage per second effect (Strong)."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 823063068238779
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 395957583907479,
													"parameters": {
														"value": "special = \"DpsStrong\""
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "GPEnemy",
													"sid": 477519038863527,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "5.0",
														"type": "once",
														"tag": "\"EffectDpsStrong\""
													}
												}
											],
											"sid": 296318301271651
										},
										{
											"eventType": "comment",
											"text": "Bonus damage if enemy is slowed down."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 616895857678020
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 362823993341054,
													"parameters": {
														"value": "special = \"SlowDmg\""
													}
												}
											],
											"actions": [],
											"sid": 428131460031776,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "is-timer-running",
															"objectClass": "GPEnemy",
															"sid": 796360673088936,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"EffectSlow\""
															}
														},
														{
															"id": "is-timer-running",
															"objectClass": "GPEnemy",
															"sid": 638521374095101,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"EffectSlowStrong\""
															}
														},
														{
															"id": "is-timer-running",
															"objectClass": "GPEnemy",
															"sid": 975501315594849,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"EffectFreeze\""
															}
														}
													],
													"actions": [
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 231569168105248,
															"parameters": {
																"variable": "totalDamage",
																"value": "damage"
															}
														}
													],
													"sid": 273814989845567,
													"isOrBlock": true
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Damage based on distance effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 736304907447683
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 516576214520176,
													"parameters": {
														"value": "left(special, 7) = \"DistDmg\""
													}
												}
											],
											"actions": [
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 481304318771533,
													"parameters": {
														"variable": "totalDamage",
														"value": "distance(float(tokenat(special, 1, \"|\")), float(tokenat(special, 2, \"|\")), GPEnemy.X, GPEnemy.Y)/2"
													}
												}
											],
											"sid": 350711017573169
										},
										{
											"eventType": "comment",
											"text": "Acid effect."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 384518239963714
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 451776435178698,
													"parameters": {
														"value": "special = \"Acid\""
													}
												}
											],
											"actions": [],
											"sid": 448145361843871,
											"children": [
												{
													"eventType": "comment",
													"text": "Destroy potentially overlapping acids."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each",
															"objectClass": "System",
															"sid": 811351447425747,
															"parameters": {
																"object": "GPAcid"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 897167028131350,
															"parameters": {
																"value": "distance(GPEnemy.X, GPEnemy.Y, GPAcid.X, GPAcid.Y) <= 80"
															}
														}
													],
													"actions": [
														{
															"id": "stop-timer",
															"objectClass": "GPAcid",
															"sid": 213246741969855,
															"behaviorType": "Timer",
															"parameters": {
																"tag": "\"AcidDestroy\""
															}
														},
														{
															"id": "tween-one-property",
															"objectClass": "GPAcid",
															"sid": 434643792309801,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"GPAcidDestroy\"",
																"property": "offsetOpacity",
																"end-value": "0",
																"time": "0.2",
																"ease": "easeinoutsine",
																"destroy-on-complete": "yes",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														}
													],
													"sid": 272039288515976
												},
												{
													"eventType": "comment",
													"text": "Create new acid."
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"type": "comment",
															"text": "Create the acid and immediately make it invisible."
														},
														{
															"id": "create-object",
															"objectClass": "System",
															"sid": 631924359011942,
															"parameters": {
																"object-to-create": "GPAcid",
																"layer": "\"EntitiesBelow\"",
																"x": "GPEnemy.X",
																"y": "GPEnemy.Y - 2",
																"create-hierarchy": false,
																"template-name": "\"\""
															}
														},
														{
															"id": "set-opacity",
															"objectClass": "GPAcid",
															"sid": 949339682204520,
															"parameters": {
																"opacity": "0"
															}
														},
														{
															"type": "comment",
															"text": "Make acid fade in."
														},
														{
															"id": "tween-one-property",
															"objectClass": "GPAcid",
															"sid": 157754179689130,
															"behaviorType": "Tween",
															"parameters": {
																"tags": "\"GPAcidSpawn\"",
																"property": "offsetOpacity",
																"end-value": "100",
																"time": "0.15",
																"ease": "easeinoutsine",
																"destroy-on-complete": "no",
																"loop": "no",
																"ping-pong": "no",
																"repeat-count": "1"
															}
														},
														{
															"type": "comment",
															"text": "Program acid destruction."
														},
														{
															"id": "start-timer",
															"objectClass": "GPAcid",
															"sid": 313965324368353,
															"behaviorType": "Timer",
															"parameters": {
																"duration": "2.0",
																"type": "once",
																"tag": "\"AcidDestroy\""
															}
														},
														{
															"type": "comment",
															"text": "Move to bottom."
														},
														{
															"id": "move-to-bottom",
															"objectClass": "GPAcid",
															"sid": 986306314678570
														}
													],
													"sid": 589331397966285
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Damage based on amount of towers."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 163637947758229
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 459868943713972,
													"parameters": {
														"value": "special = \"TogetherDmg\""
													}
												}
											],
											"actions": [],
											"sid": 493789796045834,
											"children": [
												{
													"eventType": "variable",
													"name": "teslaCount",
													"type": "number",
													"initialValue": "0",
													"comment": "Amount of Tesla Shard towers",
													"isStatic": false,
													"isConstant": false,
													"sid": 905152220189722
												},
												{
													"eventType": "comment",
													"text": "Get amount of Tesla Shard towers."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each",
															"objectClass": "System",
															"sid": 181621928119399,
															"parameters": {
																"object": "GPTowerTurret"
															}
														},
														{
															"id": "compare-instance-variable",
															"objectClass": "GPTowerTurret",
															"sid": 191292166756137,
															"parameters": {
																"instance-variable": "towerID",
																"comparison": 0,
																"value": "15"
															}
														}
													],
													"actions": [
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 846965396359741,
															"parameters": {
																"variable": "teslaCount",
																"value": "1"
															}
														}
													],
													"sid": 682021408322988
												},
												{
													"eventType": "comment",
													"text": "Apply damage considering amount of towers."
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"id": "add-to-eventvar",
															"objectClass": "System",
															"sid": 139329205218043,
															"parameters": {
																"variable": "totalDamage",
																"value": "round(damage * 1.2 ^ (teslaCount - 1))"
															}
														}
													],
													"sid": 817331917444720
												}
											]
										}
									],
									"sid": 930169512258930
								},
								{
									"eventType": "comment",
									"text": "Standard damage."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 655964249032076,
											"parameters": {
												"value": "special <> \"TogetherDmg\""
											}
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 438843957541940,
											"parameters": {
												"variable": "totalDamage",
												"value": "damage"
											}
										}
									],
									"sid": 636561241579864
								},
								{
									"eventType": "comment",
									"text": "Tech Damage"
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 588760919805325,
											"parameters": {
												"variable": "totalDamage",
												"value": "totalDamage * DictTech.Get(tech & \"-\" & GPEnemy.tech)"
											}
										}
									],
									"sid": 440309556216301
								},
								{
									"eventType": "comment",
									"text": "Cancellation of tech damage."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 482739896525258,
											"parameters": {
												"value": "tech = \"Ember\" & GPEnemy.specialPower = \"NoEmber\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 402919151295743,
											"parameters": {
												"value": "tech = \"Crystal\" & GPEnemy.specialPower = \"NoCrystal\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 722241763929977,
											"parameters": {
												"value": "tech = \"Flux\" & GPEnemy.specialPower = \"NoFlux\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 906761706891427,
											"parameters": {
												"variable": "totalDamage",
												"value": "0"
											}
										}
									],
									"sid": 952989109325130,
									"isOrBlock": true
								},
								{
									"eventType": "comment",
									"text": "Check if enemy has Mitigate special."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPEnemy",
											"sid": 316001406643835,
											"parameters": {
												"instance-variable": "specialPower",
												"comparison": 0,
												"value": "\"Mitigate\""
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPEnemy",
											"sid": 869355953395468,
											"parameters": {
												"instance-variable": "hp",
												"value": "Self.hp + 0.05 * Self.hp"
											}
										}
									],
									"sid": 962142135289197
								},
								{
									"eventType": "comment",
									"text": "Invisible effect"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPEnemy",
											"sid": 862750436376890,
											"parameters": {
												"instance-variable": "specialPower",
												"comparison": 0,
												"value": "\"Invisible\""
											}
										},
										{
											"id": "compare-opacity",
											"objectClass": "GPEnemy",
											"sid": 750005495782490,
											"parameters": {
												"comparison": 0,
												"opacity": "100"
											}
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPEnemy",
											"sid": 200846484437914,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"GPEnemyInvisible\"",
												"property": "offsetOpacity",
												"end-value": "2",
												"time": "0.2",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-max-speed",
											"objectClass": "GPEnemy",
											"sid": 955700066523591,
											"behaviorType": "MoveTo",
											"parameters": {
												"max-speed": "ceil(Self.defaultSpeed * 1.5)"
											}
										}
									],
									"sid": 158535924418672
								},
								{
									"eventType": "comment",
									"text": "Transfer damage to enemy."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "subtract-from-instvar",
											"objectClass": "GPEnemy",
											"sid": 535072234572013,
											"parameters": {
												"instance-variable": "hp",
												"value": "totalDamage"
											}
										}
									],
									"sid": 113209115721984
								},
								{
									"eventType": "comment",
									"text": "Check death."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPEnemy",
											"sid": 491515909797292,
											"parameters": {
												"instance-variable": "hp",
												"comparison": 3,
												"value": "0"
											}
										}
									],
									"actions": [],
									"sid": 952104924912381,
									"children": [
										{
											"eventType": "comment",
											"text": "Display gold earned and update balance."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 219670084915874,
													"parameters": {
														"variable": "earnGold"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Add gold to player's balance."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 553244441717928,
													"parameters": {
														"variable": "gold",
														"value": "min(gold + GPEnemy.gold, 999999)"
													}
												},
												{
													"callFunction": "updateUI",
													"sid": 266110056457246
												},
												{
													"type": "comment",
													"text": "Display how much gold was earned by destroying the enemy."
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 225310325367076,
													"parameters": {
														"object-to-create": "GPTextEnemyGold",
														"layer": "\"SubUI\"",
														"x": "GPEnemy.X",
														"y": "GPEnemy.Y - 20",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-text",
													"objectClass": "GPTextEnemyGold",
													"sid": 415431838072437,
													"parameters": {
														"text": "\"[linethickness=2][outline=#000000]+\" & GPEnemy.gold"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "GPTextEnemyGold",
													"sid": 502672299966728,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"FadeText\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "1",
														"ease": "easeinexpo",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "GPTextEnemyGold",
													"sid": 334899991088006,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"MoveTextUp\"",
														"property": "offsetY",
														"end-value": "Self.Y - 20",
														"time": "1",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 783771280906195
										},
										{
											"eventType": "comment",
											"text": "Destroy the enemy."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "stop-all-timers",
													"objectClass": "GPEnemy",
													"sid": 753591811340668,
													"behaviorType": "Timer"
												},
												{
													"id": "stop-all-tweens",
													"objectClass": "GPEnemy",
													"sid": 286409958379524,
													"behaviorType": "Tween"
												},
												{
													"id": "tween-two-properties",
													"objectClass": "GPEnemy",
													"sid": 749262148886316,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"GPEnemyDeath\"",
														"property": "scale",
														"end-x": "0.5",
														"end-y": "0.5",
														"time": "0.2",
														"ease": "easeinexpo",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 456917921871199,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 345467074753710,
															"parameters": {
																"value": "int(GPEnemy.AnimationName) % 3 = 0"
															}
														}
													],
													"actions": [
														{
															"callFunction": "playSFX",
															"sid": 566851835907417,
															"parameters": [
																"\"grukkles/grukkle00\"",
																true,
																"0.25"
															]
														}
													],
													"sid": 314118049367502
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 405724753677197
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 203892800828668,
															"parameters": {
																"value": "(int(GPEnemy.AnimationName) + 1) % 3 = 0"
															}
														}
													],
													"actions": [
														{
															"callFunction": "playSFX",
															"sid": 119983133315304,
															"parameters": [
																"\"grukkles/grukkle01\"",
																true,
																"0.25"
															]
														}
													],
													"sid": 961787978992834
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 358086052672749
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 753499814168813,
															"parameters": {
																"value": "(int(GPEnemy.AnimationName) + 2) % 3 = 0"
															}
														}
													],
													"actions": [
														{
															"callFunction": "playSFX",
															"sid": 582140092682363,
															"parameters": [
																"\"grukkles/grukkle02\"",
																true,
																"0.25"
															]
														}
													],
													"sid": 322014941943970
												}
											]
										}
									]
								}
							]
						}
					],
					"sid": 706758615388864
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Enemy special effects",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Special effects timers."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 967051021558910,
									"parameters": {
										"object": "GPEnemy"
									}
								}
							],
							"actions": [],
							"sid": 167524344595376,
							"children": [
								{
									"eventType": "group",
									"disabled": false,
									"title": "Freeze Effects",
									"description": "",
									"isActiveOnStart": true,
									"children": [
										{
											"eventType": "comment",
											"text": "Freeze (maximum slow)."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "GPEnemy",
													"sid": 387041049026307,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"EffectFreeze\""
													}
												}
											],
											"actions": [
												{
													"id": "set-max-speed",
													"objectClass": "GPEnemy",
													"sid": 450595397147086,
													"behaviorType": "MoveTo",
													"parameters": {
														"max-speed": "0"
													}
												}
											],
											"sid": 827037102635912
										},
										{
											"eventType": "comment",
											"text": "Strong slow."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 610484837546080
												},
												{
													"id": "is-timer-running",
													"objectClass": "GPEnemy",
													"sid": 844535691425885,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"EffectSlowStrong\""
													}
												}
											],
											"actions": [
												{
													"id": "set-max-speed",
													"objectClass": "GPEnemy",
													"sid": 749980108297041,
													"behaviorType": "MoveTo",
													"parameters": {
														"max-speed": "Self.defaultSpeed * 0.5"
													}
												}
											],
											"sid": 248150719963515
										},
										{
											"eventType": "comment",
											"text": "Weak slow."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 509914330301199
												},
												{
													"id": "is-timer-running",
													"objectClass": "GPEnemy",
													"sid": 535227127935647,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"EffectSlow\""
													}
												}
											],
											"actions": [
												{
													"id": "set-max-speed",
													"objectClass": "GPEnemy",
													"sid": 193379292867595,
													"behaviorType": "MoveTo",
													"parameters": {
														"max-speed": "Self.defaultSpeed * 0.75"
													}
												}
											],
											"sid": 576297808215639
										},
										{
											"eventType": "comment",
											"text": "No slow."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 188651997963101
												}
											],
											"actions": [
												{
													"id": "set-max-speed",
													"objectClass": "GPEnemy",
													"sid": 447511412517461,
													"behaviorType": "MoveTo",
													"parameters": {
														"max-speed": "Self.defaultSpeed"
													}
												}
											],
											"sid": 509103336763095
										}
									],
									"sid": 158602350652391
								},
								{
									"eventType": "group",
									"disabled": false,
									"title": "DPS Effects",
									"description": "",
									"isActiveOnStart": true,
									"children": [
										{
											"eventType": "comment",
											"text": "Strong Dps."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "GPEnemy",
													"sid": 940693861448841,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"EffectDpsStrong\""
													}
												}
											],
											"actions": [],
											"sid": 832625747206601,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 726816226584302,
															"parameters": {
																"value": "GPEnemy.specialPower = \"NoPain\""
															}
														}
													],
													"actions": [
														{
															"id": "add-to-instvar",
															"objectClass": "GPEnemy",
															"sid": 650636817094485,
															"parameters": {
																"instance-variable": "hp",
																"value": "10 * dt"
															}
														}
													],
													"sid": 670150904995506
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 893675588463512
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 969151890850961,
															"parameters": {
																"value": "GPEnemy.specialPower <> \"Mitigate\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "enemyHit",
															"sid": 998001912367566,
															"parameters": [
																"10 * dt",
																"GPEnemy.UID",
																"\"\"",
																"\"None\"",
																true
															]
														}
													],
													"sid": 336639169384808
												}
											]
										},
										{
											"eventType": "comment",
											"text": "Weak Dps."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 159345424784299
												},
												{
													"id": "is-timer-running",
													"objectClass": "GPEnemy",
													"sid": 347341881153134,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"EffectDps\""
													}
												}
											],
											"actions": [],
											"sid": 233748024244264,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 170475119354193,
															"parameters": {
																"value": "GPEnemy.specialPower = \"NoPain\""
															}
														}
													],
													"actions": [
														{
															"id": "add-to-instvar",
															"objectClass": "GPEnemy",
															"sid": 885689393608994,
															"parameters": {
																"instance-variable": "hp",
																"value": "4 * dt"
															}
														}
													],
													"sid": 176743834187137
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 100501992873617
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 728543394663891,
															"parameters": {
																"value": "GPEnemy.specialPower <> \"Mitigate\""
															}
														}
													],
													"actions": [
														{
															"callFunction": "enemyHit",
															"sid": 322007077864754,
															"parameters": [
																"4 * dt",
																"GPEnemy.UID",
																"\"\"",
																"\"None\"",
																true
															]
														}
													],
													"sid": 467880823353662
												}
											]
										}
									],
									"sid": 758114347431490
								}
							]
						}
					],
					"sid": 592483501716385
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Enemies waypoints",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Enemy reached a waypoint."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-arrived",
									"objectClass": "GPEnemy",
									"sid": 681519051855969,
									"behaviorType": "MoveTo"
								}
							],
							"actions": [],
							"sid": 694604098210008,
							"children": [
								{
									"eventType": "comment",
									"text": "Set animation according to waypoint direction, if waypoint is not the base."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "GPEnemy",
											"sid": 838803022394688,
											"parameters": {
												"object": "LVBase"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "tween-one-property",
											"objectClass": "GPEnemy",
											"sid": 884468132584138,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"GPEnemyTurn\"",
												"property": "offsetWidth",
												"end-value": "Self.Width * 0.01",
												"time": "0.2",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 270947676389477
								},
								{
									"eventType": "comment",
									"text": "Play brief \"turning\" animation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 640115333376334,
											"parameters": {
												"object": "LVEnemyWaypoint",
												"expression": "(LVEnemyWaypoint.spawnerID = GPEnemy.spawnedFrom) & (LVEnemyWaypoint.wptID = GPEnemy.currWpt)"
											}
										}
									],
									"actions": [],
									"sid": 890308288140641,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "LVEnemyWaypoint",
													"sid": 725625181872641,
													"parameters": {
														"instance-variable": "mirrorEnemies"
													}
												}
											],
											"actions": [
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 555271643623974,
													"parameters": {
														"seconds": "0.2"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "GPEnemy",
													"sid": 771851388347417,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"GPEnemyTurn\"",
														"property": "offsetWidth",
														"end-value": "-Self.ImageWidth",
														"time": "0.2",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 133194311612855
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 114072410914720
												}
											],
											"actions": [
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 303527468354130,
													"parameters": {
														"seconds": "0.2"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "GPEnemy",
													"sid": 688088294647252,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"GPEnemyTurn\"",
														"property": "offsetWidth",
														"end-value": "Self.ImageWidth",
														"time": "0.2",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 925166714131182
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If the enemy reached the player's base, the player will lose a life."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "GPEnemy",
											"sid": 861714647130205,
											"parameters": {
												"object": "LVBase"
											}
										},
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 856352780886060,
											"parameters": {
												"object": "LVSpawner",
												"expression": "LVSpawner.spawnerID = GPEnemy.spawnedFrom"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Create portal effect."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 880739402552467,
											"parameters": {
												"object-to-create": "GPPortalEffect",
												"layer": "\"EntitiesAbove\"",
												"x": "LVBase.X",
												"y": "LVBase.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "GPPortalEffect",
											"sid": 304347762433085,
											"parameters": {
												"animation": "\"Base\"",
												"from": "beginning"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "GPPortalEffect",
											"sid": 294630656053886,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PortalGrowAndDestroy\"",
												"property": "scale",
												"end-x": "2",
												"end-y": "2",
												"time": "0.33",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPPortalEffect",
											"sid": 682034335342177,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PortalDisappear\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.33",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Create portal effect."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 698415258311410,
											"parameters": {
												"object-to-create": "GPPortalEffect",
												"layer": "\"EntitiesAbove\"",
												"x": "LVSpawner.X",
												"y": "LVSpawner.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "GPPortalEffect",
											"sid": 470106931748289,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PortalGrowAndDestroy\"",
												"property": "scale",
												"end-x": "2",
												"end-y": "2",
												"time": "0.33",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "GPPortalEffect",
											"sid": 114763216284748,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PortalDisappear\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.33",
												"ease": "easeinsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Warp enemy to the spawning portal."
										},
										{
											"id": "set-position",
											"objectClass": "GPEnemy",
											"sid": 665013257776670,
											"parameters": {
												"x": "LVSpawner.X",
												"y": "LVSpawner.Y"
											}
										},
										{
											"id": "set-width",
											"objectClass": "GPEnemy",
											"sid": 656249636612817,
											"parameters": {
												"width": "LVSpawner.startMirrored ? -Self.ImageWidth : Self.ImageWidth"
											}
										},
										{
											"type": "comment",
											"text": "Reset current waypoint."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "GPEnemy",
											"sid": 758250499293286,
											"parameters": {
												"instance-variable": "currWpt",
												"value": "0"
											}
										},
										{
											"type": "comment",
											"text": "Subtract one life from the player."
										},
										{
											"callFunction": "playerHit",
											"sid": 992378453897924
										}
									],
									"sid": 213041913469235,
									"children": [
										{
											"eventType": "comment",
											"text": "When enemy warps back to its spawn portal, reset waypoints."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each-ordered",
													"objectClass": "System",
													"sid": 167643933873371,
													"parameters": {
														"object": "LVEnemyWaypoint",
														"expression": "LVEnemyWaypoint.wptID",
														"order": "ascending"
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 723379236189313,
													"parameters": {
														"value": "LVEnemyWaypoint.spawnerID = GPEnemy.spawnedFrom"
													}
												}
											],
											"actions": [
												{
													"id": "move-to-object",
													"objectClass": "GPEnemy",
													"sid": 185966013817768,
													"behaviorType": "MoveTo",
													"parameters": {
														"object": "LVEnemyWaypoint",
														"image-point": "0",
														"mode": "add-waypoint"
													}
												}
											],
											"sid": 511667670756530,
											"children": [
												{
													"eventType": "comment",
													"text": "Finally, destroy any bullet targeting the enemy."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-by-evaluate",
															"objectClass": "System",
															"sid": 323029859761994,
															"parameters": {
																"object": "GPBullet",
																"expression": "GPBullet.targetUID = GPEnemy.UID"
															}
														}
													],
													"actions": [
														{
															"callFunction": "destroyBullet",
															"sid": 977627287936384
														}
													],
													"sid": 118892664542258
												}
											]
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "add-to-instvar",
											"objectClass": "GPEnemy",
											"sid": 337263248180977,
											"parameters": {
												"instance-variable": "currWpt",
												"value": "1"
											}
										}
									],
									"sid": 272127048142557
								}
							]
						}
					],
					"sid": 976083922186245
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Enemy Misc",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "When dash timer triggers, perform a dash if there is space available."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPEnemy",
									"sid": 703599314096368,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"Dash\""
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 636926466743055,
									"parameters": {
										"object": "GPEnemy"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 887127030909767,
									"parameters": {
										"value": "distance(GPEnemy.X, GPEnemy.Y, GPEnemy.MoveTo.TargetX, GPEnemy.MoveTo.TargetY) > 160"
									}
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "GPEnemy",
									"sid": 207819657720998,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPEnemyDash\"",
										"property": "position",
										"end-x": "Self.X + cos(angle(Self.X, Self.Y, Self.MoveTo.TargetX, Self.MoveTo.TargetY)) * 60",
										"end-y": "Self.Y + sin(angle(Self.X, Self.Y, Self.MoveTo.TargetX, Self.MoveTo.TargetY)) * 60",
										"time": "0.1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"callFunction": "playSFX",
									"sid": 178351771980676,
									"parameters": [
										"\"grukkles/grukkledash\"",
										true,
										"0.1"
									]
								}
							],
							"sid": 229192256454377
						},
						{
							"eventType": "comment",
							"text": "Enemies shine while dashing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "GPEnemy",
									"sid": 768409521458701,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPEnemyDash\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPEnemy",
									"sid": 944766770234843,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "100 + sin(Self.Tween.Progress(\"GPEnemyDash\") * 180) * 30"
									}
								}
							],
							"sid": 269285012596078
						},
						{
							"eventType": "comment",
							"text": "Enemies shine while dying."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "GPEnemy",
									"sid": 883752826550684,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPEnemyDeath\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPEnemy",
									"sid": 138166773889446,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "100 + Self.Tween.Progress(\"GPEnemyDeath\") * 50"
									}
								}
							],
							"sid": 924780957716792
						},
						{
							"eventType": "comment",
							"text": "When an enemy dies, spawn particles."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-destroyed",
									"objectClass": "GPEnemy",
									"sid": 869185818329196
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 524635536602550,
									"parameters": {
										"object-to-create": "GPEnemyDeath",
										"layer": "\"EntitiesAbove\"",
										"x": "GPEnemy.X",
										"y": "GPEnemy.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 771100856815933
						}
					],
					"sid": 705699780955153
				}
			],
			"sid": 657357572898497
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Towers",
			"description": "Events to process tower behaviors.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Towers Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Increase damage of a random tower."
						},
						{
							"functionName": "buffRandomTower",
							"functionDescription": "Increase damage of a random tower",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "bonus",
									"type": "number",
									"initialValue": "0",
									"comment": "Bonus damage multiplier",
									"sid": 793059667473715
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "pick-random-instance",
									"objectClass": "System",
									"sid": 559865473651633,
									"parameters": {
										"object": "GPTowerActuators"
									}
								}
							],
							"actions": [],
							"sid": 101574539834311,
							"children": [
								{
									"eventType": "comment",
									"text": "Turret tower."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 315482148299724,
											"parameters": {
												"value": "GPTowerActuators.ObjectTypeName = \"GPTowerTurret\""
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "GPTowerTurret",
											"sid": 945811410055682,
											"parameters": {
												"unique-id": "GPTowerActuators.UID"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "GPTowerTurret",
											"sid": 516245610814080,
											"parameters": {
												"parent": "GPTower",
												"which": "own"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "GPTower",
											"sid": 363827295352763,
											"parameters": {
												"child": "GPTowerParticles",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPTowerTurret",
											"sid": 835830794771720,
											"parameters": {
												"instance-variable": "damageBuff",
												"value": "bonus"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "GPTowerTurret",
											"sid": 296515671909603,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "5.0",
												"type": "once",
												"tag": "\"DamageBuff\""
											}
										},
										{
											"id": "set-rate",
											"objectClass": "GPTowerParticles",
											"sid": 338934986820198,
											"parameters": {
												"rate": "20"
											}
										}
									],
									"sid": 904031104986468
								},
								{
									"eventType": "comment",
									"text": "Pulse tower."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 647826536764321
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 250265889921835,
											"parameters": {
												"value": "GPTowerActuators.ObjectTypeName = \"GPTowerPulse\""
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "GPTowerPulse",
											"sid": 335587290010694,
											"parameters": {
												"unique-id": "GPTowerActuators.UID"
											}
										},
										{
											"id": "pick-parent",
											"objectClass": "GPTowerPulse",
											"sid": 142030320037762,
											"parameters": {
												"parent": "GPTower",
												"which": "own"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "GPTower",
											"sid": 269794990795443,
											"parameters": {
												"child": "GPTowerParticles",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPTowerPulse",
											"sid": 609084734081959,
											"parameters": {
												"instance-variable": "damageBuff",
												"value": "bonus"
											}
										},
										{
											"id": "start-timer",
											"objectClass": "GPTowerPulse",
											"sid": 801272485525482,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "5.0",
												"type": "once",
												"tag": "\"DamageBuff\""
											}
										},
										{
											"id": "set-rate",
											"objectClass": "GPTowerParticles",
											"sid": 677608535074955,
											"parameters": {
												"rate": "20"
											}
										}
									],
									"sid": 621234079801340
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Apply AoE damage to enemies."
						},
						{
							"functionName": "aoeDamage",
							"functionDescription": "Apply AoE damage to enemies",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "X position",
									"sid": 239553992822526
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "Y position",
									"sid": 987738848685296
								},
								{
									"name": "radius",
									"type": "number",
									"initialValue": "0",
									"comment": "Radius",
									"sid": 479685670454074
								},
								{
									"name": "targetUID",
									"type": "number",
									"initialValue": "0",
									"comment": "Targeted enemy UID",
									"sid": 497217843951266
								},
								{
									"name": "damage",
									"type": "number",
									"initialValue": "0",
									"comment": "Damage to be dealt by the AOE effect",
									"sid": 399555401910952
								},
								{
									"name": "special",
									"type": "string",
									"initialValue": "",
									"comment": "Special effect",
									"sid": 655410187739112
								},
								{
									"name": "tech",
									"type": "string",
									"initialValue": "None",
									"comment": "Type of tech used",
									"sid": 254780166381526
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 956655444938046,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 924373855737943,
											"parameters": {
												"object": "GPEnemy"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 524205927716456,
											"parameters": {
												"value": "distance(GPEnemy.X, GPEnemy.Y, x, y) <= radius"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 995714733904444,
											"parameters": {
												"value": "GPEnemy.specialPower <> \"NoAoE\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 585515884501834,
											"parameters": {
												"value": "GPEnemy.UID <> targetUID"
											}
										}
									],
									"actions": [
										{
											"callFunction": "enemyHit",
											"sid": 499744010697194,
											"parameters": [
												"damage",
												"GPEnemy.UID",
												"special",
												"tech",
												true
											]
										}
									],
									"sid": 518048557697948
								}
							]
						}
					],
					"sid": 509229573707184
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Towers Animations",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Summon tower HSL effect animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "GPTower",
									"sid": 241684717543673,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPTowerSummon\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPTower",
									"sid": 669038788760953,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "200 - Self.Tween.Progress(\"GPTowerSummon\") * 100"
									}
								}
							],
							"sid": 776179947910805
						},
						{
							"eventType": "comment",
							"text": "Destroy tower HSL effect animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "GPTower",
									"sid": 799648481750626,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPTowerDestroy\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "GPTower",
									"sid": 171709595000160,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "100 + Self.Tween.Progress(\"GPTowerDestroy\") * 100"
									}
								}
							],
							"sid": 510841874532690
						}
					],
					"sid": 908712577633893
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Pulse Tower",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "If a tower has no children, it is a pulse tower."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 484802113653639,
									"parameters": {
										"object": "GPTower"
									}
								},
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 226712675316310,
									"parameters": {
										"object": "GPEnemy"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "GPTower",
									"sid": 626171433912936,
									"parameters": {
										"child": "GPTowerPulse",
										"which": "own"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 967359623386410,
									"parameters": {
										"value": "distance(GPTower.X, GPTower.Y, GPEnemy.X, GPEnemy.Y) < GPTowerPulse.range"
									}
								},
								{
									"id": "is-timer-running",
									"objectClass": "GPTowerPulse",
									"sid": 216626947820201,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"PulseCooldown\""
									},
									"isInverted": true
								},
								{
									"id": "is-any-playing",
									"objectClass": "GPTower",
									"sid": 155490322128166,
									"behaviorType": "Tween",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play crystal tower sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 978810664452534,
									"parameters": [
										"\"towers/tower01\"",
										true,
										"0.25"
									]
								},
								{
									"type": "comment",
									"text": "Animate tower (little bounce)."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPTower",
									"sid": 355899065489399,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TowerFireAnim\"",
										"property": "size",
										"end-x": "6/5 * Self.ImageWidth",
										"end-y": "5/6 * Self.ImageHeight",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Start pulse cooldown."
								},
								{
									"id": "start-timer",
									"objectClass": "GPTowerPulse",
									"sid": 571406440580659,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "Self.cooldown",
										"type": "once",
										"tag": "\"PulseCooldown\""
									}
								},
								{
									"type": "comment",
									"text": "Create pulse sprite and set its properties."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 809383441104780,
									"parameters": {
										"object-to-create": "GPPulseMuzzle",
										"layer": "\"EntitiesBelow\"",
										"x": "GPTower.X",
										"y": "GPTower.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-size",
									"objectClass": "GPPulseMuzzle",
									"sid": 516303293031050,
									"parameters": {
										"width": "0.01",
										"height": "0.01"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GPPulseMuzzle",
									"sid": 700179265552214,
									"parameters": {
										"animation": "GPTowerPulse.tech",
										"from": "beginning"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPPulseMuzzle",
									"sid": 785701223195523,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPPulseMuzzleExpand\"",
										"property": "size",
										"end-x": "GPTowerPulse.range * 2",
										"end-y": "GPTowerPulse.range * 2",
										"time": "0.2",
										"ease": "easeoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPPulseMuzzle",
									"sid": 468730762766570,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPPulseMuzzleDisappear\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.2",
										"ease": "noease",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 845995459320182,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if bonus damage should be applied to current attack."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-timer-running",
											"objectClass": "GPTowerPulse",
											"sid": 143122170325276,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"DamageBuff\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "aoeDamage",
											"sid": 982667336257357,
											"parameters": [
												"GPTower.X",
												"GPTower.Y",
												"GPTowerPulse.range",
												"-1",
												"GPTowerPulse.damage * (1 + GPTowerPulse.damageBuff)",
												"GPTowerPulse.special",
												"GPTowerPulse.tech"
											]
										}
									],
									"sid": 885745296161133
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 688439945033210
										}
									],
									"actions": [
										{
											"callFunction": "aoeDamage",
											"sid": 325740496493578,
											"parameters": [
												"GPTower.X",
												"GPTower.Y",
												"GPTowerPulse.range",
												"-1",
												"GPTowerPulse.damage",
												"GPTowerPulse.special",
												"GPTowerPulse.tech"
											]
										}
									],
									"sid": 566178363794831
								},
								{
									"eventType": "comment",
									"text": "Buff random tower effect."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPTowerPulse",
											"sid": 999257118663296,
											"parameters": {
												"instance-variable": "special",
												"comparison": 0,
												"value": "\"BuffDmg\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 728302034110546,
											"parameters": {
												"value": "random(100) < 20"
											}
										}
									],
									"actions": [
										{
											"callFunction": "buffRandomTower",
											"sid": 181862821899047,
											"parameters": [
												"0.1"
											]
										}
									],
									"sid": 718690673422659
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Turn damage buff off."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPTowerPulse",
									"sid": 917713384370215,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"DamageBuff\""
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "GPTowerPulse",
									"sid": 200499147621944,
									"parameters": {
										"parent": "GPTower",
										"which": "own"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "GPTower",
									"sid": 804781217962978,
									"parameters": {
										"child": "GPTowerParticles",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GPTowerPulse",
									"sid": 717769612908996,
									"parameters": {
										"instance-variable": "damageBuff",
										"value": "0"
									}
								},
								{
									"id": "set-rate",
									"objectClass": "GPTowerParticles",
									"sid": 737519435371105,
									"parameters": {
										"rate": "0"
									}
								}
							],
							"sid": 691445520424505
						}
					],
					"sid": 155071831747026
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Turret Tower",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Set GPEnemy as target."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "GPTowerTurret",
									"sid": 265938975366786
								}
							],
							"actions": [
								{
									"id": "add-object-to-target",
									"objectClass": "GPTowerTurret",
									"sid": 363091041706773,
									"behaviorType": "Turret",
									"parameters": {
										"target": "GPEnemy"
									}
								}
							],
							"sid": 172638519626965
						},
						{
							"eventType": "comment",
							"text": "When turret shoots, spawn a bullet and set its properties."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-shoot",
									"objectClass": "GPTowerTurret",
									"sid": 407633253871802,
									"behaviorType": "Turret"
								},
								{
									"id": "pick-parent",
									"objectClass": "GPTowerTurret",
									"sid": 924404787406269,
									"parameters": {
										"parent": "GPTower",
										"which": "own"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "GPEnemy",
									"sid": 948179072992618,
									"parameters": {
										"unique-id": "GPTowerTurret.Turret.TargetUID"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 598424909928805,
									"parameters": {
										"value": "distance(GPTower.X, GPTower.Y, GPEnemy.X, GPEnemy.Y) <= GPTowerTurret.realRange"
									}
								},
								{
									"id": "is-any-playing",
									"objectClass": "GPTower",
									"sid": 887643616331776,
									"behaviorType": "Tween",
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Animate tower (little bounce)."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPTower",
									"sid": 384173206591505,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"TowerFireAnim\"",
										"property": "size",
										"end-x": "6/5 * Self.ImageWidth",
										"end-y": "5/6 * Self.ImageHeight",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Spawn bullet."
								},
								{
									"id": "spawn-another-object",
									"objectClass": "GPTowerTurret",
									"sid": 800955649497648,
									"parameters": {
										"object": "GPBullet",
										"layer": "\"EntitiesAbove\"",
										"image-point": "\"FireSpot\"",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "add-child",
									"objectClass": "GPTowerTurret",
									"sid": 741505184388117,
									"parameters": {
										"child": "GPBullet",
										"transform-x": false,
										"transform-y": false,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": false
									}
								},
								{
									"type": "comment",
									"text": "Set all bullet properties."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPBullet",
									"sid": 337259593749039,
									"parameters": {
										"instance-variable": "targetUID",
										"value": "GPTowerTurret.Turret.TargetUID"
									}
								},
								{
									"id": "set-angle-of-motion",
									"objectClass": "GPBullet",
									"sid": 466402365963263,
									"behaviorType": "Bullet",
									"parameters": {
										"angle": "GPTowerTurret.Angle"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPBullet",
									"sid": 724687881587814,
									"parameters": {
										"instance-variable": "tech",
										"value": "GPTowerTurret.tech"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPBullet",
									"sid": 111872981199047,
									"parameters": {
										"instance-variable": "radiusAoE",
										"value": "GPTowerTurret.radiusAoE"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "GPBullet",
									"sid": 270314986488960,
									"parameters": {
										"instance-variable": "special",
										"value": "GPTowerTurret.special"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GPBullet",
									"sid": 244481203263494,
									"parameters": {
										"animation": "GPTowerTurret.tech",
										"from": "beginning"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "GPBullet",
									"sid": 210598846634009,
									"behaviorType": "Rotate",
									"parameters": {
										"speed": "random(480) - 240"
									}
								},
								{
									"type": "comment",
									"text": "Spawn muzzle flash"
								},
								{
									"id": "spawn-another-object",
									"objectClass": "GPTowerTurret",
									"sid": 868567631251357,
									"parameters": {
										"object": "GPTurretMuzzle",
										"layer": "\"EntitiesAbove\"",
										"image-point": "\"FireSpot\"",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPTurretMuzzle",
									"sid": 765439184070608,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MuzzleGrowAndDestroy\"",
										"property": "scale",
										"end-x": "2",
										"end-y": "2",
										"time": "0.33",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPTurretMuzzle",
									"sid": 175432938604199,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MuzzleDisappear\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.33",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GPTurretMuzzle",
									"sid": 228083527720262,
									"parameters": {
										"animation": "GPTowerTurret.tech",
										"from": "beginning"
									}
								}
							],
							"sid": 256050625838793,
							"children": [
								{
									"eventType": "comment",
									"text": "Play sound according to tech."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 413744658089947,
											"parameters": {
												"value": "GPTowerTurret.tech = \"None\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 884763587275765,
											"parameters": [
												"\"towers/tower03\"",
												true,
												"0.25"
											]
										}
									],
									"sid": 985879269245645
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 715115098141413
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 856801066014389,
											"parameters": {
												"value": "GPTowerTurret.tech = \"Ember\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 791752800064844,
											"parameters": [
												"\"towers/tower00\"",
												true,
												"0.25"
											]
										}
									],
									"sid": 977474081827517
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 311799446396273
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 732308989486021,
											"parameters": {
												"value": "GPTowerTurret.tech = \"Crystal\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 373374633042275,
											"parameters": [
												"\"towers/tower01\"",
												true,
												"0.25"
											]
										}
									],
									"sid": 492163061305477
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 593731326463688
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 105535339264492,
											"parameters": {
												"value": "GPTowerTurret.tech = \"Flux\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "playSFX",
											"sid": 830619639738579,
											"parameters": [
												"\"towers/tower02\"",
												true,
												"0.25"
											]
										}
									],
									"sid": 683629151033575
								},
								{
									"eventType": "comment",
									"text": "Check if bonus damage should be applied to current attack."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-timer-running",
											"objectClass": "GPTowerTurret",
											"sid": 917401828806790,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"DamageBuff\""
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPBullet",
											"sid": 205305897890245,
											"parameters": {
												"instance-variable": "damage",
												"value": "GPTowerTurret.damage * (1 + GPTowerTurret.damageBuff)"
											}
										}
									],
									"sid": 158723387695836
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 952940296495392
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPBullet",
											"sid": 553981217481989,
											"parameters": {
												"instance-variable": "damage",
												"value": "GPTowerTurret.damage"
											}
										}
									],
									"sid": 180393413398211
								},
								{
									"eventType": "comment",
									"text": "Damage based on distance effect."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPTowerTurret",
											"sid": 339058884859310,
											"parameters": {
												"instance-variable": "special",
												"comparison": 0,
												"value": "\"DistDmg\""
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPBullet",
											"sid": 220471532804873,
											"parameters": {
												"instance-variable": "special",
												"value": "\"DistDmg\" & \"|\" & GPBullet.X & \"|\" & GPBullet.Y"
											}
										}
									],
									"sid": 324518962946289
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GPTowerTurret",
											"sid": 945508288640930,
											"parameters": {
												"instance-variable": "linearBullet"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "GPBullet",
											"sid": 866592043262713,
											"parameters": {
												"instance-variable": "linearStartX",
												"value": "GPTowerTurret.ImagePointX(\"FireSpot\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "GPBullet",
											"sid": 759896585190253,
											"parameters": {
												"instance-variable": "linearStartY",
												"value": "GPTowerTurret.ImagePointY(\"FireSpot\")"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "GPBullet",
											"sid": 444096102843269,
											"parameters": {
												"instance-variable": "linear",
												"value": "true"
											}
										}
									],
									"sid": 246450980928730
								},
								{
									"eventType": "comment",
									"text": "Bolt effect."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "GPTowerTurret",
											"sid": 745812185565233,
											"parameters": {
												"instance-variable": "special",
												"comparison": 0,
												"value": "\"Bolt\""
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 570719279374165,
											"parameters": {
												"value": "random(100) < 20"
											}
										},
										{
											"id": "pick-random-instance",
											"objectClass": "System",
											"sid": 109499753909666,
											"parameters": {
												"object": "GPEnemy"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 982640416895256,
											"parameters": {
												"object-to-create": "GPBolt",
												"layer": "\"Entities\"",
												"x": "GPEnemy.X",
												"y": "GPEnemy.Y + 2",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"callFunction": "enemyHit",
											"sid": 171012213568785,
											"parameters": [
												"40",
												"GPEnemy.UID",
												"\"\"",
												"\"None\"",
												true
											]
										},
										{
											"id": "tween-value",
											"objectClass": "LVBackground",
											"sid": 948663012851024,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Bolt\"",
												"start-value": "0",
												"end-value": "10",
												"time": "0.15",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 401528063355248
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Turn damage buff off."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPTowerTurret",
									"sid": 334512161907000,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"DamageBuff\""
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "GPTowerTurret",
									"sid": 860769206530607,
									"parameters": {
										"parent": "GPTower",
										"which": "own"
									}
								},
								{
									"id": "pick-children",
									"objectClass": "GPTower",
									"sid": 243842526770822,
									"parameters": {
										"child": "GPTowerParticles",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "GPTowerTurret",
									"sid": 337973889879445,
									"parameters": {
										"instance-variable": "damageBuff",
										"value": "0"
									}
								},
								{
									"id": "set-rate",
									"objectClass": "GPTowerParticles",
									"sid": 691021982347520,
									"parameters": {
										"rate": "0"
									}
								}
							],
							"sid": 182742649302951
						}
					],
					"sid": 974607673659994
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Towers Acid",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Acid is destroyed after some time."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GPAcid",
									"sid": 951236846988302,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"AcidDestroy\""
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "GPAcid",
									"sid": 608668592072204,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"GPAcidDestroy\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.2",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 948895676491178
						},
						{
							"eventType": "comment",
							"text": "Enemies are constantly damaged when over an acid pool."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 421230460550926,
									"parameters": {
										"object": "GPEnemy"
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "GPEnemy",
									"sid": 440005758805863,
									"parameters": {
										"object": "GPAcid"
									}
								}
							],
							"actions": [
								{
									"callFunction": "enemyHit",
									"sid": 459176541496521,
									"parameters": [
										"4 * dt",
										"GPEnemy.UID",
										"\"\"",
										"\"None\"",
										true
									]
								}
							],
							"sid": 816568804680813
						}
					],
					"sid": 687136686107643
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Towers Visual Effects",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "group",
							"disabled": false,
							"title": "Towers bolt effect",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "comment",
									"text": "Destroy bolt on animation finished."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-any-animation-finished",
											"objectClass": "GPBolt",
											"sid": 434215605488489
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "GPBolt",
											"sid": 758369668121240
										}
									],
									"sid": 569329892296069
								},
								{
									"eventType": "comment",
									"text": "Background flashes slightly when a bolt is invoked."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-playing",
											"objectClass": "LVBackground",
											"sid": 285154759026382,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"Bolt\""
											}
										}
									],
									"actions": [
										{
											"id": "set-effect-parameter",
											"objectClass": "LVBackground",
											"sid": 428625810751325,
											"parameters": {
												"effect": "\"AdjustHSL\"",
												"parameter-index": "2",
												"value": "100 +  Self.Tween.Value(\"Bolt\")"
											}
										}
									],
									"sid": 794363222755891
								}
							],
							"sid": 326731881271421
						}
					],
					"sid": 869748922746076
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Towers Bullet",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Play bullet death animation and sound, then destroy the bullet."
						},
						{
							"functionName": "destroyBullet",
							"functionDescription": "Play bullet death animation and sound, then destroy the bullet",
							"functionCategory": "Gameplay",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"callFunction": "playSFX",
									"sid": 520110922019622,
									"parameters": [
										"\"towers/towerhit\"",
										true,
										"0.25"
									]
								},
								{
									"type": "comment",
									"text": "Create and setup bullet death object."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 161339649697257,
									"parameters": {
										"object-to-create": "GPBulletDeath",
										"layer": "\"EntitiesAbove\"",
										"x": "GPBullet.X",
										"y": "GPBullet.Y + 20",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-animation",
									"objectClass": "GPBulletDeath",
									"sid": 461298145234764,
									"parameters": {
										"animation": "GPBullet.AnimationName",
										"from": "beginning"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "GPBulletDeath",
									"sid": 518151303104819,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"BulletDeathGrowAndDestroy\"",
										"property": "scale",
										"end-x": "2",
										"end-y": "2",
										"time": "0.1",
										"ease": "noease",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Destroy bullet."
								},
								{
									"id": "destroy",
									"objectClass": "GPBullet",
									"sid": 987010922655261
								}
							],
							"sid": 129771697834670
						},
						{
							"eventType": "comment",
							"text": "When bullet collides with an enemy, damage the enemy and apply any necessary special effects."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "GPBullet",
									"sid": 480493222773987,
									"parameters": {
										"object": "GPEnemy"
									}
								}
							],
							"actions": [],
							"sid": 426259519937623,
							"children": [
								{
									"eventType": "comment",
									"text": "Default type bullet (follows enemy and uses default AoE logic)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GPBullet",
											"sid": 114483455388810,
											"parameters": {
												"instance-variable": "linear"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 578844174187778,
									"children": [
										{
											"eventType": "comment",
											"text": "If the bullet has an AoE effect, damage all enemies inside the radius, except for the one already targeted."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "GPBullet",
													"sid": 487904011910032,
													"parameters": {
														"instance-variable": "radiusAoE",
														"comparison": 4,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"callFunction": "aoeDamage",
													"sid": 896152743296043,
													"parameters": [
														"GPBullet.X",
														"GPBullet.Y",
														"GPBullet.radiusAoE",
														"GPEnemy.UID",
														"GPBullet.damage",
														"GPBullet.special",
														"GPBullet.tech"
													]
												}
											],
											"sid": 588661983160282
										},
										{
											"eventType": "comment",
											"text": "Destroy projectile."
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"callFunction": "destroyBullet",
													"sid": 488106775948732
												}
											],
											"sid": 694793854981238
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Damage targeted enemy."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"callFunction": "enemyHit",
											"sid": 754641458628093,
											"parameters": [
												"GPBullet.damage",
												"GPEnemy.UID",
												"GPBullet.special",
												"GPBullet.tech",
												true
											]
										}
									],
									"sid": 195047476869238
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Process bullet constant events."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 858081977453247,
									"parameters": {
										"object": "GPBullet"
									}
								}
							],
							"actions": [],
							"sid": 206853784754953,
							"children": [
								{
									"eventType": "comment",
									"text": "Default type bullets follow enemies."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "GPBullet",
											"sid": 205714516847439,
											"parameters": {
												"instance-variable": "linear"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 280237409931842,
									"children": [
										{
											"eventType": "comment",
											"text": "Follow target enemy, if it exists."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "GPEnemy",
													"sid": 385570038513214,
													"parameters": {
														"unique-id": "GPBullet.targetUID"
													}
												}
											],
											"actions": [
												{
													"id": "set-angle-of-motion",
													"objectClass": "GPBullet",
													"sid": 744148429789346,
													"behaviorType": "Bullet",
													"parameters": {
														"angle": "angle(Self.X, Self.Y, GPEnemy.X, GPEnemy.Y)"
													}
												}
											],
											"sid": 975626570555182
										},
										{
											"eventType": "comment",
											"text": "Enemy no longer exists."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 241325683188785
												}
											],
											"actions": [],
											"sid": 117248090347035,
											"children": [
												{
													"eventType": "comment",
													"text": "Try to target a close enemy."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-nearestfurthest",
															"objectClass": "GPEnemy",
															"sid": 691382155261504,
															"parameters": {
																"which": "nearest",
																"x": "GPBullet.X",
																"y": "GPBullet.Y"
															}
														},
														{
															"id": "pick-parent",
															"objectClass": "GPBullet",
															"sid": 896786735822778,
															"parameters": {
																"parent": "GPTowerTurret",
																"which": "own"
															}
														},
														{
															"id": "pick-parent",
															"objectClass": "GPTowerTurret",
															"sid": 651283947845612,
															"parameters": {
																"parent": "GPTower",
																"which": "own"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 404324873579466,
															"parameters": {
																"value": "distance(GPEnemy.X, GPEnemy.Y, GPTower.X, GPTower.Y) <= GPTowerTurret.realRange"
															}
														}
													],
													"actions": [
														{
															"id": "set-instvar-value",
															"objectClass": "GPBullet",
															"sid": 751563372194239,
															"parameters": {
																"instance-variable": "targetUID",
																"value": "GPEnemy.UID"
															}
														}
													],
													"sid": 915295258917537
												},
												{
													"eventType": "comment",
													"text": "If no such enemy exists, destroy the bullet."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 255556028485141
														}
													],
													"actions": [
														{
															"callFunction": "destroyBullet",
															"sid": 544415727563352
														}
													],
													"sid": 332966232412837
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Linear type bullets only die after a certain range has been traveled."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 491735895074859
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 984209338505054,
											"parameters": {
												"value": "distance(GPBullet.linearStartX, GPBullet.linearStartY, GPBullet.X, GPBullet.Y) > GPBullet.radiusAoE"
											}
										}
									],
									"actions": [
										{
											"callFunction": "destroyBullet",
											"sid": 539349639799622
										}
									],
									"sid": 618482026317523
								}
							]
						}
					],
					"sid": 135558533380075
				}
			],
			"sid": 483037101207920
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "UI Info",
			"description": "Logic to update the information about UI elements.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Update the various information displayed in the UI."
				},
				{
					"functionName": "updateUI",
					"functionDescription": "Update the various information displayed in the UI",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "GPTextLives",
							"sid": 986500541333918,
							"parameters": {
								"text": "lives"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextEmber",
							"sid": 799566916530269,
							"parameters": {
								"text": "ember"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextCrystal",
							"sid": 497696386989584,
							"parameters": {
								"text": "crystal"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextFlux",
							"sid": 508890942112560,
							"parameters": {
								"text": "flux"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextFunds",
							"sid": 371185106998069,
							"parameters": {
								"text": "zeropad(gold, 6)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "GPTextWaves",
							"sid": 908888818017648,
							"parameters": {
								"text": "min(wave, ArrLevel.At(1, currLevel-1) - ArrLevel.At(0, currLevel-1) + 1) & \"/\" & ArrLevel.At(1, currLevel-1) - ArrLevel.At(0, currLevel-1) + 1"
							}
						}
					],
					"sid": 622200279323073,
					"children": [
						{
							"eventType": "comment",
							"text": "Take interest towers into consideration."
						},
						{
							"eventType": "variable",
							"name": "towerInterest",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 721989616685930
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 559218769569517,
									"parameters": {
										"object": "GPTowerTurret"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "GPTowerTurret",
									"sid": 512161229038806,
									"parameters": {
										"instance-variable": "towerID",
										"comparison": 0,
										"value": "19"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 971298203041099,
									"parameters": {
										"variable": "towerInterest",
										"value": "0.002"
									}
								}
							],
							"sid": 416032497408526
						},
						{
							"eventType": "comment",
							"text": "Apply final sum of interest and update UI."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 874727915772005,
									"parameters": {
										"variable": "interest",
										"value": "STARTING_INTEREST + towerInterest"
									}
								},
								{
									"id": "set-text",
									"objectClass": "GPTextInterest",
									"sid": 920036569010213,
									"parameters": {
										"text": "\"+\" & (left(right(str(roundToDp(interest * 100, 1)), 2), 1) = \".\" ? roundToDp(interest * 100, 1) : roundToDp(interest * 100, 1) & \".0\") & \"%\""
									}
								}
							],
							"sid": 165387703129779
						}
					]
				}
			],
			"sid": 845394360499112
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Corner Buttons",
			"description": "Corner buttons events.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Process Corner Button press."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 357274366919219,
							"parameters": {
								"object": "GPCornerButtons"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 844825483602341,
							"parameters": {
								"value": "inputFocus = \"game\""
							}
						}
					],
					"actions": [],
					"sid": 311153885298555,
					"children": [
						{
							"eventType": "comment",
							"text": "Exit button."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 837029697385591,
									"parameters": {
										"value": "GPCornerButtons.ObjectTypeName = \"GPExit\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play boop sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 618111011801213,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Show exit frame."
								},
								{
									"id": "set-opacity",
									"objectClass": "GPUIFrameExit",
									"sid": 869255950934520,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameExit",
									"sid": 530914953132663,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowExitFrame\"",
										"property": "offsetY",
										"end-value": "LayoutHeight/2",
										"time": "0.2",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameExit",
									"sid": 868071328292910,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowExitFrame\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.1",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Set input focus to exit."
								},
								{
									"callFunction": "setInputFocus",
									"sid": 943352073789526,
									"parameters": [
										"\"exit\""
									]
								}
							],
							"sid": 507984793643170
						},
						{
							"eventType": "comment",
							"text": "BGM button."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 958126560920640
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 307088750263245,
									"parameters": {
										"value": "GPCornerButtons.ObjectTypeName = \"GPBGM\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play boop sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 127655305330255,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Toggle BGM."
								},
								{
									"callFunction": "toggleBGM",
									"sid": 153220893251759
								},
								{
									"type": "comment",
									"text": "Switch button state."
								},
								{
									"id": "set-animation-frame",
									"objectClass": "GPBGM",
									"sid": 164512346538232,
									"parameters": {
										"frame-number": "abs(Self.AnimationFrame - 1)"
									}
								}
							],
							"sid": 166688153829969
						},
						{
							"eventType": "comment",
							"text": "SFX button."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 229753261853560
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 416535834299895,
									"parameters": {
										"value": "GPCornerButtons.ObjectTypeName = \"GPSFX\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Toggle SFX."
								},
								{
									"callFunction": "toggleSFX",
									"sid": 582644707287183
								},
								{
									"type": "comment",
									"text": "Switch button state."
								},
								{
									"id": "set-animation-frame",
									"objectClass": "GPSFX",
									"sid": 633828451963501,
									"parameters": {
										"frame-number": "abs(Self.AnimationFrame - 1)"
									}
								},
								{
									"type": "comment",
									"text": "Play boop sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 309836433481765,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								}
							],
							"sid": 721038030743079
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When the exit yes button is activated, go to the main menu."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 366251803999697,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 994913779683774,
							"parameters": {
								"value": "inputFocus = \"exit\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 476512221658151,
							"parameters": {
								"object": "GPButtonExitYes"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPButtonExitYes",
							"sid": 980759962284408
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPButtonExitYes",
							"sid": 166102697686599,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonExitYes",
							"sid": 790065037371846,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 833377434377955
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 935329864551156,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 161979192842487,
							"parameters": {
								"value": "inputFocus = \"exit\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPButtonExitYes",
							"sid": 571666825473643,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonExitYes",
							"sid": 832681354947834,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 487535517788777,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 460665681045070,
									"parameters": {
										"object": "GPButtonExitYes"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play select sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 970732550056243,
									"parameters": [
										"\"menu/menuselect\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Change input focus to none."
								},
								{
									"callFunction": "setInputFocus",
									"sid": 466079007801022,
									"parameters": [
										"\"none\""
									]
								},
								{
									"type": "comment",
									"text": "Fade out BGM."
								},
								{
									"callFunction": "fadeOutBGM",
									"sid": 461951058789933,
									"parameters": [
										"0.5"
									]
								},
								{
									"type": "comment",
									"text": "Show the fader."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 148375613075128,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Go to Main Menu."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 833641491306966
								},
								{
									"callFunction": "stopWoosh",
									"sid": 114496887509916
								},
								{
									"id": "go-to-layout",
									"objectClass": "System",
									"sid": 152687412325893,
									"parameters": {
										"layout": "MainMenu"
									}
								}
							],
							"sid": 543810087218035
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When the exit no button is activate, return to the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-start",
							"objectClass": "Touch",
							"sid": 171093298427823,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 410177898347987,
							"parameters": {
								"value": "inputFocus = \"exit\""
							}
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 970854974043741,
							"parameters": {
								"object": "GPButtonExitNo"
							}
						},
						{
							"id": "is-visible",
							"objectClass": "GPButtonExitNo",
							"sid": 502692614201456
						},
						{
							"id": "is-any-playing",
							"objectClass": "GPButtonExitNo",
							"sid": 506509543765070,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonExitNo",
							"sid": 308202983825739,
							"parameters": {
								"animation": "\"Pressed\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 747065829859743
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-nth-touch-end",
							"objectClass": "Touch",
							"sid": 782943834748357,
							"parameters": {
								"touch-number": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 402488928694331,
							"parameters": {
								"value": "inputFocus = \"exit\""
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "GPButtonExitNo",
							"sid": 394349910931739,
							"parameters": {
								"animation": "\"Pressed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "GPButtonExitNo",
							"sid": 525402452730959,
							"parameters": {
								"animation": "\"Normal\"",
								"from": "current-frame"
							}
						}
					],
					"sid": 161525886930860,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-touching-object",
									"objectClass": "Touch",
									"sid": 995502734525071,
									"parameters": {
										"object": "GPButtonExitNo"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play boop sound."
								},
								{
									"callFunction": "playSFX",
									"sid": 248767960534249,
									"parameters": [
										"\"menu/menuboop\"",
										false,
										"0"
									]
								},
								{
									"type": "comment",
									"text": "Hide exit frame."
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameExit",
									"sid": 422683103794529,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideExitFrame\"",
										"property": "offsetY",
										"end-value": "LayoutHeight + GPUIFrameExit.Height/2",
										"time": "0.2",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "GPUIFrameExit",
									"sid": 259488961250191,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideExitFrame\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.1",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Change input focus to game."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 946596105713764
								},
								{
									"callFunction": "setInputFocus",
									"sid": 911543637274280,
									"parameters": [
										"\"game\""
									]
								}
							],
							"sid": 903063705152250
						}
					]
				}
			],
			"sid": 780444750395220
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Portal Effects",
			"description": "Portal visual effects.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "When sine is enabled, the portal flashes according to the sine wave absolute value."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-active",
							"objectClass": "GPPortalSpawner",
							"sid": 257478422746313,
							"behaviorType": "Sine"
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "GPPortalSpawner",
							"sid": 528207134350068,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "100 + abs(Self.Sine.Value)/2"
							}
						}
					],
					"sid": 597781916898337
				}
			],
			"sid": 417980385851119
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Level finish",
			"description": "Procedures that are executed when the level ends.",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Actions to be executed before the finish."
				},
				{
					"functionName": "beforeFinish",
					"functionDescription": "Actions to be executed before the finish",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [
						{
							"name": "frameAnim",
							"type": "string",
							"initialValue": "",
							"comment": "Success or Fail animation",
							"sid": 595135611345932
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "hideBuildMenu",
							"sid": 351837943212804
						},
						{
							"id": "tween-one-property",
							"objectClass": "GPUIFrameExit",
							"sid": 527358207722521,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideExitFrame\"",
								"property": "offsetY",
								"end-value": "LayoutHeight + GPUIFrameExit.Height/2",
								"time": "0.2",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "GPUIFrameExit",
							"sid": 182984846267759,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideExitFrame\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.1",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "stop-all-timers",
							"objectClass": "GPInterestTimer",
							"sid": 872515426891581,
							"behaviorType": "Timer"
						},
						{
							"id": "stop-all-timers",
							"objectClass": "GPNextWave",
							"sid": 996383039219829,
							"behaviorType": "Timer"
						},
						{
							"callFunction": "destroyEveryEnemy",
							"sid": 612097263939925
						},
						{
							"callFunction": "setInputFocus",
							"sid": 176763883400003,
							"parameters": [
								"\"finish\""
							]
						},
						{
							"callFunction": "playSFX",
							"sid": 593231697901777,
							"parameters": [
								"frameAnim = \"Victory\" ? \"misc/victory\" : \"misc/loss\"",
								false,
								"0"
							]
						},
						{
							"id": "set-text",
							"objectClass": "GPTextFinish",
							"sid": 107398295711731,
							"parameters": {
								"text": "\"[lineThickness=2][outline=#000000]\" & frameAnim"
							}
						},
						{
							"id": "set-font-color",
							"objectClass": "GPTextFinish",
							"sid": 291157652140462,
							"parameters": {
								"color": "frameAnim = \"Victory\" ? rgba255(0, 255, 0, 255) : rgba255(255, 0, 0, 255)"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "FadeFinish",
							"sid": 354050928053015,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFadeFinish\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 461295685976967
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 773086077357138,
							"parameters": {
								"seconds": "4.0"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 948357001162840,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1.0",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 491574170203856
						}
					],
					"sid": 266380779392946
				},
				{
					"eventType": "comment",
					"text": "Save player progress to profile."
				},
				{
					"functionName": "saveProgressToProfile",
					"functionDescription": "Save player progress to profile",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 265827675065339,
							"parameters": {
								"key": "\"Ember\"",
								"value": "ember"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 410763218259316,
							"parameters": {
								"key": "\"Crystal\"",
								"value": "crystal"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 389943296649068,
							"parameters": {
								"key": "\"Flux\"",
								"value": "flux"
							}
						},
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 974412732789637,
							"parameters": {
								"key": "\"PlayerProfile\"",
								"value": "DictProfile.AsJSON"
							}
						}
					],
					"sid": 943443026210229
				},
				{
					"eventType": "comment",
					"text": "Take one life from the player and check for loss."
				},
				{
					"functionName": "playerHit",
					"functionDescription": "Take one life from the player and check for loss",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 154872730892851,
							"parameters": {
								"value": "inputFocus <> \"finish\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 182157364911244,
							"parameters": {
								"variable": "lives",
								"value": "max(lives - 1, 0)"
							}
						},
						{
							"callFunction": "playSFX",
							"sid": 451749708213526,
							"parameters": [
								"\"misc/playerhit\"",
								false,
								"0"
							]
						},
						{
							"callFunction": "updateUI",
							"sid": 720797290586984
						}
					],
					"sid": 451665247037915,
					"children": [
						{
							"eventType": "comment",
							"text": "Player lost all the lives, therefore end the level with a fail message, then restart."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 481722324200310,
									"parameters": {
										"value": "lives = 0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "beforeFinish",
									"sid": 125988891899481,
									"parameters": [
										"\"Defeat\""
									]
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 966069419160776
								}
							],
							"sid": 625804247330701,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "GPTower",
											"sid": 706317306132461
										},
										{
											"callFunction": "prepareLevel",
											"sid": 681081920228345
										}
									],
									"sid": 518900568630651
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Destroy every enemy on the map."
				},
				{
					"functionName": "destroyEveryEnemy",
					"functionDescription": "Destroy every enemy on the map",
					"functionCategory": "Gameplay",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 204252874142230,
					"children": [
						{
							"eventType": "variable",
							"name": "SFXWasPlaying",
							"type": "boolean",
							"initialValue": "false",
							"comment": "Was SFX playing?",
							"isStatic": false,
							"isConstant": false,
							"sid": 168814683977728
						},
						{
							"eventType": "comment",
							"text": "Don't overwhelm the player with enemy death sounds by briefly deactivating SFXs, if activated."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 587944630038916,
									"parameters": {
										"variable": "SFXPlaying"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 402736167102928,
									"parameters": {
										"variable": "SFXWasPlaying",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 100312394929345,
									"parameters": {
										"variable": "SFXPlaying",
										"value": "false"
									}
								}
							],
							"sid": 906571696741419
						},
						{
							"eventType": "comment",
							"text": "Destroy enemies."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 684520336325249,
									"parameters": {
										"object": "GPEnemy"
									}
								}
							],
							"actions": [
								{
									"callFunction": "enemyHit",
									"sid": 243800477305163,
									"parameters": [
										"999999999",
										"GPEnemy.UID",
										"\"\"",
										"\"None\"",
										false
									]
								}
							],
							"sid": 235448350362733
						},
						{
							"eventType": "comment",
							"text": "Reactivate SFXs if previously activated."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 500996305328081,
									"parameters": {
										"variable": "SFXWasPlaying"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 764782620556740,
									"parameters": {
										"variable": "SFXPlaying",
										"value": "true"
									}
								}
							],
							"sid": 472214920428209
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Check if the player has destroyed a boss. If so, end the level with a success message, then go to the next level."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-destroyed",
							"objectClass": "GPEnemy",
							"sid": 803091383054063
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 480150839410888,
							"parameters": {
								"value": "inputFocus <> \"finish\""
							}
						}
					],
					"actions": [],
					"sid": 834987590150872,
					"children": [
						{
							"eventType": "comment",
							"text": "Boss enemies."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-animation-playing",
									"objectClass": "GPEnemy",
									"sid": 539731643938957,
									"parameters": {
										"animation": "\"030\""
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "GPEnemy",
									"sid": 441613227627893,
									"parameters": {
										"animation": "\"031\""
									}
								},
								{
									"id": "is-animation-playing",
									"objectClass": "GPEnemy",
									"sid": 689068787875995,
									"parameters": {
										"animation": "\"032\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "beforeFinish",
									"sid": 753569749916644,
									"parameters": [
										"\"Victory\""
									]
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 670245328091136
								}
							],
							"sid": 484633177909400,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 144942968578168,
											"parameters": {
												"value": "ember + crystal + flux < 9"
											}
										}
									],
									"actions": [
										{
											"callFunction": "saveProgressToProfile",
											"sid": 563569162729998
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 819649653334427
										},
										{
											"id": "destroy",
											"objectClass": "GPTower",
											"sid": 729914151872121
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 115205729528628,
											"parameters": {
												"variable": "currLevel",
												"value": "1"
											}
										},
										{
											"callFunction": "prepareLevel",
											"sid": 676811886361082
										}
									],
									"sid": 502798141049754
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 229855888141398
										}
									],
									"actions": [
										{
											"callFunction": "saveProgressToProfile",
											"sid": 126813023428273
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 903978051684645
										},
										{
											"id": "destroy",
											"objectClass": "GPTower",
											"sid": 921718707357205
										},
										{
											"id": "go-to-layout",
											"objectClass": "System",
											"sid": 432884794712240,
											"parameters": {
												"layout": "Credits"
											}
										}
									],
									"sid": 212640601461015
								}
							],
							"isOrBlock": true
						}
					]
				}
			],
			"sid": 947156956653487
		}
	],
	"sid": 107191360449841
}