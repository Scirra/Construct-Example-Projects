{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nFelipe Vaiano Calderan - Programmer\nTwitter: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Global variables"
		},
		{
			"eventType": "variable",
			"name": "pickX",
			"type": "number",
			"initialValue": "0",
			"comment": "X position from where the draggable was picked up",
			"isStatic": false,
			"isConstant": false,
			"sid": 578621540278884
		},
		{
			"eventType": "variable",
			"name": "pickY",
			"type": "number",
			"initialValue": "0",
			"comment": "Y position from where the draggable was picked up",
			"isStatic": false,
			"isConstant": false,
			"sid": 852301684814742
		},
		{
			"eventType": "variable",
			"name": "positionValid",
			"type": "number",
			"initialValue": "0",
			"comment": "Is the drop position valid?",
			"isStatic": false,
			"isConstant": false,
			"sid": 692488746837223
		},
		{
			"eventType": "variable",
			"name": "cameraRotation",
			"type": "number",
			"initialValue": "0",
			"comment": "Camera Rotation",
			"isStatic": false,
			"isConstant": false,
			"sid": 188042849033112
		},
		{
			"eventType": "variable",
			"name": "failedToDeliver",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Has the player failed to deliver a package?",
			"isStatic": false,
			"isConstant": false,
			"sid": 495963202337374
		},
		{
			"eventType": "variable",
			"name": "deliveredPackages",
			"type": "number",
			"initialValue": "0",
			"comment": "Number of packages delivered by the player",
			"isStatic": false,
			"isConstant": false,
			"sid": 557113834495718
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Set camera position"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 378423584627729
						}
					],
					"actions": [
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 463709361047910,
							"parameters": {
								"cam-x": "CameraPivot.ImagePointX(\"Camera\")",
								"cam-y": "CameraPivot.ImagePointY(\"Camera\")",
								"cam-z": "208",
								"look-x": "168",
								"look-y": "98",
								"look-z": "0",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						}
					],
					"sid": 305316116404975
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 472954870259326,
							"parameters": {
								"direction": "down"
							}
						}
					],
					"actions": [
						{
							"id": "rotate-clockwise",
							"objectClass": "CameraPivot",
							"sid": 987153074580164,
							"parameters": {
								"degrees": "5"
							}
						},
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 555008899441816,
							"parameters": {
								"cam-x": "CameraPivot.ImagePointX(\"Camera\")",
								"cam-y": "CameraPivot.ImagePointY(\"Camera\")",
								"cam-z": "208",
								"look-x": "168",
								"look-y": "98",
								"look-z": "0",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						}
					],
					"sid": 945707120230607
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 894358945750803,
							"parameters": {
								"direction": "up"
							}
						}
					],
					"actions": [
						{
							"id": "rotate-counter-clockwise",
							"objectClass": "CameraPivot",
							"sid": 674242052387266,
							"parameters": {
								"degrees": "5"
							}
						},
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 818475319003167,
							"parameters": {
								"cam-x": "CameraPivot.ImagePointX(\"Camera\")",
								"cam-y": "CameraPivot.ImagePointY(\"Camera\")",
								"cam-z": "208",
								"look-x": "168",
								"look-y": "98",
								"look-z": "0",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						}
					],
					"sid": 848782120967252
				},
				{
					"eventType": "comment",
					"text": "Restart the layout"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 596016896746389,
							"parameters": {
								"key": 8
							}
						}
					],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 282336653187323
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 109382615886971
						}
					],
					"sid": 822311641289076
				},
				{
					"eventType": "comment",
					"text": "Skip tutorial when [Enter] is pressed"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 914144789235442,
							"parameters": {
								"key": 13
							}
						}
					],
					"actions": [],
					"sid": 164288774788175,
					"children": [
						{
							"eventType": "comment",
							"text": "Page 0"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-opacity",
									"objectClass": "UITextTutorial0",
									"sid": 983550546463380,
									"parameters": {
										"comparison": 0,
										"opacity": "100"
									}
								}
							],
							"actions": [
								{
									"id": "set-opacity",
									"objectClass": "UITextTutorial0",
									"sid": 831740876299615,
									"parameters": {
										"opacity": "0"
									}
								},
								{
									"id": "set-opacity",
									"objectClass": "UITextTutorial1",
									"sid": 763129515082314,
									"parameters": {
										"opacity": "100"
									}
								}
							],
							"sid": 410555859276432
						},
						{
							"eventType": "comment",
							"text": "Page 1"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 556959909416031
								},
								{
									"id": "compare-opacity",
									"objectClass": "UITextTutorial1",
									"sid": 483500911925581,
									"parameters": {
										"comparison": 0,
										"opacity": "100"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "UITextTutorial1",
									"sid": 305610081110142,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeTutorialOut\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 513827681943934,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeOutFader\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 936424049811199
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Release deliverables when [Enter] is pressed if the tutorial is not visible and no deliverable is already present in the game"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 707451751659997,
							"parameters": {
								"key": 13
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "UITextTutorial0",
							"sid": 735811070680726,
							"parameters": {
								"comparison": 2,
								"opacity": "1"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "UITextTutorial1",
							"sid": 565258130538197,
							"parameters": {
								"comparison": 2,
								"opacity": "1"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 666023829951166,
							"parameters": {
								"value": "Deliverable.Count = 0"
							}
						},
						{
							"id": "compare-opacity",
							"objectClass": "UITextOutcome",
							"sid": 826089465415888,
							"parameters": {
								"comparison": 0,
								"opacity": "0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 784479093283274,
							"parameters": {
								"value": "deliveredPackages = 0"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create Deliverable 1"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 632750747223828,
							"parameters": {
								"object-to-create": "Deliverable",
								"layer": "\"World\"",
								"x": "64",
								"y": "160",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Deliverable",
							"sid": 297388295034297,
							"parameters": {
								"z": "256"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 189871916346245,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ReleaseDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "16",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Create Deliverable 2"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 607248475665384,
							"parameters": {
								"object-to-create": "Deliverable",
								"layer": "\"World\"",
								"x": "128",
								"y": "160",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Deliverable",
							"sid": 850222395885449,
							"parameters": {
								"z": "256"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 605239935347897,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ReleaseDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "16",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Create Deliverable 3"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 651900174004696,
							"parameters": {
								"object-to-create": "Deliverable",
								"layer": "\"World\"",
								"x": "208",
								"y": "160",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Deliverable",
							"sid": 755442988244118,
							"parameters": {
								"z": "256"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 886303297612845,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ReleaseDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "16",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Create Deliverable 4"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 815992495612926,
							"parameters": {
								"object-to-create": "Deliverable",
								"layer": "\"World\"",
								"x": "272",
								"y": "160",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Deliverable",
							"sid": 778907241202686,
							"parameters": {
								"z": "256"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 527218979093727,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ReleaseDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "16",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Block any further player action"
						},
						{
							"id": "set-enabled",
							"objectClass": "Draggable",
							"sid": 534434299164317,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Conveyor",
							"sid": 249254272334272,
							"parameters": {
								"instance-variable": "canRotate",
								"value": "false"
							}
						}
					],
					"sid": 153836494685142
				}
			],
			"sid": 203565973578976
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Draggable",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check if position is valid (not overlapping object of the same type)"
				},
				{
					"functionName": "ValidatePosition",
					"functionDescription": "Validate if the drop position is valid",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "X position",
							"sid": 233639750137527
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y position",
							"sid": 158506366313290
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 286484994461581,
					"children": [
						{
							"eventType": "variable",
							"name": "sumOfBases",
							"type": "number",
							"initialValue": "0",
							"comment": "Amount of base blocks in the coordinate",
							"isStatic": false,
							"isConstant": false,
							"sid": 515933608655502
						},
						{
							"eventType": "variable",
							"name": "sumOfConveyors",
							"type": "number",
							"initialValue": "0",
							"comment": "Amount of conveyor blocks in the coordinates",
							"isStatic": false,
							"isConstant": false,
							"sid": 895039495977296
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 278792472474645,
									"parameters": {
										"object": "Base"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 364809917693995,
									"parameters": {
										"value": "Base.X = x & Base.Y = y"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 118044688306079,
									"parameters": {
										"variable": "sumOfBases",
										"value": "1"
									}
								}
							],
							"sid": 514450868759565
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 224162176722961,
									"parameters": {
										"value": "sumOfBases > 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 948785191270660,
									"parameters": {
										"value": "0"
									}
								}
							],
							"sid": 850612414694446
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 616623652027274,
									"parameters": {
										"object": "Conveyor"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 125021161205278,
									"parameters": {
										"value": "Conveyor.X = x & Conveyor.Y = y"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 502827578698619,
									"parameters": {
										"variable": "sumOfConveyors",
										"value": "1"
									}
								}
							],
							"sid": 215440999861727
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 847117106591148,
									"parameters": {
										"object": "MapConveyor"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 110439534837190,
									"parameters": {
										"value": "MapConveyor.X = x & MapConveyor.Y = y"
									}
								}
							],
							"actions": [
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 600010364403165,
									"parameters": {
										"variable": "sumOfConveyors",
										"value": "1"
									}
								}
							],
							"sid": 974215486422944
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 588558170396307,
									"parameters": {
										"value": "sumOfConveyors > 1 & sumOfBases <> 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 618717946409623,
									"parameters": {
										"value": "0"
									}
								}
							],
							"sid": 752825486511152
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 427897509885061
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 936821596060572,
									"parameters": {
										"value": "1"
									}
								}
							],
							"sid": 876017806118864
						}
					]
				},
				{
					"eventType": "comment",
					"text": "On pick, save initial coordinates"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drag-start",
							"objectClass": "Draggable",
							"sid": 184097408354346,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 861636553781599,
							"parameters": {
								"variable": "pickX",
								"value": "Draggable.X"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 164286567931826,
							"parameters": {
								"variable": "pickY",
								"value": "Draggable.Y"
							}
						}
					],
					"sid": 240450258644244
				},
				{
					"eventType": "comment",
					"text": "On drop, snap to grid"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-drop",
							"objectClass": "Draggable",
							"sid": 252815990596081,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Draggable",
							"sid": 198610216259493,
							"parameters": {
								"x": "max(min(round(Self.X / 16) * 16, 320), 16)"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Draggable",
							"sid": 409386532454207,
							"parameters": {
								"y": "max(min(round(Self.Y / 16) * 16, 240), 160)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 556337297888566,
							"parameters": {
								"variable": "positionValid",
								"value": "Functions.ValidatePosition(Draggable.X, Draggable.Y)"
							}
						}
					],
					"sid": 821427255268884,
					"children": [
						{
							"eventType": "comment",
							"text": "Valid position"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 171304891707392,
									"parameters": {
										"value": "positionValid = 1"
									}
								}
							],
							"actions": [],
							"sid": 252748426269463,
							"children": [
								{
									"eventType": "comment",
									"text": "Conveyor overlapping base"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "Conveyor",
											"sid": 560981802720491,
											"parameters": {
												"object": "Base"
											}
										}
									],
									"actions": [
										{
											"callFunction": "BuildFullConveyor",
											"sid": 954779561576184,
											"parameters": [
												"Draggable.X",
												"Draggable.Y"
											]
										}
									],
									"sid": 441600153220658
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Invalid position"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 663099597392144
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Draggable",
									"sid": 308070451645764,
									"parameters": {
										"x": "pickX"
									}
								},
								{
									"id": "set-y",
									"objectClass": "Draggable",
									"sid": 520812283147245,
									"parameters": {
										"y": "pickY"
									}
								}
							],
							"sid": 868643323884113
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Do not let the block escape the map"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "Draggable",
							"sid": 447207403940660,
							"behaviorType": "DragDrop"
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Draggable",
							"sid": 549989655214387,
							"parameters": {
								"x": "max(min(Self.X, 320), 16)"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Draggable",
							"sid": 482216347256131,
							"parameters": {
								"y": "max(min(Self.Y, 240), 160)"
							}
						}
					],
					"sid": 462669132219132
				}
			],
			"sid": 709601985597316
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Conveyor",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Build a full conveyor out of a base block and a conveyor block"
				},
				{
					"functionName": "BuildFullConveyor",
					"functionDescription": "Build a full conveyor from a Conveyor and a Base",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "X position",
							"sid": 351878158457629
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y position",
							"sid": 839764009023750
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 584954107990391,
					"children": [
						{
							"eventType": "variable",
							"name": "conveyorUID",
							"type": "number",
							"initialValue": "-1",
							"comment": "Conveyor UID",
							"isStatic": false,
							"isConstant": false,
							"sid": 910859490328023
						},
						{
							"eventType": "variable",
							"name": "baseUID",
							"type": "number",
							"initialValue": "-1",
							"comment": "Base UID",
							"isStatic": false,
							"isConstant": false,
							"sid": 239307400180120
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 108159247678114,
									"parameters": {
										"object": "Draggable",
										"expression": "Draggable.X = x & Draggable.Y = y & Draggable.type = \"base\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 951195730608036,
									"parameters": {
										"variable": "baseUID",
										"value": "Draggable.UID"
									}
								}
							],
							"sid": 683484767372471
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 723265098559335,
									"parameters": {
										"object": "Draggable",
										"expression": "Draggable.X = x & Draggable.Y = y & Draggable.type = \"conveyor\" & baseUID <> -1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 332196026171178,
									"parameters": {
										"variable": "conveyorUID",
										"value": "Draggable.UID"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Draggable",
									"sid": 455172890161475,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								}
							],
							"sid": 245585792416411
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Base",
									"sid": 588600855767591,
									"parameters": {
										"unique-id": "baseUID"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "Conveyor",
									"sid": 693454084753462,
									"parameters": {
										"unique-id": "conveyorUID"
									}
								}
							],
							"actions": [
								{
									"id": "set-z-elevation",
									"objectClass": "Conveyor",
									"sid": 357185595145313,
									"parameters": {
										"z": "8"
									}
								},
								{
									"id": "add-child",
									"objectClass": "Base",
									"sid": 491947793735957,
									"parameters": {
										"child": "Conveyor",
										"transform-x": true,
										"transform-y": true,
										"transform-w": true,
										"transform-h": true,
										"transform-a": true,
										"transform-o": false,
										"transform-z-elevation": true,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Conveyor",
									"sid": 516301126289079,
									"parameters": {
										"instance-variable": "canRotate",
										"value": "false"
									}
								}
							],
							"sid": 224308140204125
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Rotate Conveyor"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-object-clicked",
							"objectClass": "Mouse",
							"sid": 287203998706085,
							"parameters": {
								"mouse-button": "right",
								"click-type": "clicked",
								"object-clicked": "Conveyor"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Conveyor",
							"sid": 693046652780531,
							"parameters": {
								"instance-variable": "canRotate"
							}
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "Conveyor",
							"sid": 815172166274243,
							"parameters": {
								"angle": "Self.Angle + 90"
							}
						}
					],
					"sid": 339706912332173
				}
			],
			"sid": 977542434428582
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Base",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Destroy a base object \"gracefully\""
				},
				{
					"functionName": "DestroyBase",
					"functionDescription": "Destroy a base object",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 986341035570762,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 590427852455743,
									"parameters": {
										"value": "Base.TemplateName = \"Wood\""
									}
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Base",
									"sid": 832669084208829
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 389928932664744,
									"parameters": {
										"object-to-create": "Fire",
										"layer": "\"World\"",
										"x": "Base.X",
										"y": "Base.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-angle-toward-position",
									"objectClass": "Fire",
									"sid": 690918725626985,
									"parameters": {
										"x": "3DCamera.CameraX",
										"y": "3DCamera.CameraY"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Fire",
									"sid": 211571132633094,
									"parameters": {
										"z": "16"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "TexFire",
									"sid": 625001217771066,
									"parameters": {
										"animation": "\"Fire\"",
										"from": "beginning"
									}
								}
							],
							"sid": 484643653682656
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 979203143141683,
									"parameters": {
										"value": "Base.TemplateName = \"Obsidian\""
									}
								}
							],
							"actions": [
								{
									"id": "stop-all-tweens",
									"objectClass": "Base",
									"sid": 484929280937023,
									"behaviorType": "Tween"
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Base",
									"sid": 993558598253781,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ScaleDownBase\"",
										"property": "scale",
										"end-x": "0.1",
										"end-y": "0.1",
										"time": "1",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Base",
									"sid": 707752427912775,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"SinkWaterBase\"",
										"property": "offsetZElevation",
										"end-value": "-16",
										"time": "1",
										"ease": "easeinsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 965813314680671
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When a base overlaps a conveyor, it moves in the direction of the conveyor scroll"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 773290767684315,
							"parameters": {
								"object": "Base"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Base",
							"sid": 468929094597794,
							"parameters": {
								"object": "MapConveyor"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Base",
							"sid": 202992485315409,
							"behaviorType": "Tween",
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 660897401741137,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-unique-id",
									"objectClass": "Draggable",
									"sid": 383097765456762,
									"parameters": {
										"unique-id": "Base.UID"
									}
								},
								{
									"id": "is-dragging",
									"objectClass": "Draggable",
									"sid": 194216489203456,
									"behaviorType": "DragDrop",
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "Base",
									"sid": 547976528457271,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MoveBase\"",
										"property": "position",
										"end-x": "Self.X + cos(MapConveyor.Angle) * 16",
										"end-y": "Self.Y + sin(MapConveyor.Angle) * 16",
										"time": "0.5",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Base",
									"sid": 498517918490221,
									"parameters": {
										"z": "16"
									}
								},
								{
									"id": "set-enabled",
									"objectClass": "Draggable",
									"sid": 344010886238050,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								}
							],
							"sid": 115315164936826
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 898941480379580,
									"parameters": {
										"value": "Base.TemplateName = \"Wood\""
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Base",
									"sid": 706642287535272,
									"parameters": {
										"object": "MapLavaConveyor"
									}
								}
							],
							"actions": [
								{
									"callFunction": "DestroyBase",
									"sid": 391687188229217
								}
							],
							"sid": 566803039668952
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 747727981784389,
									"parameters": {
										"value": "Base.TemplateName = \"Obsidian\""
									}
								},
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Base",
									"sid": 307967240161833,
									"parameters": {
										"object": "MapWaterConveyor"
									}
								}
							],
							"actions": [
								{
									"callFunction": "DestroyBase",
									"sid": 276111989268353
								}
							],
							"sid": 466081631647944
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If there is no conveyor below the base, it sinks"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Base",
							"sid": 177147382759125,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveBase\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Base",
							"sid": 807588755799889,
							"parameters": {
								"object": "MapConveyor"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Base",
							"sid": 572019968284359,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SinkBase\"",
								"property": "offsetZElevation",
								"end-value": "-1",
								"time": "0.25",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 132594256306234
				},
				{
					"eventType": "comment",
					"text": "After the base sinks, it is replaced by a prop base and its conveyor is replaced by a map conveyor"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Base",
							"sid": 686117929032670,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SinkBase\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Base",
							"sid": 290755706535886
						},
						{
							"id": "create-object-by-name",
							"objectClass": "System",
							"sid": 160436357198985,
							"parameters": {
								"object-name": "Base.TemplateName = \"Wood\" ? \"PropWoodenBase\" : \"PropObsidianBase\"",
								"layer": "\"World\"",
								"x": "Base.X",
								"y": "Base.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						}
					],
					"sid": 897748068391599,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "Base",
									"sid": 484696599042488,
									"parameters": {
										"child": "PlayerConveyor",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 794714365508643,
									"parameters": {
										"object-to-create": "MapNormalConveyor",
										"layer": "\"World\"",
										"x": "Base.X",
										"y": "Base.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "MapNormalConveyor",
									"sid": 542972441219818,
									"parameters": {
										"z": "7"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "MapNormalConveyor",
									"sid": 643793743834372,
									"parameters": {
										"angle": "PlayerConveyor.Angle"
									}
								}
							],
							"sid": 397119893733809
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Destroy fire objects when fire animation finishes"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "TexFire",
							"sid": 787753274568047,
							"parameters": {
								"animation": "\"Fire\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "Fire",
							"sid": 828212475728493
						}
					],
					"sid": 663373535329578
				},
				{
					"eventType": "comment",
					"text": "If a base collides with a deliver position, it is destroyed"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Base",
							"sid": 925133833216912,
							"parameters": {
								"object": "DeliverPosition"
							}
						}
					],
					"actions": [
						{
							"callFunction": "DestroyBase",
							"sid": 680177296527220
						}
					],
					"sid": 319692709495420
				}
			],
			"sid": 778944162941797
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Deliverable",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Conveyors move deliverables"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 682022257603845,
							"parameters": {
								"object": "Deliverable"
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Deliverable",
							"sid": 970264359254556,
							"parameters": {
								"object": "MapConveyor"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Deliverable",
							"sid": 903669518970757,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 934844433878457,
							"parameters": {
								"variable": "failedToDeliver"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "tween-two-properties",
							"objectClass": "Deliverable",
							"sid": 162146471025545,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveBase\"",
								"property": "position",
								"end-x": "Self.X + cos(MapConveyor.Angle) * 16",
								"end-y": "Self.Y + sin(MapConveyor.Angle) * 16",
								"time": "0.5",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 119919165553614
				},
				{
					"eventType": "comment",
					"text": "If there is no conveyor below the deliverable, it sinks and the player fails"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Deliverable",
							"sid": 994428041279757,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveBase\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Deliverable",
							"sid": 587544449579519,
							"parameters": {
								"object": "MapConveyor"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 976873725241892,
							"parameters": {
								"variable": "failedToDeliver"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Sink the deliverable and mark as failed"
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 230502914342678,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SinkDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "-1",
								"time": "0.25",
								"ease": "default",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 306643008260889,
							"parameters": {
								"variable": "failedToDeliver",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Disable player controls"
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 576904030356283,
							"parameters": {
								"seconds": "0.25"
							}
						},
						{
							"id": "set-enabled",
							"objectClass": "Draggable",
							"sid": 388946593841285,
							"behaviorType": "DragDrop",
							"parameters": {
								"state": "disabled"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Conveyor",
							"sid": 714970515505183,
							"parameters": {
								"instance-variable": "canRotate",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Show FAIL outcome"
						},
						{
							"id": "set-text",
							"objectClass": "UITextOutcome",
							"sid": 540262037695455,
							"parameters": {
								"text": "\"[color=#ff0000]FAIL[/color]\""
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "UITextOutcome",
							"sid": 146815732863372,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowOutcome\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 480939499958395,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeOutFader\"",
								"property": "offsetOpacity",
								"end-value": "75",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Restart the layout"
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 987401962790188,
							"parameters": {
								"seconds": "3.0"
							}
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 115364790356131
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 656497419156731
						}
					],
					"sid": 238865572890233
				},
				{
					"eventType": "comment",
					"text": "If a deliverable collides with a deliver position, it is destroyed (in this case, that is a good thing)"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Deliverable",
							"sid": 404853386412138,
							"parameters": {
								"object": "DeliverPosition"
							}
						}
					],
					"actions": [
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 604245400700768,
							"parameters": {
								"variable": "deliveredPackages",
								"value": "1"
							}
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Deliverable",
							"sid": 533102791616170,
							"behaviorType": "Tween"
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Deliverable",
							"sid": 772287626011804,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ScaleDownDeliverable\"",
								"property": "scale",
								"end-x": "0.1",
								"end-y": "0.1",
								"time": "1",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Deliverable",
							"sid": 644956542569385,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SinkEndDeliverable\"",
								"property": "offsetZElevation",
								"end-value": "-16",
								"time": "1",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 975307408229004,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 489510502061130,
									"parameters": {
										"value": "deliveredPackages = 4"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Disable player controls"
								},
								{
									"id": "set-enabled",
									"objectClass": "Draggable",
									"sid": 997032454220154,
									"behaviorType": "DragDrop",
									"parameters": {
										"state": "disabled"
									}
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Conveyor",
									"sid": 688626279657669,
									"parameters": {
										"instance-variable": "canRotate",
										"value": "false"
									}
								},
								{
									"type": "comment",
									"text": "Show SUCCESS outcome and Fader"
								},
								{
									"id": "set-text",
									"objectClass": "UITextOutcome",
									"sid": 858767171383733,
									"parameters": {
										"text": "\"[color=#00ff00]SUCCESS[/color]\""
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "UITextOutcome",
									"sid": 857116946235856,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowOutcome\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 999891666733427,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"FadeOutFader\"",
										"property": "offsetOpacity",
										"end-value": "75",
										"time": "1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Restart the layout"
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 147138826759345,
									"parameters": {
										"seconds": "3.0"
									}
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 264235188782589
								},
								{
									"id": "reset-global-variables",
									"objectClass": "System",
									"sid": 319615681221753
								}
							],
							"sid": 121246439106687
						}
					]
				}
			],
			"sid": 395370004327701
		}
	],
	"sid": 689281500802606
}