{
	"name": "MainCode",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira - Programmer\nTwitter: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of our patrons on https://www.patreon.com/viridinostudios and our good friends at https://www.construct.net."
		},
		{
			"eventType": "comment",
			"text": "Setup the camera by pointing it towards the center of the level."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 967907182340581
				}
			],
			"actions": [
				{
					"type": "comment",
					"text": "Standard preset."
				},
				{
					"id": "look-at-position",
					"objectClass": "3DCamera",
					"sid": 348679105838206,
					"parameters": {
						"cam-x": "LayoutWidth / 2",
						"cam-y": "LayoutHeight / 2 + 336",
						"cam-z": "128",
						"look-x": "LayoutWidth / 2",
						"look-y": "LayoutHeight / 2",
						"look-z": "8",
						"up-x": "0",
						"up-y": "0",
						"up-z": "1"
					}
				},
				{
					"type": "comment",
					"text": "Cinematographic preset."
				},
				{
					"id": "look-at-position",
					"objectClass": "3DCamera",
					"sid": 890367261360783,
					"disabled": true,
					"parameters": {
						"cam-x": "LayoutWidth / 2 + 96",
						"cam-y": "LayoutHeight / 2 + 256",
						"cam-z": "96",
						"look-x": "LayoutWidth / 2 + 16",
						"look-y": "LayoutHeight / 2 + 16",
						"look-z": "8",
						"up-x": "0",
						"up-y": "0",
						"up-z": "1"
					}
				}
			],
			"sid": 905285971128788,
			"children": [
				{
					"eventType": "comment",
					"text": "Create a 3D building model for each cell in the layout."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 481565728224990,
							"parameters": {
								"name": "\"X\"",
								"start-index": "0",
								"end-index": "40 - 1"
							}
						},
						{
							"id": "for",
							"objectClass": "System",
							"sid": 678603560124200,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "0",
								"end-index": "23 - 1"
							}
						}
					],
					"actions": [],
					"sid": 578129242483196,
					"children": [
						{
							"eventType": "variable",
							"name": "BuildingType",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 133717700794110
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 601955333208550,
									"parameters": {
										"object": "Cell",
										"expression": "Cell.X",
										"comparison": 0,
										"value": "8 + loopindex(\"X\") * 16"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 299737553620972,
									"parameters": {
										"object": "Cell",
										"expression": "Cell.Y",
										"comparison": 0,
										"value": "8 + loopindex(\"Y\") * 16"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 565113349979254,
									"parameters": {
										"object-to-create": "Building",
										"layer": "\"World\"",
										"x": "Cell.X",
										"y": "Cell.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "add-child",
									"objectClass": "Cell",
									"sid": 283427506807304,
									"parameters": {
										"child": "Building",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-z-elevation": true,
										"destroy-with-parent": true
									}
								},
								{
									"type": "comment",
									"text": "Randomize the cell frame for a more dynamic look."
								},
								{
									"id": "set-animation-frame",
									"objectClass": "Cell",
									"sid": 844017474561124,
									"parameters": {
										"frame-number": "choose(0, 1, 2)"
									}
								},
								{
									"type": "comment",
									"text": "Move the building down, so it's hidden from the player's line of sight."
								},
								{
									"id": "set-z-elevation",
									"objectClass": "Building",
									"sid": 143506408094983,
									"parameters": {
										"z": "-24.1"
									}
								},
								{
									"type": "comment",
									"text": "Choose a random type for the building."
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 544996979956043,
									"parameters": {
										"variable": "BuildingType",
										"value": "choose(0, 1, 2, 3, 4)"
									}
								},
								{
									"type": "comment",
									"text": "Setup the building's left face."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 800065169433972,
									"parameters": {
										"object-to-create": "LeftFace",
										"layer": "\"World\"",
										"x": "Building.X",
										"y": "Building.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "LeftFace",
									"sid": 120903292869102,
									"parameters": {
										"animation": "str(BuildingType)",
										"from": "beginning"
									}
								},
								{
									"id": "set-face-object",
									"objectClass": "Building",
									"sid": 653814145161621,
									"parameters": {
										"face": "left",
										"object": "LeftFace"
									}
								},
								{
									"type": "comment",
									"text": "Setup the building's right face."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 635744634024250,
									"parameters": {
										"object-to-create": "RightFace",
										"layer": "\"World\"",
										"x": "Building.X",
										"y": "Building.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "RightFace",
									"sid": 121297260856120,
									"parameters": {
										"animation": "str(BuildingType)",
										"from": "beginning"
									}
								},
								{
									"id": "set-face-object",
									"objectClass": "Building",
									"sid": 928044511929611,
									"parameters": {
										"face": "right",
										"object": "RightFace"
									}
								},
								{
									"type": "comment",
									"text": "Setup the building's front face."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 711440480995633,
									"parameters": {
										"object-to-create": "FrontFace",
										"layer": "\"World\"",
										"x": "Building.X",
										"y": "Building.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "FrontFace",
									"sid": 172092661310750,
									"parameters": {
										"animation": "str(BuildingType)",
										"from": "beginning"
									}
								},
								{
									"id": "set-face-object",
									"objectClass": "Building",
									"sid": 865241667824844,
									"parameters": {
										"face": "front",
										"object": "FrontFace"
									}
								},
								{
									"type": "comment",
									"text": "Setup the building's bottom face."
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 493920915727737,
									"parameters": {
										"object-to-create": "BottomFace",
										"layer": "\"World\"",
										"x": "Building.X",
										"y": "Building.Y",
										"create-hierarchy": false
									}
								},
								{
									"id": "set-animation",
									"objectClass": "BottomFace",
									"sid": 521388449360604,
									"parameters": {
										"animation": "str(BuildingType)",
										"from": "beginning"
									}
								},
								{
									"id": "set-face-object",
									"objectClass": "Building",
									"sid": 138581001904227,
									"parameters": {
										"face": "bottom",
										"object": "BottomFace"
									}
								}
							],
							"sid": 180728308612802,
							"children": [
								{
									"eventType": "comment",
									"text": "Setup the building's Z height based on each type as well."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 795155654519814,
											"parameters": {
												"value": "BuildingType = 0"
											}
										}
									],
									"actions": [
										{
											"id": "set-z-height",
											"objectClass": "Building",
											"sid": 401182145841340,
											"parameters": {
												"z-height": "8"
											}
										}
									],
									"sid": 463590424481739
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 218295953560807
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 468077856775375,
											"parameters": {
												"value": "BuildingType = 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-z-height",
											"objectClass": "Building",
											"sid": 240767743710231,
											"parameters": {
												"z-height": "12"
											}
										}
									],
									"sid": 718796211931240
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 265217293033645
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 469492996300252,
											"parameters": {
												"value": "BuildingType = 2"
											}
										}
									],
									"actions": [
										{
											"id": "set-z-height",
											"objectClass": "Building",
											"sid": 827130173432466,
											"parameters": {
												"z-height": "16"
											}
										}
									],
									"sid": 441505146906292
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 117254959998368
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 159107959216016,
											"parameters": {
												"value": "BuildingType = 3"
											}
										}
									],
									"actions": [
										{
											"id": "set-z-height",
											"objectClass": "Building",
											"sid": 717538063675345,
											"parameters": {
												"z-height": "20"
											}
										}
									],
									"sid": 664135009881832
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 357079330036733
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 630472772238855,
											"parameters": {
												"value": "BuildingType = 4"
											}
										}
									],
									"actions": [
										{
											"id": "set-z-height",
											"objectClass": "Building",
											"sid": 250641166815339,
											"parameters": {
												"z-height": "24"
											}
										}
									],
									"sid": 973972581270075
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Wait a few seconds before destroying the instructions, so the player has enough time to read it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 406467523563932,
							"parameters": {
								"object": "Text",
								"expression": "Text.ID",
								"comparison": 0,
								"value": "\"Instructions\""
							}
						}
					],
					"actions": [
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 149274537860825,
							"parameters": {
								"seconds": "10"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Text",
							"sid": 977545383984037,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"SelfDestroy\"",
								"property": "offsetX",
								"end-value": "-Self.Width",
								"time": "1.5",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no"
							}
						}
					],
					"sid": 114911067861348
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Whether or not the simulation is running."
		},
		{
			"eventType": "variable",
			"name": "IsRunning",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 191987729811176
		},
		{
			"eventType": "comment",
			"text": "If the player clicks on a cell with the left mouse button, while the simulation isn't running, make that cell live."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 102099699863881,
					"parameters": {
						"mouse-button": "left"
					}
				},
				{
					"id": "cursor-is-over-object",
					"objectClass": "Mouse",
					"sid": 744775077301410,
					"parameters": {
						"object": "Cell"
					}
				},
				{
					"id": "is-animation-playing",
					"objectClass": "Cell",
					"sid": 214899988720308,
					"parameters": {
						"animation": "\"1\""
					},
					"isInverted": true
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 886797510609494,
					"parameters": {
						"variable": "IsRunning"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Cell",
					"sid": 775505301143462,
					"parameters": {
						"animation": "\"1\"",
						"from": "beginning"
					}
				}
			],
			"sid": 573769129698080
		},
		{
			"eventType": "comment",
			"text": "If the player clicks on a cell with the right mouse button, while the simulation isn't running, make that cell die."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "mouse-button-is-down",
					"objectClass": "Mouse",
					"sid": 221342066168968,
					"parameters": {
						"mouse-button": "right"
					}
				},
				{
					"id": "cursor-is-over-object",
					"objectClass": "Mouse",
					"sid": 971888166205938,
					"parameters": {
						"object": "Cell"
					}
				},
				{
					"id": "is-animation-playing",
					"objectClass": "Cell",
					"sid": 820812032821883,
					"parameters": {
						"animation": "\"0\""
					},
					"isInverted": true
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 974573085721792,
					"parameters": {
						"variable": "IsRunning"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-animation",
					"objectClass": "Cell",
					"sid": 756431948464886,
					"parameters": {
						"animation": "\"0\"",
						"from": "beginning"
					}
				},
				{
					"id": "set-animation-frame",
					"objectClass": "Cell",
					"sid": 524402989253879,
					"parameters": {
						"frame-number": "choose(0, 1, 2)"
					}
				}
			],
			"sid": 450423789118775
		},
		{
			"eventType": "comment",
			"text": "Toggle the simulation state."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 827931762997431,
					"parameters": {
						"key": 32
					}
				}
			],
			"actions": [],
			"sid": 149782442491440,
			"children": [
				{
					"eventType": "comment",
					"text": "If the simulation is running, stop it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 698882781443589,
							"parameters": {
								"variable": "IsRunning"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 550519598227185,
							"parameters": {
								"variable": "IsRunning",
								"value": "false"
							}
						},
						{
							"id": "stop-timer",
							"objectClass": "GameManager",
							"sid": 691523352907311,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Tick\""
							}
						}
					],
					"sid": 243860262652403
				},
				{
					"eventType": "comment",
					"text": "However, if the simulation isn't running, start it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 844116921940789
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 573055108421709,
							"parameters": {
								"variable": "IsRunning"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 350836276982110,
							"parameters": {
								"variable": "IsRunning",
								"value": "true"
							}
						}
					],
					"sid": 616518863202228,
					"children": [
						{
							"eventType": "comment",
							"text": "Translate the animation state of each cell into a simplified binary data (0 and 1) for the neighbours array."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for",
									"objectClass": "System",
									"sid": 769612309288267,
									"parameters": {
										"name": "\"X\"",
										"start-index": "0",
										"end-index": "40 - 1"
									}
								},
								{
									"id": "for",
									"objectClass": "System",
									"sid": 640538242042875,
									"parameters": {
										"name": "\"Y\"",
										"start-index": "0",
										"end-index": "23 - 1"
									}
								}
							],
							"actions": [],
							"sid": 659516706618270,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 341627961092694,
											"parameters": {
												"object": "Cell",
												"expression": "Cell.X",
												"comparison": 0,
												"value": "8 + loopindex(\"X\") * 16"
											}
										},
										{
											"id": "pick-by-comparison",
											"objectClass": "System",
											"sid": 777593316190436,
											"parameters": {
												"object": "Cell",
												"expression": "Cell.Y",
												"comparison": 0,
												"value": "8 + loopindex(\"Y\") * 16"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Cell",
											"sid": 356704432506533,
											"parameters": {
												"instance-variable": "XIndex",
												"value": "loopindex(\"X\")"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Cell",
											"sid": 672556111673422,
											"parameters": {
												"instance-variable": "YIndex",
												"value": "loopindex(\"Y\")"
											}
										}
									],
									"sid": 306576311819171,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "Cell",
													"sid": 506384337809187,
													"parameters": {
														"animation": "\"1\""
													}
												}
											],
											"actions": [
												{
													"id": "set-at-xy",
													"objectClass": "CellState",
													"sid": 349778621619680,
													"parameters": {
														"x": "loopindex(\"X\")",
														"y": "loopindex(\"Y\")",
														"value": "1"
													}
												}
											],
											"sid": 616507287746851
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 877800810869933
												},
												{
													"id": "is-animation-playing",
													"objectClass": "Cell",
													"sid": 861211314228413,
													"parameters": {
														"animation": "\"0\""
													}
												}
											],
											"actions": [
												{
													"id": "set-at-xy",
													"objectClass": "CellState",
													"sid": 167408204094017,
													"parameters": {
														"x": "loopindex(\"X\")",
														"y": "loopindex(\"Y\")",
														"value": "0"
													}
												}
											],
											"sid": 958902366673583
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Start the tick count."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 429324002384189,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.25",
										"type": "regular",
										"tag": "\"Tick\""
									}
								}
							],
							"sid": 468602000184473
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Update the entire board every time a tick ends."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-timer",
					"objectClass": "GameManager",
					"sid": 261317076978437,
					"behaviorType": "Timer",
					"parameters": {
						"tag": "\"Tick\""
					}
				}
			],
			"actions": [],
			"sid": 572452818688806,
			"children": [
				{
					"eventType": "comment",
					"text": "Count the amount of live neighbours for each cell."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 811199016736471,
							"parameters": {
								"name": "\"X\"",
								"start-index": "0",
								"end-index": "40 - 1"
							}
						},
						{
							"id": "for",
							"objectClass": "System",
							"sid": 736223695618854,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "0",
								"end-index": "23 - 1"
							}
						}
					],
					"actions": [
						{
							"callFunction": "CountLiveNeighbours",
							"sid": 605141544185811,
							"parameters": [
								"loopindex(\"X\")",
								"loopindex(\"Y\")"
							]
						}
					],
					"sid": 186981967258534
				},
				{
					"eventType": "comment",
					"text": "Change the state of each depending on how many neighbours it has."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 862316831622173,
							"parameters": {
								"name": "\"X\"",
								"start-index": "0",
								"end-index": "40 - 1"
							}
						},
						{
							"id": "for",
							"objectClass": "System",
							"sid": 640633249689642,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "0",
								"end-index": "23 - 1"
							}
						}
					],
					"actions": [],
					"sid": 466256902254246,
					"children": [
						{
							"eventType": "comment",
							"text": "Conditions for live cells."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-at-xy",
									"objectClass": "CellState",
									"sid": 473633623925782,
									"parameters": {
										"x": "loopindex(\"X\")",
										"y": "loopindex(\"Y\")",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 285107071269497,
							"children": [
								{
									"eventType": "comment",
									"text": "Any live cell with fewer than two live neighbours dies, as if by underpopulation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "CellNeighbours",
											"sid": 294588797088949,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"comparison": 2,
												"value": "2"
											}
										}
									],
									"actions": [
										{
											"id": "set-at-xy",
											"objectClass": "CellState",
											"sid": 524552605005115,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"value": "0"
											}
										}
									],
									"sid": 572238953102997
								},
								{
									"eventType": "comment",
									"text": "Any live cell with two or three live neighbours lives on to the next generation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "CellNeighbours",
											"sid": 235388603165965,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"comparison": 0,
												"value": "2"
											}
										},
										{
											"id": "compare-at-xy",
											"objectClass": "CellNeighbours",
											"sid": 945915100945867,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-at-xy",
											"objectClass": "CellState",
											"sid": 960350000302502,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"value": "1"
											}
										}
									],
									"sid": 607781465098155,
									"isOrBlock": true
								},
								{
									"eventType": "comment",
									"text": "Any live cell with more than three live neighbours dies, as if by overpopulation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "CellNeighbours",
											"sid": 466817011563415,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"comparison": 4,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-at-xy",
											"objectClass": "CellState",
											"sid": 405117339406838,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"value": "0"
											}
										}
									],
									"sid": 720505504061110
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Conditions for dead cells."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 949625615837993
								},
								{
									"id": "compare-at-xy",
									"objectClass": "CellState",
									"sid": 889294582856827,
									"parameters": {
										"x": "loopindex(\"X\")",
										"y": "loopindex(\"Y\")",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 818974832778077,
							"children": [
								{
									"eventType": "comment",
									"text": "Any dead cell with exactly three live neighbours becomes a live cell, as if by reproduction."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-at-xy",
											"objectClass": "CellNeighbours",
											"sid": 211086030207227,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-at-xy",
											"objectClass": "CellState",
											"sid": 562513838715612,
											"parameters": {
												"x": "loopindex(\"X\")",
												"y": "loopindex(\"Y\")",
												"value": "1"
											}
										}
									],
									"sid": 821185140660739
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Reflect the changes made to the array into the 3D world, by moving building up and down depending on the state of its parent cell."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 636093387819302,
									"parameters": {
										"object": "Cell",
										"expression": "Cell.XIndex",
										"comparison": 0,
										"value": "loopindex(\"X\")"
									}
								},
								{
									"id": "pick-by-comparison",
									"objectClass": "System",
									"sid": 556563248682277,
									"parameters": {
										"object": "Cell",
										"expression": "Cell.YIndex",
										"comparison": 0,
										"value": "loopindex(\"Y\")"
									}
								}
							],
							"actions": [],
							"sid": 814812212824044,
							"children": [
								{
									"eventType": "comment",
									"text": "If a cell is alive, move its building up."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 191623634819536,
											"parameters": {
												"value": "CellState.At(loopindex(\"X\"), loopindex(\"Y\")) = 1"
											}
										}
									],
									"actions": [],
									"sid": 149989237726122,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "Cell",
													"sid": 442997356741803,
													"parameters": {
														"animation": "\"1\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "Cell",
													"sid": 800364536517118,
													"parameters": {
														"animation": "\"1\"",
														"from": "beginning"
													}
												}
											],
											"sid": 191549084058042
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "Cell",
													"sid": 446866927860529,
													"parameters": {
														"child": "Building",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "Building",
													"sid": 264824909514669,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"MoveUp\"",
														"property": "offsetZElevation",
														"end-value": "0",
														"time": "0.2",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no"
													}
												}
											],
											"sid": 564656895718372
										}
									]
								},
								{
									"eventType": "comment",
									"text": "However, if a cell is dead, move its building down."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 508105434893461
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 145991566499524,
											"parameters": {
												"value": "CellState.At(loopindex(\"X\"), loopindex(\"Y\")) = 0"
											}
										}
									],
									"actions": [],
									"sid": 377208202208082,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "Cell",
													"sid": 501038567834778,
													"parameters": {
														"animation": "\"0\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "Cell",
													"sid": 625395556775857,
													"parameters": {
														"animation": "\"0\"",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-frame",
													"objectClass": "Cell",
													"sid": 795872151107523,
													"parameters": {
														"frame-number": "choose(0, 1, 2)"
													}
												}
											],
											"sid": 296595273044468
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-children",
													"objectClass": "Cell",
													"sid": 636197752465692,
													"parameters": {
														"child": "Building",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "Building",
													"sid": 940381961329294,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"MoveDown\"",
														"property": "offsetZElevation",
														"end-value": "-24.1",
														"time": "0.2",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no"
													}
												}
											],
											"sid": 473444765423933
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Increase the age by one and update the HUD."
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 350499487847783,
							"parameters": {
								"variable": "Age",
								"value": "Age + 1"
							}
						},
						{
							"callFunction": "UpdateHUD",
							"sid": 158869679471006
						}
					],
					"sid": 351619890649014
				}
			]
		},
		{
			"eventType": "comment",
			"text": "Count the amount of live neighbours around a specific cell."
		},
		{
			"functionName": "CountLiveNeighbours",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [
				{
					"name": "CellX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 458246391336083
				},
				{
					"name": "CellY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"sid": 693088301692668
				}
			],
			"eventType": "function-block",
			"conditions": [],
			"actions": [],
			"sid": 688204758125521,
			"children": [
				{
					"eventType": "variable",
					"name": "LiveAmount",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 629221577022785
				},
				{
					"eventType": "comment",
					"text": "Loop through all neighbours, but prevent the algorithm from counting the base cell itself as a neighbour, by checking if at least one of the loops is not equal to zero."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 522872994301356,
							"parameters": {
								"name": "\"X\"",
								"start-index": "-1",
								"end-index": "1"
							}
						},
						{
							"id": "for",
							"objectClass": "System",
							"sid": 373958013060084,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "-1",
								"end-index": "1"
							}
						}
					],
					"actions": [],
					"sid": 644552538279858,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 880075275630020,
									"parameters": {
										"value": "loopindex(\"X\") <> 0 | loopindex(\"Y\") <> 0"
									}
								}
							],
							"actions": [],
							"sid": 617088300198884,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 578067603921674,
											"parameters": {
												"value": "CellState.At(CellX + loopindex(\"X\"), CellY + loopindex(\"Y\")) = 1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 930900501108267,
											"parameters": {
												"variable": "LiveAmount",
												"value": "LiveAmount + 1"
											}
										}
									],
									"sid": 581067728155626
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Store the result in a second array."
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-at-xy",
							"objectClass": "CellNeighbours",
							"sid": 319231496398239,
							"parameters": {
								"x": "CellX",
								"y": "CellY",
								"value": "LiveAmount"
							}
						}
					],
					"sid": 364718955549601
				}
			]
		},
		{
			"eventType": "comment",
			"text": "How old is the simulation."
		},
		{
			"eventType": "variable",
			"name": "Age",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 131552221736148
		},
		{
			"eventType": "comment",
			"text": "How many cells are alive."
		},
		{
			"eventType": "variable",
			"name": "Lives",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 989424624323495
		},
		{
			"eventType": "comment",
			"text": "Update the HUD by displaying the simulation age and number of living cells."
		},
		{
			"functionName": "UpdateHUD",
			"functionDescription": "",
			"functionCategory": "",
			"functionReturnType": "none",
			"functionIsAsync": false,
			"functionParameters": [],
			"eventType": "function-block",
			"conditions": [],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 910359082190160,
					"parameters": {
						"variable": "Lives",
						"value": "0"
					}
				}
			],
			"sid": 772121330258425,
			"children": [
				{
					"eventType": "comment",
					"text": "Count how many cells are alive in the array."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for",
							"objectClass": "System",
							"sid": 756081073714027,
							"parameters": {
								"name": "\"X\"",
								"start-index": "0",
								"end-index": "40 - 1"
							}
						},
						{
							"id": "for",
							"objectClass": "System",
							"sid": 249836451698558,
							"parameters": {
								"name": "\"Y\"",
								"start-index": "0",
								"end-index": "23 - 1"
							}
						}
					],
					"actions": [],
					"sid": 541186878879919,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-at-xy",
									"objectClass": "CellState",
									"sid": 549734485811237,
									"parameters": {
										"x": "loopindex(\"X\")",
										"y": "loopindex(\"Y\")",
										"comparison": 0,
										"value": "1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 181062675217941,
									"parameters": {
										"variable": "Lives",
										"value": "Lives + 1"
									}
								}
							],
							"sid": 124424461044935
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update the HUD text object."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "pick-by-comparison",
							"objectClass": "System",
							"sid": 754963722330030,
							"parameters": {
								"object": "Text",
								"expression": "Text.ID",
								"comparison": 0,
								"value": "\"HUD\""
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Text",
							"sid": 206385081825466,
							"parameters": {
								"text": "\"\\[Age = \"&zeropad(Age, 6)&\"] | \\[Lives = \"&zeropad(Lives, 3)&\"]\""
							}
						}
					],
					"sid": 366317409582166
				}
			]
		}
	],
	"sid": 281932105765373
}