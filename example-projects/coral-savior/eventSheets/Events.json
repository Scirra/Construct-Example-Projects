{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nMateus Ferreira Moreira - Programmer\nX: @BonzerKitten\nE-mail: ferreiramoreiramateus@gmail.com\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nHelp us make new examples by supporting our work on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "inputFocus",
			"type": "string",
			"initialValue": "Tutorial",
			"comment": "Which part of the game the player is currently controlling",
			"isStatic": false,
			"isConstant": false,
			"sid": 718025911941101
		},
		{
			"eventType": "variable",
			"name": "CoralsSaved",
			"type": "number",
			"initialValue": "0",
			"comment": "Number of corals saved.",
			"isStatic": false,
			"isConstant": false,
			"sid": 517895197120052
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Initial game setup."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 806699823894387
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 259982824313579,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ReduceFaderOpacity\"",
								"property": "offsetOpacity",
								"end-value": "85",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTutorial",
							"sid": 119163840010949,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTextTutorial\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "scroll-to-object",
							"objectClass": "System",
							"sid": 970592275010153,
							"parameters": {
								"object": "Player"
							}
						}
					],
					"sid": 408423537613914,
					"children": [
						{
							"eventType": "comment",
							"text": "If BGM is playing, just adjust the sounds."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-tag-playing",
									"objectClass": "Audio",
									"sid": 360421993790950,
									"parameters": {
										"tag": "\"BGM\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "Audio",
									"sid": 353173892795324,
									"parameters": {
										"tag": "\"BGM\"",
										"index": "0",
										"parameter": "mix",
										"value": "0",
										"ramp": "linear",
										"time": "0"
									}
								},
								{
									"id": "set-effect-parameter",
									"objectClass": "Audio",
									"sid": 768271812954353,
									"parameters": {
										"tag": "\"SFX\"",
										"index": "0",
										"parameter": "mix",
										"value": "0",
										"ramp": "linear",
										"time": "0"
									}
								},
								{
									"id": "set-volume",
									"objectClass": "Audio",
									"sid": 929215188262251,
									"parameters": {
										"tag": "\"underwater\"",
										"db": "-Infinity"
									}
								}
							],
							"sid": 165810546833137
						},
						{
							"eventType": "comment",
							"text": "Otherwise, set everything up from scratch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 246203651602917
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 132123349175003,
									"parameters": {
										"audio-file": "jungle",
										"loop": "looping",
										"volume": "0",
										"stereo-pan": "0",
										"tag-optional": "\"BGM\""
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 860279677648997,
									"parameters": {
										"audio-file": "loop_bubbles",
										"loop": "looping",
										"volume": "-Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"underwater\""
									}
								},
								{
									"id": "add-filter-effect",
									"objectClass": "Audio",
									"sid": 405107385584317,
									"parameters": {
										"tag": "\"BGM\"",
										"type": "low-pass",
										"frequency": "350",
										"detune": "0",
										"q": "1",
										"gain": "0",
										"mix": "0"
									}
								},
								{
									"id": "add-filter-effect",
									"objectClass": "Audio",
									"sid": 977114331419299,
									"parameters": {
										"tag": "\"SFX\"",
										"type": "low-pass",
										"frequency": "350",
										"detune": "0",
										"q": "1",
										"gain": "0",
										"mix": "0"
									}
								}
							],
							"sid": 329889327525822
						}
					]
				}
			],
			"sid": 804068287598964
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Hide tutorial when [Space] is pressed."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 863346032905162,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Fader",
							"sid": 873086473530400,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 633952687696274,
							"parameters": {
								"value": "inputFocus = \"Tutorial\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 819320563498607,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTutorial",
							"sid": 154435310801411,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTextTutorial\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextCoralsSaved",
							"sid": 366100280699057,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowCoralsSavedCount\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 512297539104314,
							"parameters": {
								"seconds": "0.1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 571943171128278,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"Game\""
							}
						}
					],
					"sid": 184245463668670
				}
			],
			"sid": 634417841237735
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Lerp camera to player's position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 537704942024427
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 945944172468291,
							"parameters": {
								"x": "lerp(scrollx, Player.X, 2 * dt)",
								"y": "lerp(scrolly, Player.Y, 2 * dt)"
							}
						}
					],
					"sid": 236689370329071
				}
			],
			"sid": 505716084244778
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player Actions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Wrapper for Set Animation that takes into consideration some conditions."
				},
				{
					"aceType": "action",
					"aceName": "SwimAnimation",
					"objectClass": "Player",
					"functionDescription": "Wrapper for Set Animation that takes into consideration some conditions",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "anim",
							"type": "string",
							"initialValue": "",
							"comment": "Animation name",
							"sid": 753773682881739
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [],
					"sid": 196925669700720,
					"children": [
						{
							"eventType": "comment",
							"text": "Seeding animation takes precedence over any other and always starts from the beginning."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 752543449495062,
									"parameters": {
										"value": "anim = \"Seed\""
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 152985195046366,
									"parameters": {
										"animation": "anim",
										"from": "beginning"
									}
								}
							],
							"sid": 942562756604459
						},
						{
							"eventType": "comment",
							"text": "Other animations play when the player is not seeding."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 680303690940312
								},
								{
									"id": "is-animation-playing",
									"objectClass": "Player",
									"sid": 918316555567040,
									"parameters": {
										"animation": "\"Seed\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 301043936250636,
									"parameters": {
										"animation": "anim",
										"from": "current-frame"
									}
								}
							],
							"sid": 552307407773996
						}
					]
				}
			],
			"sid": 743421588104672
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Underwater Check",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "fadeTime",
					"type": "number",
					"initialValue": "0.5",
					"comment": "Fade time between in/out of water.",
					"isStatic": false,
					"isConstant": true,
					"sid": 655834576186443
				},
				{
					"eventType": "comment",
					"text": "Play surfacing effect and remove underwater atmosphere, by removing applied sound effects. Stop bubble particles and change underwater state of the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerNose",
							"sid": 178700684764982,
							"parameters": {
								"object": "Oxygen"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 108063861272621,
							"parameters": {
								"instance-variable": "underwater"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "Player",
							"sid": 836064432929436,
							"parameters": {
								"child": "BubbleParticles",
								"which": "own"
							}
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 476251174899682
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Audio",
							"sid": 760248937509493,
							"parameters": {
								"tag": "\"BGM\"",
								"index": "0",
								"parameter": "mix",
								"value": "0",
								"ramp": "linear",
								"time": "fadeTime"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "Audio",
							"sid": 762983371977962,
							"parameters": {
								"tag": "\"SFX\"",
								"index": "0",
								"parameter": "mix",
								"value": "0",
								"ramp": "linear",
								"time": "fadeTime"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 805686674706582,
							"parameters": {
								"tag": "\"underwater\"",
								"db": "-Infinity",
								"duration": "fadeTime",
								"ending": "keep-playing"
							}
						},
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 265856616450293,
							"parameters": {
								"audio-file": "exit_water",
								"loop": "not-looping",
								"volume": "0",
								"stereo-pan": "0",
								"tag-optional": "\"exit_water\""
							}
						},
						{
							"id": "set-rate",
							"objectClass": "BubbleParticles",
							"sid": 739017337520062,
							"parameters": {
								"rate": "0"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 673953830639933,
							"parameters": {
								"instance-variable": "underwater",
								"value": "false"
							}
						}
					],
					"sid": 403409606278723
				},
				{
					"eventType": "comment",
					"text": "Play diving effect and create an underwater atmosphere by applying effects to the audio. Start bubble particles and change underwater state of the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerNose",
							"sid": 912265733015499,
							"parameters": {
								"object": "Water"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 139965493012090,
							"parameters": {
								"instance-variable": "underwater"
							},
							"isInverted": true
						},
						{
							"id": "trigger-once-while-true",
							"objectClass": "System",
							"sid": 616248140718458
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Audio",
							"sid": 118531883458520,
							"parameters": {
								"tag": "\"BGM\"",
								"index": "0",
								"parameter": "mix",
								"value": "100",
								"ramp": "linear",
								"time": "fadeTime"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "Audio",
							"sid": 662934964613481,
							"parameters": {
								"tag": "\"SFX\"",
								"index": "0",
								"parameter": "mix",
								"value": "100",
								"ramp": "linear",
								"time": "fadeTime"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 607068624762360,
							"parameters": {
								"tag": "\"underwater\"",
								"db": "0",
								"duration": "fadeTime",
								"ending": "keep-playing"
							}
						},
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 100266118829130,
							"parameters": {
								"audio-file": "enter_water",
								"loop": "not-looping",
								"volume": "0",
								"stereo-pan": "0",
								"tag-optional": "\"enter_water\""
							}
						},
						{
							"id": "set-rate",
							"objectClass": "BubbleParticles",
							"sid": 293622846790289,
							"parameters": {
								"rate": "4"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Player",
							"sid": 260707179039365,
							"parameters": {
								"instance-variable": "underwater",
								"value": "true"
							}
						}
					],
					"sid": 276754679931913
				}
			],
			"sid": 512650816064723
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player Animations",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player finished seeding."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-finished",
							"objectClass": "Player",
							"sid": 851208257166676,
							"parameters": {
								"animation": "\"Seed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 120644082755434,
							"parameters": {
								"animation": "\"Idle\"",
								"from": "beginning"
							}
						}
					],
					"sid": 413755980895809
				},
				{
					"eventType": "comment",
					"text": "Make splash sounds when swimming on the surface."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-animation-frame-changed",
							"objectClass": "Player",
							"sid": 885700624450023
						},
						{
							"id": "compare-animation-frame",
							"objectClass": "Player",
							"sid": 374572293820863,
							"parameters": {
								"comparison": 0,
								"number": "3"
							}
						},
						{
							"id": "is-animation-playing",
							"objectClass": "Player",
							"sid": 532696187505543,
							"parameters": {
								"animation": "\"Swim\""
							}
						},
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 384962279168939,
							"parameters": {
								"object": "Oxygen"
							}
						}
					],
					"actions": [
						{
							"id": "play-by-name",
							"objectClass": "Audio",
							"sid": 454459095202346,
							"parameters": {
								"folder": "sounds",
								"audio-file-name": "\"swim\" & choose(0, 1, 2, 3, 4)",
								"loop": "not-looping",
								"volume": "-10",
								"stereo-pan": "0",
								"tag-optional": "\"SFX\""
							}
						}
					],
					"sid": 339130192894647
				}
			],
			"sid": 315385847817976
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "HorizontalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "Horizontal input axis",
					"isStatic": false,
					"isConstant": false,
					"sid": 462277268490064
				},
				{
					"eventType": "variable",
					"name": "VerticalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "Vertical input axis",
					"isStatic": false,
					"isConstant": false,
					"sid": 137263570272840
				},
				{
					"eventType": "comment",
					"text": "Compute instant horizontal and vertical movement variables."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-animation-playing",
							"objectClass": "Player",
							"sid": 277694999853911,
							"parameters": {
								"animation": "\"Seed\""
							},
							"isInverted": true
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 232184124770258,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						}
					],
					"actions": [],
					"sid": 880511835109077,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 468429826154308,
									"parameters": {
										"key": 40
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 523743361051053,
									"parameters": {
										"variable": "VerticalAxis",
										"value": "VerticalAxis + 1"
									}
								}
							],
							"sid": 307258857160624
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 807417328823516,
									"parameters": {
										"key": 38
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 524107955733695,
									"parameters": {
										"variable": "VerticalAxis",
										"value": "VerticalAxis - 1"
									}
								}
							],
							"sid": 847186476842115
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 619677220479361,
									"parameters": {
										"key": 39
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 279830611078847,
									"parameters": {
										"variable": "HorizontalAxis",
										"value": "HorizontalAxis + 1"
									}
								}
							],
							"sid": 461382229881181
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 711477443540512,
									"parameters": {
										"key": 37
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 888176574768152,
									"parameters": {
										"variable": "HorizontalAxis",
										"value": "HorizontalAxis - 1"
									}
								}
							],
							"sid": 478309951743932
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If both the horizontal and vertical axes are 0, the player is not swimming."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 534537699065408,
							"parameters": {
								"value": "HorizontalAxis = 0"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 515399383572961,
							"parameters": {
								"value": "VerticalAxis = 0"
							}
						}
					],
					"actions": [
						{
							"customAction": "SwimAnimation",
							"objectClass": "Player",
							"sid": 192345607248868,
							"parameters": [
								"\"Idle\""
							]
						}
					],
					"sid": 883041331438841
				},
				{
					"eventType": "comment",
					"text": "Swim left."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 574951745096373,
							"parameters": {
								"value": "HorizontalAxis < 0"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 407960836698419,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "left"
							}
						},
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 522151680939836,
							"parameters": {
								"state": "mirrored"
							}
						},
						{
							"customAction": "SwimAnimation",
							"objectClass": "Player",
							"sid": 785702508522614,
							"parameters": [
								"\"Swim\""
							]
						}
					],
					"sid": 556922959361390
				},
				{
					"eventType": "comment",
					"text": "Swim right."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 569024081047636,
							"parameters": {
								"value": "HorizontalAxis > 0"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 924738699417677,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "right"
							}
						},
						{
							"id": "set-mirrored",
							"objectClass": "Player",
							"sid": 820572196817909,
							"parameters": {
								"state": "not-mirrored"
							}
						},
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 196839516789314,
							"parameters": {
								"animation": "\"Swim\"",
								"from": "current-frame"
							}
						},
						{
							"customAction": "SwimAnimation",
							"objectClass": "Player",
							"sid": 795015070961322,
							"parameters": [
								"\"Swim\""
							]
						}
					],
					"sid": 544947388379867
				},
				{
					"eventType": "comment",
					"text": "Raise."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 679119899075563,
							"parameters": {
								"value": "VerticalAxis < 0"
							}
						}
					],
					"actions": [],
					"sid": 792212362598380,
					"children": [
						{
							"eventType": "comment",
							"text": "Only raise if the nose is not in a oxygen area."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "PlayerNose",
									"sid": 904585063271579,
									"parameters": {
										"object": "Oxygen"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "simulate-control",
									"objectClass": "Player",
									"sid": 738629965304888,
									"behaviorType": "8Direction",
									"parameters": {
										"control": "up"
									}
								},
								{
									"customAction": "SwimAnimation",
									"objectClass": "Player",
									"sid": 617299769961524,
									"parameters": [
										"\"Swim\""
									]
								}
							],
							"sid": 260627090378062
						},
						{
							"eventType": "comment",
							"text": "If the nose is inside an oxygen area, play the idle animation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 760938159133332
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 423666760673634,
									"parameters": {
										"value": "HorizontalAxis = 0"
									}
								}
							],
							"actions": [
								{
									"customAction": "SwimAnimation",
									"objectClass": "Player",
									"sid": 627169730324415,
									"parameters": [
										"\"Idle\""
									]
								}
							],
							"sid": 963785157317060
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Dive / go deeper."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 545460031018039,
							"parameters": {
								"value": "VerticalAxis > 0"
							}
						}
					],
					"actions": [
						{
							"id": "simulate-control",
							"objectClass": "Player",
							"sid": 739406722974167,
							"behaviorType": "8Direction",
							"parameters": {
								"control": "down"
							}
						},
						{
							"customAction": "SwimAnimation",
							"objectClass": "Player",
							"sid": 471083480203037,
							"parameters": [
								"\"Swim\""
							]
						}
					],
					"sid": 237243005032434
				},
				{
					"eventType": "comment",
					"text": "If the player is overlapping an oxygen object, reduce player up speed and set minimum Y position."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "PlayerNose",
							"sid": 241209675219813,
							"parameters": {
								"object": "Oxygen"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 336493550196555,
							"parameters": {
								"value": "Player.8Direction.VectorY < 0"
							}
						}
					],
					"actions": [
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 298875738470052,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "Self.8Direction.VectorY + 200 * dt"
							}
						},
						{
							"id": "set-y",
							"objectClass": "Player",
							"sid": 556682435860984,
							"parameters": {
								"y": "max(Self.Y, (Oxygen.Y+Oxygen.BBoxBottom)/2)"
							}
						}
					],
					"sid": 848261756876177
				}
			],
			"sid": 902029938028923
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Magical Seeds",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Spawn magical seeds."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 278032936637010,
							"parameters": {
								"key": 32
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 519264654575517,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 246148675892456,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"SeedsCooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Play seeding animation."
						},
						{
							"customAction": "SwimAnimation",
							"objectClass": "Player",
							"sid": 609166369626232,
							"parameters": [
								"\"Seed\""
							]
						},
						{
							"type": "comment",
							"text": "Wait a little."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 823061640509482,
							"parameters": {
								"seconds": "0.33"
							}
						},
						{
							"type": "comment",
							"text": "Slow player down."
						},
						{
							"id": "set-speed",
							"objectClass": "Player",
							"sid": 712012405798012,
							"behaviorType": "8Direction",
							"parameters": {
								"speed": "min(Player.8Direction.Speed, 20)"
							}
						},
						{
							"type": "comment",
							"text": "Create seeds particles."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 229454375789244,
							"parameters": {
								"object-to-create": "Seeds",
								"layer": "\"Game\"",
								"x": "Player.X",
								"y": "Player.Y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Create logical seeds."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 959385452684659,
							"parameters": {
								"object-to-create": "LogicalSeeds",
								"layer": "\"Game\"",
								"x": "Player.X",
								"y": "Player.Y - 16",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Move logical part of the seeds down."
						},
						{
							"id": "tween-one-property",
							"objectClass": "LogicalSeeds",
							"sid": 987224004911941,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveLogicalSeeds\"",
								"property": "offsetY",
								"end-value": "Self.Y + 80",
								"time": "2.5",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Start cooldown so that the player ia unable to spam seeds."
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 883306047130266,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "once",
								"tag": "\"SeedsCooldown\""
							}
						}
					],
					"sid": 282933449686149
				},
				{
					"eventType": "comment",
					"text": "When a coral collides with logical seeds, it becomes full of life."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Coral",
							"sid": 552946658129512,
							"parameters": {
								"object": "LogicalSeeds"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 807794368053610,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Coral",
							"sid": 883981848188423,
							"parameters": {
								"instance-variable": "fullOfLIfe"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Make coral colorful."
						},
						{
							"id": "tween-value",
							"objectClass": "Coral",
							"sid": 947528322039316,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"CoralFullOfLife\"",
								"start-value": "0",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "Coral",
							"sid": 483121843770343,
							"parameters": {
								"instance-variable": "fullOfLIfe",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Destroy logical seeds."
						},
						{
							"id": "destroy",
							"objectClass": "LogicalSeeds",
							"sid": 350732296474867
						},
						{
							"type": "comment",
							"text": "Update corals saved count."
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 707551816355937,
							"parameters": {
								"variable": "CoralsSaved",
								"value": "1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "TextCoralsSaved",
							"sid": 936366468707580,
							"parameters": {
								"text": "zeropad(CoralsSaved, 2) & \"/\" & zeropad(Coral.Count, 2)"
							}
						}
					],
					"sid": 554805832708236,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 377494268328413,
									"parameters": {
										"value": "CoralsSaved = Coral.Count"
									}
								}
							],
							"actions": [
								{
									"callFunction": "restartGame",
									"sid": 861231941576013,
									"parameters": [
										"\"SUCCESS\""
									]
								}
							],
							"sid": 760123900109496
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Make coral colorful."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 609153196428065,
							"parameters": {
								"object": "Coral"
							}
						},
						{
							"id": "is-playing",
							"objectClass": "Coral",
							"sid": 580670908877269,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"CoralFullOfLife\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Coral",
							"sid": 444484685960824,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "1",
								"value": "Self.Tween.Value(\"CoralFullOfLife\")"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "Coral",
							"sid": 398682834839672,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "120 - Self.Tween.Value(\"CoralFullOfLife\")/5"
							}
						}
					],
					"sid": 938534687111673
				}
			],
			"sid": 160639405898069
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Oxygen",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Consume oxygen when the player is underwater."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Player",
							"sid": 898092093355855,
							"parameters": {
								"instance-variable": "underwater"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 875558363691210,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						}
					],
					"actions": [
						{
							"id": "set-width",
							"objectClass": "OxygenAmount",
							"sid": 183894594125100,
							"parameters": {
								"width": "max(Self.Width - Player.oxyDepletionConst * dt, 0)"
							}
						}
					],
					"sid": 906676865421972,
					"children": [
						{
							"eventType": "comment",
							"text": "Player ran out of oxygen."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-width",
									"objectClass": "OxygenAmount",
									"sid": 667773898623799,
									"parameters": {
										"comparison": 0,
										"width": "0"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 950577435703918,
									"parameters": {
										"value": "inputFocus = \"Game\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "restartGame",
									"sid": 609064979087780,
									"parameters": [
										"\"FAIL\""
									]
								}
							],
							"sid": 540971031729296
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Otherwise, replenish it."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 807718679319622
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 821846709481557,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						}
					],
					"actions": [
						{
							"id": "set-width",
							"objectClass": "OxygenAmount",
							"sid": 528338158875554,
							"parameters": {
								"width": "min(Self.Width + Player.oxyRepletionConst * dt, OxygenBar.Width - 2)"
							}
						}
					],
					"sid": 576553883273231
				}
			],
			"sid": 658634783293614
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Over",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"functionName": "restartGame",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "status",
							"type": "string",
							"initialValue": "",
							"comment": "Game over status (SUCCESS or FAIL)",
							"sid": 335268732750075
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Destroy all logical seeds."
						},
						{
							"id": "destroy",
							"objectClass": "LogicalSeeds",
							"sid": 490019955233921
						},
						{
							"type": "comment",
							"text": "Set input focus to Restart."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 191097303917801,
							"parameters": {
								"variable": "inputFocus",
								"value": "\"Restart\""
							}
						},
						{
							"type": "comment",
							"text": "Stop the player."
						},
						{
							"id": "set-speed",
							"objectClass": "Player",
							"sid": 946533284289161,
							"behaviorType": "8Direction",
							"parameters": {
								"speed": "min(Player.8Direction.Speed, 10)"
							}
						},
						{
							"type": "comment",
							"text": "Wait a little before showing the fader."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 565841095597115,
							"parameters": {
								"seconds": "1.0"
							}
						},
						{
							"type": "comment",
							"text": "Show fader."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 784991090791804,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextGameOver",
							"sid": 758123405571922,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowGameOver\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set game over text and color according to status."
						},
						{
							"id": "set-text",
							"objectClass": "TextGameOver",
							"sid": 886645557316836,
							"parameters": {
								"text": "status"
							}
						},
						{
							"id": "set-default-color",
							"objectClass": "TextGameOver",
							"sid": 108166425911926,
							"parameters": {
								"color": "status = \"SUCCESS\" ? rgba255(87, 206, 52, 255) : rgba255(206, 0, 0, 255)"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextCoralsSaved",
							"sid": 449147677070234,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideCoralsSavedCount\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Wait a little."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 732874913845352,
							"parameters": {
								"seconds": "4.0"
							}
						},
						{
							"type": "comment",
							"text": "Hide game over text and restart the game."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextGameOver",
							"sid": 570508389691543,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideGameOver\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 738391190250222
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 854366272156371
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 787001076643859
						}
					],
					"sid": 380371111667806
				}
			],
			"sid": 980132855889088
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Piranha",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Set piranhas initial waypoints."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 266512071828995
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 567302412994237,
							"parameters": {
								"object": "Piranha"
							}
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 495868351895299,
							"parameters": {
								"object": "PiranhaWpt",
								"expression": "(PiranhaWpt.piranhaID = Piranha.piranhaID) & (PiranhaWpt.wptID = Piranha.nextWpt)"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Set path and move."
						},
						{
							"id": "move-to-object",
							"objectClass": "Piranha",
							"sid": 775746862261804,
							"behaviorType": "MoveTo",
							"parameters": {
								"object": "PiranhaWpt",
								"image-point": "0",
								"mode": "direct"
							}
						}
					],
					"sid": 880573566359240
				},
				{
					"eventType": "comment",
					"text": "Piranha reached waypoint, therefore, go to the next one."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-arrived",
							"objectClass": "Piranha",
							"sid": 754468271669991,
							"behaviorType": "MoveTo"
						}
					],
					"actions": [],
					"sid": 252203010658796,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 804039997399321,
									"parameters": {
										"object": "PiranhaWpt",
										"expression": "(PiranhaWpt.piranhaID = Piranha.piranhaID) & (PiranhaWpt.wptID = Piranha.nextWpt)"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Set new next waypoint."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Piranha",
									"sid": 253610123655274,
									"parameters": {
										"instance-variable": "nextWpt",
										"value": "(Self.nextWpt + 1) % Self.wptCount"
									}
								}
							],
							"sid": 547502230368696,
							"children": [
								{
									"eventType": "comment",
									"text": "Piranha should be mirrored upon reaching certain waypoints."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "PiranhaWpt",
											"sid": 280655403217577,
											"parameters": {
												"instance-variable": "mirrorPiranha"
											}
										}
									],
									"actions": [
										{
											"id": "set-width",
											"objectClass": "Piranha",
											"sid": 654773973513535,
											"parameters": {
												"width": "-Self.Width"
											}
										}
									],
									"sid": 737452966400435
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Go to the next waypoint."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 763804488522322,
									"parameters": {
										"object": "PiranhaWpt",
										"expression": "(PiranhaWpt.piranhaID = Piranha.piranhaID) & (PiranhaWpt.wptID = Piranha.nextWpt)"
									}
								}
							],
							"actions": [
								{
									"id": "move-to-object",
									"objectClass": "Piranha",
									"sid": 267216248451815,
									"behaviorType": "MoveTo",
									"parameters": {
										"object": "PiranhaWpt",
										"image-point": "0",
										"mode": "direct"
									}
								}
							],
							"sid": 618467771659058
						}
					]
				},
				{
					"eventType": "comment",
					"text": "If the player collides with a Piranha, it's game over!"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 596258234364334,
							"parameters": {
								"object": "Piranha"
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 625315505543449,
							"parameters": {
								"value": "inputFocus = \"Game\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "restartGame",
							"sid": 240177661417234,
							"parameters": [
								"\"FAIL\""
							]
						},
						{
							"id": "stop",
							"objectClass": "Piranha",
							"sid": 231909262741080,
							"behaviorType": "MoveTo"
						}
					],
					"sid": 521596954675408
				}
			],
			"sid": 195205491429708
		}
	],
	"sid": 181524728494313
}