{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Forsteri Studios\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com"
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "lastType",
			"type": "string",
			"initialValue": "0",
			"comment": "Last marble type.",
			"isStatic": false,
			"isConstant": false,
			"sid": 110545624308238
		},
		{
			"eventType": "variable",
			"name": "progressSpeed",
			"type": "number",
			"initialValue": "20000",
			"comment": "How fast the game is moving.",
			"isStatic": false,
			"isConstant": false,
			"sid": 641437294053287
		},
		{
			"eventType": "variable",
			"name": "canSpawn",
			"type": "boolean",
			"initialValue": "true",
			"comment": "Can the marbles spawn?",
			"isStatic": false,
			"isConstant": false,
			"sid": 615394040603205
		},
		{
			"eventType": "variable",
			"name": "tutorial",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the tutorial up?",
			"isStatic": false,
			"isConstant": false,
			"sid": 698844699220249
		},
		{
			"eventType": "variable",
			"name": "gameOver",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game over?",
			"isStatic": false,
			"isConstant": false,
			"sid": 868435486647007
		},
		{
			"eventType": "variable",
			"name": "lives",
			"type": "number",
			"initialValue": "10",
			"comment": "Player's amount of lives.",
			"isStatic": false,
			"isConstant": false,
			"sid": 232760845806959
		},
		{
			"eventType": "variable",
			"name": "marblesDestroyed",
			"type": "number",
			"initialValue": "0",
			"comment": "Number of marbles destroyed by the player.",
			"isStatic": false,
			"isConstant": false,
			"sid": 615022940597173
		},
		{
			"eventType": "comment",
			"text": "Settings."
		},
		{
			"eventType": "variable",
			"name": "STARTING_PROGRESS",
			"type": "number",
			"initialValue": "528",
			"comment": "Starting progress value for the marbles.",
			"isStatic": false,
			"isConstant": true,
			"sid": 927833242384463
		},
		{
			"eventType": "variable",
			"name": "MARBLE_SPEEDUP",
			"type": "number",
			"initialValue": "250",
			"comment": "How much each marble destroyed speeds up the game.",
			"isStatic": false,
			"isConstant": true,
			"sid": 787794091106390
		},
		{
			"eventType": "variable",
			"name": "MARBLE_SLOWDOWN",
			"type": "number",
			"initialValue": "2000",
			"comment": "How much the game slows down every time the player loses a life.",
			"isStatic": false,
			"isConstant": true,
			"sid": 437748689476933
		},
		{
			"eventType": "variable",
			"name": "PLAYER_COOLDOWN",
			"type": "number",
			"initialValue": "1",
			"comment": "Cooldown before the player can shoot again.",
			"isStatic": false,
			"isConstant": true,
			"sid": 981676738622973
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Start marble spawn."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 448141884470580
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide in-game UI."
						},
						{
							"id": "set-opacity",
							"objectClass": "TextLives",
							"sid": 834463586476974,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "TextMarbles",
							"sid": 629232273653633,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "Icons",
							"sid": 552910300068613,
							"parameters": {
								"opacity": "0"
							}
						},
						{
							"type": "comment",
							"text": "Disable gameplay groups."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 608013118067150,
							"parameters": {
								"group-name": "\"Marble\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 905107561874554,
							"parameters": {
								"group-name": "\"Controls\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Reset all global variables."
						},
						{
							"id": "reset-global-variables",
							"objectClass": "System",
							"sid": 595163065562765,
							"parameters": {
								"reset-static": true
							}
						},
						{
							"type": "comment",
							"text": "Randomize lastType variable."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 111721951866392,
							"parameters": {
								"variable": "lastType",
								"value": "choose(1, 2, 3, 4, 5, 6)"
							}
						},
						{
							"type": "comment",
							"text": "Reset arrays."
						},
						{
							"id": "set-size",
							"objectClass": "ArrInChain",
							"sid": 258137490139559,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"id": "set-size",
							"objectClass": "ArrMarbles",
							"sid": 333749850650584,
							"parameters": {
								"width": "0",
								"height": "1",
								"depth": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set a random player animation."
						},
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 689648227530374,
							"parameters": {
								"animation": "str(choose(1, 2, 3, 4, 5, 6))",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Load offsets array."
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 779845617220803,
							"parameters": {
								"tag": "\"offsets\"",
								"file": "Offsets.json"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 921159192898854
						},
						{
							"id": "load",
							"objectClass": "ArrOffsets",
							"sid": 977267202378904,
							"parameters": {
								"json": "AJAX.LastData"
							}
						},
						{
							"type": "comment",
							"text": "Change fader opacity and show tutorial."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 120043494428022,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Fader80\"",
								"property": "offsetOpacity",
								"end-value": "80",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTutorial",
							"sid": 911740645977902,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTutorial\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set tutorial mode."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 733873370846176
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 945926630053202,
							"parameters": {
								"variable": "tutorial",
								"value": "true"
							}
						}
					],
					"sid": 678773169186393
				},
				{
					"eventType": "comment",
					"text": "Close the tutorial and start the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 219311097285119
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 832697207352589,
							"parameters": {
								"variable": "tutorial"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Hide fader."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 563925968123629,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextTutorial",
							"sid": 695707136523055,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorial\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Disable tutorial mode."
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 996267957756745,
							"parameters": {
								"variable": "tutorial",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Enable gameplay groups."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 908920880609457
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 768603149574731,
							"parameters": {
								"group-name": "\"Marble\"",
								"state": "activated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 990825286127668,
							"parameters": {
								"group-name": "\"Controls\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "Show in-game UI."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 557476943269224
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextLives",
							"sid": 963213159125049,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTextLives\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextMarbles",
							"sid": 500927283847459,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTextMarbles\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Icons",
							"sid": 383102470174810,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowIcons\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 487646978208278
				}
			],
			"sid": 391135384498377
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Over",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Restart the game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 794995981564084
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 481719900346743,
							"parameters": {
								"variable": "gameOver"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Change fader opacity."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 220915817071501,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"Fader100\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextGameOver",
							"sid": 784648368846064,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorial\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Disable tutorial mode."
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 517232500995230,
							"parameters": {
								"variable": "gameOver",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Restart the game."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 670807358438824
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 851360846745455
						}
					],
					"sid": 666256284249146
				}
			],
			"sid": 343317649300504
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Controls",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player aim follows the mouse."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-movement",
							"objectClass": "Mouse",
							"sid": 721118271888963
						}
					],
					"actions": [
						{
							"id": "set-angle-toward-position",
							"objectClass": "Player",
							"sid": 159946346114171,
							"parameters": {
								"x": "Mouse.X",
								"y": "Mouse.Y"
							}
						}
					],
					"sid": 668594904447242
				},
				{
					"eventType": "comment",
					"text": "Click to shoot."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "mouse-button-is-down",
							"objectClass": "Mouse",
							"sid": 117471448643169,
							"parameters": {
								"mouse-button": "left"
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "Player",
							"sid": 621239808965000,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"cooldown\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Create bullet."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 956617471254052,
							"parameters": {
								"object-to-create": "Bullet",
								"layer": "\"Game\"",
								"x": "Player.ImagePointX(\"FireSpot\")",
								"y": "Player.ImagePointY(\"FireSpot\")",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Scale up animation."
						},
						{
							"id": "set-scale",
							"objectClass": "Bullet",
							"sid": 555278680181037,
							"parameters": {
								"scale": "0.01"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "Bullet",
							"sid": 221667757370579,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"BulletScale\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.1",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set animation and angle according to the player."
						},
						{
							"id": "set-animation",
							"objectClass": "Bullet",
							"sid": 180138444340162,
							"parameters": {
								"animation": "Player.AnimationName",
								"from": "beginning"
							}
						},
						{
							"id": "set-angle-of-motion",
							"objectClass": "Bullet",
							"sid": 142000473265930,
							"behaviorType": "Bullet",
							"parameters": {
								"angle": "Player.Angle"
							}
						},
						{
							"type": "comment",
							"text": "Create muzzle flash."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 657373492380709,
							"parameters": {
								"object-to-create": "MuzzleFlash",
								"layer": "\"Game\"",
								"x": "Player.ImagePointX(\"Muzzle\")",
								"y": "Player.ImagePointY(\"Muzzle\")",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "MuzzleFlash",
							"sid": 694358833614884,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideMuzzle\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Move player to the top of the layer."
						},
						{
							"id": "move-to-top",
							"objectClass": "Player",
							"sid": 743300994246162
						},
						{
							"type": "comment",
							"text": "Choose next player animation (will decide the next bullet color)."
						},
						{
							"id": "set-animation",
							"objectClass": "Player",
							"sid": 731515620846966,
							"parameters": {
								"animation": "str(choose(1, 2, 3, 4, 5, 6))",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Start a cooldown timer before the player can shoot again."
						},
						{
							"id": "start-timer",
							"objectClass": "Player",
							"sid": 665180423576467,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "PLAYER_COOLDOWN",
								"type": "once",
								"tag": "\"cooldown\""
							}
						}
					],
					"sid": 827748610430452
				}
			],
			"sid": 376555340479219
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Marble",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Marble Functions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Create a new marble from scratch."
						},
						{
							"functionName": "createMarbleFromScratch",
							"functionDescription": "Create a new marble from scratch",
							"functionCategory": "Marble",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 211450842174359,
									"parameters": {
										"object-to-create": "Marble",
										"layer": "\"Game\"",
										"x": "-9999",
										"y": "-9999",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "tween-value",
									"objectClass": "Marble",
									"sid": 732643011715366,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MarbleFlash\"",
										"start-value": "200",
										"end-value": "100",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "Marble",
									"sid": 257123833367794,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MarbleScale\"",
										"property": "scale",
										"end-x": "1.5",
										"end-y": "1.5",
										"time": "0.1",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Set marble color."
								},
								{
									"id": "set-animation",
									"objectClass": "Marble",
									"sid": 306776614412726,
									"parameters": {
										"animation": "str(choose(1, 2, 3, 4, 5, 6, lastType, lastType, lastType))",
										"from": "beginning"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 413943710980250,
									"parameters": {
										"variable": "lastType",
										"value": "Marble.AnimationName"
									}
								},
								{
									"type": "comment",
									"text": "Set marble progress."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Marble",
									"sid": 667339312086748,
									"parameters": {
										"instance-variable": "progress",
										"value": "STARTING_PROGRESS"
									}
								},
								{
									"type": "comment",
									"text": "Add Marble to queue."
								},
								{
									"id": "push",
									"objectClass": "ArrMarbles",
									"sid": 135701911543407,
									"parameters": {
										"where": "back",
										"value": "Marble.UID",
										"axis": "x"
									}
								}
							],
							"sid": 359684769788135
						},
						{
							"eventType": "comment",
							"text": "Update marble positions."
						},
						{
							"functionName": "updatePositions",
							"functionDescription": "Update marble positions",
							"functionCategory": "Marble",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 613860736003637,
							"children": [
								{
									"eventType": "variable",
									"name": "lastMarbleProgress",
									"type": "number",
									"initialValue": "528",
									"comment": "Progress of the last marble",
									"isStatic": false,
									"isConstant": false,
									"sid": 285151499522812
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 207980110412626,
											"parameters": {
												"name": "\"i\"",
												"start-index": "ArrMarbles.Width - 1",
												"end-index": "0"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "Marble",
											"sid": 336429044829608,
											"parameters": {
												"unique-id": "ArrMarbles.At(ArrMarbles.Width - 1 - loopindex(\"i\"))"
											}
										}
									],
									"actions": [
										{
											"id": "tween-value",
											"objectClass": "Marble",
											"sid": 479893496812009,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PlaceChain\"",
												"start-value": "Self.progress",
												"end-value": "STARTING_PROGRESS - ArrOffsets.At(0, loopindex(\"i\"))",
												"time": "1/6",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 834875098902312
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Get marble index in array."
						},
						{
							"functionName": "getIdx",
							"functionDescription": "Get marble index in array",
							"functionCategory": "Marble",
							"functionReturnType": "number",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "uid",
									"type": "number",
									"initialValue": "0",
									"comment": "Marble UID",
									"sid": 960272810641149
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 283921979021169,
							"children": [
								{
									"eventType": "variable",
									"name": "returnIdx",
									"type": "number",
									"initialValue": "999",
									"comment": "Index to return.",
									"isStatic": false,
									"isConstant": false,
									"sid": 196607065357266
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 283988188748521,
											"parameters": {
												"name": "\"i\"",
												"start-index": "0",
												"end-index": "ArrMarbles.Width - 1"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 220310903163108,
											"parameters": {
												"value": "ArrMarbles.At(loopindex(\"i\")) = uid"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 978628760801624,
											"parameters": {
												"variable": "returnIdx",
												"value": "loopindex"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 668008787532148
										}
									],
									"sid": 924927703293274
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-function-return-value",
											"objectClass": "Functions",
											"sid": 134666848291579,
											"parameters": {
												"value": "returnIdx"
											}
										}
									],
									"sid": 315625356202719
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Apply chain reaction when a marble is destroyed."
						},
						{
							"functionName": "marbleDestroyChain",
							"functionDescription": "Apply chain reaction when a marble is destroyed",
							"functionCategory": "Marble",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "idx",
									"type": "number",
									"initialValue": "0",
									"comment": "Array index where a chain reaction should start",
									"sid": 103362965040179
								},
								{
									"name": "marbleType",
									"type": "string",
									"initialValue": "",
									"comment": "Type of the marble that started the chain reaction",
									"sid": 506656826037553
								},
								{
									"name": "marbleUID",
									"type": "number",
									"initialValue": "0",
									"comment": "UID of the marble that started the chain reaction",
									"sid": 642814922189259
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-size",
									"objectClass": "ArrInChain",
									"sid": 960105412494199,
									"parameters": {
										"width": "0",
										"height": "1",
										"depth": "1"
									}
								}
							],
							"sid": 150071438186761,
							"children": [
								{
									"eventType": "variable",
									"name": "inChain",
									"type": "number",
									"initialValue": "0",
									"comment": "Number of marbles in the chain reaction.",
									"isStatic": false,
									"isConstant": false,
									"sid": 352114006828695
								},
								{
									"eventType": "variable",
									"name": "frontmost",
									"type": "number",
									"initialValue": "-1",
									"comment": "Frontmost marble in the chain reaction.",
									"isStatic": false,
									"isConstant": false,
									"sid": 707036304986416
								},
								{
									"eventType": "comment",
									"text": "Process marbles to the front."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 417737554185832
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "Marble",
											"sid": 830762874380565,
											"parameters": {
												"unique-id": "ArrMarbles.At(idx - loopindex - 1)"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "Marble",
											"sid": 286130036661028,
											"parameters": {
												"animation": "marbleType"
											}
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "ArrInChain",
											"sid": 543656631914126,
											"parameters": {
												"where": "back",
												"value": "Marble.UID",
												"axis": "x"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 539863713749482,
											"parameters": {
												"variable": "inChain",
												"value": "1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 117020632270558,
											"parameters": {
												"variable": "frontmost",
												"value": "idx - loopindex - 1"
											}
										}
									],
									"sid": 950086219006693
								},
								{
									"eventType": "comment",
									"text": "Check if frontmost is -1. In this case, the frontmost element should be the chain effect starter."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 576913832105223,
											"parameters": {
												"value": "frontmost = -1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 451396341016746,
											"parameters": {
												"variable": "frontmost",
												"value": "idx"
											}
										}
									],
									"sid": 401049743851096
								},
								{
									"eventType": "comment",
									"text": "Process marbles to the back."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "while",
											"objectClass": "System",
											"sid": 653058235545021
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "Marble",
											"sid": 865115315723130,
											"parameters": {
												"unique-id": "ArrMarbles.At(idx + loopindex + 1)"
											}
										},
										{
											"id": "is-animation-playing",
											"objectClass": "Marble",
											"sid": 633592362772300,
											"parameters": {
												"animation": "marbleType"
											}
										}
									],
									"actions": [
										{
											"id": "push",
											"objectClass": "ArrInChain",
											"sid": 690986613734032,
											"parameters": {
												"where": "back",
												"value": "Marble.UID",
												"axis": "x"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 223876481064552,
											"parameters": {
												"variable": "inChain",
												"value": "1"
											}
										}
									],
									"sid": 796756503992226
								},
								{
									"eventType": "comment",
									"text": "If a chain of at least 3 marbles has been formed, execute chain reaction."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 721989172140289,
											"parameters": {
												"variable": "inChain",
												"comparison": 5,
												"value": "2"
											}
										}
									],
									"actions": [],
									"sid": 952073640246912,
									"children": [
										{
											"eventType": "comment",
											"text": "Destroy chain reaction starter."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-unique-id",
													"objectClass": "Marble",
													"sid": 820641098179775,
													"parameters": {
														"unique-id": "marbleUID"
													}
												}
											],
											"actions": [
												{
													"id": "push",
													"objectClass": "ArrInChain",
													"sid": 638072575590475,
													"parameters": {
														"where": "back",
														"value": "Marble.UID",
														"axis": "x"
													}
												}
											],
											"sid": 494209508164880
										},
										{
											"eventType": "comment",
											"text": "Destroy marbles in the chain."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each-element",
													"objectClass": "ArrInChain",
													"sid": 209934853496971,
													"parameters": {
														"axes": "x"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "Marble",
													"sid": 968321199148881,
													"parameters": {
														"unique-id": "ArrInChain.CurValue"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Player destroy animation."
												},
												{
													"id": "tween-value",
													"objectClass": "Marble",
													"sid": 105077355218191,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"MarbleFlash\"",
														"start-value": "100",
														"end-value": "200",
														"time": "0.25",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "tween-two-properties",
													"objectClass": "Marble",
													"sid": 773776563606851,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"MarbleDestroy\"",
														"property": "scale",
														"end-x": "0",
														"end-y": "0",
														"time": "0.25",
														"ease": "easeinback",
														"destroy-on-complete": "yes",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Update score and UI."
												},
												{
													"id": "add-to-eventvar",
													"objectClass": "System",
													"sid": 195183647190234,
													"parameters": {
														"variable": "marblesDestroyed",
														"value": "1"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TextMarbles",
													"sid": 111509539431358,
													"parameters": {
														"text": "marblesDestroyed"
													}
												},
												{
													"type": "comment",
													"text": "Update game speed."
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 118923059566411,
													"parameters": {
														"variable": "progressSpeed",
														"value": "min(progressSpeed + MARBLE_SPEEDUP, 40000)"
													}
												}
											],
											"sid": 515856609113487
										},
										{
											"eventType": "comment",
											"text": "Move back marbles."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 924301974892390,
													"parameters": {
														"name": "\"i\"",
														"start-index": "0",
														"end-index": "frontmost"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "Marble",
													"sid": 591767613787918,
													"parameters": {
														"unique-id": "ArrMarbles.At(loopindex)"
													}
												}
											],
											"actions": [
												{
													"id": "tween-value",
													"objectClass": "Marble",
													"sid": 245284071169175,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"PlaceChain\"",
														"start-value": "Self.progress",
														"end-value": "max(Self.progress + (progressSpeed/(2*pi*Self.progress)) * (inChain + 1) / 1.1, 157)",
														"time": "0.15",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 896169903162616
										},
										{
											"eventType": "comment",
											"text": "Remove unused indices."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each-element",
													"objectClass": "ArrInChain",
													"sid": 816690208194946,
													"parameters": {
														"axes": "x"
													}
												}
											],
											"actions": [],
											"sid": 696481181885239,
											"children": [
												{
													"eventType": "comment",
													"text": "If the current marble is invalid, delete it."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 839594488986671,
															"parameters": {
																"value": "Functions.getIdx(ArrInChain.CurValue) = 999"
															}
														},
														{
															"id": "pick-by-unique-id",
															"objectClass": "Marble",
															"sid": 646589671158667,
															"parameters": {
																"unique-id": "Functions.getIdx(ArrInChain.CurValue)"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "Marble",
															"sid": 497972938813182
														}
													],
													"sid": 213709772523948
												},
												{
													"eventType": "comment",
													"text": "Otherwise, proceed with the array operation."
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 361959495727527
														}
													],
													"actions": [
														{
															"id": "delete",
															"objectClass": "ArrMarbles",
															"sid": 744077538682511,
															"parameters": {
																"index": "Functions.getIdx(ArrInChain.CurValue)",
																"axis": "x"
															}
														}
													],
													"sid": 309849789234605
												}
											]
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Update positions."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 674901835014666,
											"parameters": {
												"seconds": "0.1"
											}
										},
										{
											"callFunction": "updatePositions",
											"sid": 258469085678048
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 357148189900897,
											"parameters": {
												"seconds": "0.5"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 970401631706016,
											"parameters": {
												"variable": "canSpawn",
												"value": "true"
											}
										}
									],
									"sid": 516918584189627
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Apply chain reaction when a marble is placed."
						},
						{
							"functionName": "marblePlaceChain",
							"functionDescription": "Apply chain reaction when a marble is placed",
							"functionCategory": "Marble",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "UID",
									"type": "number",
									"initialValue": "0",
									"comment": "Marble that started the chain reaction",
									"sid": 168541206075124
								},
								{
									"name": "bulletType",
									"type": "string",
									"initialValue": "",
									"comment": "Type of the bullet",
									"sid": 737936398070374
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 581895601811431,
									"parameters": {
										"variable": "canSpawn",
										"value": "false"
									}
								}
							],
							"sid": 596733828805371,
							"children": [
								{
									"eventType": "variable",
									"name": "marbleIdx",
									"type": "number",
									"initialValue": "0",
									"comment": "Marble index.",
									"isStatic": false,
									"isConstant": false,
									"sid": 490316427555702
								},
								{
									"eventType": "variable",
									"name": "progress",
									"type": "number",
									"initialValue": "0",
									"comment": "Marble progress.",
									"isStatic": false,
									"isConstant": false,
									"sid": 348021031335136
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Marble",
											"sid": 213814607817922,
											"parameters": {
												"unique-id": "UID"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set the marble index to the current position in the array where the marble with the specified UID is located."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 498614388004686,
											"parameters": {
												"variable": "marbleIdx",
												"value": "Functions.getIdx(Marble.UID)"
											}
										},
										{
											"type": "comment",
											"text": "Save marble progress."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 802583028624550,
											"parameters": {
												"variable": "progress",
												"value": "Marble.progress"
											}
										},
										{
											"type": "comment",
											"text": "Create new marble and set its animation according to the bullet."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 632197122763384,
											"parameters": {
												"object-to-create": "Marble",
												"layer": "\"Game\"",
												"x": "-9999",
												"y": "-9999",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "tween-value",
											"objectClass": "Marble",
											"sid": 772343747005896,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"MarbleFlash\"",
												"start-value": "200",
												"end-value": "100",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-animation",
											"objectClass": "Marble",
											"sid": 175387272635129,
											"parameters": {
												"animation": "bulletType",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "Add Marble to queue."
										},
										{
											"id": "insert",
											"objectClass": "ArrMarbles",
											"sid": 686122855547748,
											"parameters": {
												"value": "Marble.UID",
												"index": "marbleIdx + 1",
												"axis": "x"
											}
										},
										{
											"type": "comment",
											"text": "Set progress."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Marble",
											"sid": 280465970788267,
											"parameters": {
												"instance-variable": "progress",
												"value": "progress"
											}
										}
									],
									"sid": 368788060037427
								},
								{
									"eventType": "comment",
									"text": "Shift each marble forward by one position, starting from the point of collision."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 905036022974540,
											"parameters": {
												"object": "Marble"
											}
										}
									],
									"actions": [],
									"sid": 261416338580746,
									"children": [
										{
											"eventType": "comment",
											"text": "If the current marble is invalid, delete it."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 112425788279996,
													"parameters": {
														"value": "Functions.getIdx(Marble.UID) = 999"
													}
												}
											],
											"actions": [
												{
													"id": "destroy",
													"objectClass": "Marble",
													"sid": 113216336800320
												}
											],
											"sid": 604780490910654
										},
										{
											"eventType": "comment",
											"text": "Otherwise execute animation."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 768779879955925
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 494804466550296,
													"parameters": {
														"value": "Functions.getIdx(Marble.UID) <= marbleIdx"
													}
												}
											],
											"actions": [
												{
													"id": "tween-value",
													"objectClass": "Marble",
													"sid": 125710600407285,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"PlaceChain\"",
														"start-value": "Self.progress",
														"end-value": "max(Self.progress - (progressSpeed/(2*pi*Self.progress)) * 23000/progressSpeed, 157)",
														"time": "0.1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 846662515168520
										}
									]
								},
								{
									"eventType": "comment",
									"text": "If a chain of 3 marbles of the same type has been created, destroy it."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-unique-id",
											"objectClass": "Marble",
											"sid": 593249136046163,
											"parameters": {
												"unique-id": "ArrMarbles.At(marbleIdx + 1)"
											}
										}
									],
									"actions": [
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 288124279207237,
											"parameters": {
												"seconds": "0.1"
											}
										},
										{
											"callFunction": "marbleDestroyChain",
											"sid": 692982666350253,
											"parameters": [
												"marbleIdx + 1",
												"Marble.AnimationName",
												"Marble.UID"
											]
										}
									],
									"sid": 246427014256221
								}
							]
						}
					],
					"sid": 893354807826674
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Marble Main Events",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Marble movement logic."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 519151392491896,
									"parameters": {
										"object": "Marble"
									}
								},
								{
									"id": "is-playing",
									"objectClass": "Marble",
									"sid": 134820183536500,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MarbleDestroy\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Updarte position and angle."
								},
								{
									"id": "set-position",
									"objectClass": "Marble",
									"sid": 830207460025864,
									"parameters": {
										"x": "Player.X + cos(Self.progress * 2) * Self.progress",
										"y": "Player.Y + sin(Self.progress * 2) * Self.progress + 46"
									}
								},
								{
									"id": "set-angle-toward-position",
									"objectClass": "Marble",
									"sid": 244696704732295,
									"parameters": {
										"x": "Player.X + cos((Self.progress - 1) * 2) * (Self.progress - 1)",
										"y": "Player.Y + sin((Self.progress - 1) * 2) * (Self.progress - 1) + 46"
									}
								},
								{
									"type": "comment",
									"text": "Add progress."
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Marble",
									"sid": 510846692430037,
									"parameters": {
										"instance-variable": "progress",
										"value": "max(Self.progress - (progressSpeed/(2*pi*Self.progress)) * dt, 157)"
									}
								}
							],
							"sid": 297769333581847,
							"children": [
								{
									"eventType": "comment",
									"text": "Destroy marble and take a life away from the player."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Marble",
											"sid": 490932659016126,
											"parameters": {
												"instance-variable": "progress",
												"comparison": 3,
												"value": "157"
											}
										}
									],
									"actions": [
										{
											"id": "delete",
											"objectClass": "ArrMarbles",
											"sid": 638720629706679,
											"parameters": {
												"index": "0",
												"axis": "x"
											}
										},
										{
											"id": "tween-value",
											"objectClass": "Marble",
											"sid": 282828443544145,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"MarbleFlash\"",
												"start-value": "100",
												"end-value": "200",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Marble",
											"sid": 982603074027855,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"MarbleDestroy\"",
												"property": "scale",
												"end-x": "0",
												"end-y": "0",
												"time": "0.25",
												"ease": "easeinback",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Update lives and UI."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 232659040256143,
											"parameters": {
												"variable": "lives",
												"value": "max(lives - 1, 0)"
											}
										},
										{
											"id": "set-text",
											"objectClass": "TextLives",
											"sid": 370377856680315,
											"parameters": {
												"text": "lives"
											}
										},
										{
											"type": "comment",
											"text": "Update game speed."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 163955778071585,
											"parameters": {
												"variable": "progressSpeed",
												"value": "max(progressSpeed - MARBLE_SLOWDOWN, 20000)"
											}
										}
									],
									"sid": 410034281507528,
									"children": [
										{
											"eventType": "comment",
											"text": "Check if the player has lost all available lives. If that is the case, it is game over."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 560245598171821,
													"parameters": {
														"value": "lives = 0"
													}
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Disable gameplay groups."
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 370507217584291,
													"parameters": {
														"group-name": "\"Controls\"",
														"state": "deactivated"
													}
												},
												{
													"id": "set-group-active",
													"objectClass": "System",
													"sid": 552213023206136,
													"parameters": {
														"group-name": "\"Marble\"",
														"state": "deactivated"
													}
												},
												{
													"type": "comment",
													"text": "Show game over screen with score."
												},
												{
													"id": "tween-one-property",
													"objectClass": "Fader",
													"sid": 555236189735591,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ShowFader\"",
														"property": "offsetOpacity",
														"end-value": "80",
														"time": "1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"id": "set-text",
													"objectClass": "TextGameOver",
													"sid": 347234566530415,
													"parameters": {
														"text": "replace(Self.Text, \"###\", str(marblesDestroyed))"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "TextGameOver",
													"sid": 646899327740475,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ShowGameOver\"",
														"property": "offsetOpacity",
														"end-value": "100",
														"time": "1",
														"ease": "easeinoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												},
												{
													"type": "comment",
													"text": "Activate game over mode."
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 490866182383879
												},
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 776262610032503,
													"parameters": {
														"variable": "gameOver",
														"value": "true"
													}
												}
											],
											"sid": 667302673609900
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Spawn a new marble when the last marble in the queue has moved enough."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 228548770047244,
									"parameters": {
										"value": "Marble.Count < 41"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 739027780617931,
									"parameters": {
										"variable": "canSpawn"
									}
								},
								{
									"id": "pick-by-unique-id",
									"objectClass": "Marble",
									"sid": 331358707707899,
									"parameters": {
										"unique-id": "ArrMarbles.At(ArrMarbles.Width - 1)"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Marble",
									"sid": 652120460969247,
									"parameters": {
										"instance-variable": "progress",
										"comparison": 2,
										"value": "STARTING_PROGRESS - ArrOffsets.At(0, 1)"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 376292929084677
								}
							],
							"actions": [
								{
									"callFunction": "createMarbleFromScratch",
									"sid": 474475832048928
								}
							],
							"sid": 532894703559494
						},
						{
							"eventType": "comment",
							"text": "Spawn a new marble if there is no marble left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 777378545780760,
									"parameters": {
										"value": "Marble.Count = 0"
									}
								},
								{
									"id": "trigger-once-while-true",
									"objectClass": "System",
									"sid": 971499582841858
								}
							],
							"actions": [
								{
									"callFunction": "createMarbleFromScratch",
									"sid": 624631292763782
								}
							],
							"sid": 698130611800265
						},
						{
							"eventType": "comment",
							"text": "Marble flash effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Marble",
									"sid": 208022629923216,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MarbleFlash\""
									}
								}
							],
							"actions": [
								{
									"id": "set-effect-parameter",
									"objectClass": "Marble",
									"sid": 999796593107205,
									"parameters": {
										"effect": "\"AdjustHSL\"",
										"parameter-index": "2",
										"value": "Self.Tween.Value(\"MarbleFlash\")"
									}
								}
							],
							"sid": 949576229937997
						},
						{
							"eventType": "comment",
							"text": "Marble place chain movement."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-playing",
									"objectClass": "Marble",
									"sid": 789221458751776,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlaceChain\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Marble",
									"sid": 336530115325034,
									"parameters": {
										"instance-variable": "progress",
										"value": "Self.Tween.Value(\"PlaceChain\")"
									}
								}
							],
							"sid": 516591920923449
						},
						{
							"eventType": "comment",
							"text": "When a marble is destroyed, spawn particles."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "Marble",
									"sid": 697976676037274,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MarbleDestroy\""
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 504486782883425,
									"parameters": {
										"object-to-create": "MarbleParticles",
										"layer": "\"Game\"",
										"x": "Marble.X",
										"y": "Marble.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 930381202475403
						}
					],
					"sid": 234058123440117
				}
			],
			"sid": 821789261779956
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Bullet",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Bullet collides with marbles and applies chain reactions."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Bullet",
							"sid": 593079388625702,
							"parameters": {
								"object": "Marble"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Stop bullet movement."
						},
						{
							"id": "set-speed",
							"objectClass": "Bullet",
							"sid": 496065271627997,
							"behaviorType": "Bullet",
							"parameters": {
								"speed": "0"
							}
						},
						{
							"type": "comment",
							"text": "Disable collisions."
						},
						{
							"id": "set-collisions-enabled",
							"objectClass": "Bullet",
							"sid": 449126902312741,
							"parameters": {
								"collisions": "disabled"
							}
						},
						{
							"type": "comment",
							"text": "Smoothly position the bullet in the queue."
						},
						{
							"id": "tween-value",
							"objectClass": "Bullet",
							"sid": 614228693011342,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"BulletFlash\"",
								"start-value": "100",
								"end-value": "200",
								"time": "0.25",
								"ease": "easeinsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 532608970236838,
					"children": [
						{
							"eventType": "comment",
							"text": "If hit marble is not performing an animation, execute chain reaction upon inserting a new marble in the queue."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-any-playing",
									"objectClass": "Marble",
									"sid": 631118363221476,
									"behaviorType": "Tween",
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "tween-two-properties",
									"objectClass": "Bullet",
									"sid": 921129567180954,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"BulletMove\"",
										"property": "position",
										"end-x": "Marble.X",
										"end-y": "Marble.Y",
										"time": "0.05",
										"ease": "easeinoutsine",
										"destroy-on-complete": "yes",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"callFunction": "marblePlaceChain",
									"sid": 727306593411410,
									"parameters": [
										"Marble.UID",
										"Bullet.AnimationName"
									]
								}
							],
							"sid": 748724329297614
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Bullet flash effect."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Bullet",
							"sid": 706762828146436,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"BulletFlash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Bullet",
							"sid": 606385052059616,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Self.Tween.Value(\"BulletFlash\")"
							}
						}
					],
					"sid": 717766232134415
				},
				{
					"eventType": "comment",
					"text": "Destroy muzzle flash after animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "MuzzleFlash",
							"sid": 252097201944305,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideMuzzle\""
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "MuzzleFlash",
							"sid": 477105267450443
						}
					],
					"sid": 638904550684385
				}
			],
			"sid": 292546892657106
		}
	],
	"sid": 792663613352506
}