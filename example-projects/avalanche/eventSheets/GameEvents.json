{
	"name": "GameEvents",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "PlayerEvents"
		},
		{
			"eventType": "include",
			"includeSheet": "EnemyEvents"
		},
		{
			"eventType": "include",
			"includeSheet": "SoundEvents"
		},
		{
			"eventType": "comment",
			"text": "Made by Forsteri Studios\n\nWebsite: forsteristudios.com\nE-Mail: forsteristudios@gmail.com\nX: @forsteristudios"
		},
		{
			"eventType": "comment",
			"text": "Gameplay settings."
		},
		{
			"eventType": "variable",
			"name": "CAMERA_SPEED",
			"type": "number",
			"initialValue": "20",
			"comment": "How fast the camera locks to the player",
			"isStatic": false,
			"isConstant": true,
			"sid": 727282408641762
		},
		{
			"eventType": "variable",
			"name": "GRAVITY",
			"type": "number",
			"initialValue": "10",
			"comment": "World's gravity",
			"isStatic": false,
			"isConstant": true,
			"sid": 455368495628955
		},
		{
			"eventType": "variable",
			"name": "MIN_CAM_Z",
			"type": "number",
			"initialValue": "128",
			"comment": "Minimum camera Z position",
			"isStatic": false,
			"isConstant": true,
			"sid": 129303541751616
		},
		{
			"eventType": "comment",
			"text": "Global gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "cameraLock",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the camera locked?",
			"isStatic": false,
			"isConstant": false,
			"sid": 878481734729748
		},
		{
			"eventType": "variable",
			"name": "invincible",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the player invincible?",
			"isStatic": false,
			"isConstant": false,
			"sid": 478589687026653
		},
		{
			"eventType": "variable",
			"name": "paused",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game paused?",
			"isStatic": false,
			"isConstant": false,
			"sid": 970800544999759
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Hide fader."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 562317844956103
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 697040134441179,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideFader\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "1",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 735968312762686,
					"children": [
						{
							"eventType": "comment",
							"text": "Music for Level1 and Level2."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 399061893752312,
									"parameters": {
										"value": "LayoutName = \"Level1\""
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 942184894150822,
									"parameters": {
										"value": "LayoutName = \"Level2\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "playBGM",
									"sid": 807404200824865,
									"parameters": [
										"\"ArcticBeat\"",
										false,
										"0"
									]
								}
							],
							"sid": 323701315026064,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Music for Level3."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 929129016732286
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 905792014349365,
									"parameters": {
										"value": "LayoutName = \"Level3\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "playBGM",
									"sid": 603563562595753,
									"parameters": [
										"\"Dangerous\"",
										false,
										"-1"
									]
								}
							],
							"sid": 889116677832711
						},
						{
							"eventType": "comment",
							"text": "Music for Level4 and Level5."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 400815631339269
								}
							],
							"actions": [
								{
									"callFunction": "playBGM",
									"sid": 422315379841530,
									"parameters": [
										"\"Perces\"",
										false,
										"3"
									]
								}
							],
							"sid": 930683000429764
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Setup bedrock."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 739939424744363
						},
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 347792633365250,
							"parameters": {
								"object": "Geometry",
								"expression": "Geometry.geometryID = -999"
							}
						}
					],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "Geometry",
							"sid": 785559341964493,
							"parameters": {
								"width": "LayoutWidth",
								"height": "LayoutHeight"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Geometry",
							"sid": 424717301364370,
							"parameters": {
								"z": "-1024"
							}
						},
						{
							"id": "set-position",
							"objectClass": "Geometry",
							"sid": 434513172652203,
							"parameters": {
								"x": "LayoutWidth/2",
								"y": "LayoutHeight/2"
							}
						}
					],
					"sid": 900509908211696
				},
				{
					"eventType": "comment",
					"text": "Setup prop billboards."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 662094999567748
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 357253955024762,
							"parameters": {
								"object": "PropBillboardSpawner"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 470415617106332,
							"parameters": {
								"object-to-create": "PropBillboard",
								"layer": "\"Entities\"",
								"x": "PropBillboardSpawner.X",
								"y": "PropBillboardSpawner.Y",
								"create-hierarchy": true,
								"template-name": "PropBillboardSpawner.AnimationName"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "PropBillboard",
							"sid": 656441173829514,
							"parameters": {
								"z": "PropBillboardSpawner.ZElevation"
							}
						}
					],
					"sid": 417178549541425,
					"children": [
						{
							"eventType": "comment",
							"text": "Set onGeometryID of the collider according to spawner."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "pick-children",
									"objectClass": "PropBillboard",
									"sid": 633794622916708,
									"parameters": {
										"child": "Geometry",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Geometry",
									"sid": 224565712547853,
									"parameters": {
										"instance-variable": "geometryID",
										"value": "PropBillboardSpawner.onGeometryID"
									}
								}
							],
							"sid": 369330453128483
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Create an item."
				},
				{
					"functionName": "createItem",
					"functionDescription": "Create an item",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "X position",
							"sid": 103201345872449
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y position",
							"sid": 650988917263869
						},
						{
							"name": "z",
							"type": "number",
							"initialValue": "0",
							"comment": "Z position",
							"sid": 369712356890911
						},
						{
							"name": "item",
							"type": "string",
							"initialValue": "",
							"comment": "Item name",
							"sid": 186399996601043
						},
						{
							"name": "cantPickupTime",
							"type": "number",
							"initialValue": "2",
							"comment": "Item won't be able to get picked up for this interval",
							"sid": 546006773710923
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Create item parts and set elevation."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 806602128006695,
							"parameters": {
								"object-to-create": "ItemShadow",
								"layer": "\"Entities\"",
								"x": "x",
								"y": "y",
								"create-hierarchy": true,
								"template-name": "item"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ItemShadow",
							"sid": 425989131657915,
							"parameters": {
								"z": "z + 1"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 300910455592447,
							"parameters": {
								"object-to-create": "ItemBillboard",
								"layer": "\"Entities\"",
								"x": "x",
								"y": "y",
								"create-hierarchy": false,
								"template-name": "item"
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "ItemBillboard",
							"sid": 570447395626056,
							"parameters": {
								"z": "z + 3"
							}
						},
						{
							"type": "comment",
							"text": "Assign random rotation to billboard."
						},
						{
							"id": "set-angle",
							"objectClass": "ItemBillboard",
							"sid": 936192311213599,
							"parameters": {
								"angle": "random(360)"
							}
						},
						{
							"type": "comment",
							"text": "Add billboard as a child element of shadow."
						},
						{
							"id": "add-child",
							"objectClass": "ItemShadow",
							"sid": 851266496877093,
							"parameters": {
								"child": "ItemBillboard",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": false,
								"transform-visibility": true,
								"destroy-with-parent": true
							}
						},
						{
							"type": "comment",
							"text": "Can't pick up item for a brief period."
						},
						{
							"id": "start-timer",
							"objectClass": "ItemShadow",
							"sid": 715483271202346,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "cantPickupTime",
								"type": "once",
								"tag": "\"CantPickup\""
							}
						}
					],
					"sid": 859462159996995
				},
				{
					"eventType": "comment",
					"text": "Setup items."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 231017689335331
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 195016203815957,
							"parameters": {
								"object": "ItemSpawner"
							}
						}
					],
					"actions": [
						{
							"callFunction": "createItem",
							"sid": 486579606053066,
							"parameters": [
								"ItemSpawner.X",
								"ItemSpawner.Y",
								"ItemSpawner.ZElevation",
								"ItemSpawner.AnimationName",
								"2"
							]
						}
					],
					"sid": 455217094969098
				},
				{
					"eventType": "comment",
					"text": "Setup items (part 2)."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-created",
							"objectClass": "ItemBillboard",
							"sid": 998340351988552
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Set item texture."
						},
						{
							"id": "set-animation",
							"objectClass": "ItemTextures",
							"sid": 654189380967743,
							"parameters": {
								"animation": "ItemBillboard.TemplateName",
								"from": "beginning"
							}
						},
						{
							"type": "comment",
							"text": "Wait a little before starting floating animation."
						},
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 313594039193101,
							"parameters": {
								"seconds": "random(0.5)",
								"use-timescale": true
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "ItemBillboard",
							"sid": 732168484903451,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ItemZTween\"",
								"property": "offsetZElevation",
								"end-value": "Self.ZElevation + 2",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						}
					],
					"sid": 795871333985206
				},
				{
					"eventType": "comment",
					"text": "Repeat item floating animation."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "ItemBillboard",
							"sid": 142434564759651,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ItemZTween\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "ItemBillboard",
							"sid": 947962296418706,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ItemZTween\"",
								"property": "offsetZElevation",
								"end-value": "Self.ZElevation + 2",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						}
					],
					"sid": 777682266751917
				},
				{
					"eventType": "comment",
					"text": "Grow vegetation where possible."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 111777114994990
						}
					],
					"actions": [],
					"sid": 394670782738606,
					"children": [
						{
							"eventType": "comment",
							"text": "Get valid geometries to spawn vegetation."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 518892764622280,
									"parameters": {
										"object": "Geometry"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Geometry",
									"sid": 929508525312257,
									"parameters": {
										"instance-variable": "vegetation"
									}
								}
							],
							"actions": [],
							"sid": 312595912108522,
							"children": [
								{
									"eventType": "comment",
									"text": "Spawn vegetation."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 997571214666335,
											"parameters": {
												"name": "\"i\"",
												"start-index": "0",
												"end-index": "int((Geometry.Width * Geometry.Height) / 3000)"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 844686305979649,
											"parameters": {
												"object-to-create": "PropBillboard",
												"layer": "\"Entities\"",
												"x": "random(Geometry.X - Geometry.Width/2 + 8, Geometry.X + Geometry.Width/2 - 8)",
												"y": "random(Geometry.Y - Geometry.Height/2 + 8, Geometry.Y + Geometry.Height/2 - 8)",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-size",
											"objectClass": "PropBillboard",
											"sid": 206882276163362,
											"parameters": {
												"width": "8",
												"height": "4"
											}
										},
										{
											"id": "set-z-height",
											"objectClass": "PropBillboard",
											"sid": 298464682187558,
											"parameters": {
												"z-height": "8"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "PropBillboard",
											"sid": 878323450944935,
											"parameters": {
												"z": "Geometry.ZElevation + Geometry.ZHeight"
											}
										}
									],
									"sid": 400767576679105,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "Geometry",
													"sid": 309164617677998,
													"parameters": {
														"instance-variable": "tundra"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PropBillboardTex",
													"sid": 830004442305204,
													"parameters": {
														"animation": "choose(\"GrassTundra\", \"GrassTundra\", \"Snow\", \"Snow\", \"Snow\", \"Flower\")",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-frame",
													"objectClass": "PropBillboardTex",
													"sid": 115886654586655,
													"parameters": {
														"frame-number": "choose(0, 1, 2)"
													}
												}
											],
											"sid": 104590887109461
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 264613259229489
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "PropBillboardTex",
													"sid": 924699529219567,
													"parameters": {
														"animation": "choose(\"Grass\", \"Grass\", \"Snow\", \"Snow\", \"Snow\", \"Flower\")",
														"from": "beginning"
													}
												},
												{
													"id": "set-animation-frame",
													"objectClass": "PropBillboardTex",
													"sid": 115886654586655,
													"parameters": {
														"frame-number": "choose(0, 1, 2)"
													}
												}
											],
											"sid": 919392000243622
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Wait a little."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 944115623918681,
									"parameters": {
										"seconds": "0.1",
										"use-timescale": true
									}
								}
							],
							"sid": 321756266044182,
							"children": [
								{
									"eventType": "comment",
									"text": "Delete vegetation overlapped and below geometries."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 813063817195495,
											"parameters": {
												"object": "PropBillboard"
											}
										}
									],
									"actions": [],
									"sid": 888562674584822,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 263149429908307,
													"parameters": {
														"animation": "\"Grass\""
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 182151015106223,
													"parameters": {
														"animation": "\"Snow\""
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 226544394803164,
													"parameters": {
														"animation": "\"Flower\""
													}
												}
											],
											"actions": [],
											"sid": 262040866634941,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each",
															"objectClass": "System",
															"sid": 365493598977868,
															"parameters": {
																"object": "Geometry"
															}
														},
														{
															"id": "is-overlapping-another-object",
															"objectClass": "PropBillboard",
															"sid": 411443762537200,
															"parameters": {
																"object": "Geometry"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 744637732522206,
															"parameters": {
																"value": "Geometry.ZElevation > PropBillboard.ZElevation"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "PropBillboard",
															"sid": 718824283621851
														}
													],
													"sid": 793438287741669
												}
											],
											"isOrBlock": true
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Delete vegetation overlapped and below fale geometries."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 790269226920807,
											"parameters": {
												"object": "PropBillboard"
											}
										}
									],
									"actions": [],
									"sid": 814415212215317,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 226854277977533,
													"parameters": {
														"animation": "\"Grass\""
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 204410099737843,
													"parameters": {
														"animation": "\"Snow\""
													}
												},
												{
													"id": "is-animation-playing",
													"objectClass": "PropBillboardTex",
													"sid": 148373055984414,
													"parameters": {
														"animation": "\"Flower\""
													}
												}
											],
											"actions": [],
											"sid": 103892240496896,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "for-each",
															"objectClass": "System",
															"sid": 365308653714044,
															"parameters": {
																"object": "FakeGeometry"
															}
														},
														{
															"id": "is-overlapping-another-object",
															"objectClass": "PropBillboard",
															"sid": 948791365052010,
															"parameters": {
																"object": "FakeGeometry"
															}
														},
														{
															"id": "evaluate-expression",
															"objectClass": "System",
															"sid": 263528424665644,
															"parameters": {
																"value": "FakeGeometry.ZElevation > PropBillboard.ZElevation"
															}
														}
													],
													"actions": [
														{
															"id": "destroy",
															"objectClass": "PropBillboard",
															"sid": 412339079197271
														}
													],
													"sid": 707971918117467
												}
											],
											"isOrBlock": true
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Create a new cavern pillar."
				},
				{
					"functionName": "createPillar",
					"functionDescription": "Create a new cavern pillar",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "X position",
							"sid": 438158404762689
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "Y position",
							"sid": 377954520641217
						},
						{
							"name": "z",
							"type": "number",
							"initialValue": "0",
							"comment": "Z position",
							"sid": 411838874594626
						},
						{
							"name": "width",
							"type": "number",
							"initialValue": "0",
							"comment": "Original width",
							"sid": 479736766682684
						},
						{
							"name": "height",
							"type": "number",
							"initialValue": "0",
							"comment": "Original height",
							"sid": 397244376050377
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Base 1."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 245177298072293,
							"parameters": {
								"object-to-create": "Geometry",
								"layer": "\"Entities\"",
								"x": "x",
								"y": "y",
								"create-hierarchy": false,
								"template-name": "\"Pillar\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Geometry",
							"sid": 403735413417654,
							"parameters": {
								"z": "z - 16"
							}
						},
						{
							"id": "set-size",
							"objectClass": "Geometry",
							"sid": 870624803102861,
							"parameters": {
								"width": "width - 8",
								"height": "height - 8"
							}
						},
						{
							"type": "comment",
							"text": "Base 2."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 911118310303943,
							"parameters": {
								"object-to-create": "Geometry",
								"layer": "\"Entities\"",
								"x": "Geometry.X",
								"y": "Geometry.Y",
								"create-hierarchy": false,
								"template-name": "\"Pillar\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Geometry",
							"sid": 445353256089528,
							"parameters": {
								"z": "z - 32"
							}
						},
						{
							"id": "set-size",
							"objectClass": "Geometry",
							"sid": 670919031048273,
							"parameters": {
								"width": "width - 16",
								"height": "height - 16"
							}
						},
						{
							"type": "comment",
							"text": "Base 3."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 364758080199151,
							"parameters": {
								"object-to-create": "Geometry",
								"layer": "\"Entities\"",
								"x": "Geometry.X",
								"y": "Geometry.Y",
								"create-hierarchy": false,
								"template-name": "\"Pillar\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Geometry",
							"sid": 521848498125196,
							"parameters": {
								"z": "z - 48"
							}
						},
						{
							"id": "set-size",
							"objectClass": "Geometry",
							"sid": 225704909047502,
							"parameters": {
								"width": "width - 24",
								"height": "height - 24"
							}
						},
						{
							"type": "comment",
							"text": "Pole."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 654609021257021,
							"parameters": {
								"object-to-create": "Geometry",
								"layer": "\"Entities\"",
								"x": "Geometry.X",
								"y": "Geometry.Y",
								"create-hierarchy": false,
								"template-name": "\"Pillar\""
							}
						},
						{
							"id": "set-z-elevation",
							"objectClass": "Geometry",
							"sid": 299981066487326,
							"parameters": {
								"z": "-512"
							}
						},
						{
							"id": "set-z-height",
							"objectClass": "Geometry",
							"sid": 116323908270121,
							"parameters": {
								"z-height": "512 + z - 48"
							}
						},
						{
							"id": "set-size",
							"objectClass": "Geometry",
							"sid": 182453087403420,
							"parameters": {
								"width": "width - 48",
								"height": "height - 48"
							}
						}
					],
					"sid": 592874275353497
				},
				{
					"eventType": "comment",
					"text": "Setup cavern pillars."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 884024246029367
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 432890566784717,
							"parameters": {
								"object": "Geometry"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Geometry",
							"sid": 903687252712223,
							"parameters": {
								"instance-variable": "pillar"
							}
						}
					],
					"actions": [
						{
							"callFunction": "createPillar",
							"sid": 200795237039251,
							"parameters": [
								"Geometry.X",
								"Geometry.Y",
								"Geometry.ZElevation",
								"Geometry.Width",
								"Geometry.Height"
							]
						}
					],
					"sid": 645433282496129
				}
			],
			"sid": 397482678962999
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tools",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Round a number based on a specific multiplier."
				},
				{
					"functionName": "roundNumber",
					"functionDescription": "Round a number based on a specific multiplier",
					"functionCategory": "Game",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "BaseNumber",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 552789720128536
						},
						{
							"name": "Multiplier",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 161704983021071
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 487998294274026,
							"parameters": {
								"value": "round(BaseNumber /Multiplier) * Multiplier"
							}
						}
					],
					"sid": 319792133342481
				},
				{
					"eventType": "comment",
					"text": "Convert an angle to be in the interval of [0..360]."
				},
				{
					"functionName": "convertAngle",
					"functionDescription": "Convert an angle to be in the interval of [0..360]",
					"functionCategory": "Game",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "BaseAngle",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 142536805775644
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-function-return-value",
							"objectClass": "Functions",
							"sid": 548194540310063,
							"parameters": {
								"value": "round(BaseAngle + 360) % 360"
							}
						}
					],
					"sid": 326240105001273
				}
			],
			"sid": 405469443652415
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Make camera start at the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 528641720802452
						}
					],
					"actions": [
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 788199036363102,
							"parameters": {
								"cam-x": "Player.X",
								"cam-y": "Player.Y + 160",
								"cam-z": "Player.ZElevation + 160",
								"look-x": "Player.X",
								"look-y": "Player.Y",
								"look-z": "Player.ZElevation",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						}
					],
					"sid": 709310137420194
				},
				{
					"eventType": "comment",
					"text": "Make the camera smoothly follow the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 280530637303626
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 249737892190654,
							"parameters": {
								"variable": "cameraLock"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "look-at-position",
							"objectClass": "3DCamera",
							"sid": 559774061439327,
							"parameters": {
								"cam-x": "lerp(3DCamera.CameraX, Player.X, CAMERA_SPEED * dt)",
								"cam-y": "lerp(3DCamera.CameraY, Player.Y + 160, CAMERA_SPEED * dt)",
								"cam-z": "max(lerp(3DCamera.CameraZ, Player.ZElevation + 160, CAMERA_SPEED * dt), MIN_CAM_Z)",
								"look-x": "lerp(3DCamera.LookX, Player.X, CAMERA_SPEED * dt)",
								"look-y": "lerp(3DCamera.LookY, Player.Y, CAMERA_SPEED * dt)",
								"look-z": "lerp(3DCamera.LookZ, Player.ZElevation, CAMERA_SPEED * dt)",
								"up-x": "0",
								"up-y": "0",
								"up-z": "1"
							}
						}
					],
					"sid": 119693659795111
				}
			],
			"sid": 319289492915494
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Effects",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Waterfall",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Move waterfall."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 910126020027385
								}
							],
							"actions": [
								{
									"id": "set-image-offset-y",
									"objectClass": "WaterfallTex",
									"sid": 128203211832640,
									"parameters": {
										"offset-y": "Self.ImageOffsetY + 100 * dt"
									}
								},
								{
									"id": "set-image-offset-y",
									"objectClass": "Waterfall",
									"sid": 117624514023082,
									"parameters": {
										"offset-y": "Self.ImageOffsetY + 100 * dt"
									}
								}
							],
							"sid": 269346920286760
						}
					],
					"sid": 163811296705552
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Cast Effects",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Create a new cast effect."
						},
						{
							"functionName": "createFX",
							"functionDescription": "Create a new effect",
							"functionCategory": "Game",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "fxType",
									"type": "string",
									"initialValue": "",
									"comment": "Is it a plane or a billboard?",
									"sid": 757806995037777
								},
								{
									"name": "fxTexture",
									"type": "string",
									"initialValue": "",
									"comment": "Cast effect texture",
									"sid": 891306718413420
								},
								{
									"name": "x",
									"type": "number",
									"initialValue": "0",
									"comment": "X position",
									"sid": 211441110474623
								},
								{
									"name": "y",
									"type": "number",
									"initialValue": "0",
									"comment": "Y position",
									"sid": 527902417239526
								},
								{
									"name": "z",
									"type": "number",
									"initialValue": "0",
									"comment": "Z position",
									"sid": 606317446124416
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 118549224892915,
							"children": [
								{
									"eventType": "comment",
									"text": "Effect is of type billboard."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 317020326622087,
											"parameters": {
												"value": "fxType = \"Billboard\""
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 161572527891318,
											"parameters": {
												"object-to-create": "EffectBillboard",
												"layer": "\"Entities\"",
												"x": "x",
												"y": "y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "EffectBillboard",
											"sid": 729824844441732,
											"parameters": {
												"z": "z"
											}
										}
									],
									"sid": 482699156280904,
									"children": [
										{
											"eventType": "comment",
											"text": "Make plane invisible, and set correct texture, as well as billboard size."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 504667975644799,
													"parameters": {
														"object": "EffectPlane"
													}
												}
											],
											"actions": [
												{
													"id": "set-animation",
													"objectClass": "EffectPlane",
													"sid": 628129553464874,
													"parameters": {
														"animation": "fxTexture",
														"from": "beginning"
													}
												},
												{
													"id": "set-visible",
													"objectClass": "EffectPlane",
													"sid": 935789816175568,
													"parameters": {
														"visibility": "invisible"
													}
												},
												{
													"id": "set-width",
													"objectClass": "EffectBillboard",
													"sid": 695904441002654,
													"parameters": {
														"width": "EffectPlane.Width"
													}
												},
												{
													"id": "set-z-height",
													"objectClass": "EffectBillboard",
													"sid": 377813459213192,
													"parameters": {
														"z-height": "EffectPlane.Height"
													}
												}
											],
											"sid": 317422353089383
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Effect is of type plane."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 713668371208697
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 977420418818613,
											"parameters": {
												"value": "fxType = \"Plane\""
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 449940596042715,
											"parameters": {
												"object-to-create": "EffectPlane",
												"layer": "\"Entities\"",
												"x": "x",
												"y": "y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-animation",
											"objectClass": "EffectPlane",
											"sid": 274954905687113,
											"parameters": {
												"animation": "fxTexture",
												"from": "beginning"
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "EffectPlane",
											"sid": 618651534611856,
											"parameters": {
												"z": "z"
											}
										}
									],
									"sid": 684565946127309,
									"children": [
										{
											"eventType": "comment",
											"text": "Make billboard invisible."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-last-created",
													"objectClass": "System",
													"sid": 358098624188079,
													"parameters": {
														"object": "EffectBillboard"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "EffectBillboard",
													"sid": 722692171551242,
													"parameters": {
														"visibility": "invisible"
													}
												}
											],
											"sid": 666778106984558
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Cast Effect is destroyed when animation ends."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-animation-finished",
									"objectClass": "EffectPlane",
									"sid": 674988809692622
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "EffectPlane",
									"sid": 507543106731467
								}
							],
							"sid": 518092565425399
						}
					],
					"sid": 985972156573445
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Snow",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Setup snow."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 392955067477443
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 171121482695856,
									"parameters": {
										"value": "SnowManager.Count > 0"
									}
								}
							],
							"actions": [],
							"sid": 533007660224998,
							"children": [
								{
									"eventType": "comment",
									"text": "Create billboards."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 480605833243610,
											"parameters": {
												"count": "300"
											}
										}
									],
									"actions": [
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 751498272392207,
											"parameters": {
												"object-to-create": "SnowBillboard",
												"layer": "\"Entities\"",
												"x": "random(Player.X - ViewportWidth(\"Entities\"), Player.X + ViewportWidth(\"Entities\"))",
												"y": "random(Player.Y - ViewportHeight(\"Entities\") - 128, Player.Y + ViewportHeight(\"Entities\"))",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "set-z-elevation",
											"objectClass": "SnowBillboard",
											"sid": 842694231196318,
											"parameters": {
												"z": "random(Player.ZElevation, Player.ZElevation + 512)"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "SnowBillboard",
											"sid": 141655423952705,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"DropSnow\"",
												"property": "offsetZElevation",
												"end-value": "0",
												"time": "Self.ZElevation/200 + random(0.5)",
												"ease": "default",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 805495301019324
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Respawn billboards."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "SnowBillboard",
									"sid": 486310668402741,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DropSnow\""
									}
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "SnowBillboard",
									"sid": 831592600910002,
									"parameters": {
										"x": "random(Player.X - ViewportWidth(\"Entities\"), Player.X + ViewportWidth(\"Entities\"))",
										"y": "random(Player.Y - ViewportHeight(\"Entities\") - 128, Player.Y + ViewportHeight(\"Entities\"))"
									}
								},
								{
									"id": "set-z-elevation",
									"objectClass": "SnowBillboard",
									"sid": 997448685703072,
									"parameters": {
										"z": "random(250, 500)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "SnowBillboard",
									"sid": 176249501528738,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DropSnow\"",
										"property": "offsetZElevation",
										"end-value": "0",
										"time": "Self.ZElevation/200 + random(0.5)",
										"ease": "default",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								}
							],
							"sid": 343695501244823
						}
					],
					"sid": 549782616674985
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Shadow",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "EnemyMeleeShadow",
									"sid": 909573299174056
								}
							],
							"actions": [
								{
									"id": "move-to-layer",
									"objectClass": "EnemyMeleeShadow",
									"sid": 999488108260739,
									"parameters": {
										"layer": "\"Shadow\""
									}
								}
							],
							"sid": 760127699982509
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "EnemyRangedShadow",
									"sid": 560068896146248
								}
							],
							"actions": [
								{
									"id": "move-to-layer",
									"objectClass": "EnemyRangedShadow",
									"sid": 337153621406120,
									"parameters": {
										"layer": "\"Shadow\""
									}
								}
							],
							"sid": 119613689791368
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "ItemShadow",
									"sid": 954197785386012
								}
							],
							"actions": [
								{
									"id": "move-to-layer",
									"objectClass": "ItemShadow",
									"sid": 505713243371036,
									"parameters": {
										"layer": "\"Shadow\""
									}
								}
							],
							"sid": 166679724587491
						}
					],
					"sid": 321427896737439
				}
			],
			"sid": 242396770158967
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup tutorial hierarchy (circumvent potential layout restart issue)."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 544070807996192
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "TextTutorial",
							"sid": 393523135994552,
							"parameters": {
								"x": "67",
								"y": "183"
							}
						},
						{
							"id": "add-child",
							"objectClass": "TutorialBox",
							"sid": 659786564109538,
							"parameters": {
								"child": "TextTutorial",
								"transform-x": true,
								"transform-y": true,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": false,
								"transform-visibility": false,
								"destroy-with-parent": false
							}
						}
					],
					"sid": 486323351329800
				},
				{
					"eventType": "comment",
					"text": "Show tutorial box."
				},
				{
					"aceType": "action",
					"aceName": "Show",
					"objectClass": "TutorialBox",
					"functionDescription": "Show tutorial box",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "Text to be displayed",
							"sid": 973185195471365
						},
						{
							"name": "tweenTime",
							"type": "number",
							"initialValue": "0.5",
							"comment": "Time taken to bring the tutorial box on screen",
							"sid": 350770229837853
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TextTutorial",
							"sid": 338661731976384,
							"parameters": {
								"text": "text"
							}
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "TutorialBox",
							"sid": 557333910417883,
							"parameters": {
								"instance-variable": "onScreen",
								"value": "true"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TutorialBox",
							"sid": 986344940702246,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowTutorial\"",
								"property": "offsetY",
								"end-value": "179",
								"time": "tweenTime",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 718339929166558
						},
						{
							"id": "start-timer",
							"objectClass": "TutorialBox",
							"sid": 649743043858034,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "6.0",
								"type": "once",
								"tag": "\"HideTutorialBox\""
							}
						}
					],
					"sid": 455369693027324
				},
				{
					"eventType": "comment",
					"text": "Hide tutorial box."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "TutorialBox",
							"sid": 739747188018262,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"HideTutorialBox\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "TutorialBox",
							"sid": 544632194465044,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorial\"",
								"property": "offsetY",
								"end-value": "219",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 140820710615559
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "TutorialBox",
							"sid": 481763109781392,
							"parameters": {
								"instance-variable": "onScreen",
								"value": "false"
							}
						}
					],
					"sid": 983504589349973
				},
				{
					"eventType": "comment",
					"text": "Movement tutorial on Level1."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 439689588813051
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 871201038411918,
							"parameters": {
								"value": "LayoutName = \"Level1\""
							}
						}
					],
					"actions": [
						{
							"id": "wait",
							"objectClass": "System",
							"sid": 609865940573357,
							"parameters": {
								"seconds": "1.0",
								"use-timescale": true
							}
						},
						{
							"customAction": "Show",
							"objectClass": "TutorialBox",
							"sid": 270294977630899,
							"parameters": [
								"\"- [color=#ffffff](ARROWS)[/color] OR [color=#ffffff](WASD)[/color] TO MOVE\r\n- [color=#ffffff](SPACE)[/color] TO JUMP\r\n- [color=#ffffff]WATER[/color] FREEZES YOU TO [color=#ff8888]DEATH[/color]\"",
								"0.5"
							]
						}
					],
					"sid": 844974113593384
				},
				{
					"eventType": "comment",
					"text": "Tutorial area activated."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 167274681018373,
							"parameters": {
								"object": "TutorialArea"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TutorialArea",
							"sid": 420845968832423,
							"parameters": {
								"instance-variable": "activated"
							},
							"isInverted": true
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 407374227423431,
							"parameters": {
								"which": "z-elevation",
								"comparison": 5,
								"z-elevation": "TutorialArea.ZElevation - 6"
							}
						},
						{
							"id": "compare-z-elevation",
							"objectClass": "Player",
							"sid": 909545863247967,
							"parameters": {
								"which": "z-elevation",
								"comparison": 3,
								"z-elevation": "TutorialArea.ZElevation + PlayerBillboard.ZHeight + 6"
							}
						}
					],
					"actions": [
						{
							"id": "set-boolean-instvar",
							"objectClass": "TutorialArea",
							"sid": 867447944969390,
							"parameters": {
								"instance-variable": "activated",
								"value": "true"
							}
						}
					],
					"sid": 371245357677120,
					"children": [
						{
							"eventType": "comment",
							"text": "Tutorial box is already on-screen."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "TutorialBox",
									"sid": 713770559107518,
									"parameters": {
										"instance-variable": "onScreen"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Stop all tweens and timers."
								},
								{
									"id": "stop-all-tweens",
									"objectClass": "TutorialBox",
									"sid": 465276840967241,
									"behaviorType": "Tween"
								},
								{
									"id": "stop-all-timers",
									"objectClass": "TutorialBox",
									"sid": 976336647557413,
									"behaviorType": "Timer"
								},
								{
									"type": "comment",
									"text": "Quickly hide tutorial box"
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialBox",
									"sid": 838267984729034,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideTutorial\"",
										"property": "offsetY",
										"end-value": "Self.Y + 40",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Show tutorial box with updated text."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 174710356205230
								},
								{
									"customAction": "Show",
									"objectClass": "TutorialBox",
									"sid": 301380442994969,
									"parameters": [
										"TutorialArea.tutorialText",
										"0.25"
									]
								}
							],
							"sid": 600697583113092
						},
						{
							"eventType": "comment",
							"text": "Tutorial box is not on-screen."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 181264495718223
								}
							],
							"actions": [
								{
									"customAction": "Show",
									"objectClass": "TutorialBox",
									"sid": 573474343101903,
									"parameters": [
										"TutorialArea.tutorialText",
										"0.5"
									]
								}
							],
							"sid": 352118644586866
						}
					]
				}
			],
			"sid": 223529150309082
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Pause",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup initial pause state."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 738936850678097
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "PauseBox",
							"sid": 952188397643698,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-visible",
							"objectClass": "TextPause",
							"sid": 511343366756727,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 581357668780908,
							"parameters": {
								"variable": "paused",
								"value": "false"
							}
						}
					],
					"sid": 684995062214201
				},
				{
					"eventType": "comment",
					"text": "Toggle pause."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 265242056104167,
							"parameters": {
								"key": 27
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Play sound."
						},
						{
							"callFunction": "playSFX",
							"sid": 183984759522573,
							"parameters": [
								"\"menu_change\"",
								"\"SFX\"",
								"0",
								"1"
							]
						}
					],
					"sid": 166901630437851,
					"children": [
						{
							"eventType": "comment",
							"text": "Pause the game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 792925505351502,
									"parameters": {
										"variable": "paused"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 270474617607164,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 645751597347523,
											"parameters": {
												"instance-variable": "dead"
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 888529554486417,
											"parameters": {
												"instance-variable": "performingAction"
											},
											"isInverted": true
										},
										{
											"id": "is-any-playing",
											"objectClass": "Fader",
											"sid": 960694183288424,
											"behaviorType": "Tween",
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "PauseBox",
											"sid": 299576593012195,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"id": "set-visible",
											"objectClass": "TextPause",
											"sid": 833958118563423,
											"parameters": {
												"visibility": "visible"
											}
										},
										{
											"id": "set-time-scale",
											"objectClass": "System",
											"sid": 821738104083343,
											"parameters": {
												"time-scale": "0"
											}
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 478802051865491,
											"parameters": {
												"seconds": "0",
												"use-timescale": true
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 306459244116584,
											"parameters": {
												"variable": "paused",
												"value": "true"
											}
										}
									],
									"sid": 603600569718093
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Unpause the game."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 986856881936860
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 853469227967417,
									"parameters": {
										"variable": "paused",
										"value": "false"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "PauseBox",
									"sid": 415596604045942,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "TextPause",
									"sid": 945661109907182,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 507190290206022,
									"parameters": {
										"time-scale": "1"
									}
								}
							],
							"sid": 667850802794884
						}
					]
				}
			],
			"sid": 678713509477755
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "NextLevel",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Go to the next level."
				},
				{
					"functionName": "goToNextLevel",
					"functionDescription": "Go to the next level",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Fade the BGM out."
						},
						{
							"callFunction": "fadeBGM",
							"sid": 957783035049423,
							"parameters": [
								false,
								"1.0"
							]
						},
						{
							"type": "comment",
							"text": "Fade the game out."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 343035281053686,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "1",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 940482481642624
						},
						{
							"type": "comment",
							"text": "Increment level counter by 1 and move on to the next level."
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 294166369175163,
							"parameters": {
								"key": "\"Level\"",
								"value": "int(Self.Get(\"Level\")) + 1"
							}
						},
						{
							"callFunction": "saveProfile",
							"sid": 847936339421314
						},
						{
							"id": "go-to-nextprevious-layout",
							"objectClass": "System",
							"sid": 608049323187456,
							"parameters": {
								"which": "next"
							}
						}
					],
					"sid": 177397033285761
				},
				{
					"eventType": "comment",
					"text": "Go to the credits screen."
				},
				{
					"functionName": "goToCredits",
					"functionDescription": "Go to the credits screen",
					"functionCategory": "Game",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Fade the BGM out."
						},
						{
							"callFunction": "fadeBGM",
							"sid": 309056050976681,
							"parameters": [
								false,
								"1.0"
							]
						},
						{
							"type": "comment",
							"text": "Fade the game out."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 759974645339288,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "3",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 868067222555411
						},
						{
							"type": "comment",
							"text": "Remove any leftover UI element."
						},
						{
							"id": "destroy",
							"objectClass": "TextInventory",
							"sid": 380849807163469
						},
						{
							"id": "destroy",
							"objectClass": "TextPause",
							"sid": 363216974713787
						},
						{
							"id": "destroy",
							"objectClass": "TextTutorial",
							"sid": 707777599953365
						},
						{
							"type": "comment",
							"text": "Clear profile (except sound options)."
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 274049693882749,
							"parameters": {
								"key": "\"Level\"",
								"value": "0"
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 564190190900512,
							"parameters": {
								"key": "\"0\"",
								"value": "\"Empty\""
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 191992814568536,
							"parameters": {
								"key": "\"1\"",
								"value": "\"Empty\""
							}
						},
						{
							"id": "set-key",
							"objectClass": "DictProfile",
							"sid": 890622131875728,
							"parameters": {
								"key": "\"2\"",
								"value": "\"Empty\""
							}
						},
						{
							"callFunction": "saveProfile",
							"sid": 789836337644651
						},
						{
							"type": "comment",
							"text": "Go to credits."
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 153880608269377,
							"parameters": {
								"layout": "Credits"
							}
						}
					],
					"sid": 621718439646408
				}
			],
			"sid": 673267585091423
		}
	],
	"sid": 867123092619824
}