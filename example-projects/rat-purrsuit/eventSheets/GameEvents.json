{
	"name": "GameEvents",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Forsteri Studios\n\nFelipe Vaiano Calderan - Programmer\nX: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nX: @andrart7\nE-mail: wesleymatos1989@gmail.com"
		},
		{
			"eventType": "comment",
			"text": "Settings"
		},
		{
			"eventType": "variable",
			"name": "NUMBER_OF_LEVELS",
			"type": "number",
			"initialValue": "6",
			"comment": "Total number of levels in the game",
			"isStatic": false,
			"isConstant": true,
			"sid": 939463073549697
		},
		{
			"eventType": "comment",
			"text": "Gameplay variables."
		},
		{
			"eventType": "variable",
			"name": "rTime",
			"type": "number",
			"initialValue": "60",
			"comment": "Remaining time",
			"isStatic": false,
			"isConstant": false,
			"sid": 544413369905672
		},
		{
			"eventType": "variable",
			"name": "score",
			"type": "number",
			"initialValue": "0",
			"comment": "Player score",
			"isStatic": false,
			"isConstant": false,
			"sid": 157098274683174
		},
		{
			"eventType": "variable",
			"name": "waitingSpace",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Waiting for the player to press Space",
			"isStatic": false,
			"isConstant": false,
			"sid": 921151142258337
		},
		{
			"eventType": "variable",
			"name": "playerWon",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Did the player win the level?",
			"isStatic": false,
			"isConstant": false,
			"sid": 188083516771003
		},
		{
			"eventType": "variable",
			"name": "playerFailed",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Did the player fail?",
			"isStatic": false,
			"isConstant": false,
			"sid": 587230273925040
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Time",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Reduce remaining time to capture the rat."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 392001954873774,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"TimeTick\""
							}
						}
					],
					"actions": [],
					"sid": 295671562015248,
					"children": [
						{
							"eventType": "comment",
							"text": "Plenty time."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 783455466088191,
									"parameters": {
										"value": "rTime > 10"
									}
								}
							],
							"actions": [
								{
									"id": "subtract-from-eventvar",
									"objectClass": "System",
									"sid": 294010000396535,
									"parameters": {
										"variable": "rTime",
										"value": "1"
									}
								},
								{
									"callFunction": "updateUI",
									"sid": 463262451779022
								}
							],
							"sid": 229454480531434
						},
						{
							"eventType": "comment",
							"text": "Running out of time"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 999249758296595
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 414420559620601,
									"parameters": {
										"value": "rTime > 0"
									}
								}
							],
							"actions": [],
							"sid": 337983528243962,
							"children": [
								{
									"eventType": "comment",
									"text": "Play tick-tock sound effect."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 571205939467657,
											"parameters": {
												"value": "(rTime % 2) = 0"
											}
										}
									],
									"actions": [
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 731798554962372,
											"parameters": {
												"audio-file": "tick",
												"loop": "not-looping",
												"volume": "savedSound = 1 ? 0 : -Infinity",
												"stereo-pan": "0",
												"tag-optional": "\"SFX\""
											}
										}
									],
									"sid": 507125197798140
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 559640251202613
										}
									],
									"actions": [
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 204330464051258,
											"parameters": {
												"audio-file": "tock",
												"loop": "not-looping",
												"volume": "savedSound = 1 ? 0 : -Infinity",
												"stereo-pan": "0",
												"tag-optional": "\"SFX\""
											}
										}
									],
									"sid": 174610759690652
								},
								{
									"eventType": "comment",
									"text": "Update time."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 499850071704174,
											"parameters": {
												"variable": "rTime",
												"value": "1"
											}
										},
										{
											"callFunction": "updateUI",
											"sid": 458521291745306
										},
										{
											"type": "comment",
											"text": "Animate time container."
										},
										{
											"id": "tween-two-properties",
											"objectClass": "IconGameUITime",
											"sid": 677605336640869,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"BounceTime\"",
												"property": "scale",
												"end-x": "1.5",
												"end-y": "1.5",
												"time": "0.25",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "yes",
												"repeat-count": "1"
											}
										}
									],
									"sid": 564101591511261
								}
							]
						},
						{
							"eventType": "comment",
							"text": "No time left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 920312683779578
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 454359193303323,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 231597223282309,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect. "
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 919033481993657,
									"parameters": {
										"audio-file": "outOfTime",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? 0 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Player failed."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 805950921458274,
									"parameters": {
										"variable": "playerFailed",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Hide corner tutorial."
								},
								{
									"callFunction": "hideTutorialCorner",
									"sid": 975005202429920
								},
								{
									"type": "comment",
									"text": "Show outcome text."
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcome",
									"sid": 607621062895853,
									"parameters": {
										"text": "\"You ran out of time!\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcomeShadow",
									"sid": 333560817296690,
									"parameters": {
										"text": "\"You ran out of time!\""
									}
								},
								{
									"id": "set-font-color",
									"objectClass": "TextOutcome",
									"sid": 274603056569814,
									"parameters": {
										"color": "rgba255(255, 0, 0,255)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextOutcome",
									"sid": 538906663698807,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowTextOutcome\"",
										"property": "offsetY",
										"end-value": "LayoutHeight/3",
										"time": "2",
										"ease": "easeoutback",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Freeze game."
								},
								{
									"callFunction": "freezeGame",
									"sid": 554808345792221
								},
								{
									"type": "comment",
									"text": "Set rat animation."
								},
								{
									"id": "set-animation",
									"objectClass": "Rat",
									"sid": 886394266279018,
									"parameters": {
										"animation": "\"Laughing\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-width",
									"objectClass": "Rat",
									"sid": 935904816174625,
									"parameters": {
										"width": "Self.ImageWidth"
									}
								},
								{
									"type": "comment",
									"text": "Setup camera."
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 197878505756338,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraZoom\"",
										"start-value": "1.0",
										"end-value": "2.0",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 291946952956974,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanX\"",
										"start-value": "scrollx",
										"end-value": "Rat.X",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 855973209921690,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanY\"",
										"start-value": "scrolly",
										"end-value": "Rat.Y",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 946488086766856,
									"parameters": {
										"seconds": "0.5"
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 127263741181654,
									"parameters": {
										"audio-file": "laugh",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? 0 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Fade out."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 718394662542199
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 213897775138125,
									"parameters": {
										"seconds": "2.5"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 397537832789879,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Restart the level."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 643884116853543
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 935510418056085
								}
							],
							"sid": 232036989435040
						}
					]
				}
			],
			"sid": 712540613332950
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Freeze Game",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Freeze the game."
				},
				{
					"functionName": "freezeGame",
					"functionDescription": "Freeze the game",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Disable rat."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 933295853565027,
							"parameters": {
								"group-name": "\"Rat\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Disable player controls."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 487402737032190,
							"parameters": {
								"group-name": "\"Player Controls\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Stop animating the rat."
						},
						{
							"id": "stop-animation",
							"objectClass": "Rat",
							"sid": 690919513840807
						},
						{
							"type": "comment",
							"text": "Stop animating the player."
						},
						{
							"id": "stop-animation",
							"objectClass": "Player",
							"sid": 360510831401678
						},
						{
							"type": "comment",
							"text": "Stop both the rat and the player."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Rat",
							"sid": 529307723402827,
							"parameters": {
								"instance-variable": "speed",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 901812113022064,
							"parameters": {
								"instance-variable": "speed",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Player",
							"sid": 417104472205433,
							"parameters": {
								"instance-variable": "maxSpeed",
								"value": "0"
							}
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "Player",
							"sid": 657278451387083,
							"behaviorType": "Tween"
						},
						{
							"id": "stop-all-timers",
							"objectClass": "Player",
							"sid": 547957412735478,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Stop game time."
						},
						{
							"id": "stop-all-timers",
							"objectClass": "GameManager",
							"sid": 962140135205199,
							"behaviorType": "Timer"
						},
						{
							"type": "comment",
							"text": "Stop all threats."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Skate",
							"sid": 974363099728218,
							"parameters": {
								"instance-variable": "speed",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Jetpack",
							"sid": 470116372273819,
							"parameters": {
								"instance-variable": "speed",
								"value": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "UFO",
							"sid": 550995200350595,
							"parameters": {
								"instance-variable": "speed",
								"value": "0"
							}
						},
						{
							"id": "set-active",
							"objectClass": "UFO",
							"sid": 117213555937460,
							"behaviorType": "Sine",
							"parameters": {
								"state": "inactive"
							}
						},
						{
							"type": "comment",
							"text": "Stop elevators."
						},
						{
							"id": "stop-all-timers",
							"objectClass": "ElevatorManager",
							"sid": 547548569035670,
							"behaviorType": "Timer"
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "ElevatorDoor",
							"sid": 767496663527675,
							"behaviorType": "Tween"
						},
						{
							"type": "comment",
							"text": "Rest UI size."
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "IconGameUIScore",
							"sid": 441362268626064,
							"behaviorType": "Tween"
						},
						{
							"id": "tween-two-properties",
							"objectClass": "IconGameUIScore",
							"sid": 437054469317757,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ResetScoreSize\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "stop-all-tweens",
							"objectClass": "IconGameUITime",
							"sid": 257001060748831,
							"behaviorType": "Tween"
						},
						{
							"id": "tween-two-properties",
							"objectClass": "IconGameUITime",
							"sid": 805633566887843,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ResetScoreSize\"",
								"property": "scale",
								"end-x": "1",
								"end-y": "1",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 901126743589406
				}
			],
			"sid": 922682641588000
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Tutorial",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup tutorial."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 577017217590624
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "TutorialFrame",
							"sid": 304998873430596,
							"parameters": {
								"visibility": "invisible"
							}
						},
						{
							"id": "set-size",
							"objectClass": "TutorialFrame",
							"sid": 693252064432561,
							"parameters": {
								"width": "16",
								"height": "16"
							}
						}
					],
					"sid": 331318015996107
				},
				{
					"eventType": "comment",
					"text": "Next dialogue."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 553871528329397,
							"parameters": {
								"key": 32
							}
						}
					],
					"actions": [],
					"sid": 600312571614319,
					"children": [
						{
							"eventType": "comment",
							"text": "Go to the next dialogue."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 645928621719519,
									"parameters": {
										"variable": "waitingSpace"
									}
								},
								{
									"id": "is-any-playing",
									"objectClass": "TutorialFrame",
									"sid": 780433456375703,
									"behaviorType": "Tween",
									"isInverted": true
								},
								{
									"id": "is-running-typewriter-text",
									"objectClass": "TextTutorial",
									"sid": 276100219517608,
									"isInverted": true
								},
								{
									"id": "is-visible",
									"objectClass": "TutorialFrame",
									"sid": 882026263901593
								},
								{
									"id": "compare-width",
									"objectClass": "TutorialFrame",
									"sid": 863967394582245,
									"parameters": {
										"comparison": 4,
										"width": "32"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 184144288800666,
									"parameters": {
										"audio-file": "gameStart",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? 0 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 482665988245945,
									"parameters": {
										"tag": "\"\"",
										"playback-rate": "2.0"
									}
								},
								{
									"type": "comment",
									"text": "Hide text."
								},
								{
									"id": "set-text",
									"objectClass": "TextTutorial",
									"sid": 165302135067606,
									"parameters": {
										"text": "\"\""
									}
								},
								{
									"id": "set-visible",
									"objectClass": "TextTutorial",
									"sid": 416405792091833,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Hide tutorial frame."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "TutorialFrame",
									"sid": 982815836964237,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"tutorialSize\"",
										"property": "size",
										"end-x": "16",
										"end-y": "16",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 431776129147752
								},
								{
									"id": "set-visible",
									"objectClass": "TutorialFrame",
									"sid": 395234501066701,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Go to the next dialogue."
								},
								{
									"id": "signal",
									"objectClass": "System",
									"sid": 992402187499122,
									"parameters": {
										"tag": "\"NextDialogueSpace\""
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 521722695741380,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "activated"
									}
								}
							],
							"sid": 350636576202825
						},
						{
							"eventType": "comment",
							"text": "Finish typewritter."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 313762765819161
								},
								{
									"id": "is-running-typewriter-text",
									"objectClass": "TextTutorial",
									"sid": 708808541381258
								}
							],
							"actions": [
								{
									"id": "typewriter-finish",
									"objectClass": "TextTutorial",
									"sid": 810648020599051
								}
							],
							"sid": 703002655852924
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Display temporary corner tutorial."
				},
				{
					"functionName": "displayTutorialCorner",
					"functionDescription": "Display temporary corner tutorial",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "Text to be displayed",
							"sid": 181185132571084
						},
						{
							"name": "anim",
							"type": "string",
							"initialValue": "",
							"comment": "Tutorial sprite animation",
							"sid": 979943647921394
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 632633474525677,
					"children": [
						{
							"eventType": "comment",
							"text": "Tutorial is not hidden."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-x",
									"objectClass": "TutorialFrameCorner",
									"sid": 731581886786356,
									"parameters": {
										"comparison": 1,
										"x-co-ordinate": "2208"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Hide tutorial."
								},
								{
									"id": "stop-all-timers",
									"objectClass": "TutorialFrameCorner",
									"sid": 478907794577552,
									"behaviorType": "Timer"
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialFrameCorner",
									"sid": 535811113079337,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideTutorialCorner\"",
										"property": "offsetX",
										"end-value": "2208",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Setup text and animation."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 859275715562331
								},
								{
									"id": "set-text",
									"objectClass": "TextTutorialCorner",
									"sid": 363758495840347,
									"parameters": {
										"text": "text"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "SpriteTutorialCorner",
									"sid": 475061009167818,
									"parameters": {
										"animation": "anim",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Bring tutorial into the screen."
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialFrameCorner",
									"sid": 243574056810913,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowTutorialCorner\"",
										"property": "offsetX",
										"end-value": "1632",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "TutorialFrameCorner",
									"sid": 254707855192010,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "5.0",
										"type": "once",
										"tag": "\"HideTutorialCorner\""
									}
								}
							],
							"sid": 839254701367944
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 438239498425581
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Setup text and animation."
								},
								{
									"id": "set-text",
									"objectClass": "TextTutorialCorner",
									"sid": 401378836278078,
									"parameters": {
										"text": "text"
									}
								},
								{
									"id": "set-animation",
									"objectClass": "SpriteTutorialCorner",
									"sid": 322780769236476,
									"parameters": {
										"animation": "anim",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Bring tutorial into the screen."
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialFrameCorner",
									"sid": 204023598344790,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowTutorialCorner\"",
										"property": "offsetX",
										"end-value": "1632",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "TutorialFrameCorner",
									"sid": 961446013154276,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "5.0",
										"type": "once",
										"tag": "\"HideTutorialCorner\""
									}
								}
							],
							"sid": 872305737382303
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Hide temporary corner tutorial immediately."
				},
				{
					"functionName": "hideTutorialCorner",
					"functionDescription": "Hide temporary corner tutorial immediately",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-x",
							"objectClass": "TutorialFrameCorner",
							"sid": 476781890312313,
							"parameters": {
								"comparison": 1,
								"x-co-ordinate": "2208"
							}
						}
					],
					"actions": [
						{
							"id": "stop-all-timers",
							"objectClass": "TutorialFrameCorner",
							"sid": 186600356904569,
							"behaviorType": "Timer"
						},
						{
							"id": "tween-one-property",
							"objectClass": "TutorialFrameCorner",
							"sid": 351542072430757,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorialCorner\"",
								"property": "offsetX",
								"end-value": "2208",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 954788081773747
				},
				{
					"eventType": "comment",
					"text": "Hide temporary corner tutorial."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "TutorialFrameCorner",
							"sid": 478027794019448,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"HideTutorialCorner\""
							}
						}
					],
					"actions": [
						{
							"id": "tween-one-property",
							"objectClass": "TutorialFrameCorner",
							"sid": 271055441163776,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"HideTutorialCorner\"",
								"property": "offsetX",
								"end-value": "2208",
								"time": "0.5",
								"ease": "easeinsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						}
					],
					"sid": 580728205414903
				},
				{
					"eventType": "comment",
					"text": "Display a tutorial frame with text in it."
				},
				{
					"functionName": "displayTutorial",
					"functionDescription": "Display a tutorial frame with text in it",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "Text to be displayed in the tutorial box",
							"sid": 872032194388811
						},
						{
							"name": "width",
							"type": "number",
							"initialValue": "0",
							"comment": "Width of the tutorial box",
							"sid": 468700278661937
						},
						{
							"name": "height",
							"type": "number",
							"initialValue": "0",
							"comment": "Height of the tutorial box",
							"sid": 587664077650849
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Pause the game."
						},
						{
							"id": "set-time-scale",
							"objectClass": "System",
							"sid": 414747219281785,
							"parameters": {
								"time-scale": "0.0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 772956569894769,
							"parameters": {
								"object": "TutorialArrow",
								"time-scale": "1.0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 149644553129212,
							"parameters": {
								"object": "TutorialFrameCorner",
								"time-scale": "1.0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 682689689094731,
							"parameters": {
								"object": "TutorialFrame",
								"time-scale": "1.0"
							}
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 448274933292741,
							"parameters": {
								"object": "TextTutorial",
								"time-scale": "1.0"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 428542706523728,
							"parameters": {
								"group-name": "\"Player Controls\"",
								"state": "deactivated"
							}
						},
						{
							"type": "comment",
							"text": "Do not let the player go to the next dialogue."
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 710685051469416,
							"parameters": {
								"variable": "waitingSpace",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Erase text."
						},
						{
							"id": "set-text",
							"objectClass": "TextTutorial",
							"sid": 499047461778895,
							"parameters": {
								"text": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Show tutorial frame."
						},
						{
							"id": "set-visible",
							"objectClass": "TutorialFrame",
							"sid": 557517820744836,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "tween-two-properties",
							"objectClass": "TutorialFrame",
							"sid": 367594614420115,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"tutorialSize\"",
								"property": "size",
								"end-x": "width",
								"end-y": "height",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Show text and write dialogue."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 538138626897512
						},
						{
							"id": "set-visible",
							"objectClass": "TextTutorial",
							"sid": 224690651178755,
							"parameters": {
								"visibility": "visible"
							}
						},
						{
							"id": "set-size",
							"objectClass": "TextTutorial",
							"sid": 498841743749374,
							"parameters": {
								"width": "TutorialFrame.Width - 128",
								"height": "TutorialFrame.Height - 128"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 676567730662833
						}
					],
					"sid": 748124486030870,
					"children": [
						{
							"eventType": "variable",
							"name": "fullText",
							"type": "string",
							"initialValue": "",
							"comment": "Full text to be displayed",
							"isStatic": false,
							"isConstant": false,
							"sid": 213818649436709
						},
						{
							"eventType": "comment",
							"text": "Set prompt."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 632899092349147,
									"parameters": {
										"variable": "fullText",
										"value": "text & newline & newline & \"Press [icon=space] to continue...\""
									}
								},
								{
									"id": "typewriter-text",
									"objectClass": "TextTutorial",
									"sid": 442046608785789,
									"parameters": {
										"text": "fullText",
										"duration": "len(fullText) * 0.025"
									}
								}
							],
							"sid": 765929487324966
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Let the player go to the next dialogue."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-typewriter-text-finished",
							"objectClass": "TextTutorial",
							"sid": 332378639055696
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 310442121075269,
							"parameters": {
								"variable": "waitingSpace",
								"value": "true"
							}
						}
					],
					"sid": 776489531819680
				},
				{
					"eventType": "comment",
					"text": "Trigger a tutorial dialogue."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 564061028702342,
							"parameters": {
								"object": "TutorialTrigger"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "TutorialTrigger",
							"sid": 967048645806896,
							"parameters": {
								"instance-variable": "enabled"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Disable trigger."
						},
						{
							"id": "set-boolean-instvar",
							"objectClass": "TutorialTrigger",
							"sid": 475761086949848,
							"parameters": {
								"instance-variable": "enabled",
								"value": "false"
							}
						},
						{
							"type": "comment",
							"text": "Disable player controls."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 947256202047709,
							"parameters": {
								"group-name": "\"Player Controls\"",
								"state": "deactivated"
							}
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 669355263331398,
							"parameters": {
								"group-name": "\"Player Controls (Elevator)\"",
								"state": "deactivated"
							}
						}
					],
					"sid": 865614553928284,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "TutorialTrigger",
									"sid": 670767215684538,
									"parameters": {
										"instance-variable": "tutorialID",
										"comparison": 0,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "hideTutorialCorner",
									"sid": 114266212623347
								},
								{
									"callFunction": "displayTutorial",
									"sid": 718238001411759,
									"parameters": [
										"\"Look! An elevator! You can use it to travel up and down the floors. Each floor also has a staircase, but it's only for moving up, not down.\"",
										"1024",
										"600"
									]
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 540701955185130,
									"parameters": {
										"tag": "\"NextDialogueSpace\""
									}
								},
								{
									"callFunction": "displayTutorialCorner",
									"sid": 787263197885213,
									"parameters": [
										"\"Enter/Exit Elevator\"",
										"\"Elevator\""
									]
								},
								{
									"type": "comment",
									"text": "Unpause game."
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 693467286737379,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "activated"
									}
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 752999384989928,
									"parameters": {
										"time-scale": "1.0"
									}
								}
							],
							"sid": 384416856716950
						}
					]
				}
			],
			"sid": 248179803666236
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Back To Menu",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Go back to the main menu."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 145133411318118,
							"parameters": {
								"key": 27
							}
						},
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 585650265168399,
							"parameters": {
								"value": "timescale = 1"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Fader",
							"sid": 449018056823652,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 643834774197642,
							"parameters": {
								"variable": "playerWon"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 795257597807736,
							"parameters": {
								"variable": "playerFailed"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Pause the game."
						},
						{
							"id": "set-time-scale",
							"objectClass": "System",
							"sid": 439971489858309,
							"parameters": {
								"time-scale": "0.0"
							}
						},
						{
							"type": "comment",
							"text": "Do not pause the fader."
						},
						{
							"id": "set-object-time-scale",
							"objectClass": "System",
							"sid": 583601865180478,
							"parameters": {
								"object": "Fader",
								"time-scale": "1.0"
							}
						},
						{
							"type": "comment",
							"text": "Fade the game and the BGM out."
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 658845575054497,
							"parameters": {
								"tag": "\"BGMIntro\"",
								"db": "-Infinity",
								"duration": "0.5",
								"ending": "stop"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 301119270078254,
							"parameters": {
								"tag": "\"BGM\"",
								"db": "-Infinity",
								"duration": "0.5",
								"ending": "stop"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Fader",
							"sid": 157751450403097,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"ShowFader\"",
								"property": "offsetOpacity",
								"end-value": "100",
								"time": "0.5",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 739797731085452
						},
						{
							"id": "go-to-layout",
							"objectClass": "System",
							"sid": 445337542811638,
							"parameters": {
								"layout": "Menu"
							}
						}
					],
					"sid": 189277101831071
				}
			],
			"sid": 600426055920319
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game Setup",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup game."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 472399042981824
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Set number of level."
						},
						{
							"id": "set-text",
							"objectClass": "TextLevel",
							"sid": 542528833799499,
							"parameters": {
								"text": "right(LayoutName, 1) & \"/\" & NUMBER_OF_LEVELS"
							}
						},
						{
							"type": "comment",
							"text": "Reset important variables."
						},
						{
							"id": "reset-eventvar",
							"objectClass": "System",
							"sid": 303151407954751,
							"parameters": {
								"variable": "waitingSpace"
							}
						},
						{
							"id": "reset-eventvar",
							"objectClass": "System",
							"sid": 549060332091186,
							"parameters": {
								"variable": "playerWon"
							}
						},
						{
							"id": "reset-eventvar",
							"objectClass": "System",
							"sid": 964819803717415,
							"parameters": {
								"variable": "playerFailed"
							}
						},
						{
							"type": "comment",
							"text": "Set score to saved score."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 673661627230812,
							"parameters": {
								"variable": "score",
								"value": "savedScore"
							}
						},
						{
							"type": "comment",
							"text": "Set starting level time."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 188783642928728,
							"parameters": {
								"variable": "rTime",
								"value": "GameManager.startingTime"
							}
						},
						{
							"type": "comment",
							"text": "Reset layout scale."
						},
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 668600456156203,
							"parameters": {
								"scale": "1.0"
							}
						},
						{
							"type": "comment",
							"text": "Set minimap animation."
						},
						{
							"id": "set-animation",
							"objectClass": "MinimapBG",
							"sid": 263475231160940,
							"parameters": {
								"animation": "LayoutName",
								"from": "beginning"
							}
						},
						{
							"id": "set-x",
							"objectClass": "MinimapBG",
							"sid": 510406211278338,
							"parameters": {
								"x": "ViewportWidth(\"UI\")/2 - Self.ImageWidth/2"
							}
						},
						{
							"type": "comment",
							"text": "Enable rat."
						},
						{
							"id": "set-group-active",
							"objectClass": "System",
							"sid": 412037419247942,
							"parameters": {
								"group-name": "\"Rat\"",
								"state": "activated"
							}
						},
						{
							"type": "comment",
							"text": "Enable game time."
						},
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 229741439816189,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "regular",
								"tag": "\"TimeTick\""
							}
						},
						{
							"type": "comment",
							"text": "Set up UI texts."
						},
						{
							"callFunction": "updateUI",
							"sid": 909219053226683
						}
					],
					"sid": 843627812103904,
					"children": [
						{
							"eventType": "comment",
							"text": "Play BGM intro if it's enabled."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-tag-playing",
									"objectClass": "Audio",
									"sid": 286318881436462,
									"parameters": {
										"tag": "\"BGM\""
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 421546363021122,
									"parameters": {
										"audio-file": "GameplayIntro",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -2 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"BGMIntro\""
									}
								}
							],
							"sid": 734368184689586
						},
						{
							"eventType": "comment",
							"text": "Special setup for level 1."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 307357360360018,
									"parameters": {
										"value": "LayoutName = \"Level1\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Fade in."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 426135804143731,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFader\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Disable player controls."
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 599196923457753,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 652196497758723,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\"",
										"state": "deactivated"
									}
								},
								{
									"type": "comment",
									"text": "Show tutorial."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 519862871827253
								},
								{
									"callFunction": "displayTutorial",
									"sid": 636029271063441,
									"parameters": [
										"\"Welcome! There is a pesky rat in the neighborhood, and you, the apex rat hunter, have been hired to catch him.\"",
										"1024",
										"600"
									]
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 512485798309497,
									"parameters": {
										"tag": "\"NextDialogueSpace\""
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialArrow",
									"sid": 801532558325064,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideTutorialArrow\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Unpause game."
								},
								{
									"callFunction": "displayTutorialCorner",
									"sid": 577171570441274,
									"parameters": [
										"\"Jump & Move\"",
										"\"JumpMove\""
									]
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 485382054815963,
									"parameters": {
										"time-scale": "1.0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 542469563293115,
									"parameters": {
										"instance-variable": "speed",
										"value": "320"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 119957704389211,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "activated"
									}
								}
							],
							"sid": 441353514629765
						},
						{
							"eventType": "comment",
							"text": "Special setup for level 2."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 584506161931498
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 607029600102649,
									"parameters": {
										"value": "LayoutName = \"Level2\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Fade in."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 789248961239725,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFader\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Disable player controls."
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 337538132504423,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "deactivated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 592952589549641,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\"",
										"state": "deactivated"
									}
								},
								{
									"type": "comment",
									"text": "Show tutorial."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 476427962734315
								},
								{
									"callFunction": "displayTutorial",
									"sid": 502485948823992,
									"parameters": [
										"\"Well done, but it's not over yet! Watch out for incoming rat army this time. Contact with [icon=ground] & [icon=bounce] cause slowdown and loss of points, while with [icon=trap] & [icon=fly] lead to immediate failure.\"",
										"1280",
										"640"
									]
								},
								{
									"id": "wait-for-signal",
									"objectClass": "System",
									"sid": 350780831475733,
									"parameters": {
										"tag": "\"NextDialogueSpace\""
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TutorialArrow",
									"sid": 115453041199060,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideTutorialArrow\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Unpause game."
								},
								{
									"callFunction": "displayTutorialCorner",
									"sid": 286810642939539,
									"parameters": [
										"\"Main Menu & Mute\"",
										"\"MenuMute\""
									]
								},
								{
									"id": "set-time-scale",
									"objectClass": "System",
									"sid": 872561846086008,
									"parameters": {
										"time-scale": "1.0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 998470205399792,
									"parameters": {
										"instance-variable": "speed",
										"value": "300"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 732879967259238,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "activated"
									}
								}
							],
							"sid": 869399271784095
						},
						{
							"eventType": "comment",
							"text": "Generic setup."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 490390667240674
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Set controls."
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 226712422062031,
									"parameters": {
										"group-name": "\"Player Controls\"",
										"state": "activated"
									}
								},
								{
									"id": "set-group-active",
									"objectClass": "System",
									"sid": 737327729940415,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\"",
										"state": "deactivated"
									}
								},
								{
									"type": "comment",
									"text": "Fade in."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 135498877235209,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"HideFader\"",
										"property": "offsetOpacity",
										"end-value": "0",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Initial cooldown for the spawners."
								},
								{
									"id": "start-timer",
									"objectClass": "UFOSpawner",
									"sid": 241916043588010,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2.0",
										"type": "once",
										"tag": "\"cooldown\""
									}
								},
								{
									"id": "start-timer",
									"objectClass": "SkateSpawner",
									"sid": 215287544852260,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2.0",
										"type": "once",
										"tag": "\"cooldown\""
									}
								},
								{
									"id": "start-timer",
									"objectClass": "JetpackSpawner",
									"sid": 691354580130068,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2.0",
										"type": "once",
										"tag": "\"cooldown\""
									}
								}
							],
							"sid": 124375623718752
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When BGM intro ends, start the looping part of the in-game BGM."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-ended",
							"objectClass": "Audio",
							"sid": 439813102842081,
							"parameters": {
								"tag": "\"BGMIntro\""
							}
						}
					],
					"actions": [
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 305756285963838,
							"parameters": {
								"audio-file": "GameplayLoop",
								"loop": "looping",
								"volume": "savedSound = 1 ? -2 : -Infinity",
								"stereo-pan": "0",
								"tag-optional": "\"BGM\""
							}
						}
					],
					"sid": 210424733050397
				}
			],
			"sid": 351316221798340
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Camera always starts on the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 202733244008701
						}
					],
					"actions": [
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 560122664146451,
							"parameters": {
								"x": "Player.X"
							}
						}
					],
					"sid": 636283516616133
				},
				{
					"eventType": "comment",
					"text": "The camera follows the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 418160234359759,
							"parameters": {
								"variable": "playerWon"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 491401640664558,
							"parameters": {
								"variable": "playerFailed"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 773066590686143,
							"parameters": {
								"x": "clamp(lerp(scrollx, Player.X, 10 * dt), ViewportWidth(\"UI\")/2, LayoutWidth - ViewportWidth(\"UI\")/2)"
							}
						}
					],
					"sid": 796583128828402
				},
				{
					"eventType": "comment",
					"text": "Apply Camera Zoom."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 947091276263563,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"CameraZoom\""
							}
						}
					],
					"actions": [
						{
							"id": "set-layout-scale",
							"objectClass": "System",
							"sid": 713453722904001,
							"parameters": {
								"scale": "GameManager.Tween.Value(\"CameraZoom\")"
							}
						}
					],
					"sid": 698661327138479
				},
				{
					"eventType": "comment",
					"text": "Apply Camera Pan X & Y."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 736346866353265,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"CameraPanX\""
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 526218227298087,
							"parameters": {
								"x": "clamp(GameManager.Tween.Value(\"CameraPanX\"), ViewportWidth(\"UI\")/2, LayoutWidth - ViewportWidth(\"UI\")/2)"
							}
						}
					],
					"sid": 222032742386543
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "GameManager",
							"sid": 301983926368829,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"CameraPanY\""
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 854409019891923,
							"parameters": {
								"y": "clamp(GameManager.Tween.Value(\"CameraPanY\"), ViewportHeight(\"UI\")/2, LayoutHeight - ViewportHeight(\"UI\")/2)"
							}
						}
					],
					"sid": 685856523740887
				}
			],
			"sid": 141453423052599
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Transport",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "Stairs",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Player goes up stairs."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Player",
									"sid": 412099234626146,
									"parameters": {
										"object": "Stairs"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 198679915204813,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 273606072928541,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 840126761365758,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 354035959337188,
							"children": [
								{
									"eventType": "variable",
									"name": "bestDistance",
									"type": "number",
									"initialValue": "999999",
									"comment": "Best (lowest) distance to a snap point",
									"isStatic": false,
									"isConstant": false,
									"sid": 457002348076631
								},
								{
									"eventType": "variable",
									"name": "bestSnap",
									"type": "number",
									"initialValue": "0",
									"comment": "Best snap point to position the player",
									"isStatic": false,
									"isConstant": false,
									"sid": 648647153453686
								},
								{
									"eventType": "variable",
									"name": "currDistance",
									"type": "number",
									"initialValue": "0",
									"comment": "Distance to current snap point",
									"isStatic": false,
									"isConstant": false,
									"sid": 552086862115156
								},
								{
									"eventType": "comment",
									"text": "Find best snap point for the player."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 469684379420953,
											"parameters": {
												"name": "\"i\"",
												"start-index": "0",
												"end-index": "5"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 282759917616837,
											"parameters": {
												"variable": "currDistance",
												"value": "distance(Player.X, Player.Y, Stairs.ImagePointX(\"snap\" & loopindex(\"i\")), Stairs.ImagePointY(\"snap\" & loopindex(\"i\")))"
											}
										}
									],
									"sid": 261755959985036,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 187172472157773,
													"parameters": {
														"value": "currDistance < bestDistance"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 818063230583492,
													"parameters": {
														"variable": "bestDistance",
														"value": "currDistance"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 644287617411883,
													"parameters": {
														"variable": "bestSnap",
														"value": "loopindex(\"i\")"
													}
												}
											],
											"sid": 651895875156538
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Make the player go up the stairs."
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"type": "comment",
											"text": "Make the player go up a floor."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 712775780242328,
											"parameters": {
												"instance-variable": "currFloor",
												"value": "Self.currFloor + 1"
											}
										},
										{
											"type": "comment",
											"text": "Disable player controls."
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 955622541578657,
											"parameters": {
												"group-name": "\"Player Controls\"",
												"state": "deactivated"
											}
										},
										{
											"type": "comment",
											"text": "Mark the player as going up stairs."
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 986291545578327,
											"parameters": {
												"instance-variable": "stairs",
												"value": "true"
											}
										},
										{
											"type": "comment",
											"text": "Change player animation to standing."
										},
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 212161193600124,
											"parameters": {
												"animation": "\"Running\"",
												"from": "beginning"
											}
										},
										{
											"type": "comment",
											"text": "Snap player to the closest valid position to go up the stairs."
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 657346113905991,
											"parameters": {
												"x": "Stairs.ImagePointX(\"snap\" & bestSnap)",
												"y": "Stairs.ImagePointY(\"snap\" & bestSnap)"
											}
										},
										{
											"type": "comment",
											"text": "Stop all player movement and move along the stairs."
										},
										{
											"id": "stop-timer",
											"objectClass": "Player",
											"sid": 417431820426251,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"jumping\""
											}
										},
										{
											"id": "stop-all-tweens",
											"objectClass": "Player",
											"sid": 928102434968613,
											"behaviorType": "Tween"
										},
										{
											"id": "tween-two-properties",
											"objectClass": "Player",
											"sid": 184308628234743,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"MoveUp\"",
												"property": "position",
												"end-x": "Stairs.X + Stairs.Width - 32 * sign(Stairs.Width)",
												"end-y": "Stairs.Y - Stairs.Height + 104",
												"time": "distance(Player.X, Player.Y, Stairs.X + Stairs.Width - 32 * sign(Stairs.Width), Stairs.Y - Stairs.Height + 104) * 0.005",
												"ease": "noease",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-animation-speed",
											"objectClass": "Player",
											"sid": 937350127746438,
											"parameters": {
												"speed": "8"
											}
										},
										{
											"type": "comment",
											"text": "Re-enable player controls."
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 864922046563659
										},
										{
											"id": "set-animation-speed",
											"objectClass": "Player",
											"sid": 291531930087234,
											"parameters": {
												"speed": "10"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 733605635873066,
											"parameters": {
												"instance-variable": "jumping",
												"value": "false"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 834188362639200,
											"parameters": {
												"group-name": "\"Player Controls\"",
												"state": "activated"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 560708006303504,
											"parameters": {
												"instance-variable": "stairs",
												"value": "false"
											}
										}
									],
									"sid": 548140269326462
								}
							]
						}
					],
					"sid": 250083065544384
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Elevator",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Start elevator cycle."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 694206701334840
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "ElevatorManager",
									"sid": 182970141114058,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "3.5",
										"type": "once",
										"tag": "\"ElevatorClose\""
									}
								}
							],
							"sid": 161174259786878
						},
						{
							"eventType": "comment",
							"text": "Close elevator door."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "ElevatorManager",
									"sid": 961518993706756,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"ElevatorClose\""
									}
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "ElevatorManager",
									"sid": 702269791076786,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2.5",
										"type": "once",
										"tag": "\"ElevatorOpen\""
									}
								}
							],
							"sid": 867335782435845,
							"children": [
								{
									"eventType": "comment",
									"text": "Pick the correct elevator spot and doors."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 909312404036437,
											"parameters": {
												"object": "Elevator",
												"expression": "Elevator.level = ElevatorManager.floor"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Elevator",
											"sid": 377480194566191,
											"parameters": {
												"child": "ElevatorDoor",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Elevator",
											"sid": 378780527860883,
											"parameters": {
												"instance-variable": "available",
												"value": "false"
											}
										}
									],
									"sid": 103107260121294,
									"children": [
										{
											"eventType": "comment",
											"text": "Close the doors."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each",
													"objectClass": "System",
													"sid": 826759890371734,
													"parameters": {
														"object": "ElevatorDoor"
													}
												}
											],
											"actions": [
												{
													"id": "tween-one-property",
													"objectClass": "ElevatorDoor",
													"sid": 870039185352635,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"DoorCloseTween\"",
														"property": "offsetWidth",
														"end-value": "Self.ImageWidth",
														"time": "0.5",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 819671237348016
										},
										{
											"eventType": "comment",
											"text": "Fade player out."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 378890732842420,
													"parameters": {
														"instance-variable": "elevatorLevel",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 330650610989654,
													"parameters": {
														"seconds": "0.5"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "Player",
													"sid": 930918658385556,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ElevPlayerFadeOut\"",
														"property": "offsetOpacity",
														"end-value": "0",
														"time": "0.5",
														"ease": "easeinsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 577710234355248
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Elevator is going down."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "ElevatorManager",
											"sid": 722932133312599,
											"parameters": {
												"instance-variable": "direction",
												"comparison": 0,
												"value": "\"down\""
											}
										}
									],
									"actions": [],
									"sid": 517408455728127,
									"children": [
										{
											"eventType": "comment",
											"text": "Can't go down anymore, therefore switch direction."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "ElevatorManager",
													"sid": 423526835490752,
													"parameters": {
														"instance-variable": "floor",
														"comparison": 0,
														"value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 249780981625625,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"up\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 420820976513271,
													"parameters": {
														"instance-variable": "floor",
														"value": "1"
													}
												}
											],
											"sid": 370082220870156
										},
										{
											"eventType": "comment",
											"text": "Keep going down."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 448707424600186
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 369749262351863,
													"parameters": {
														"instance-variable": "floor",
														"value": "Self.floor - 1"
													}
												}
											],
											"sid": 150057902721583
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Elevator is going up."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 343314216437670
										}
									],
									"actions": [],
									"sid": 274503178432370,
									"children": [
										{
											"eventType": "comment",
											"text": "Can't go up anymore, therefore switch direction."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "ElevatorManager",
													"sid": 955783925812535,
													"parameters": {
														"instance-variable": "floor",
														"comparison": 0,
														"value": "Self.maxFloor"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 974132500932424,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"down\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 632947881393702,
													"parameters": {
														"instance-variable": "floor",
														"value": "Self.maxFloor - 1"
													}
												}
											],
											"sid": 324278615615243
										},
										{
											"eventType": "comment",
											"text": "Keep going up."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 869875426223950
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "ElevatorManager",
													"sid": 644876051595508,
													"parameters": {
														"instance-variable": "floor",
														"value": "Self.floor + 1"
													}
												}
											],
											"sid": 436103876378482
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Open elevator door."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "ElevatorManager",
									"sid": 104529312470680,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"ElevatorOpen\""
									}
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "ElevatorManager",
									"sid": 646923069863314,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "3.5",
										"type": "once",
										"tag": "\"ElevatorClose\""
									}
								}
							],
							"sid": 578623090756255,
							"children": [
								{
									"eventType": "comment",
									"text": "Pick the correct elevator spot and doors."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-by-evaluate",
											"objectClass": "System",
											"sid": 253866783481961,
											"parameters": {
												"object": "Elevator",
												"expression": "Elevator.level = ElevatorManager.floor"
											}
										},
										{
											"id": "pick-children",
											"objectClass": "Elevator",
											"sid": 630028168720731,
											"parameters": {
												"child": "ElevatorDoor",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"callFunction": "updateElevatorMinimap",
											"sid": 509167634194037
										},
										{
											"type": "comment",
											"text": "Play directional sound effect. Fades with distance."
										},
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 383378427633406,
											"parameters": {
												"audio-file": "elevatorDing",
												"loop": "not-looping",
												"volume": "savedSound = 1 ? -1 -abs(Player.X - Elevator.X)^2/90000: -Infinity",
												"stereo-pan": "(Player.X - Elevator.X )/35",
												"tag-optional": "\"SFX\""
											}
										}
									],
									"sid": 910500223215568,
									"children": [
										{
											"eventType": "comment",
											"text": "If the player is inside the elevator, move it to the level where the door is opening."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "Player",
													"sid": 330703156552632,
													"parameters": {
														"instance-variable": "elevatorLevel",
														"comparison": 1,
														"value": "-1"
													}
												}
											],
											"actions": [
												{
													"id": "set-position",
													"objectClass": "Player",
													"sid": 640994156932825,
													"parameters": {
														"x": "Elevator.X",
														"y": "Elevator.Y + 88"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Player",
													"sid": 486323995997329,
													"parameters": {
														"instance-variable": "currFloor",
														"value": "Elevator.level"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "Player",
													"sid": 534405961077222,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"ElevPlayerFadeIn\"",
														"property": "offsetOpacity",
														"end-value": "100",
														"time": "0.5",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 229105739965240
										},
										{
											"eventType": "comment",
											"text": "Open the doors."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each",
													"objectClass": "System",
													"sid": 460731235954095,
													"parameters": {
														"object": "ElevatorDoor"
													}
												}
											],
											"actions": [
												{
													"id": "wait",
													"objectClass": "System",
													"sid": 522942735223960,
													"parameters": {
														"seconds": "0.5"
													}
												},
												{
													"id": "tween-one-property",
													"objectClass": "ElevatorDoor",
													"sid": 127657604819872,
													"behaviorType": "Tween",
													"parameters": {
														"tags": "\"DoorOpenTween\"",
														"property": "offsetWidth",
														"end-value": "0",
														"time": "0.5",
														"ease": "easeoutsine",
														"destroy-on-complete": "no",
														"loop": "no",
														"ping-pong": "no",
														"repeat-count": "1"
													}
												}
											],
											"sid": 284773686482919
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "After the elevator door opened, the elevator is available to use."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-tweens-finished",
									"objectClass": "ElevatorDoor",
									"sid": 770399984356916,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"DoorOpenTween\""
									}
								},
								{
									"id": "pick-parent",
									"objectClass": "ElevatorDoor",
									"sid": 607201216886408,
									"parameters": {
										"parent": "Elevator",
										"which": "own"
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Elevator",
									"sid": 967157039463701,
									"parameters": {
										"instance-variable": "available",
										"value": "true"
									}
								}
							],
							"sid": 692658226359019
						}
					],
					"sid": 485876972251163
				}
			],
			"sid": 730909747151019
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Player",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "pHorAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "Player horizontal axis",
					"isStatic": true,
					"isConstant": false,
					"sid": 514109247343958
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Player Actions",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "End jump."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "Player",
									"sid": 639709870467632,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"Jumping\""
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 754028088541775,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Start falling and set animation accordingly."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Player",
									"sid": 813782142058762,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlayerFall\"",
										"property": "offsetY",
										"end-value": "Self.Y + 96",
										"time": "0.3",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Set jumping state to false."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 577718825463190
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 684858616037402,
									"parameters": {
										"instance-variable": "jumping",
										"value": "false"
									}
								}
							],
							"sid": 484256120939559
						},
						{
							"eventType": "comment",
							"text": "Player has slowdown effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 681541654220158,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"slowdown\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 160198931003083,
									"parameters": {
										"instance-variable": "speed",
										"value": "Self.maxSpeed/4"
									}
								},
								{
									"id": "set-animation-speed",
									"objectClass": "Player",
									"sid": 494426842108265,
									"parameters": {
										"speed": "6"
									}
								}
							],
							"sid": 480696336943017
						},
						{
							"eventType": "comment",
							"text": "Player has speedup effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 653517201492400
								},
								{
									"id": "is-timer-running",
									"objectClass": "Player",
									"sid": 513481012794792,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"speedup\""
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 628588618570624,
									"parameters": {
										"instance-variable": "speed",
										"value": "Self.maxSpeed * 1.33"
									}
								},
								{
									"id": "set-animation-speed",
									"objectClass": "Player",
									"sid": 417296161498411,
									"parameters": {
										"speed": "12"
									}
								}
							],
							"sid": 279706587236242,
							"children": [
								{
									"eventType": "comment",
									"text": "When the speedup effect is applied, the player spawns a trail."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 833306590253144,
											"parameters": {
												"interval-seconds": "5*dt"
											}
										},
										{
											"id": "is-timer-running",
											"objectClass": "Player",
											"sid": 676721965593834,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"slowdown\""
											},
											"isInverted": true
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 564190857420705,
											"parameters": {
												"instance-variable": "stairs"
											},
											"isInverted": true
										},
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 575670635450067,
											"parameters": {
												"variable": "playerWon"
											},
											"isInverted": true
										},
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 417517114954557,
											"parameters": {
												"variable": "playerFailed"
											},
											"isInverted": true
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "Player",
											"sid": 752913237987437,
											"parameters": {
												"instance-variable": "elevatorLevel",
												"comparison": 0,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Create trail."
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 314602574613321,
											"parameters": {
												"object-to-create": "PlayerTrail",
												"layer": "\"PlayerTrail\"",
												"x": "Player.X",
												"y": "Player.Y",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"type": "comment",
											"text": "Set animation and frame."
										},
										{
											"id": "set-animation",
											"objectClass": "PlayerTrail",
											"sid": 581087255681969,
											"parameters": {
												"animation": "Player.AnimationName",
												"from": "beginning"
											}
										},
										{
											"id": "set-animation-frame",
											"objectClass": "PlayerTrail",
											"sid": 242618811209504,
											"parameters": {
												"frame-number": "Player.AnimationFrame"
											}
										},
										{
											"type": "comment",
											"text": "Set width."
										},
										{
											"id": "set-width",
											"objectClass": "PlayerTrail",
											"sid": 287090427220065,
											"parameters": {
												"width": "Player.Width"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "PlayerTrail",
											"sid": 763865524838039,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"FadeAndDestroyTrail\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "1",
												"ease": "noease",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										}
									],
									"sid": 861364092823807
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player has no speed effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 411822740539386
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 766300628842104,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Player",
									"sid": 278442518402029,
									"parameters": {
										"instance-variable": "speed",
										"value": "Self.maxSpeed"
									}
								},
								{
									"id": "set-animation-speed",
									"objectClass": "Player",
									"sid": 956400861013512,
									"parameters": {
										"speed": "10"
									}
								}
							],
							"sid": 909043046755479
						},
						{
							"eventType": "comment",
							"text": "Player failed by colliding with a lethal obstacle."
						},
						{
							"aceType": "action",
							"aceName": "Fail",
							"objectClass": "Player",
							"functionDescription": "Player failed by colliding with a lethal obstacle",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "custom-ace-block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 828815820693200,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 606716439110070,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\""
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 323527865838287,
									"parameters": {
										"group-name": "\"Player Controls\""
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 498705047737818,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 433069822764230,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Hide corner tutorial."
								},
								{
									"callFunction": "hideTutorialCorner",
									"sid": 315962128492302
								},
								{
									"type": "comment",
									"text": "Player failed."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 547023572606093,
									"parameters": {
										"variable": "playerFailed",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Move player to threat's layer."
								},
								{
									"id": "move-to-layer",
									"objectClass": "Player",
									"sid": 544442698530870,
									"parameters": {
										"layer": "\"Threats\""
									}
								},
								{
									"type": "comment",
									"text": "Hide minimap's player icon."
								},
								{
									"id": "set-visible",
									"objectClass": "MinimapPlayer",
									"sid": 333836134259649,
									"parameters": {
										"visibility": "toggle"
									}
								},
								{
									"type": "comment",
									"text": "Freeze game."
								},
								{
									"callFunction": "freezeGame",
									"sid": 235287191679085
								},
								{
									"type": "comment",
									"text": "Set rat animation."
								},
								{
									"id": "set-animation",
									"objectClass": "Rat",
									"sid": 267955139226698,
									"parameters": {
										"animation": "\"Laughing\"",
										"from": "beginning"
									}
								},
								{
									"id": "set-width",
									"objectClass": "Rat",
									"sid": 670967164877917,
									"parameters": {
										"width": "Self.ImageWidth"
									}
								},
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 966968629839456,
									"parameters": {
										"audio-file": "fail",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -1 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 905736770408846,
									"parameters": {
										"tag": "\"\"",
										"playback-rate": "random(0.9, 1.1)"
									}
								},
								{
									"type": "comment",
									"text": "Play death animation (part 1)."
								},
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 160412462560775,
									"parameters": {
										"animation": "\"Dead\"",
										"from": "beginning"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Player",
									"sid": 784071662668245,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlayerDeadPart1\"",
										"property": "offsetY",
										"end-value": "Self.Y - 128",
										"time": "0.5",
										"ease": "easeoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 179507872533039
								},
								{
									"type": "comment",
									"text": "Show outcome text."
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcome",
									"sid": 791597557567488,
									"parameters": {
										"text": "\"You failed!\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcomeShadow",
									"sid": 591240733810369,
									"parameters": {
										"text": "\"You failed!\""
									}
								},
								{
									"id": "set-font-color",
									"objectClass": "TextOutcome",
									"sid": 929638026883314,
									"parameters": {
										"color": "rgba255(255, 0, 0,255)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextOutcome",
									"sid": 155095500234423,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowTextOutcome\"",
										"property": "offsetY",
										"end-value": "LayoutHeight/3",
										"time": "2",
										"ease": "easeoutback",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Play death animation (part 2)."
								},
								{
									"id": "tween-one-property",
									"objectClass": "Player",
									"sid": 772122097792362,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlayerDeadPart2\"",
										"property": "offsetY",
										"end-value": "Self.Y + 1080",
										"time": "0.5",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Setup camera."
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 597739154876687,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraZoom\"",
										"start-value": "1.0",
										"end-value": "2.0",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 459291286514187,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanX\"",
										"start-value": "scrollx",
										"end-value": "Rat.X",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 724250290053688,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanY\"",
										"start-value": "scrolly",
										"end-value": "Rat.Y",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 662528572919153,
									"parameters": {
										"seconds": "0.5"
									}
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 464293947865734,
									"parameters": {
										"audio-file": "laugh",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? 0 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Fade out."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 616482223064314
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 468672006578802,
									"parameters": {
										"seconds": "2.5"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "Fader",
									"sid": 148747947455921,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowFader\"",
										"property": "offsetOpacity",
										"end-value": "100",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Restart the level."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 939070433970264
								},
								{
									"id": "restart-layout",
									"objectClass": "System",
									"sid": 998929069772488
								}
							],
							"sid": 519644427286902
						},
						{
							"eventType": "comment",
							"text": "If the player collides with the rat, they win the level."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Player",
									"sid": 260624203294233,
									"parameters": {
										"object": "Rat"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 982365123494079,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 766067534105343,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\""
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 737440883822791,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 463206925651770,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Fade the BGM out."
								},
								{
									"id": "fade-volume",
									"objectClass": "Audio",
									"sid": 427325041889810,
									"parameters": {
										"tag": "\"BGM\"",
										"db": "-Infinity",
										"duration": "1",
										"ending": "keep-playing"
									}
								},
								{
									"type": "comment",
									"text": "Play sound effect. "
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 959095278259335,
									"parameters": {
										"audio-file": "fanfare",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -2 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Hide corner tutorial."
								},
								{
									"callFunction": "hideTutorialCorner",
									"sid": 750869713421238
								},
								{
									"type": "comment",
									"text": "Show outcome text."
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcome",
									"sid": 156725149369919,
									"parameters": {
										"text": "\"You caught him!!\""
									}
								},
								{
									"id": "set-text",
									"objectClass": "TextOutcomeShadow",
									"sid": 375012610275845,
									"parameters": {
										"text": "\"You caught him!!\""
									}
								},
								{
									"id": "set-font-color",
									"objectClass": "TextOutcome",
									"sid": 275086801018314,
									"parameters": {
										"color": "rgba255(0, 255, 0,255)"
									}
								},
								{
									"id": "tween-one-property",
									"objectClass": "TextOutcome",
									"sid": 919543439587882,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"ShowTextOutcome\"",
										"property": "offsetY",
										"end-value": "LayoutHeight/3",
										"time": "2",
										"ease": "easeoutback",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Add points."
								},
								{
									"callFunction": "playerPoints",
									"sid": 997605362908512,
									"parameters": [
										"500"
									]
								},
								{
									"type": "comment",
									"text": "Player won the level."
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 395448233103884,
									"parameters": {
										"variable": "playerWon",
										"value": "true"
									}
								},
								{
									"type": "comment",
									"text": "Freeze the game."
								},
								{
									"callFunction": "freezeGame",
									"sid": 996835773932013
								},
								{
									"type": "comment",
									"text": "Set player to rat's Y position."
								},
								{
									"id": "set-y",
									"objectClass": "Player",
									"sid": 143990224255221,
									"parameters": {
										"y": "Rat.Y"
									}
								},
								{
									"type": "comment",
									"text": "Change Player animation."
								},
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 923546707294083,
									"parameters": {
										"animation": "\"PickedRat\"",
										"from": "beginning"
									}
								},
								{
									"type": "comment",
									"text": "Hide rat."
								},
								{
									"id": "set-visible",
									"objectClass": "Rat",
									"sid": 563204263060995,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"type": "comment",
									"text": "Setup camera."
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 514677534825306,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraZoom\"",
										"start-value": "1.0",
										"end-value": "2.0",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 838449771514488,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanX\"",
										"start-value": "scrollx",
										"end-value": "(Player.X + Rat.X) / 2",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-value",
									"objectClass": "GameManager",
									"sid": 905664571957492,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"CameraPanY\"",
										"start-value": "scrolly",
										"end-value": "(Player.Y + Rat.Y) / 2",
										"time": "1.0",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Move UI to the center."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "IconGameUITime",
									"sid": 334138478235601,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MoveIconToCenter\"",
										"property": "position",
										"end-x": "ViewportWidth(\"UI\")/3",
										"end-y": "ViewportHeight(\"UI\")/2",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "tween-two-properties",
									"objectClass": "IconGameUIScore",
									"sid": 984671408900191,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"MoveIconToCenter\"",
										"property": "position",
										"end-x": "ViewportWidth(\"UI\") * 2/3",
										"end-y": "ViewportHeight(\"UI\")/2",
										"time": "0.5",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Start level end sequence."
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 197636880524938
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 907166674386359,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "0.15",
										"type": "once",
										"tag": "\"CountFinalScore\""
									}
								}
							],
							"sid": 271201548057892
						},
						{
							"eventType": "comment",
							"text": "Add points to score proportional to how much time left the player has."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-timer",
									"objectClass": "GameManager",
									"sid": 965515318223592,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"CountFinalScore\""
									}
								}
							],
							"actions": [],
							"sid": 381827376214900,
							"children": [
								{
									"eventType": "comment",
									"text": "There are still points to be added."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 137151300444105,
											"parameters": {
												"variable": "rTime",
												"comparison": 4,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Play sound effect."
										},
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 593387069156639,
											"parameters": {
												"audio-file": "point",
												"loop": "not-looping",
												"volume": "savedSound = 1 ? -5 : -Infinity",
												"stereo-pan": "0",
												"tag-optional": "\"SFX\""
											}
										},
										{
											"type": "comment",
											"text": "Reset timer (each time a little faster)."
										},
										{
											"id": "start-timer",
											"objectClass": "GameManager",
											"sid": 711446340455600,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "Self.Timer.Duration(\"CountFinalScore\") * 0.95",
												"type": "once",
												"tag": "\"CountFinalScore\""
											}
										},
										{
											"type": "comment",
											"text": "Exchange time for points."
										},
										{
											"id": "subtract-from-eventvar",
											"objectClass": "System",
											"sid": 966708008580123,
											"parameters": {
												"variable": "rTime",
												"value": "1"
											}
										},
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 137424553555488,
											"parameters": {
												"variable": "score",
												"value": "10"
											}
										},
										{
											"type": "comment",
											"text": "Make UI elements shrink and grow, as points are converted into score."
										},
										{
											"id": "set-size",
											"objectClass": "IconGameUITime",
											"sid": 706368037682315,
											"parameters": {
												"width": "Self.Width * 0.998",
												"height": "Self.Height * 0.998"
											}
										},
										{
											"id": "set-size",
											"objectClass": "IconGameUIScore",
											"sid": 297219425482595,
											"parameters": {
												"width": "Self.Width * 1.002",
												"height": "Self.Height * 1.002"
											}
										},
										{
											"type": "comment",
											"text": "Update the UI text values."
										},
										{
											"callFunction": "updateUI",
											"sid": 495221118984373
										}
									],
									"sid": 550498952209466
								},
								{
									"eventType": "comment",
									"text": "No more points to be added."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 716521573598970
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Bring back BGM."
										},
										{
											"id": "fade-volume",
											"objectClass": "Audio",
											"sid": 394599800936403,
											"parameters": {
												"tag": "\"BGM\"",
												"db": "savedSound = 1 ? -2 : -Infinity",
												"duration": "1",
												"ending": "keep-playing"
											}
										},
										{
											"type": "comment",
											"text": "Stop all Game Manager timers."
										},
										{
											"id": "stop-all-timers",
											"objectClass": "GameManager",
											"sid": 551634103293433,
											"behaviorType": "Timer"
										},
										{
											"type": "comment",
											"text": "Save level and score."
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 456149696678556,
											"parameters": {
												"variable": "savedScore",
												"value": "score"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 528436361304680,
											"parameters": {
												"variable": "savedLevel",
												"value": "savedLevel + 1"
											}
										},
										{
											"id": "set-item",
											"objectClass": "LocalStorage",
											"sid": 840011538350034,
											"parameters": {
												"key": "\"savedLevel\"",
												"value": "savedLevel"
											}
										},
										{
											"id": "set-item",
											"objectClass": "LocalStorage",
											"sid": 300607371373122,
											"parameters": {
												"key": "\"savedScore\"",
												"value": "savedScore"
											}
										},
										{
											"type": "comment",
											"text": "Fade out and change level."
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 391985133811179
										},
										{
											"id": "wait",
											"objectClass": "System",
											"sid": 683963550280268,
											"parameters": {
												"seconds": "3"
											}
										},
										{
											"id": "tween-one-property",
											"objectClass": "Fader",
											"sid": 124887271029010,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ShowFader\"",
												"property": "offsetOpacity",
												"end-value": "100",
												"time": "0.5",
												"ease": "easeinoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 649384332378993
										},
										{
											"id": "go-to-nextprevious-layout",
											"objectClass": "System",
											"sid": 361056462984375,
											"parameters": {
												"which": "next"
											}
										}
									],
									"sid": 114185119296976
								}
							]
						}
					],
					"sid": 130289439780920
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Player Controls (Elevator)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Exit elevator."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 380040612894245,
									"parameters": {
										"key": 40
									}
								}
							],
							"actions": [],
							"sid": 923050349951417,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if the player can exit an elevator. If that's the case, exit the elevator."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 936583707699697,
											"parameters": {
												"object": "Elevator"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Elevator",
											"sid": 459476960395867,
											"parameters": {
												"instance-variable": "available"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 635446271080478,
											"parameters": {
												"value": "distance(Player.X, Player.Y, Elevator.X, Elevator.Y) < 128"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Set player position and layer."
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 699223933884572,
											"parameters": {
												"x": "Elevator.X",
												"y": "Player.Y + 16"
											}
										},
										{
											"id": "move-to-layer",
											"objectClass": "Player",
											"sid": 903348781814154,
											"parameters": {
												"layer": "\"Player\""
											}
										},
										{
											"id": "set-scale",
											"objectClass": "Player",
											"sid": 242869720393518,
											"parameters": {
												"scale": "1.0"
											}
										},
										{
											"type": "comment",
											"text": "Player exit the elevator."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 460823630250333,
											"parameters": {
												"instance-variable": "elevatorLevel",
												"value": "-1"
											}
										},
										{
											"type": "comment",
											"text": "Set player controls."
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 485923915613213,
											"parameters": {
												"group-name": "\"Player Controls\"",
												"state": "activated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 531431786925886,
											"parameters": {
												"group-name": "\"Player Controls (Elevator)\"",
												"state": "deactivated"
											}
										}
									],
									"sid": 334024345202277
								}
							]
						}
					],
					"sid": 861582698000122
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Player Controls",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Enter elevator."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 959859332383512,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 668460776192966,
									"parameters": {
										"instance-variable": "jumping"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 413333813811607,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if the player is close to an elevator. If that's the case, enter the elevator."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 205955170934852,
											"parameters": {
												"object": "Elevator"
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Elevator",
											"sid": 910072290553537,
											"parameters": {
												"instance-variable": "available"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 490827458924336,
											"parameters": {
												"value": "distance(Player.X, Player.Y, Elevator.X, Elevator.Y) < 128"
											}
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 945900491607833,
											"parameters": {
												"value": "Player.currFloor = Elevator.level"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Remove player trail."
										},
										{
											"id": "stop-all-tweens",
											"objectClass": "PlayerTrail",
											"sid": 922693958417721,
											"behaviorType": "Tween"
										},
										{
											"id": "tween-one-property",
											"objectClass": "PlayerTrail",
											"sid": 540394731301164,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"ImmediatelyHideTrail\"",
												"property": "offsetOpacity",
												"end-value": "0",
												"time": "0.1",
												"ease": "easeinoutsine",
												"destroy-on-complete": "yes",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"type": "comment",
											"text": "Set player position, animation, and layer."
										},
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 307567488269490,
											"parameters": {
												"animation": "\"Standing\"",
												"from": "beginning"
											}
										},
										{
											"id": "set-position",
											"objectClass": "Player",
											"sid": 906254629999929,
											"parameters": {
												"x": "Elevator.X",
												"y": "Player.Y - 16"
											}
										},
										{
											"id": "move-to-layer",
											"objectClass": "Player",
											"sid": 196969930962004,
											"parameters": {
												"layer": "\"Elevator\""
											}
										},
										{
											"id": "set-scale",
											"objectClass": "Player",
											"sid": 886032769408912,
											"parameters": {
												"scale": "0.85"
											}
										},
										{
											"type": "comment",
											"text": "Set player level."
										},
										{
											"id": "set-instvar-value",
											"objectClass": "Player",
											"sid": 830457863978125,
											"parameters": {
												"instance-variable": "elevatorLevel",
												"value": "Elevator.level"
											}
										},
										{
											"type": "comment",
											"text": "Set player controls."
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 515076609169439,
											"parameters": {
												"group-name": "\"Player Controls\"",
												"state": "deactivated"
											}
										},
										{
											"id": "set-group-active",
											"objectClass": "System",
											"sid": 930148947510257,
											"parameters": {
												"group-name": "\"Player Controls (Elevator)\"",
												"state": "activated"
											}
										}
									],
									"sid": 187305156781236
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Crouch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 750588587210618,
									"parameters": {
										"key": 40
									}
								}
							],
							"actions": [],
							"sid": 383727414362646,
							"children": [
								{
									"eventType": "comment",
									"text": "If the player is not jumping, set animation as crouching and set crouching state to true."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 723681175430677,
											"parameters": {
												"instance-variable": "jumping"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 639633660173068,
											"parameters": {
												"animation": "\"Crouching\"",
												"from": "current-frame"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 757337154232829,
											"parameters": {
												"instance-variable": "crouching",
												"value": "true"
											}
										}
									],
									"sid": 106620874840261
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Other actions"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 338161023129708
								}
							],
							"actions": [
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 303235048138578,
									"parameters": {
										"instance-variable": "crouching",
										"value": "false"
									}
								}
							],
							"sid": 380241414671301,
							"children": [
								{
									"eventType": "comment",
									"text": "Try to walk left."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 928651301731699,
											"parameters": {
												"key": 37
											}
										},
										{
											"id": "compare-x",
											"objectClass": "Player",
											"sid": 859452038139769,
											"parameters": {
												"comparison": 4,
												"x-co-ordinate": "Self.ImageWidth/2"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 729388791417162,
											"parameters": {
												"variable": "pHorAxis",
												"value": "pHorAxis - 1"
											}
										}
									],
									"sid": 406587259208670
								},
								{
									"eventType": "comment",
									"text": "Try to walk right."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 726365637339267,
											"parameters": {
												"key": 39
											}
										},
										{
											"id": "compare-x",
											"objectClass": "Player",
											"sid": 742039195774660,
											"parameters": {
												"comparison": 2,
												"x-co-ordinate": "LayoutWidth - Self.ImageWidth/2"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 828804552476788,
											"parameters": {
												"variable": "pHorAxis",
												"value": "pHorAxis + 1"
											}
										}
									],
									"sid": 661428837928413
								},
								{
									"eventType": "comment",
									"text": "Jump."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-pressed",
											"objectClass": "Keyboard",
											"sid": 638712412401181,
											"parameters": {
												"key": 32
											}
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 173826828665530,
											"parameters": {
												"instance-variable": "jumping"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "Play sound effect."
										},
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 834139232017668,
											"parameters": {
												"audio-file": "jump",
												"loop": "not-looping",
												"volume": "savedSound = 1 ? -2 : -Infinity",
												"stereo-pan": "0",
												"tag-optional": "\"SFX\""
											}
										},
										{
											"id": "set-playback-rate",
											"objectClass": "Audio",
											"sid": 786741971295002,
											"parameters": {
												"tag": "\"\"",
												"playback-rate": "random(0.9, 1.2)"
											}
										},
										{
											"type": "comment",
											"text": "Set jumping state to true."
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "Player",
											"sid": 128133718256371,
											"parameters": {
												"instance-variable": "jumping",
												"value": "true"
											}
										},
										{
											"type": "comment",
											"text": "Set animation."
										},
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 131114639474026,
											"parameters": {
												"animation": "\"Jumping\"",
												"from": "current-frame"
											}
										},
										{
											"type": "comment",
											"text": "Start a jump."
										},
										{
											"id": "tween-one-property",
											"objectClass": "Player",
											"sid": 989971491811155,
											"behaviorType": "Tween",
											"parameters": {
												"tags": "\"PlayerJump\"",
												"property": "offsetY",
												"end-value": "Self.Y - 96",
												"time": "0.3",
												"ease": "easeoutsine",
												"destroy-on-complete": "no",
												"loop": "no",
												"ping-pong": "no",
												"repeat-count": "1"
											}
										},
										{
											"id": "set-y",
											"objectClass": "Player",
											"sid": 110381546671859,
											"parameters": {
												"y": "Self.Y - 32"
											}
										},
										{
											"type": "comment",
											"text": "Set timer to end the jump."
										},
										{
											"id": "start-timer",
											"objectClass": "Player",
											"sid": 549159758698179,
											"behaviorType": "Timer",
											"parameters": {
												"duration": "0.5",
												"type": "once",
												"tag": "\"Jumping\""
											}
										}
									],
									"sid": 745066749775378
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is moving right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 138431156437390,
									"parameters": {
										"value": "pHorAxis = 1"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 480426059053258,
									"parameters": {
										"state": "not-mirrored"
									}
								},
								{
									"id": "set-x",
									"objectClass": "Player",
									"sid": 556810483846262,
									"parameters": {
										"x": "Self.X + Self.speed* dt"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 936980476004737,
									"parameters": {
										"variable": "pHorAxis",
										"value": "0"
									}
								}
							],
							"sid": 203993325816209,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 199254112954049,
											"parameters": {
												"instance-variable": "jumping"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 459051831155486,
											"parameters": {
												"animation": "\"Running\"",
												"from": "current-frame"
											}
										}
									],
									"sid": 211530610368199
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is moving left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 601367974640802
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 986789605232537,
									"parameters": {
										"value": "pHorAxis = -1"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "Player",
									"sid": 280764407097452,
									"parameters": {
										"state": "mirrored"
									}
								},
								{
									"id": "set-x",
									"objectClass": "Player",
									"sid": 628590075819102,
									"parameters": {
										"x": "Self.X - Self.speed* dt"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 772179467684402,
									"parameters": {
										"variable": "pHorAxis",
										"value": "0"
									}
								}
							],
							"sid": 178104162010525,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 719718890594909,
											"parameters": {
												"instance-variable": "jumping"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-animation",
											"objectClass": "Player",
											"sid": 290432970805931,
											"parameters": {
												"animation": "\"Running\"",
												"from": "current-frame"
											}
										}
									],
									"sid": 637575282981180
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is idling."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 350559379087875
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 741321840458519,
									"parameters": {
										"instance-variable": "jumping"
									},
									"isInverted": true
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 477670925650289,
									"parameters": {
										"instance-variable": "crouching"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Player",
									"sid": 231010772827347,
									"parameters": {
										"animation": "\"Standing\"",
										"from": "beginning"
									}
								}
							],
							"sid": 493076167124658
						}
					],
					"sid": 682185881927792
				}
			],
			"sid": 633840924323690
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Rat",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Warp to the other end of the map."
				},
				{
					"aceType": "action",
					"aceName": "Warp",
					"objectClass": "Rat",
					"functionDescription": "Warp to the other end of the map",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "ignoreUID",
							"type": "number",
							"initialValue": "0",
							"comment": "Look for a warp point other than this one",
							"sid": 164709909921690
						},
						{
							"name": "floorDirection",
							"type": "string",
							"initialValue": "",
							"comment": "Direction of the floor from where the rat is coming from",
							"sid": 830824410455676
						}
					],
					"eventType": "custom-ace-block",
					"conditions": [
						{
							"id": "pick-by-evaluate",
							"objectClass": "System",
							"sid": 878538570126512,
							"parameters": {
								"object": "Teleport",
								"expression": "Teleport.UID <> ignoreUID"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Teleport",
							"sid": 576633105302282,
							"parameters": {
								"instance-variable": "isWarp"
							}
						}
					],
					"actions": [
						{
							"id": "set-position-to-another-object",
							"objectClass": "Rat",
							"sid": 138615073252836,
							"parameters": {
								"object": "Teleport",
								"image-point-optional": "0"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Rat",
							"sid": 684910536053314,
							"parameters": {
								"instance-variable": "currFloor",
								"value": "Teleport.floorLevel"
							}
						}
					],
					"sid": 504599068297352,
					"children": [
						{
							"eventType": "comment",
							"text": "If the two warps are in floors of different directions, flip the rat."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Teleport",
									"sid": 742563390284486,
									"parameters": {
										"instance-variable": "floorDirection",
										"comparison": 1,
										"value": "floorDirection"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 768310594988230,
									"parameters": {
										"instance-variable": "direction",
										"value": "Self.direction = \"right\" ? \"left\" : \"right\""
									}
								}
							],
							"sid": 963428582068633
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Avoid the player."
				},
				{
					"aceType": "action",
					"aceName": "Avoid Player",
					"objectClass": "Rat",
					"functionDescription": "Avoid the player",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "custom-ace-block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 760322796642688,
							"parameters": {
								"value": "Rat.X > -128 & Rat.X < LayoutWidth + 128"
							}
						}
					],
					"actions": [],
					"sid": 504599068297352,
					"children": [
						{
							"eventType": "comment",
							"text": "If the player is on the same floor, always run to the opposite side."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 498530997145699,
									"parameters": {
										"value": "Rat.currFloor = Player.currFloor"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 454600593390627,
									"parameters": {
										"instance-variable": "intelligence",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [],
							"sid": 652899011404768,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 349615002429437,
											"parameters": {
												"value": "Rat.X < Player.X"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Rat",
											"sid": 507895763909848,
											"parameters": {
												"instance-variable": "direction",
												"value": "\"left\""
											}
										}
									],
									"sid": 563644351430901
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 480350249564721
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "Rat",
											"sid": 423333458416182,
											"parameters": {
												"instance-variable": "direction",
												"value": "\"right\""
											}
										}
									],
									"sid": 228193173003020
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is on a different floor and rat is moving right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 675832514650609
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 947936037379711,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"right\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 769333574202492,
									"parameters": {
										"instance-variable": "intelligence",
										"comparison": 4,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 732685620056782,
							"children": [
								{
									"eventType": "comment",
									"text": "Player is below the rat (considering the warp)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 303654300378904,
											"parameters": {
												"value": "(Player.currFloor + 1) % 4 = Rat.currFloor"
											}
										}
									],
									"actions": [],
									"sid": 975627450141827,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-highest-lowest-value",
													"objectClass": "System",
													"sid": 835348312682291,
													"parameters": {
														"object": "Teleport",
														"which": "lowest",
														"expression": "distance(Teleport.X, Teleport.Y, LayoutWidth, Rat.Y)"
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 886696689320240,
													"parameters": {
														"value": "Rat.direction <> Teleport.floorDirection"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Rat",
													"sid": 735386683432369,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"left\""
													}
												}
											],
											"sid": 930619795343768
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Player is above the rat (considering the warp)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 426864408953485
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 492880284652324,
											"parameters": {
												"value": "(Player.currFloor - 1 = -1 ? 3 : Player.currFloor - 1) = Rat.currFloor"
											}
										}
									],
									"actions": [],
									"sid": 189534635692443,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-highest-lowest-value",
													"objectClass": "System",
													"sid": 388764852980095,
													"parameters": {
														"object": "Teleport",
														"which": "lowest",
														"expression": "distance(Teleport.X, Teleport.Y, LayoutWidth, Rat.Y)"
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 189722800161306,
													"parameters": {
														"value": "Rat.direction = Teleport.floorDirection"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Rat",
													"sid": 812622381019357,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"left\""
													}
												}
											],
											"sid": 445872979182416
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Player is on a different floor and rat is moving left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 300256409408602
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 101312424131948,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"left\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 470686053145685,
									"parameters": {
										"instance-variable": "intelligence",
										"comparison": 4,
										"value": "1"
									}
								}
							],
							"actions": [],
							"sid": 171368677105518,
							"children": [
								{
									"eventType": "comment",
									"text": "Player is below the rat (considering the warp)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 743450662814178,
											"parameters": {
												"value": "(Player.currFloor + 1) % 4 = Rat.currFloor"
											}
										}
									],
									"actions": [],
									"sid": 647280824422081,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-highest-lowest-value",
													"objectClass": "System",
													"sid": 727081194940680,
													"parameters": {
														"object": "Teleport",
														"which": "lowest",
														"expression": "distance(Teleport.X, Teleport.Y, 0, Rat.Y)"
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 422985439036952,
													"parameters": {
														"value": "Rat.direction <> Teleport.floorDirection"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Rat",
													"sid": 890881286635914,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"right\""
													}
												}
											],
											"sid": 854760659427760
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Player is above the rat (considering the warp)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 291785229931859
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 381598348100146,
											"parameters": {
												"value": "(Player.currFloor - 1 = -1 ? 3 : Player.currFloor - 1) = Rat.currFloor"
											}
										}
									],
									"actions": [],
									"sid": 345045387729590,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "pick-by-highest-lowest-value",
													"objectClass": "System",
													"sid": 184869905563338,
													"parameters": {
														"object": "Teleport",
														"which": "lowest",
														"expression": "distance(Teleport.X, Teleport.Y, 0, Rat.Y)"
													}
												},
												{
													"id": "evaluate-expression",
													"objectClass": "System",
													"sid": 551031673389274,
													"parameters": {
														"value": "Rat.direction = Teleport.floorDirection"
													}
												}
											],
											"actions": [
												{
													"id": "set-instvar-value",
													"objectClass": "Rat",
													"sid": 803425996869406,
													"parameters": {
														"instance-variable": "direction",
														"value": "\"right\""
													}
												}
											],
											"sid": 974033202916383
										}
									]
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Make rat avoid the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 667392107958455,
							"parameters": {
								"interval-seconds": "0.2"
							}
						}
					],
					"actions": [
						{
							"customAction": "Avoid Player",
							"objectClass": "Rat",
							"sid": 553912385992779
						}
					],
					"sid": 316115920517757
				},
				{
					"eventType": "comment",
					"text": "Rat movement."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 846036280504264
						}
					],
					"actions": [],
					"sid": 286370646469514,
					"children": [
						{
							"eventType": "comment",
							"text": "Rat is running."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 319582546213101,
									"parameters": {
										"instance-variable": "speed",
										"comparison": 4,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Rat",
									"sid": 921483130324704,
									"parameters": {
										"animation": "\"Running\"",
										"from": "current-frame"
									}
								}
							],
							"sid": 129625330590776
						},
						{
							"eventType": "comment",
							"text": "Rat is standing."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 621185992697319
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "Rat",
									"sid": 216072461044399,
									"parameters": {
										"animation": "\"Standing\"",
										"from": "current-frame"
									}
								}
							],
							"sid": 735795775371757
						},
						{
							"eventType": "comment",
							"text": "Rat is moving to the left."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Rat",
									"sid": 648839804181765,
									"parameters": {
										"instance-variable": "direction",
										"comparison": 0,
										"value": "\"left\""
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Rat",
									"sid": 640375643326493,
									"parameters": {
										"x": "Self.X - Self.speed * dt"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Rat",
									"sid": 328588302913170,
									"parameters": {
										"state": "mirrored"
									}
								}
							],
							"sid": 264788834094803
						},
						{
							"eventType": "comment",
							"text": "Rat is moving to the right."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 347298010510147
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Rat",
									"sid": 266273045777763,
									"parameters": {
										"x": "Self.X + Self.speed * dt"
									}
								},
								{
									"id": "set-mirrored",
									"objectClass": "Rat",
									"sid": 367891325854057,
									"parameters": {
										"state": "not-mirrored"
									}
								}
							],
							"sid": 779760487176166
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Otherwise, keep him in front."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 317899249945908
						}
					],
					"actions": [
						{
							"id": "move-to-layer",
							"objectClass": "Rat",
							"sid": 165979531282945,
							"parameters": {
								"layer": "\"Enemy\""
							}
						}
					],
					"sid": 763546244304786
				},
				{
					"eventType": "comment",
					"text": "Rat teleports to the floor above and inverts movement direction."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Rat",
							"sid": 495650300700391,
							"parameters": {
								"object": "Teleport"
							}
						}
					],
					"actions": [],
					"sid": 713123975885497,
					"children": [
						{
							"eventType": "variable",
							"name": "ratSpeedTele",
							"type": "number",
							"initialValue": "0",
							"comment": "Rat speed right before teleporting",
							"isStatic": false,
							"isConstant": false,
							"sid": 435807369523150
						},
						{
							"eventType": "comment",
							"text": "Warp to the other end of the map."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Teleport",
									"sid": 432579368503609,
									"parameters": {
										"instance-variable": "isWarp"
									}
								}
							],
							"actions": [
								{
									"customAction": "Warp",
									"objectClass": "Rat",
									"sid": 965309525266151,
									"parameters": [
										"Teleport.UID",
										"Teleport.floorDirection"
									]
								}
							],
							"sid": 218807805064261
						},
						{
							"eventType": "comment",
							"text": "Go up."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 985641270598911
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 496528959072325,
									"parameters": {
										"value": "Rat.direction = Teleport.floorDirection"
									}
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "Rat",
									"sid": 877776438197760,
									"parameters": {
										"y": "Self.Y - 224"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 953785359545392,
									"parameters": {
										"instance-variable": "currFloor",
										"value": "Self.currFloor + 1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 362032037672013,
									"parameters": {
										"instance-variable": "direction",
										"value": "Self.direction = \"right\" ? \"left\" : \"right\""
									}
								}
							],
							"sid": 559735088435782
						},
						{
							"eventType": "comment",
							"text": "Go down."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 498305948810400
								}
							],
							"actions": [
								{
									"id": "set-y",
									"objectClass": "Rat",
									"sid": 480219183505883,
									"parameters": {
										"y": "Self.Y + 224"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 173517414289400,
									"parameters": {
										"instance-variable": "currFloor",
										"value": "Self.currFloor - 1"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 362032037672013,
									"parameters": {
										"instance-variable": "direction",
										"value": "Self.direction = \"right\" ? \"left\" : \"right\""
									}
								}
							],
							"sid": 397644181417907
						},
						{
							"eventType": "comment",
							"text": "Make rat appear slightly in front of the teleport, so that it doesn't keep teleporting."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Rat",
									"sid": 705711745961774,
									"parameters": {
										"x": "Self.X + (Self.direction = \"left\" ? -1.2 : 1.2) * Teleport.Width"
									}
								}
							],
							"sid": 794534956409661
						},
						{
							"eventType": "comment",
							"text": "Make rat wait for a brief period of time."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 843816143814711,
									"parameters": {
										"variable": "ratSpeedTele",
										"value": "Rat.speed"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 592674437180869,
									"parameters": {
										"instance-variable": "speed",
										"value": "0"
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "Rat",
									"sid": 407862608316872,
									"parameters": {
										"collisions": "disabled"
									}
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 859698466316385,
									"parameters": {
										"seconds": "0.6"
									}
								},
								{
									"id": "set-collisions-enabled",
									"objectClass": "Rat",
									"sid": 891059256706656,
									"parameters": {
										"collisions": "enabled"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "Rat",
									"sid": 919391042423925,
									"parameters": {
										"instance-variable": "speed",
										"value": "ratSpeedTele"
									}
								}
							],
							"sid": 373934807114530
						}
					]
				}
			],
			"sid": 701115662745683
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Threats",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "group",
					"disabled": false,
					"title": "UFO",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "UFOs move continuously."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 445654614997422,
									"parameters": {
										"object": "UFO"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "UFO",
									"sid": 113693032700633,
									"parameters": {
										"x": "Self.X + Self.speed * dt * (Self.direction = \"right\" ? 1 : -1)"
									}
								}
							],
							"sid": 752002887265486
						},
						{
							"eventType": "comment",
							"text": "When a UFO goes outside the layout, it gets destroyed."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-outside-layout",
									"objectClass": "UFO",
									"sid": 954812899159083
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "UFO",
									"sid": 111773820483864
								}
							],
							"sid": 153290623586877
						},
						{
							"eventType": "comment",
							"text": "When a UFO spawner enters the screen, it spawns a UFO."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 400821692543082,
									"parameters": {
										"object": "UFOSpawner"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 666109101275559,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 413598640575084,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 540936990756454,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if UFO spawner appeared on-screen this exact frame."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "UFOSpawner",
											"sid": 474483452801333
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "UFOSpawner",
											"sid": 455985881755201,
											"parameters": {
												"instance-variable": "alreadyOnScreen"
											},
											"isInverted": true
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 950574016415208,
											"parameters": {
												"value": "abs(UFOSpawner.Y - Player.Y + 96) < 96"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "UFOSpawner",
											"sid": 401510060960731,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "true"
											}
										}
									],
									"sid": 933393172038469,
									"children": [
										{
											"eventType": "comment",
											"text": "UFO spawner is on-screen right now."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "UFOSpawner",
													"sid": 807849048517004,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"cooldown\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Play directional sound effect. "
												},
												{
													"id": "play-by-name",
													"objectClass": "Audio",
													"sid": 263966260020961,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "\"battlecry\" & choose(0, 1, 2)",
														"loop": "not-looping",
														"volume": "savedSound = 1 ? 0 : -Infinity",
														"stereo-pan": "(Player.X - UFOSpawner.X )/35",
														"tag-optional": "\"SFX\""
													}
												},
												{
													"id": "set-playback-rate",
													"objectClass": "Audio",
													"sid": 171864123193911,
													"parameters": {
														"tag": "\"\"",
														"playback-rate": "random(0.9, 1.1)"
													}
												},
												{
													"type": "comment",
													"text": "Start cooldown."
												},
												{
													"id": "start-timer",
													"objectClass": "UFOSpawner",
													"sid": 805884101397611,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "3.0",
														"type": "once",
														"tag": "\"cooldown\""
													}
												},
												{
													"type": "comment",
													"text": "Spawn UFO and set its properties."
												},
												{
													"id": "spawn-another-object",
													"objectClass": "UFOSpawner",
													"sid": 743787130152623,
													"parameters": {
														"object": "UFO",
														"layer": "\"Threats\"",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "UFO",
													"sid": 120378164001019,
													"parameters": {
														"instance-variable": "speed",
														"value": "UFOSpawner.speed"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "UFO",
													"sid": 656101750517175,
													"parameters": {
														"instance-variable": "direction",
														"value": "Player.X > UFOSpawner.X ? \"right\" : \"left\""
													}
												},
												{
													"id": "set-x",
													"objectClass": "UFO",
													"sid": 191085870941720,
													"parameters": {
														"x": "Self.X + (Self.direction = \"left\" ? Self.Width: -Self.Width)"
													}
												},
												{
													"id": "set-width",
													"objectClass": "UFO",
													"sid": 905195651588198,
													"parameters": {
														"width": "Self.direction = \"left\" ? -Self.Width : Self.Width"
													}
												},
												{
													"id": "set-period",
													"objectClass": "UFO",
													"sid": 202041377691657,
													"behaviorType": "Sine",
													"parameters": {
														"period": "UFOSpawner.period"
													}
												}
											],
											"sid": 466372412691891
										}
									]
								},
								{
									"eventType": "comment",
									"text": "UFO spawner is no longer on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "UFOSpawner",
											"sid": 458046258290143,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "UFOSpawner",
											"sid": 330138477278532,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "false"
											}
										}
									],
									"sid": 755719045141944
								}
							]
						},
						{
							"eventType": "comment",
							"text": "UFO hits the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "UFO",
									"sid": 964978444989780,
									"parameters": {
										"object": "Player"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 386912139517267,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 857937874833007,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\""
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 275168605140352,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 624050632281151,
									"parameters": {
										"audio-file": "hit",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -1 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 785790235290432,
									"parameters": {
										"tag": "\"\"",
										"playback-rate": "random(0.9, 1.1)"
									}
								},
								{
									"type": "comment",
									"text": "Player slows down temporarily."
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 168397880682799,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "1.0",
										"type": "once",
										"tag": "\"slowdown\""
									}
								},
								{
									"id": "stop-timer",
									"objectClass": "Player",
									"sid": 452130319837986,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"speedup\""
									}
								},
								{
									"type": "comment",
									"text": "Add points to the score."
								},
								{
									"callFunction": "playerPoints",
									"sid": 929856898701764,
									"parameters": [
										"-25"
									]
								}
							],
							"sid": 772036933545388
						}
					],
					"sid": 224634755464519
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Skate",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Skate move continuously."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 882165879237202,
									"parameters": {
										"object": "Skate"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Skate",
									"sid": 643587115347318,
									"parameters": {
										"x": "Self.X + Self.speed * dt * (Self.direction = \"right\" ? 1 : -1)"
									}
								}
							],
							"sid": 194835502603820
						},
						{
							"eventType": "comment",
							"text": "When a skate goes outside the layout, it gets destroyed."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-outside-layout",
									"objectClass": "Skate",
									"sid": 860633933294365
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Skate",
									"sid": 859669429040541
								}
							],
							"sid": 391032649848405
						},
						{
							"eventType": "comment",
							"text": "When a skate spawner enters the screen, it spawns a skate."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 744694738128028,
									"parameters": {
										"object": "SkateSpawner"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 365439767242011,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 228209099226845,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 556691380135937,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if skate spawner appeared on-screen this exact frame."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "SkateSpawner",
											"sid": 207511791612132
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "SkateSpawner",
											"sid": 340535923126753,
											"parameters": {
												"instance-variable": "alreadyOnScreen"
											},
											"isInverted": true
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 437744033094176,
											"parameters": {
												"value": "abs(SkateSpawner.Y - Player.Y + 96) < 96"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "SkateSpawner",
											"sid": 863253395454724,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "true"
											}
										}
									],
									"sid": 399217070968071,
									"children": [
										{
											"eventType": "comment",
											"text": "Skate spawner is on-screen right now."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "SkateSpawner",
													"sid": 531773674099917,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"cooldown\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Play directional sound effect. "
												},
												{
													"id": "play-by-name",
													"objectClass": "Audio",
													"sid": 751910352459600,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "\"battlecry\" & choose(0, 1, 2)",
														"loop": "not-looping",
														"volume": "savedSound = 1 ? 0 : -Infinity",
														"stereo-pan": "(Player.X - SkateSpawner.X )/35",
														"tag-optional": "\"SFX\""
													}
												},
												{
													"id": "set-playback-rate",
													"objectClass": "Audio",
													"sid": 984490882765153,
													"parameters": {
														"tag": "\"\"",
														"playback-rate": "random(0.9, 1.1)"
													}
												},
												{
													"type": "comment",
													"text": "Start cooldown."
												},
												{
													"id": "start-timer",
													"objectClass": "SkateSpawner",
													"sid": 288962487010227,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "3.0",
														"type": "once",
														"tag": "\"cooldown\""
													}
												},
												{
													"type": "comment",
													"text": "Spawn skate and set its properties."
												},
												{
													"id": "spawn-another-object",
													"objectClass": "SkateSpawner",
													"sid": 762814024259319,
													"parameters": {
														"object": "Skate",
														"layer": "\"Threats\"",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Skate",
													"sid": 102166655029774,
													"parameters": {
														"instance-variable": "speed",
														"value": "SkateSpawner.speed"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Skate",
													"sid": 786629767029781,
													"parameters": {
														"instance-variable": "direction",
														"value": "Player.X > SkateSpawner.X ? \"right\" : \"left\""
													}
												},
												{
													"id": "set-x",
													"objectClass": "Skate",
													"sid": 156491700786534,
													"parameters": {
														"x": "Self.X + (Self.direction = \"left\" ? Self.Width: -Self.Width)"
													}
												},
												{
													"id": "set-width",
													"objectClass": "Skate",
													"sid": 748057436363085,
													"parameters": {
														"width": "Self.direction = \"left\" ? -Self.Width : Self.Width"
													}
												}
											],
											"sid": 727676041019252
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Skate spawner is no longer on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "SkateSpawner",
											"sid": 684569259546565,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "SkateSpawner",
											"sid": 168038979701196,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "false"
											}
										}
									],
									"sid": 112598562065298
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Skate hits the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Skate",
									"sid": 319046968909437,
									"parameters": {
										"object": "Player"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 840670729469627,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 460542686030758,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\""
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 876966769324794,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 180403825381461,
									"parameters": {
										"audio-file": "hit",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -1 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 529699354566274,
									"parameters": {
										"tag": "\"\"",
										"playback-rate": "random(0.9, 1.1)"
									}
								},
								{
									"type": "comment",
									"text": "Player slows down temporarily."
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 127775273135243,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "2.0",
										"type": "once",
										"tag": "\"slowdown\""
									}
								},
								{
									"id": "stop-timer",
									"objectClass": "Player",
									"sid": 230822517417530,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"speedup\""
									}
								},
								{
									"type": "comment",
									"text": "Add points to the score."
								},
								{
									"callFunction": "playerPoints",
									"sid": 241973607424125,
									"parameters": [
										"-25"
									]
								}
							],
							"sid": 741292240530567
						}
					],
					"sid": 574509208689055
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Jetpack",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Jetpacks move continuously."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 694921751561034,
									"parameters": {
										"object": "Jetpack"
									}
								}
							],
							"actions": [
								{
									"id": "set-x",
									"objectClass": "Jetpack",
									"sid": 540679470534123,
									"parameters": {
										"x": "Self.X + Self.speed * dt * (Self.direction = \"right\" ? 1 : -1)"
									}
								}
							],
							"sid": 329002924539464
						},
						{
							"eventType": "comment",
							"text": "When a Jetpack goes outside the layout, it gets destroyed."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-outside-layout",
									"objectClass": "Jetpack",
									"sid": 902158012125646
								}
							],
							"actions": [
								{
									"id": "destroy",
									"objectClass": "Jetpack",
									"sid": 909965824596321
								}
							],
							"sid": 609740458888173
						},
						{
							"eventType": "comment",
							"text": "When a Jetpack spawner enters the screen, it spawns a Jetpack."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 336772950929691,
									"parameters": {
										"object": "JetpackSpawner"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 502638940058893,
									"parameters": {
										"variable": "playerFailed"
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 963019213275255,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [],
							"sid": 304611378170657,
							"children": [
								{
									"eventType": "comment",
									"text": "Check if Jetpack spawner appeared on-screen this exact frame."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "JetpackSpawner",
											"sid": 568200680263577
										},
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "JetpackSpawner",
											"sid": 905086154378068,
											"parameters": {
												"instance-variable": "alreadyOnScreen"
											},
											"isInverted": true
										},
										{
											"id": "evaluate-expression",
											"objectClass": "System",
											"sid": 852387281538913,
											"parameters": {
												"value": "abs(JetpackSpawner.Y - Player.Y + 96) < 96"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "JetpackSpawner",
											"sid": 831537744714032,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "true"
											}
										}
									],
									"sid": 685197200761905,
									"children": [
										{
											"eventType": "comment",
											"text": "Jetpack spawner is on-screen right now."
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-timer-running",
													"objectClass": "JetpackSpawner",
													"sid": 800351208450470,
													"behaviorType": "Timer",
													"parameters": {
														"tag": "\"cooldown\""
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"type": "comment",
													"text": "Play directional sound effect. "
												},
												{
													"id": "play-by-name",
													"objectClass": "Audio",
													"sid": 764577018954878,
													"parameters": {
														"folder": "sounds",
														"audio-file-name": "\"battlecry\" & choose(0, 1, 2)",
														"loop": "not-looping",
														"volume": "savedSound = 1 ? 0 : -Infinity",
														"stereo-pan": "(Player.X - JetpackSpawner.X )/35",
														"tag-optional": "\"SFX\""
													}
												},
												{
													"id": "set-playback-rate",
													"objectClass": "Audio",
													"sid": 884825916441036,
													"parameters": {
														"tag": "\"\"",
														"playback-rate": "random(0.9, 1.1)"
													}
												},
												{
													"type": "comment",
													"text": "Start cooldown."
												},
												{
													"id": "start-timer",
													"objectClass": "JetpackSpawner",
													"sid": 402110667260985,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "3.0",
														"type": "once",
														"tag": "\"cooldown\""
													}
												},
												{
													"type": "comment",
													"text": "Spawn Jetpack and set its properties."
												},
												{
													"id": "spawn-another-object",
													"objectClass": "JetpackSpawner",
													"sid": 601017290683074,
													"parameters": {
														"object": "Jetpack",
														"layer": "\"Threats\"",
														"image-point": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Jetpack",
													"sid": 162105704441821,
													"parameters": {
														"instance-variable": "speed",
														"value": "JetpackSpawner.speed"
													}
												},
												{
													"id": "set-instvar-value",
													"objectClass": "Jetpack",
													"sid": 596391559422923,
													"parameters": {
														"instance-variable": "direction",
														"value": "Player.X > JetpackSpawner.X ? \"right\" : \"left\""
													}
												},
												{
													"id": "set-x",
													"objectClass": "Jetpack",
													"sid": 331067887054469,
													"parameters": {
														"x": "Self.X + (Self.direction = \"left\" ? Self.Width: -Self.Width)"
													}
												},
												{
													"id": "set-width",
													"objectClass": "Jetpack",
													"sid": 308231002696100,
													"parameters": {
														"width": "Self.direction = \"left\" ? -Self.Width : Self.Width"
													}
												}
											],
											"sid": 752109786725641
										}
									]
								},
								{
									"eventType": "comment",
									"text": "Jetpack spawner is no longer on-screen."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-screen",
											"objectClass": "JetpackSpawner",
											"sid": 488153032981275,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "JetpackSpawner",
											"sid": 764955746954139,
											"parameters": {
												"instance-variable": "alreadyOnScreen",
												"value": "false"
											}
										}
									],
									"sid": 716370143381098
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Jetpack hits the player"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Jetpack",
									"sid": 814400207254416,
									"parameters": {
										"object": "Player"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 377225167460960,
									"parameters": {
										"instance-variable": "stairs"
									},
									"isInverted": true
								},
								{
									"id": "is-group-active",
									"objectClass": "System",
									"sid": 190120159368446,
									"parameters": {
										"group-name": "\"Player Controls (Elevator)\""
									},
									"isInverted": true
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 294554780859653,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"customAction": "Fail",
									"objectClass": "Player",
									"sid": 761054379179583
								}
							],
							"sid": 802154220222564
						}
					],
					"sid": 803295003423520
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Trap",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Player fails if they touch a trap."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "Trap",
									"sid": 121323471463323,
									"parameters": {
										"object": "Player"
									}
								},
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 151769360950613,
									"parameters": {
										"variable": "playerWon"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"customAction": "Fail",
									"objectClass": "Player",
									"sid": 771509978783038
								}
							],
							"sid": 958855502070931
						},
						{
							"eventType": "comment",
							"text": "Trap always look at the player."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 230443945424640,
									"parameters": {
										"object": "Trap"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 287584406266649,
									"parameters": {
										"value": "abs(Trap.Y - Player.Y) < 96"
									}
								}
							],
							"actions": [
								{
									"id": "set-width",
									"objectClass": "Trap",
									"sid": 178881151779384,
									"parameters": {
										"width": "Self.X - Player.X < 0 ? Self.ImageWidth : -Self.ImageWidth"
									}
								}
							],
							"sid": 950758986463207
						}
					],
					"sid": 383573017166260
				}
			],
			"sid": 408953050447084
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Minimap",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Setup minimap."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 634348100571010
						}
					],
					"actions": [],
					"sid": 244575131986183,
					"children": [
						{
							"eventType": "comment",
							"text": "Show stairs."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 899971254464571,
									"parameters": {
										"object": "Stairs"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 595845662565810,
									"parameters": {
										"object-to-create": "MinimapStairs",
										"layer": "\"UI\"",
										"x": "MinimapBG.X + Stairs.X/16",
										"y": "MinimapBG.Y + Stairs.Y/16",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-width",
									"objectClass": "MinimapStairs",
									"sid": 335682122573146,
									"parameters": {
										"width": "Self.ImageWidth * sign(Stairs.Width)"
									}
								}
							],
							"sid": 133978307916207
						},
						{
							"eventType": "comment",
							"text": "Show elevator."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 371897997506582,
									"parameters": {
										"object": "Elevator"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Elevator",
									"sid": 365879928035697,
									"parameters": {
										"instance-variable": "available"
									}
								}
							],
							"actions": [
								{
									"callFunction": "updateElevatorMinimap",
									"sid": 439239136729954
								}
							],
							"sid": 704418626982523
						},
						{
							"eventType": "comment",
							"text": "Set minimap Z ordering."
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "move-to-bottom",
									"objectClass": "MinimapBG",
									"sid": 674756025708909
								},
								{
									"id": "move-to-top",
									"objectClass": "MinimapPlayer",
									"sid": 187033347855943
								},
								{
									"id": "move-to-top",
									"objectClass": "MinimapRat",
									"sid": 975185958885715
								}
							],
							"sid": 541262439705645
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update minimap."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 294243451549589
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "MinimapPlayer",
							"sid": 776433744774557,
							"parameters": {
								"x": "MinimapBG.X + Player.X/16",
								"y": "MinimapBG.Y + Player.Y/16"
							}
						},
						{
							"id": "set-width",
							"objectClass": "MinimapPlayer",
							"sid": 830978595475238,
							"parameters": {
								"width": "Self.ImageWidth * sign(Player.Width)"
							}
						},
						{
							"id": "set-position",
							"objectClass": "MinimapRat",
							"sid": 120622096209566,
							"parameters": {
								"x": "MinimapBG.X + Rat.X/16",
								"y": "MinimapBG.Y + Rat.Y/16"
							}
						},
						{
							"id": "set-width",
							"objectClass": "MinimapRat",
							"sid": 527210518335403,
							"parameters": {
								"width": "Self.ImageWidth * sign(Rat.Width)"
							}
						}
					],
					"sid": 316351484632597,
					"children": [
						{
							"eventType": "comment",
							"text": "When the rat is outside the map, make the icon invisible."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 132043424518776,
									"parameters": {
										"value": "MinimapRat.X < MinimapBG.X"
									}
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 901704615833476,
									"parameters": {
										"value": "MinimapRat.X > MinimapBG.X + MinimapBG.Width"
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "MinimapRat",
									"sid": 134044326187203,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 116526968663488,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Otherwise, keep the icon visible."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 529280286579832
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "MinimapRat",
									"sid": 342625579092933,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 162674756245904
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update elevators on the minimap."
				},
				{
					"functionName": "updateElevatorMinimap",
					"functionDescription": "Update elevator on the minimap",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "MinimapElevator",
							"sid": 216338342258077,
							"parameters": {
								"x": "MinimapBG.X + Elevator.X/16",
								"y": "MinimapBG.Y + Elevator.Y/16"
							}
						}
					],
					"sid": 150490080410684
				}
			],
			"sid": 497158854679342
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Pickups",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "When the player collides with a pickup, play an animation, destroy the pickup and add to player's score."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "Player",
							"sid": 137768195460444,
							"parameters": {
								"object": "Pickup"
							}
						},
						{
							"id": "is-any-playing",
							"objectClass": "Pickup",
							"sid": 245984993190062,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 555758144010966,
							"parameters": {
								"variable": "playerFailed"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 611303955154226,
							"parameters": {
								"variable": "playerWon"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Animate pickup."
						},
						{
							"id": "tween-one-property",
							"objectClass": "Pickup",
							"sid": 143683499316816,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MovePickupUp\"",
								"property": "offsetY",
								"end-value": "Self.Y - 128",
								"time": "0.25",
								"ease": "easeoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "Pickup",
							"sid": 682722023445099,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadePickup\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "0.25",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Add points to the score."
						},
						{
							"callFunction": "playerPoints",
							"sid": 470012685417602,
							"parameters": [
								"Pickup.points"
							]
						}
					],
					"sid": 446661363690528,
					"children": [
						{
							"eventType": "comment",
							"text": "Add speedup effect."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 538884331739045,
									"parameters": {
										"value": "Pickup.TemplateName = \"speed\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 170645921937074,
									"parameters": {
										"audio-file": "speedup",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -1 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Start speedup timer."
								},
								{
									"id": "start-timer",
									"objectClass": "Player",
									"sid": 622368771207112,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "10",
										"type": "once",
										"tag": "\"speedup\""
									}
								},
								{
									"id": "stop-timer",
									"objectClass": "Player",
									"sid": 805173690854457,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"slowdown\""
									}
								},
								{
									"type": "comment",
									"text": "Flash the player"
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 795150333472434,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlayerFlash\"",
										"start-value": "100",
										"end-value": "150",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								}
							],
							"sid": 725484829179720
						},
						{
							"eventType": "comment",
							"text": "Add extra time."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 537342305363772
								},
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 893699173189814,
									"parameters": {
										"value": "Pickup.TemplateName = \"time\""
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 208217673389123,
									"parameters": {
										"audio-file": "extraTime",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? 0 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"type": "comment",
									"text": "Add time."
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 942281992567575,
									"parameters": {
										"variable": "rTime",
										"value": "15"
									}
								},
								{
									"callFunction": "updateUI",
									"sid": 664029017939599
								},
								{
									"type": "comment",
									"text": "Flash the player."
								},
								{
									"id": "tween-value",
									"objectClass": "Player",
									"sid": 987342303026336,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"PlayerFlash\"",
										"start-value": "100",
										"end-value": "150",
										"time": "0.15",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								},
								{
									"type": "comment",
									"text": "Animate time container."
								},
								{
									"id": "tween-two-properties",
									"objectClass": "IconGameUITime",
									"sid": 524297531052892,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"BounceTime\"",
										"property": "scale",
										"end-x": "1.5",
										"end-y": "1.5",
										"time": "0.25",
										"ease": "easeinoutsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "yes",
										"repeat-count": "1"
									}
								}
							],
							"sid": 399204968064518
						},
						{
							"eventType": "comment",
							"text": "Normal pickups (only points)."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 769050154876873
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Play sound effect."
								},
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 144599909280352,
									"parameters": {
										"audio-file": "crunchyBite",
										"loop": "not-looping",
										"volume": "savedSound = 1 ? -1 : -Infinity",
										"stereo-pan": "0",
										"tag-optional": "\"SFX\""
									}
								},
								{
									"id": "set-playback-rate",
									"objectClass": "Audio",
									"sid": 234182437812585,
									"parameters": {
										"tag": "\"\"",
										"playback-rate": "random(0.9, 1.1)"
									}
								}
							],
							"sid": 711203586796347
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Flash the player."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-playing",
							"objectClass": "Player",
							"sid": 325769819431848,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"PlayerFlash\""
							}
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Player",
							"sid": 391010416703379,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "Self.Tween.Value(\"PlayerFlash\")"
							}
						}
					],
					"sid": 680812758837522
				},
				{
					"eventType": "comment",
					"text": "Make pickup flash slightly."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-active",
							"objectClass": "Pickup",
							"sid": 219320462810971,
							"behaviorType": "SineFlash"
						}
					],
					"actions": [
						{
							"id": "set-effect-parameter",
							"objectClass": "Pickup",
							"sid": 415867543859374,
							"parameters": {
								"effect": "\"AdjustHSL\"",
								"parameter-index": "2",
								"value": "108 + Self.SineFlash.Value"
							}
						}
					],
					"sid": 526466935778772
				}
			],
			"sid": 553862987342451
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Text Points",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player got or lost points during the game."
				},
				{
					"functionName": "playerPoints",
					"functionDescription": "Player got or lost points during the game",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "points",
							"type": "number",
							"initialValue": "0",
							"comment": "Amount of points",
							"sid": 905275660968344
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"type": "comment",
							"text": "Create text points."
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 867056899986671,
							"parameters": {
								"object-to-create": "TextPoints",
								"layer": "\"Points\"",
								"x": "Player.X",
								"y": "Player.Y - Player.ImageHeight/2",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Set text."
						},
						{
							"id": "set-text",
							"objectClass": "TextPoints",
							"sid": 136103792030870,
							"parameters": {
								"text": "\"[outline=#000000]\" & points"
							}
						},
						{
							"type": "comment",
							"text": "Animate."
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextPoints",
							"sid": 437618917548998,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"MoveTextPoints\"",
								"property": "offsetY",
								"end-value": "Self.Y - 128",
								"time": "2",
								"ease": "easeoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"id": "tween-one-property",
							"objectClass": "TextPoints",
							"sid": 468238698248138,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"FadeTextPoints\"",
								"property": "offsetOpacity",
								"end-value": "0",
								"time": "2",
								"ease": "easeoutsine",
								"destroy-on-complete": "yes",
								"loop": "no",
								"ping-pong": "no",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Animate score container."
						},
						{
							"id": "tween-two-properties",
							"objectClass": "IconGameUIScore",
							"sid": 858373669779167,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"BonceScore\"",
								"property": "scale",
								"end-x": "1.5",
								"end-y": "1.5",
								"time": "0.25",
								"ease": "easeinoutsine",
								"destroy-on-complete": "no",
								"loop": "no",
								"ping-pong": "yes",
								"repeat-count": "1"
							}
						},
						{
							"type": "comment",
							"text": "Set score and update UI."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 956490294984133,
							"parameters": {
								"variable": "score",
								"value": "max(score + points, 0)"
							}
						},
						{
							"callFunction": "updateUI",
							"sid": 714914391228295
						}
					],
					"sid": 419011279107369,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "evaluate-expression",
									"objectClass": "System",
									"sid": 402544558707359,
									"parameters": {
										"value": "points < 0"
									}
								}
							],
							"actions": [
								{
									"id": "set-font-color",
									"objectClass": "TextPoints",
									"sid": 605507148683353,
									"parameters": {
										"color": "rgba255(255, 0, 0, 255)"
									}
								}
							],
							"sid": 124444964563335
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 855777051367704
								}
							],
							"actions": [
								{
									"id": "set-font-color",
									"objectClass": "TextPoints",
									"sid": 449606658353917,
									"parameters": {
										"color": "rgba255(0, 255, 0, 255)"
									}
								}
							],
							"sid": 665444590708501
						}
					]
				}
			],
			"sid": 300801728958176
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "UpdateUI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Update in-game UI."
				},
				{
					"functionName": "updateUI",
					"functionDescription": "Update in-game UI",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "TextScore",
							"sid": 793516449437892,
							"parameters": {
								"text": "zeropad(score, 5)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "TextTime",
							"sid": 463169062125519,
							"parameters": {
								"text": "zeropad(rTime, 5)"
							}
						}
					],
					"sid": 819319673927958
				}
			],
			"sid": 495743292300823
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Toggle Mute (In-Game)",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Toggle mute."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 273818211613927,
							"parameters": {
								"key": 77
							}
						},
						{
							"id": "is-processing-gets",
							"objectClass": "LocalStorage",
							"sid": 338972128914792,
							"isInverted": true
						},
						{
							"id": "is-processing-sets",
							"objectClass": "LocalStorage",
							"sid": 762571244798647,
							"isInverted": true
						},
						{
							"id": "is-any-playing",
							"objectClass": "Fader",
							"sid": 828208183425765,
							"behaviorType": "Tween",
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 634561330599514,
							"parameters": {
								"variable": "playerFailed"
							},
							"isInverted": true
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 108734232197166,
							"parameters": {
								"variable": "playerWon"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Swap savedSound value."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 671523721283348,
							"parameters": {
								"variable": "savedSound",
								"value": "abs(savedSound - 1)"
							}
						},
						{
							"type": "comment",
							"text": "Save to local storage."
						},
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 193910501911499,
							"parameters": {
								"key": "\"savedSound\"",
								"value": "savedSound"
							}
						},
						{
							"type": "comment",
							"text": "Play/Mute the audio accordingly."
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 340324758732795
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 265859958986661,
							"parameters": {
								"tag": "\"BGM\"",
								"db": "savedSound = 1 ? 0 : -Infinity",
								"duration": "0.25",
								"ending": "keep-playing"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 427092016585193,
							"parameters": {
								"tag": "\"BGMIntro\"",
								"db": "savedSound = 1 ? 0 : -Infinity",
								"duration": "0.25",
								"ending": "keep-playing"
							}
						}
					],
					"sid": 579681135920810
				}
			],
			"sid": 742457283335291
		}
	],
	"sid": 385884445530238
}