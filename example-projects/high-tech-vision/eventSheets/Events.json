{
	"name": "Events",
	"events": [
		{
			"eventType": "comment",
			"text": "Made by Viridino Studios (@ViridinoStudios)\n\nFelipe Vaiano Calderan - Programmer\nTwitter: @fvcalderan\nE-mail: fvcalderan@gmail.com\n\nWesley Andrade - Artist\nTwitter: @andrart7\nE-mail: wesleymatos1989@gmail.com\n\nMade with the support of patrons on https://www.patreon.com/viridinostudios"
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Camera",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Position the camera inside the player and update its position every frame"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 650807348287434
						}
					],
					"actions": [
						{
							"id": "look-parallel-to-layout",
							"objectClass": "3DCamera",
							"sid": 799274136834107,
							"parameters": {
								"cam-x": "Player.X",
								"cam-y": "Player.Y",
								"cam-z": "Player.ZElevation + 20",
								"look-angle": "Player.Angle"
							}
						}
					],
					"sid": 587578082021326
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 155368349361207
						}
					],
					"actions": [
						{
							"id": "set-position",
							"objectClass": "3DCamera",
							"sid": 592356217135674,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y",
								"z": "Player.ZElevation + 20",
								"which": "camera"
							}
						}
					],
					"sid": 543249577199342
				},
				{
					"eventType": "comment",
					"text": "Update camera according to mouse movement"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-movement",
							"objectClass": "Mouse",
							"sid": 603411677593805
						}
					],
					"actions": [
						{
							"id": "rotate-camera",
							"objectClass": "3DCamera",
							"sid": 968748021495491,
							"parameters": {
								"rotate-x": "Mouse.MovementX / 12",
								"rotate-y": "Mouse.MovementY / 12",
								"min-polar-angle": "20",
								"max-polar-angle": "160"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "FuseInHandHolder",
							"sid": 237153953458204,
							"parameters": {
								"angle": "3DCamera.CameraXRotation"
							}
						}
					],
					"sid": 845960057685818
				},
				{
					"eventType": "comment",
					"text": "Request mouse lock if the screen is clicked anywhere"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 617379194624269
						}
					],
					"actions": [],
					"sid": 647708736576854,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "has-pointer-lock",
									"objectClass": "Mouse",
									"sid": 262800228554221,
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "request-pointer-lock",
									"objectClass": "Mouse",
									"sid": 561157035990907
								}
							],
							"sid": 833464585638989
						}
					]
				}
			],
			"sid": 232257752990819
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Check if a directional button is being pressed"
				},
				{
					"eventType": "variable",
					"name": "inputLeft",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 218746019036022
				},
				{
					"eventType": "variable",
					"name": "inputRight",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 410783546446752
				},
				{
					"eventType": "variable",
					"name": "inputUp",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 765356132371718
				},
				{
					"eventType": "variable",
					"name": "inputDown",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 547631599719342
				},
				{
					"eventType": "comment",
					"text": "Direction variables"
				},
				{
					"eventType": "variable",
					"name": "horizontalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 158876686755986
				},
				{
					"eventType": "variable",
					"name": "verticalAxis",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 918936468013755
				},
				{
					"eventType": "comment",
					"text": "The angle where both axis are pointing towards"
				},
				{
					"eventType": "variable",
					"name": "axisAngle",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 345006133853140
				},
				{
					"eventType": "comment",
					"text": "Update the input variables"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 183192702823389,
							"parameters": {
								"key": 65
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 113598055872196,
							"parameters": {
								"variable": "inputLeft",
								"value": "1"
							}
						}
					],
					"sid": 968964462339070
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 220472439318365,
							"parameters": {
								"key": 68
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 785386936830360,
							"parameters": {
								"variable": "inputRight",
								"value": "1"
							}
						}
					],
					"sid": 331934645528580
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 695097075021468,
							"parameters": {
								"key": 87
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 426127938963807,
							"parameters": {
								"variable": "inputUp",
								"value": "1"
							}
						}
					],
					"sid": 655915846981238
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 522124327744939,
							"parameters": {
								"key": 83
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 411634019211688,
							"parameters": {
								"variable": "inputDown",
								"value": "1"
							}
						}
					],
					"sid": 593976984397989
				},
				{
					"eventType": "comment",
					"text": "Update direction variables according to the input variables"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 343544410476324
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 529438442151707,
							"parameters": {
								"variable": "horizontalAxis",
								"value": "inputRight - inputLeft"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 330106486264163,
							"parameters": {
								"variable": "verticalAxis",
								"value": "inputDown - inputUp"
							}
						}
					],
					"sid": 368616131516808
				},
				{
					"eventType": "comment",
					"text": "If the player wants to move to a certain direction, set the AxisAngle and move the player through the 8Direction behavior"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 630108828675566,
							"parameters": {
								"value": "horizontalAxis <> 0 | verticalAxis <> 0"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 498673930565554,
							"parameters": {
								"variable": "axisAngle",
								"value": "((angle(0, 0, horizontalAxis, verticalAxis) + 360) % 360) + 90"
							}
						},
						{
							"id": "set-vector-x",
							"objectClass": "Player",
							"sid": 163160334981225,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-x": "cos(3DCamera.CameraXRotation + axisAngle) * Self.8Direction.MaxSpeed"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 124941389779804,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "sin(3DCamera.CameraXRotation + axisAngle) * Self.8Direction.MaxSpeed"
							}
						},
						{
							"type": "comment",
							"text": "Move FusionInHandHolder so that picked fuses always follow the player"
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "FuseInHandHolder",
							"sid": 880723076584935,
							"parameters": {
								"object": "Player",
								"image-point-optional": "0"
							}
						}
					],
					"sid": 123278027569241
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 652018060416837
						}
					],
					"actions": [
						{
							"id": "set-vector-x",
							"objectClass": "Player",
							"sid": 791067456816068,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-x": "0"
							}
						},
						{
							"id": "set-vector-y",
							"objectClass": "Player",
							"sid": 152279822873091,
							"behaviorType": "8Direction",
							"parameters": {
								"vector-y": "0"
							}
						},
						{
							"type": "comment",
							"text": "Move FusionInHandHolder so that picked fuses always follow the player"
						},
						{
							"id": "set-position-to-another-object",
							"objectClass": "FuseInHandHolder",
							"sid": 959835060102009,
							"parameters": {
								"object": "Player",
								"image-point-optional": "0"
							}
						}
					],
					"sid": 581442241558886
				}
			],
			"sid": 695782946403557
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "HUD",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "canvasXRatio",
					"type": "number",
					"initialValue": "1",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 389511883476691
				},
				{
					"eventType": "variable",
					"name": "canvasYRatio",
					"type": "number",
					"initialValue": "1",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 181277351559520
				},
				{
					"eventType": "comment",
					"text": "Update canvas ratio to perform 3D Layer to Canvas calculations correctly"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 526141542134260
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 804462386129306,
							"parameters": {
								"variable": "canvasXRatio",
								"value": "PlatformInfo.CanvasCssWidth/OriginalViewportWidth"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 806301674870328,
							"parameters": {
								"variable": "canvasYRatio",
								"value": "PlatformInfo.CanvasCssHeight/OriginalViewportHeight"
							}
						}
					],
					"sid": 464419137654502
				},
				{
					"eventType": "comment",
					"text": "Add HUDBoxes & HUDNames and Move mask to the top of the layer"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 659142549768305
						}
					],
					"actions": [],
					"sid": 296494020679065,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 931933961129256,
									"parameters": {
										"object": "Props"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 526206238919325,
									"parameters": {
										"object-to-create": "HUDBox",
										"layer": "\"HUD\"",
										"x": "0",
										"y": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "HUDBox",
									"sid": 206796855470864,
									"parameters": {
										"instance-variable": "associatedUID",
										"value": "Props.UID"
									}
								},
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 744572359300766,
									"parameters": {
										"object-to-create": "HUDName",
										"layer": "\"HUD\"",
										"x": "HUDBox.BBoxLeft",
										"y": "HUDBox.BBoxTop",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"type": "comment",
									"text": "HUDName is child of HUDBox"
								},
								{
									"id": "add-child",
									"objectClass": "HUDBox",
									"sid": 153243610735577,
									"parameters": {
										"child": "HUDName",
										"transform-x": true,
										"transform-y": true,
										"transform-w": false,
										"transform-h": false,
										"transform-a": false,
										"transform-o": false,
										"transform-z-elevation": false,
										"transform-visibility": false,
										"destroy-with-parent": true
									}
								},
								{
									"id": "set-text",
									"objectClass": "HUDName",
									"sid": 497628071407153,
									"parameters": {
										"text": "Props.propName"
									}
								}
							],
							"sid": 317702601531271
						},
						{
							"eventType": "comment",
							"text": "HUDMask and HUDText should always be on top of everything"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "move-to-top",
									"objectClass": "HUDMask",
									"sid": 173730338686767
								},
								{
									"id": "move-to-top",
									"objectClass": "HUDText",
									"sid": 326434585299197
								}
							],
							"sid": 993690618177417
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Update HUDBoxes & HUDNames"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 765820502556129,
							"parameters": {
								"object": "HUDBox"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Props",
							"sid": 478359914305878,
							"parameters": {
								"unique-id": "HUDBox.associatedUID"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "HUDBox",
							"sid": 209536100511835,
							"parameters": {
								"child": "HUDName",
								"which": "own"
							}
						}
					],
					"actions": [],
					"sid": 496122920951819,
					"children": [
						{
							"eventType": "comment",
							"text": "If a prop is on-screen, position the HUDBox following the prop's position"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-screen",
									"objectClass": "Props",
									"sid": 457429844818639
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Set HUDBox position and size"
								},
								{
									"id": "set-position",
									"objectClass": "HUDBox",
									"sid": 908969154237310,
									"parameters": {
										"x": "3DCamera.LayerToCanvasX(0, Props.X, Props.Y, Props.ZElevation + Props.ZHeight/2)/canvasXRatio",
										"y": "3DCamera.LayerToCanvasY(0, Props.X, Props.Y, Props.ZElevation + Props.ZHeight/2)/canvasYRatio"
									}
								},
								{
									"id": "set-size",
									"objectClass": "HUDBox",
									"sid": 263538517486427,
									"parameters": {
										"width": "1/distance(Player.X, Player.Y, Props.X, Props.Y) * Props.HUDBoxSize",
										"height": "1/distance(Player.X, Player.Y, Props.X, Props.Y) * Props.HUDBoxSize"
									}
								},
								{
									"type": "comment",
									"text": "Set HUDName position and size"
								},
								{
									"id": "set-position",
									"objectClass": "HUDName",
									"sid": 766669953437706,
									"parameters": {
										"x": "HUDBox.BBoxLeft",
										"y": "HUDBox.BBoxTop"
									}
								},
								{
									"id": "set-size",
									"objectClass": "HUDName",
									"sid": 882570349081231,
									"parameters": {
										"width": "1/distance(Player.X, Player.Y, Props.X, Props.Y) * Props.HUDBoxSize",
										"height": "1/distance(Player.X, Player.Y, Props.X, Props.Y) * Props.HUDBoxSize"
									}
								},
								{
									"id": "set-scale",
									"objectClass": "HUDName",
									"sid": 479667709237282,
									"parameters": {
										"scale": "1/distance(Player.X, Player.Y, Props.X, Props.Y) * 96"
									}
								}
							],
							"sid": 301501524817681
						},
						{
							"eventType": "comment",
							"text": "If the prop is off-screen, move the HUDBox outside of the screen"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 668811816563723
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "HUDBox",
									"sid": 418100564060164,
									"parameters": {
										"x": "10000",
										"y": "10000"
									}
								}
							],
							"sid": 796564894163174
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Set opacity of HUDBox based on distance between the object and the player"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 114178574502241,
							"parameters": {
								"object": "HUDBox"
							}
						},
						{
							"id": "pick-by-unique-id",
							"objectClass": "Props",
							"sid": 667333228943257,
							"parameters": {
								"unique-id": "HUDBox.associatedUID"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "HUDBox",
							"sid": 709195677830978,
							"parameters": {
								"child": "HUDName",
								"which": "own"
							}
						},
						{
							"id": "pick-children",
							"objectClass": "HUDBox",
							"sid": 983605085386607,
							"parameters": {
								"child": "HUDName",
								"which": "own"
							}
						}
					],
					"actions": [
						{
							"id": "set-opacity",
							"objectClass": "HUDBox",
							"sid": 523844476686461,
							"parameters": {
								"opacity": "max(0, 100 - distance(Player.X, Player.Y, Props.X, Props.Y)/4)"
							}
						},
						{
							"id": "set-opacity",
							"objectClass": "HUDName",
							"sid": 162714605929096,
							"parameters": {
								"opacity": "max(0, 100 - distance(Player.X, Player.Y, Props.X, Props.Y)/4)"
							}
						}
					],
					"sid": 713366715306869
				}
			],
			"sid": 752400226927771
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Interactions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "tintValue",
					"type": "number",
					"initialValue": "0",
					"comment": "Intensity of the tint layer effect",
					"isStatic": false,
					"isConstant": false,
					"sid": 484692469371049
				},
				{
					"eventType": "comment",
					"text": "Interact with [E]"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 280544640363074,
							"parameters": {
								"key": 69
							}
						}
					],
					"actions": [],
					"sid": 337420323467660,
					"children": [
						{
							"eventType": "comment",
							"text": "Pickup fuses"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Player",
									"sid": 927990355037782,
									"parameters": {
										"object": "TextArea"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "TextArea",
									"sid": 366976726141479,
									"parameters": {
										"instance-variable": "id",
										"comparison": 2,
										"value": "3"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 490718266700904,
									"parameters": {
										"instance-variable": "holdingFuse"
									},
									"isInverted": true
								},
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 542082744303714,
									"parameters": {
										"object": "Fuse",
										"expression": "Fuse.id = TextArea.id"
									}
								},
								{
									"id": "pick-by-evaluate",
									"objectClass": "System",
									"sid": 944133072246317,
									"parameters": {
										"object": "HUDBox",
										"expression": "HUDBox.associatedUID = Fuse.UID"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Destroy Fuse, TextArea and HUDBox"
								},
								{
									"id": "destroy",
									"objectClass": "Fuse",
									"sid": 666763515511773
								},
								{
									"id": "destroy",
									"objectClass": "TextArea",
									"sid": 863836044479418
								},
								{
									"id": "destroy",
									"objectClass": "HUDBox",
									"sid": 771282755753062
								},
								{
									"type": "comment",
									"text": "Player is now holding a fuse"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 216687397618975,
									"parameters": {
										"instance-variable": "holdingFuse",
										"value": "true"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "FuseInHand",
									"sid": 842975600174823,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 365890943274322
						},
						{
							"eventType": "comment",
							"text": "Pickup and equip Mask, also open the door"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Player",
									"sid": 138442351719728,
									"parameters": {
										"object": "TextArea"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "TextArea",
									"sid": 418505140385442,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "3"
									}
								}
							],
							"actions": [
								{
									"id": "tween-one-property",
									"objectClass": "Door",
									"sid": 851224927141370,
									"behaviorType": "Tween",
									"parameters": {
										"tags": "\"doorUp\"",
										"property": "offsetZElevation",
										"end-value": "48",
										"time": "1",
										"ease": "easeinsine",
										"destroy-on-complete": "no",
										"loop": "no",
										"ping-pong": "no",
										"repeat-count": "1"
									}
								},
								{
									"id": "destroy",
									"objectClass": "TextArea",
									"sid": 572751957634956
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 766733151201581,
									"parameters": {
										"seconds": "0.1"
									}
								},
								{
									"callFunction": "toggleMask",
									"sid": 499786825940726
								}
							],
							"sid": 395121544607383
						},
						{
							"eventType": "comment",
							"text": "Interact with generator"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "Player",
									"sid": 411034683712575,
									"parameters": {
										"object": "TextArea"
									}
								},
								{
									"id": "is-boolean-instance-variable-set",
									"objectClass": "Player",
									"sid": 732913513649704,
									"parameters": {
										"instance-variable": "holdingFuse"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "TextArea",
									"sid": 103397281110514,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "4"
									}
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Put the fuse in the Generator (player should no longer be holding it)"
								},
								{
									"id": "set-boolean-instvar",
									"objectClass": "Player",
									"sid": 534536535944816,
									"parameters": {
										"instance-variable": "holdingFuse",
										"value": "false"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "FuseInHand",
									"sid": 208638059030131,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "add-to-instvar",
									"objectClass": "Generator",
									"sid": 300223377052494,
									"parameters": {
										"instance-variable": "fusesPlugged",
										"value": "1"
									}
								},
								{
									"type": "comment",
									"text": "Update the counter to reflect the current amount of fuses in the generator"
								},
								{
									"id": "set-text",
									"objectClass": "HUDCounter",
									"sid": 303333134023526,
									"parameters": {
										"text": "\"FUSES PLUGGED: \" & Generator.fusesPlugged"
									}
								}
							],
							"sid": 850790251401505,
							"children": [
								{
									"eventType": "comment",
									"text": "If 3 fuses are plugged, the task is completed"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "Generator",
											"sid": 930988668637953,
											"parameters": {
												"instance-variable": "fusesPlugged",
												"comparison": 0,
												"value": "3"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "Generator",
											"sid": 112071987711143,
											"parameters": {
												"instance-variable": "activated",
												"value": "true"
											}
										},
										{
											"id": "destroy",
											"objectClass": "TextArea",
											"sid": 458749324517196
										},
										{
											"id": "set-text",
											"objectClass": "HUDText",
											"sid": 505384740727528,
											"parameters": {
												"text": "\"Task completed!\""
											}
										}
									],
									"sid": 736698646225715
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Disable door's solid behavior when it is open"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tweens-finished",
							"objectClass": "Door",
							"sid": 501240909562567,
							"behaviorType": "Tween",
							"parameters": {
								"tags": "\"doorUp\""
							}
						}
					],
					"actions": [
						{
							"id": "set-enabled",
							"objectClass": "Door",
							"sid": 699888452711803,
							"behaviorType": "Solid",
							"parameters": {
								"state": "disabled"
							}
						}
					],
					"sid": 601353230874138
				},
				{
					"eventType": "comment",
					"text": "Update lighting condition"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Generator",
							"sid": 804714124098836,
							"parameters": {
								"instance-variable": "activated"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "If the generator is not active, one of the rooms should be dark, therefore the tint transition is needed"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 506271183372803,
							"parameters": {
								"variable": "tintValue",
								"value": "lerp(255, 0, min(max(Player.X, 402)/640, 1))"
							}
						}
					],
					"sid": 610498562134041,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-visible",
									"objectClass": "HUDMask",
									"sid": 890264503269783
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Green tint (Mask is on)"
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 847299571848331,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(0, tintValue, 0, 255)"
									}
								}
							],
							"sid": 881410762092963
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 721663992433724
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Full color tint (Mask is off)"
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 152303778646280,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(min(tintValue * 2.5, 255),min(tintValue * 2.5, 255), min(tintValue * 2.5, 255), 255)"
									}
								}
							],
							"sid": 271800261796212
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 522030790990161
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Otherwise, the rooms should be lit"
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 806754457015109,
							"parameters": {
								"variable": "tintValue",
								"value": "127"
							}
						}
					],
					"sid": 712739742839736,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-visible",
									"objectClass": "HUDMask",
									"sid": 551258859062601
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Green tint (Mask is on)"
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 166021751097619,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(0, tintValue, 0, 255)"
									}
								}
							],
							"sid": 387284666449990
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 924167891927085
								}
							],
							"actions": [
								{
									"type": "comment",
									"text": "Full color tint (Mask is off)"
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 543458465320099,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(min(tintValue * 2.5, 255),min(tintValue * 2.5, 255), min(tintValue * 2.5, 255), 255)"
									}
								}
							],
							"sid": 713236135979998
						}
					]
				},
				{
					"eventType": "comment",
					"text": "TextAreas display text when the player is over them"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-overlapping-another-object",
							"objectClass": "Player",
							"sid": 630409080535541,
							"parameters": {
								"object": "TextArea"
							}
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Generator",
							"sid": 356119186366337,
							"parameters": {
								"instance-variable": "activated"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 686616232532763,
					"children": [
						{
							"eventType": "comment",
							"text": "Special case for the generator. It displays different text if the player is or isn't holding a fuse"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "TextArea",
									"sid": 862505896609106,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "4"
									}
								}
							],
							"actions": [],
							"sid": 454186268790210,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "Player",
											"sid": 798706591756578,
											"parameters": {
												"instance-variable": "holdingFuse"
											}
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDText",
											"sid": 550859954676344,
											"parameters": {
												"text": "TextArea.text"
											}
										}
									],
									"sid": 272811936517478
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 171506279340097
										}
									],
									"actions": [
										{
											"id": "set-text",
											"objectClass": "HUDText",
											"sid": 225263213704649,
											"parameters": {
												"text": "\"Pick up fuses to turn the generator on.\" & newline & 3 - Generator.fusesPlugged & \" fuses remaining...\""
											}
										}
									],
									"sid": 665401977430725
								}
							]
						},
						{
							"eventType": "comment",
							"text": "General case"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 331818663554077
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "HUDText",
									"sid": 439226641639916,
									"parameters": {
										"text": "TextArea.text"
									}
								}
							],
							"sid": 294569851937615
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Erase the text if the player is outside the area"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 534108783178299
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Generator",
							"sid": 482186379949553,
							"parameters": {
								"instance-variable": "activated"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "HUDText",
							"sid": 411506135907663,
							"parameters": {
								"text": "\"\""
							}
						}
					],
					"sid": 185538906149124
				}
			],
			"sid": 912676591600282
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "NPC",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Make NPC always face the player, making it essentially a billboard"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 211889832137129
						}
					],
					"actions": [
						{
							"id": "set-angle-toward-position",
							"objectClass": "NPC",
							"sid": 881996579315490,
							"parameters": {
								"x": "Player.X",
								"y": "Player.Y"
							}
						}
					],
					"sid": 819328261833522
				}
			],
			"sid": 766905431909097
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Mask",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Toggle Mask function"
				},
				{
					"functionName": "toggleMask",
					"functionCopyPicked": false,
					"functionDescription": "Toggle Mask On/Off",
					"functionCategory": "Mask",
					"functionReturnType": "none",
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-z-elevation",
							"objectClass": "Door",
							"sid": 185411285438834,
							"parameters": {
								"which": "z-elevation",
								"comparison": 4,
								"z-elevation": "0"
							}
						}
					],
					"actions": [],
					"sid": 652364165722152,
					"children": [
						{
							"eventType": "comment",
							"text": "Disable the mask and HUD"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-visible",
									"objectClass": "HUDMask",
									"sid": 232436348542479
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "HUDMask",
									"sid": 782333390716539,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDCounter",
									"sid": 556358041338911,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 181460055701547,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(0, 127, 0, 255)"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDBox",
									"sid": 406120920159956,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDName",
									"sid": 748081987061936,
									"parameters": {
										"visibility": "invisible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDRandomNums",
									"sid": 249859483664196,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 551460551449535
						},
						{
							"eventType": "comment",
							"text": "Enable the mask and HUD"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 561473947584020
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "HUDMask",
									"sid": 312073591347043,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDCounter",
									"sid": 718797547389755,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-effect-parameter",
									"objectClass": "System",
									"sid": 132924712139653,
									"parameters": {
										"layer": "\"Game\"",
										"effect": "\"Tint\"",
										"parameter-index": "0",
										"value": "rgba255(255, 255, 255, 255)"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDBox",
									"sid": 348633309322767,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDName",
									"sid": 381910820608043,
									"parameters": {
										"visibility": "visible"
									}
								},
								{
									"id": "set-visible",
									"objectClass": "HUDRandomNums",
									"sid": 222502459459200,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 689889075292389
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Random number for HUDRandomNums"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-x-seconds",
							"objectClass": "System",
							"sid": 348205891177713,
							"parameters": {
								"interval-seconds": "0.1"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "HUDRandomNums",
							"sid": 778477827975861,
							"parameters": {
								"text": "zeropad(floor(random(10000000000)), 10)"
							}
						}
					],
					"sid": 345862014167091
				},
				{
					"eventType": "comment",
					"text": "Toggle with Space when the player has already completed the task"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-key-pressed",
							"objectClass": "Keyboard",
							"sid": 838640029084260,
							"parameters": {
								"key": 32
							}
						}
					],
					"actions": [
						{
							"callFunction": "toggleMask",
							"sid": 750834071358377
						}
					],
					"sid": 572999615059944
				}
			],
			"sid": 528729004538841
		}
	],
	"sid": 192595622944988
}